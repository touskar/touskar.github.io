(self["webpackChunkbiometrex"]=self["webpackChunkbiometrex"]||[]).push([[998],{9662:function(e,t,n){var r=n(614),o=n(6330),a=TypeError;e.exports=function(e){if(r(e))return e;throw a(o(e)+" is not a function")}},6077:function(e,t,n){var r=n(614),o=String,a=TypeError;e.exports=function(e){if("object"==typeof e||r(e))return e;throw a("Can't set "+o(e)+" as a prototype")}},1223:function(e,t,n){var r=n(5112),o=n(30),a=n(3070).f,i=r("unscopables"),s=Array.prototype;void 0==s[i]&&a(s,i,{configurable:!0,value:o(null)}),e.exports=function(e){s[i][e]=!0}},5787:function(e,t,n){var r=n(7976),o=TypeError;e.exports=function(e,t){if(r(t,e))return e;throw o("Incorrect invocation")}},9670:function(e,t,n){var r=n(111),o=String,a=TypeError;e.exports=function(e){if(r(e))return e;throw a(o(e)+" is not an object")}},4019:function(e){e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},260:function(e,t,n){"use strict";var r,o,a,i=n(4019),s=n(9781),u=n(7854),l=n(614),c=n(111),d=n(2597),p=n(648),f=n(6330),h=n(8880),v=n(8052),m=n(3070).f,g=n(7976),y=n(9518),b=n(7674),w=n(5112),x=n(9711),C=n(9909),_=C.enforce,k=C.get,S=u.Int8Array,E=S&&S.prototype,I=u.Uint8ClampedArray,A=I&&I.prototype,F=S&&y(S),D=E&&y(E),R=Object.prototype,T=u.TypeError,O=w("toStringTag"),P=x("TYPED_ARRAY_TAG"),B="TypedArrayConstructor",M=i&&!!b&&"Opera"!==p(u.opera),N=!1,L={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},V={BigInt64Array:8,BigUint64Array:8},j=function(e){if(!c(e))return!1;var t=p(e);return"DataView"===t||d(L,t)||d(V,t)},W=function(e){var t=y(e);if(c(t)){var n=k(t);return n&&d(n,B)?n[B]:W(t)}},H=function(e){if(!c(e))return!1;var t=p(e);return d(L,t)||d(V,t)},U=function(e){if(H(e))return e;throw T("Target is not a typed array")},z=function(e){if(l(e)&&(!b||g(F,e)))return e;throw T(f(e)+" is not a typed array constructor")},$=function(e,t,n,r){if(s){if(n)for(var o in L){var a=u[o];if(a&&d(a.prototype,e))try{delete a.prototype[e]}catch(i){try{a.prototype[e]=t}catch(l){}}}D[e]&&!n||v(D,e,n?t:M&&E[e]||t,r)}},q=function(e,t,n){var r,o;if(s){if(b){if(n)for(r in L)if(o=u[r],o&&d(o,e))try{delete o[e]}catch(a){}if(F[e]&&!n)return;try{return v(F,e,n?t:M&&F[e]||t)}catch(a){}}for(r in L)o=u[r],!o||o[e]&&!n||v(o,e,t)}};for(r in L)o=u[r],a=o&&o.prototype,a?_(a)[B]=o:M=!1;for(r in V)o=u[r],a=o&&o.prototype,a&&(_(a)[B]=o);if((!M||!l(F)||F===Function.prototype)&&(F=function(){throw T("Incorrect invocation")},M))for(r in L)u[r]&&b(u[r],F);if((!M||!D||D===R)&&(D=F.prototype,M))for(r in L)u[r]&&b(u[r].prototype,D);if(M&&y(A)!==D&&b(A,D),s&&!d(D,O))for(r in N=!0,m(D,O,{get:function(){return c(this)?this[P]:void 0}}),L)u[r]&&h(u[r],P,r);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:M,TYPED_ARRAY_TAG:N&&P,aTypedArray:U,aTypedArrayConstructor:z,exportTypedArrayMethod:$,exportTypedArrayStaticMethod:q,getTypedArrayConstructor:W,isView:j,isTypedArray:H,TypedArray:F,TypedArrayPrototype:D}},1318:function(e,t,n){var r=n(5656),o=n(1400),a=n(6244),i=function(e){return function(t,n,i){var s,u=r(t),l=a(u),c=o(i,l);if(e&&n!=n){while(l>c)if(s=u[c++],s!=s)return!0}else for(;l>c;c++)if((e||c in u)&&u[c]===n)return e||c||0;return!e&&-1}};e.exports={includes:i(!0),indexOf:i(!1)}},9671:function(e,t,n){var r=n(9974),o=n(8361),a=n(7908),i=n(6244),s=function(e){var t=1==e;return function(n,s,u){var l,c,d=a(n),p=o(d),f=r(s,u),h=i(p);while(h-- >0)if(l=p[h],c=f(l,h,d),c)switch(e){case 0:return l;case 1:return h}return t?-1:void 0}};e.exports={findLast:s(0),findLastIndex:s(1)}},206:function(e,t,n){var r=n(1702);e.exports=r([].slice)},4326:function(e,t,n){var r=n(1702),o=r({}.toString),a=r("".slice);e.exports=function(e){return a(o(e),8,-1)}},648:function(e,t,n){var r=n(1694),o=n(614),a=n(4326),i=n(5112),s=i("toStringTag"),u=Object,l="Arguments"==a(function(){return arguments}()),c=function(e,t){try{return e[t]}catch(n){}};e.exports=r?a:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=c(t=u(e),s))?n:l?a(t):"Object"==(r=a(t))&&o(t.callee)?"Arguments":r}},7741:function(e,t,n){var r=n(1702),o=Error,a=r("".replace),i=function(e){return String(o(e).stack)}("zxcasd"),s=/\n\s*at [^:]*:[^\n]*/,u=s.test(i);e.exports=function(e,t){if(u&&"string"==typeof e&&!o.prepareStackTrace)while(t--)e=a(e,s,"");return e}},9920:function(e,t,n){var r=n(2597),o=n(3887),a=n(1236),i=n(3070);e.exports=function(e,t,n){for(var s=o(t),u=i.f,l=a.f,c=0;c<s.length;c++){var d=s[c];r(e,d)||n&&r(n,d)||u(e,d,l(t,d))}}},8544:function(e,t,n){var r=n(7293);e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},8880:function(e,t,n){var r=n(9781),o=n(3070),a=n(9114);e.exports=r?function(e,t,n){return o.f(e,t,a(1,n))}:function(e,t,n){return e[t]=n,e}},9114:function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},7045:function(e,t,n){var r=n(6339),o=n(3070);e.exports=function(e,t,n){return n.get&&r(n.get,t,{getter:!0}),n.set&&r(n.set,t,{setter:!0}),o.f(e,t,n)}},8052:function(e,t,n){var r=n(614),o=n(3070),a=n(6339),i=n(3072);e.exports=function(e,t,n,s){s||(s={});var u=s.enumerable,l=void 0!==s.name?s.name:t;if(r(n)&&a(n,l,s),s.global)u?e[t]=n:i(t,n);else{try{s.unsafe?e[t]&&(u=!0):delete e[t]}catch(c){}u?e[t]=n:o.f(e,t,{value:n,enumerable:!1,configurable:!s.nonConfigurable,writable:!s.nonWritable})}return e}},3072:function(e,t,n){var r=n(7854),o=Object.defineProperty;e.exports=function(e,t){try{o(r,e,{value:t,configurable:!0,writable:!0})}catch(n){r[e]=t}return t}},9781:function(e,t,n){var r=n(7293);e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},317:function(e,t,n){var r=n(7854),o=n(111),a=r.document,i=o(a)&&o(a.createElement);e.exports=function(e){return i?a.createElement(e):{}}},3678:function(e){e.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},6833:function(e,t,n){var r=n(8113);e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(r)},5268:function(e,t,n){var r=n(4326),o=n(7854);e.exports="process"==r(o.process)},8113:function(e,t,n){var r=n(5005);e.exports=r("navigator","userAgent")||""},7392:function(e,t,n){var r,o,a=n(7854),i=n(8113),s=a.process,u=a.Deno,l=s&&s.versions||u&&u.version,c=l&&l.v8;c&&(r=c.split("."),o=r[0]>0&&r[0]<4?1:+(r[0]+r[1])),!o&&i&&(r=i.match(/Edge\/(\d+)/),(!r||r[1]>=74)&&(r=i.match(/Chrome\/(\d+)/),r&&(o=+r[1]))),e.exports=o},748:function(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2914:function(e,t,n){var r=n(7293),o=n(9114);e.exports=!r((function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",o(1,7)),7!==e.stack)}))},2109:function(e,t,n){var r=n(7854),o=n(1236).f,a=n(8880),i=n(8052),s=n(3072),u=n(9920),l=n(4705);e.exports=function(e,t){var n,c,d,p,f,h,v=e.target,m=e.global,g=e.stat;if(c=m?r:g?r[v]||s(v,{}):(r[v]||{}).prototype,c)for(d in t){if(f=t[d],e.dontCallGetSet?(h=o(c,d),p=h&&h.value):p=c[d],n=l(m?d:v+(g?".":"#")+d,e.forced),!n&&void 0!==p){if(typeof f==typeof p)continue;u(f,p)}(e.sham||p&&p.sham)&&a(f,"sham",!0),i(c,d,f,e)}}},7293:function(e){e.exports=function(e){try{return!!e()}catch(t){return!0}}},2104:function(e,t,n){var r=n(4374),o=Function.prototype,a=o.apply,i=o.call;e.exports="object"==typeof Reflect&&Reflect.apply||(r?i.bind(a):function(){return i.apply(a,arguments)})},9974:function(e,t,n){var r=n(1702),o=n(9662),a=n(4374),i=r(r.bind);e.exports=function(e,t){return o(e),void 0===t?e:a?i(e,t):function(){return e.apply(t,arguments)}}},4374:function(e,t,n){var r=n(7293);e.exports=!r((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},6916:function(e,t,n){var r=n(4374),o=Function.prototype.call;e.exports=r?o.bind(o):function(){return o.apply(o,arguments)}},6530:function(e,t,n){var r=n(9781),o=n(2597),a=Function.prototype,i=r&&Object.getOwnPropertyDescriptor,s=o(a,"name"),u=s&&"something"===function(){}.name,l=s&&(!r||r&&i(a,"name").configurable);e.exports={EXISTS:s,PROPER:u,CONFIGURABLE:l}},1702:function(e,t,n){var r=n(4374),o=Function.prototype,a=o.bind,i=o.call,s=r&&a.bind(i,i);e.exports=r?function(e){return e&&s(e)}:function(e){return e&&function(){return i.apply(e,arguments)}}},5005:function(e,t,n){var r=n(7854),o=n(614),a=function(e){return o(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?a(r[e]):r[e]&&r[e][t]}},8173:function(e,t,n){var r=n(9662);e.exports=function(e,t){var n=e[t];return null==n?void 0:r(n)}},7854:function(e,t,n){var r=function(e){return e&&e.Math==Math&&e};e.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||function(){return this}()||Function("return this")()},2597:function(e,t,n){var r=n(1702),o=n(7908),a=r({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return a(o(e),t)}},3501:function(e){e.exports={}},490:function(e,t,n){var r=n(5005);e.exports=r("document","documentElement")},4664:function(e,t,n){var r=n(9781),o=n(7293),a=n(317);e.exports=!r&&!o((function(){return 7!=Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a}))},8361:function(e,t,n){var r=n(1702),o=n(7293),a=n(4326),i=Object,s=r("".split);e.exports=o((function(){return!i("z").propertyIsEnumerable(0)}))?function(e){return"String"==a(e)?s(e,""):i(e)}:i},9587:function(e,t,n){var r=n(614),o=n(111),a=n(7674);e.exports=function(e,t,n){var i,s;return a&&r(i=t.constructor)&&i!==n&&o(s=i.prototype)&&s!==n.prototype&&a(e,s),e}},2788:function(e,t,n){var r=n(1702),o=n(614),a=n(5465),i=r(Function.toString);o(a.inspectSource)||(a.inspectSource=function(e){return i(e)}),e.exports=a.inspectSource},8340:function(e,t,n){var r=n(111),o=n(8880);e.exports=function(e,t){r(t)&&"cause"in t&&o(e,"cause",t.cause)}},9909:function(e,t,n){var r,o,a,i=n(8536),s=n(7854),u=n(1702),l=n(111),c=n(8880),d=n(2597),p=n(5465),f=n(6200),h=n(3501),v="Object already initialized",m=s.TypeError,g=s.WeakMap,y=function(e){return a(e)?o(e):r(e,{})},b=function(e){return function(t){var n;if(!l(t)||(n=o(t)).type!==e)throw m("Incompatible receiver, "+e+" required");return n}};if(i||p.state){var w=p.state||(p.state=new g),x=u(w.get),C=u(w.has),_=u(w.set);r=function(e,t){if(C(w,e))throw new m(v);return t.facade=e,_(w,e,t),t},o=function(e){return x(w,e)||{}},a=function(e){return C(w,e)}}else{var k=f("state");h[k]=!0,r=function(e,t){if(d(e,k))throw new m(v);return t.facade=e,c(e,k,t),t},o=function(e){return d(e,k)?e[k]:{}},a=function(e){return d(e,k)}}e.exports={set:r,get:o,has:a,enforce:y,getterFor:b}},614:function(e){e.exports=function(e){return"function"==typeof e}},4705:function(e,t,n){var r=n(7293),o=n(614),a=/#|\.prototype\./,i=function(e,t){var n=u[s(e)];return n==c||n!=l&&(o(t)?r(t):!!t)},s=i.normalize=function(e){return String(e).replace(a,".").toLowerCase()},u=i.data={},l=i.NATIVE="N",c=i.POLYFILL="P";e.exports=i},111:function(e,t,n){var r=n(614);e.exports=function(e){return"object"==typeof e?null!==e:r(e)}},1913:function(e){e.exports=!1},2190:function(e,t,n){var r=n(5005),o=n(614),a=n(7976),i=n(3307),s=Object;e.exports=i?function(e){return"symbol"==typeof e}:function(e){var t=r("Symbol");return o(t)&&a(t.prototype,s(e))}},6244:function(e,t,n){var r=n(7466);e.exports=function(e){return r(e.length)}},6339:function(e,t,n){var r=n(7293),o=n(614),a=n(2597),i=n(9781),s=n(6530).CONFIGURABLE,u=n(2788),l=n(9909),c=l.enforce,d=l.get,p=Object.defineProperty,f=i&&!r((function(){return 8!==p((function(){}),"length",{value:8}).length})),h=String(String).split("String"),v=e.exports=function(e,t,n){"Symbol("===String(t).slice(0,7)&&(t="["+String(t).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!a(e,"name")||s&&e.name!==t)&&(i?p(e,"name",{value:t,configurable:!0}):e.name=t),f&&n&&a(n,"arity")&&e.length!==n.arity&&p(e,"length",{value:n.arity});try{n&&a(n,"constructor")&&n.constructor?i&&p(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(o){}var r=c(e);return a(r,"source")||(r.source=h.join("string"==typeof t?t:"")),e};Function.prototype.toString=v((function(){return o(this)&&d(this).source||u(this)}),"toString")},4758:function(e){var t=Math.ceil,n=Math.floor;e.exports=Math.trunc||function(e){var r=+e;return(r>0?n:t)(r)}},133:function(e,t,n){var r=n(7392),o=n(7293);e.exports=!!Object.getOwnPropertySymbols&&!o((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},8536:function(e,t,n){var r=n(7854),o=n(614),a=n(2788),i=r.WeakMap;e.exports=o(i)&&/native code/.test(a(i))},6277:function(e,t,n){var r=n(1340);e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:r(e)}},30:function(e,t,n){var r,o=n(9670),a=n(6048),i=n(748),s=n(3501),u=n(490),l=n(317),c=n(6200),d=">",p="<",f="prototype",h="script",v=c("IE_PROTO"),m=function(){},g=function(e){return p+h+d+e+p+"/"+h+d},y=function(e){e.write(g("")),e.close();var t=e.parentWindow.Object;return e=null,t},b=function(){var e,t=l("iframe"),n="java"+h+":";return t.style.display="none",u.appendChild(t),t.src=String(n),e=t.contentWindow.document,e.open(),e.write(g("document.F=Object")),e.close(),e.F},w=function(){try{r=new ActiveXObject("htmlfile")}catch(t){}w="undefined"!=typeof document?document.domain&&r?y(r):b():y(r);var e=i.length;while(e--)delete w[f][i[e]];return w()};s[v]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(m[f]=o(e),n=new m,m[f]=null,n[v]=e):n=w(),void 0===t?n:a.f(n,t)}},6048:function(e,t,n){var r=n(9781),o=n(3353),a=n(3070),i=n(9670),s=n(5656),u=n(1956);t.f=r&&!o?Object.defineProperties:function(e,t){i(e);var n,r=s(t),o=u(t),l=o.length,c=0;while(l>c)a.f(e,n=o[c++],r[n]);return e}},3070:function(e,t,n){var r=n(9781),o=n(4664),a=n(3353),i=n(9670),s=n(4948),u=TypeError,l=Object.defineProperty,c=Object.getOwnPropertyDescriptor,d="enumerable",p="configurable",f="writable";t.f=r?a?function(e,t,n){if(i(e),t=s(t),i(n),"function"===typeof e&&"prototype"===t&&"value"in n&&f in n&&!n[f]){var r=c(e,t);r&&r[f]&&(e[t]=n.value,n={configurable:p in n?n[p]:r[p],enumerable:d in n?n[d]:r[d],writable:!1})}return l(e,t,n)}:l:function(e,t,n){if(i(e),t=s(t),i(n),o)try{return l(e,t,n)}catch(r){}if("get"in n||"set"in n)throw u("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},1236:function(e,t,n){var r=n(9781),o=n(6916),a=n(5296),i=n(9114),s=n(5656),u=n(4948),l=n(2597),c=n(4664),d=Object.getOwnPropertyDescriptor;t.f=r?d:function(e,t){if(e=s(e),t=u(t),c)try{return d(e,t)}catch(n){}if(l(e,t))return i(!o(a.f,e,t),e[t])}},8006:function(e,t,n){var r=n(6324),o=n(748),a=o.concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,a)}},5181:function(e,t){t.f=Object.getOwnPropertySymbols},9518:function(e,t,n){var r=n(2597),o=n(614),a=n(7908),i=n(6200),s=n(8544),u=i("IE_PROTO"),l=Object,c=l.prototype;e.exports=s?l.getPrototypeOf:function(e){var t=a(e);if(r(t,u))return t[u];var n=t.constructor;return o(n)&&t instanceof n?n.prototype:t instanceof l?c:null}},7976:function(e,t,n){var r=n(1702);e.exports=r({}.isPrototypeOf)},6324:function(e,t,n){var r=n(1702),o=n(2597),a=n(5656),i=n(1318).indexOf,s=n(3501),u=r([].push);e.exports=function(e,t){var n,r=a(e),l=0,c=[];for(n in r)!o(s,n)&&o(r,n)&&u(c,n);while(t.length>l)o(r,n=t[l++])&&(~i(c,n)||u(c,n));return c}},1956:function(e,t,n){var r=n(6324),o=n(748);e.exports=Object.keys||function(e){return r(e,o)}},5296:function(e,t){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,o=r&&!n.call({1:2},1);t.f=o?function(e){var t=r(this,e);return!!t&&t.enumerable}:n},7674:function(e,t,n){var r=n(1702),o=n(9670),a=n(6077);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{e=r(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),e(n,[]),t=n instanceof Array}catch(i){}return function(n,r){return o(n),a(r),t?e(n,r):n.__proto__=r,n}}():void 0)},2140:function(e,t,n){var r=n(6916),o=n(614),a=n(111),i=TypeError;e.exports=function(e,t){var n,s;if("string"===t&&o(n=e.toString)&&!a(s=r(n,e)))return s;if(o(n=e.valueOf)&&!a(s=r(n,e)))return s;if("string"!==t&&o(n=e.toString)&&!a(s=r(n,e)))return s;throw i("Can't convert object to primitive value")}},3887:function(e,t,n){var r=n(5005),o=n(1702),a=n(8006),i=n(5181),s=n(9670),u=o([].concat);e.exports=r("Reflect","ownKeys")||function(e){var t=a.f(s(e)),n=i.f;return n?u(t,n(e)):t}},2626:function(e,t,n){var r=n(3070).f;e.exports=function(e,t,n){n in e||r(e,n,{configurable:!0,get:function(){return t[n]},set:function(e){t[n]=e}})}},7066:function(e,t,n){"use strict";var r=n(9670);e.exports=function(){var e=r(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},4488:function(e){var t=TypeError;e.exports=function(e){if(void 0==e)throw t("Can't call method on "+e);return e}},6200:function(e,t,n){var r=n(2309),o=n(9711),a=r("keys");e.exports=function(e){return a[e]||(a[e]=o(e))}},5465:function(e,t,n){var r=n(7854),o=n(3072),a="__core-js_shared__",i=r[a]||o(a,{});e.exports=i},2309:function(e,t,n){var r=n(1913),o=n(5465);(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.23.3",mode:r?"pure":"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.23.3/LICENSE",source:"https://github.com/zloirock/core-js"})},261:function(e,t,n){var r,o,a,i,s=n(7854),u=n(2104),l=n(9974),c=n(614),d=n(2597),p=n(7293),f=n(490),h=n(206),v=n(317),m=n(8053),g=n(6833),y=n(5268),b=s.setImmediate,w=s.clearImmediate,x=s.process,C=s.Dispatch,_=s.Function,k=s.MessageChannel,S=s.String,E=0,I={},A="onreadystatechange";try{r=s.location}catch(O){}var F=function(e){if(d(I,e)){var t=I[e];delete I[e],t()}},D=function(e){return function(){F(e)}},R=function(e){F(e.data)},T=function(e){s.postMessage(S(e),r.protocol+"//"+r.host)};b&&w||(b=function(e){m(arguments.length,1);var t=c(e)?e:_(e),n=h(arguments,1);return I[++E]=function(){u(t,void 0,n)},o(E),E},w=function(e){delete I[e]},y?o=function(e){x.nextTick(D(e))}:C&&C.now?o=function(e){C.now(D(e))}:k&&!g?(a=new k,i=a.port2,a.port1.onmessage=R,o=l(i.postMessage,i)):s.addEventListener&&c(s.postMessage)&&!s.importScripts&&r&&"file:"!==r.protocol&&!p(T)?(o=T,s.addEventListener("message",R,!1)):o=A in v("script")?function(e){f.appendChild(v("script"))[A]=function(){f.removeChild(this),F(e)}}:function(e){setTimeout(D(e),0)}),e.exports={set:b,clear:w}},1400:function(e,t,n){var r=n(9303),o=Math.max,a=Math.min;e.exports=function(e,t){var n=r(e);return n<0?o(n+t,0):a(n,t)}},5656:function(e,t,n){var r=n(8361),o=n(4488);e.exports=function(e){return r(o(e))}},9303:function(e,t,n){var r=n(4758);e.exports=function(e){var t=+e;return t!==t||0===t?0:r(t)}},7466:function(e,t,n){var r=n(9303),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},7908:function(e,t,n){var r=n(4488),o=Object;e.exports=function(e){return o(r(e))}},4590:function(e,t,n){var r=n(3002),o=RangeError;e.exports=function(e,t){var n=r(e);if(n%t)throw o("Wrong offset");return n}},3002:function(e,t,n){var r=n(9303),o=RangeError;e.exports=function(e){var t=r(e);if(t<0)throw o("The argument can't be less than 0");return t}},7593:function(e,t,n){var r=n(6916),o=n(111),a=n(2190),i=n(8173),s=n(2140),u=n(5112),l=TypeError,c=u("toPrimitive");e.exports=function(e,t){if(!o(e)||a(e))return e;var n,u=i(e,c);if(u){if(void 0===t&&(t="default"),n=r(u,e,t),!o(n)||a(n))return n;throw l("Can't convert object to primitive value")}return void 0===t&&(t="number"),s(e,t)}},4948:function(e,t,n){var r=n(7593),o=n(2190);e.exports=function(e){var t=r(e,"string");return o(t)?t:t+""}},1694:function(e,t,n){var r=n(5112),o=r("toStringTag"),a={};a[o]="z",e.exports="[object z]"===String(a)},1340:function(e,t,n){var r=n(648),o=String;e.exports=function(e){if("Symbol"===r(e))throw TypeError("Cannot convert a Symbol value to a string");return o(e)}},6330:function(e){var t=String;e.exports=function(e){try{return t(e)}catch(n){return"Object"}}},9711:function(e,t,n){var r=n(1702),o=0,a=Math.random(),i=r(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+i(++o+a,36)}},3307:function(e,t,n){var r=n(133);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:function(e,t,n){var r=n(9781),o=n(7293);e.exports=r&&o((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},8053:function(e){var t=TypeError;e.exports=function(e,n){if(e<n)throw t("Not enough arguments");return e}},5112:function(e,t,n){var r=n(7854),o=n(2309),a=n(2597),i=n(9711),s=n(133),u=n(3307),l=o("wks"),c=r.Symbol,d=c&&c["for"],p=u?c:c&&c.withoutSetter||i;e.exports=function(e){if(!a(l,e)||!s&&"string"!=typeof l[e]){var t="Symbol."+e;s&&a(c,e)?l[e]=c[e]:l[e]=u&&d?d(t):p(t)}return l[e]}},9191:function(e,t,n){"use strict";var r=n(5005),o=n(2597),a=n(8880),i=n(7976),s=n(7674),u=n(9920),l=n(2626),c=n(9587),d=n(6277),p=n(8340),f=n(7741),h=n(2914),v=n(9781),m=n(1913);e.exports=function(e,t,n,g){var y="stackTraceLimit",b=g?2:1,w=e.split("."),x=w[w.length-1],C=r.apply(null,w);if(C){var _=C.prototype;if(!m&&o(_,"cause")&&delete _.cause,!n)return C;var k=r("Error"),S=t((function(e,t){var n=d(g?t:e,void 0),r=g?new C(e):new C;return void 0!==n&&a(r,"message",n),h&&a(r,"stack",f(r.stack,2)),this&&i(_,this)&&c(r,this,S),arguments.length>b&&p(r,arguments[b]),r}));if(S.prototype=_,"Error"!==x?s?s(S,k):u(S,k,{name:!0}):v&&y in C&&(l(S,C,y),l(S,C,"prepareStackTrace")),u(S,C),!m)try{_.name!==x&&a(_,"name",x),_.constructor=S}catch(E){}return S}}},2120:function(e,t,n){var r=n(2109),o=n(5005),a=n(2104),i=n(7293),s=n(9191),u="AggregateError",l=o(u),c=!i((function(){return 1!==l([1]).errors[0]}))&&i((function(){return 7!==l([1],u,{cause:7}).cause}));r({global:!0,constructor:!0,arity:2,forced:c},{AggregateError:s(u,(function(e){return function(t,n){return a(e,this,arguments)}}),c,!0)})},2262:function(e,t,n){"use strict";var r=n(2109),o=n(7908),a=n(6244),i=n(9303),s=n(1223);r({target:"Array",proto:!0},{at:function(e){var t=o(this),n=a(t),r=i(e),s=r>=0?r:n+r;return s<0||s>=n?void 0:t[s]}}),s("at")},6699:function(e,t,n){"use strict";var r=n(2109),o=n(1318).includes,a=n(7293),i=n(1223),s=a((function(){return!Array(1).includes()}));r({target:"Array",proto:!0,forced:s},{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),i("includes")},1703:function(e,t,n){var r=n(2109),o=n(7854),a=n(2104),i=n(9191),s="WebAssembly",u=o[s],l=7!==Error("e",{cause:7}).cause,c=function(e,t){var n={};n[e]=i(e,t,l),r({global:!0,constructor:!0,arity:1,forced:l},n)},d=function(e,t){if(u&&u[e]){var n={};n[e]=i(s+"."+e,t,l),r({target:s,stat:!0,constructor:!0,arity:1,forced:l},n)}};c("Error",(function(e){return function(t){return a(e,this,arguments)}})),c("EvalError",(function(e){return function(t){return a(e,this,arguments)}})),c("RangeError",(function(e){return function(t){return a(e,this,arguments)}})),c("ReferenceError",(function(e){return function(t){return a(e,this,arguments)}})),c("SyntaxError",(function(e){return function(t){return a(e,this,arguments)}})),c("TypeError",(function(e){return function(t){return a(e,this,arguments)}})),c("URIError",(function(e){return function(t){return a(e,this,arguments)}})),d("CompileError",(function(e){return function(t){return a(e,this,arguments)}})),d("LinkError",(function(e){return function(t){return a(e,this,arguments)}})),d("RuntimeError",(function(e){return function(t){return a(e,this,arguments)}}))},2087:function(e,t,n){var r=n(7854),o=n(9781),a=n(7045),i=n(7066),s=n(7293),u=r.RegExp,l=u.prototype,c=o&&s((function(){var e=!0;try{u(".","d")}catch(c){e=!1}var t={},n="",r=e?"dgimsy":"gimsy",o=function(e,r){Object.defineProperty(t,e,{get:function(){return n+=r,!0}})},a={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};for(var i in e&&(a.hasIndices="d"),a)o(i,a[i]);var s=Object.getOwnPropertyDescriptor(l,"flags").get.call(t);return s!==r||n!==r}));c&&a(l,"flags",{configurable:!0,get:i})},4506:function(e,t,n){"use strict";var r=n(2109),o=n(1702),a=n(4488),i=n(9303),s=n(1340),u=n(7293),l=o("".charAt),c=u((function(){return"\ud842"!=="𠮷".at(-2)}));r({target:"String",proto:!0,forced:c},{at:function(e){var t=s(a(this)),n=t.length,r=i(e),o=r>=0?r:n+r;return o<0||o>=n?void 0:l(t,o)}})},8675:function(e,t,n){"use strict";var r=n(260),o=n(6244),a=n(9303),i=r.aTypedArray,s=r.exportTypedArrayMethod;s("at",(function(e){var t=i(this),n=o(t),r=a(e),s=r>=0?r:n+r;return s<0||s>=n?void 0:t[s]}))},2958:function(e,t,n){"use strict";var r=n(260),o=n(9671).findLastIndex,a=r.aTypedArray,i=r.exportTypedArrayMethod;i("findLastIndex",(function(e){return o(a(this),e,arguments.length>1?arguments[1]:void 0)}))},3408:function(e,t,n){"use strict";var r=n(260),o=n(9671).findLast,a=r.aTypedArray,i=r.exportTypedArrayMethod;i("findLast",(function(e){return o(a(this),e,arguments.length>1?arguments[1]:void 0)}))},3462:function(e,t,n){"use strict";var r=n(7854),o=n(6916),a=n(260),i=n(6244),s=n(4590),u=n(7908),l=n(7293),c=r.RangeError,d=r.Int8Array,p=d&&d.prototype,f=p&&p.set,h=a.aTypedArray,v=a.exportTypedArrayMethod,m=!l((function(){var e=new Uint8ClampedArray(2);return o(f,e,{length:1,0:3},1),3!==e[1]})),g=m&&a.NATIVE_ARRAY_BUFFER_VIEWS&&l((function(){var e=new d(2);return e.set(1),e.set("2",1),0!==e[0]||2!==e[1]}));v("set",(function(e){h(this);var t=s(arguments.length>1?arguments[1]:void 0,1),n=u(e);if(m)return o(f,this,n,t);var r=this.length,a=i(n),l=0;if(a+t>r)throw c("Wrong length");while(l<a)this[t+l]=n[l++]}),!m||g)},1118:function(e,t,n){n(2958)},7380:function(e,t,n){n(3408)},1091:function(e,t,n){var r=n(2109),o=n(7854),a=n(261).clear;r({global:!0,bind:!0,enumerable:!0,forced:o.clearImmediate!==a},{clearImmediate:a})},2801:function(e,t,n){"use strict";var r=n(2109),o=n(5005),a=n(9114),i=n(3070).f,s=n(2597),u=n(5787),l=n(9587),c=n(6277),d=n(3678),p=n(7741),f=n(1913),h="DOMException",v=o("Error"),m=o(h),g=function(){u(this,y);var e=arguments.length,t=c(e<1?void 0:arguments[0]),n=c(e<2?void 0:arguments[1],"Error"),r=new m(t,n),o=v(t);return o.name=h,i(r,"stack",a(1,p(o.stack,1))),l(r,this,g),r},y=g.prototype=m.prototype,b="stack"in v(h),w="stack"in new m(1,2),x=b&&!w;r({global:!0,constructor:!0,forced:f||x},{DOMException:x?g:m});var C=o(h),_=C.prototype;if(_.constructor!==C)for(var k in f||i(_,"constructor",a(1,C)),d)if(s(d,k)){var S=d[k],E=S.s;s(C,E)||i(C,E,a(6,S.c))}},4633:function(e,t,n){n(1091),n(2986)},2986:function(e,t,n){var r=n(2109),o=n(7854),a=n(261).set;r({global:!0,bind:!0,enumerable:!0,forced:o.setImmediate!==a},{setImmediate:a})},2095:function(){},4870:function(e,t,n){"use strict";n.d(t,{BK:function(){return qe},Bj:function(){return a},Fl:function(){return Ye},IU:function(){return Te},Jd:function(){return _},PG:function(){return Ae},SU:function(){return Ue},Um:function(){return ke},Vh:function(){return Ke},WL:function(){return $e},X$:function(){return I},X3:function(){return Re},XI:function(){return je},Xl:function(){return Oe},YS:function(){return Ee},dq:function(){return Le},iH:function(){return Ve},j:function(){return S},lk:function(){return k},qj:function(){return _e},qq:function(){return b},yT:function(){return De}});var r=n(7139);let o;class a{constructor(e=!1){this.active=!0,this.effects=[],this.cleanups=[],!e&&o&&(this.parent=o,this.index=(o.scopes||(o.scopes=[])).push(this)-1)}run(e){if(this.active){const t=o;try{return o=this,e()}finally{o=t}}else 0}on(){o=this}off(){o=this.parent}stop(e){if(this.active){let t,n;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);if(this.parent&&!e){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.active=!1}}}function i(e,t=o){t&&t.active&&t.effects.push(e)}const s=e=>{const t=new Set(e);return t.w=0,t.n=0,t},u=e=>(e.w&h)>0,l=e=>(e.n&h)>0,c=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=h},d=e=>{const{deps:t}=e;if(t.length){let n=0;for(let r=0;r<t.length;r++){const o=t[r];u(o)&&!l(o)?o.delete(e):t[n++]=o,o.w&=~h,o.n&=~h}t.length=n}},p=new WeakMap;let f=0,h=1;const v=30;let m;const g=Symbol(""),y=Symbol("");class b{constructor(e,t=null,n){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,i(this,n)}run(){if(!this.active)return this.fn();let e=m,t=x;while(e){if(e===this)return;e=e.parent}try{return this.parent=m,m=this,x=!0,h=1<<++f,f<=v?c(this):w(this),this.fn()}finally{f<=v&&d(this),h=1<<--f,m=this.parent,x=t,this.parent=void 0,this.deferStop&&this.stop()}}stop(){m===this?this.deferStop=!0:this.active&&(w(this),this.onStop&&this.onStop(),this.active=!1)}}function w(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let x=!0;const C=[];function _(){C.push(x),x=!1}function k(){const e=C.pop();x=void 0===e||e}function S(e,t,n){if(x&&m){let t=p.get(e);t||p.set(e,t=new Map);let r=t.get(n);r||t.set(n,r=s());const o=void 0;E(r,o)}}function E(e,t){let n=!1;f<=v?l(e)||(e.n|=h,n=!u(e)):n=!e.has(m),n&&(e.add(m),m.deps.push(e))}function I(e,t,n,o,a,i){const u=p.get(e);if(!u)return;let l=[];if("clear"===t)l=[...u.values()];else if("length"===n&&(0,r.kJ)(e))u.forEach(((e,t)=>{("length"===t||t>=o)&&l.push(e)}));else switch(void 0!==n&&l.push(u.get(n)),t){case"add":(0,r.kJ)(e)?(0,r.S0)(n)&&l.push(u.get("length")):(l.push(u.get(g)),(0,r._N)(e)&&l.push(u.get(y)));break;case"delete":(0,r.kJ)(e)||(l.push(u.get(g)),(0,r._N)(e)&&l.push(u.get(y)));break;case"set":(0,r._N)(e)&&l.push(u.get(g));break}if(1===l.length)l[0]&&A(l[0]);else{const e=[];for(const t of l)t&&e.push(...t);A(s(e))}}function A(e,t){const n=(0,r.kJ)(e)?e:[...e];for(const r of n)r.computed&&F(r,t);for(const r of n)r.computed||F(r,t)}function F(e,t){(e!==m||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const D=(0,r.fY)("__proto__,__v_isRef,__isVue"),R=new Set(Object.getOwnPropertyNames(Symbol).filter((e=>"arguments"!==e&&"caller"!==e)).map((e=>Symbol[e])).filter(r.yk)),T=L(),O=L(!1,!0),P=L(!0),B=L(!0,!0),M=N();function N(){const e={};return["includes","indexOf","lastIndexOf"].forEach((t=>{e[t]=function(...e){const n=Te(this);for(let t=0,o=this.length;t<o;t++)S(n,"get",t+"");const r=n[t](...e);return-1===r||!1===r?n[t](...e.map(Te)):r}})),["push","pop","shift","unshift","splice"].forEach((t=>{e[t]=function(...e){_();const n=Te(this)[t].apply(this,e);return k(),n}})),e}function L(e=!1,t=!1){return function(n,o,a){if("__v_isReactive"===o)return!e;if("__v_isReadonly"===o)return e;if("__v_isShallow"===o)return t;if("__v_raw"===o&&a===(e?t?we:be:t?ye:ge).get(n))return n;const i=(0,r.kJ)(n);if(!e&&i&&(0,r.RI)(M,o))return Reflect.get(M,o,a);const s=Reflect.get(n,o,a);return((0,r.yk)(o)?R.has(o):D(o))?s:(e||S(n,"get",o),t?s:Le(s)?i&&(0,r.S0)(o)?s:s.value:(0,r.Kn)(s)?e?Se(s):_e(s):s)}}const V=W(),j=W(!0);function W(e=!1){return function(t,n,o,a){let i=t[n];if(Fe(i)&&Le(i)&&!Le(o))return!1;if(!e&&!Fe(o)&&(De(o)||(o=Te(o),i=Te(i)),!(0,r.kJ)(t)&&Le(i)&&!Le(o)))return i.value=o,!0;const s=(0,r.kJ)(t)&&(0,r.S0)(n)?Number(n)<t.length:(0,r.RI)(t,n),u=Reflect.set(t,n,o,a);return t===Te(a)&&(s?(0,r.aU)(o,i)&&I(t,"set",n,o,i):I(t,"add",n,o)),u}}function H(e,t){const n=(0,r.RI)(e,t),o=e[t],a=Reflect.deleteProperty(e,t);return a&&n&&I(e,"delete",t,void 0,o),a}function U(e,t){const n=Reflect.has(e,t);return(0,r.yk)(t)&&R.has(t)||S(e,"has",t),n}function z(e){return S(e,"iterate",(0,r.kJ)(e)?"length":g),Reflect.ownKeys(e)}const $={get:T,set:V,deleteProperty:H,has:U,ownKeys:z},q={get:P,set(e,t){return!0},deleteProperty(e,t){return!0}},G=(0,r.l7)({},$,{get:O,set:j}),K=(0,r.l7)({},q,{get:B}),X=e=>e,Y=e=>Reflect.getPrototypeOf(e);function Z(e,t,n=!1,r=!1){e=e["__v_raw"];const o=Te(e),a=Te(t);n||(t!==a&&S(o,"get",t),S(o,"get",a));const{has:i}=Y(o),s=r?X:n?Be:Pe;return i.call(o,t)?s(e.get(t)):i.call(o,a)?s(e.get(a)):void(e!==o&&e.get(t))}function J(e,t=!1){const n=this["__v_raw"],r=Te(n),o=Te(e);return t||(e!==o&&S(r,"has",e),S(r,"has",o)),e===o?n.has(e):n.has(e)||n.has(o)}function Q(e,t=!1){return e=e["__v_raw"],!t&&S(Te(e),"iterate",g),Reflect.get(e,"size",e)}function ee(e){e=Te(e);const t=Te(this),n=Y(t),r=n.has.call(t,e);return r||(t.add(e),I(t,"add",e,e)),this}function te(e,t){t=Te(t);const n=Te(this),{has:o,get:a}=Y(n);let i=o.call(n,e);i||(e=Te(e),i=o.call(n,e));const s=a.call(n,e);return n.set(e,t),i?(0,r.aU)(t,s)&&I(n,"set",e,t,s):I(n,"add",e,t),this}function ne(e){const t=Te(this),{has:n,get:r}=Y(t);let o=n.call(t,e);o||(e=Te(e),o=n.call(t,e));const a=r?r.call(t,e):void 0,i=t.delete(e);return o&&I(t,"delete",e,void 0,a),i}function re(){const e=Te(this),t=0!==e.size,n=void 0,r=e.clear();return t&&I(e,"clear",void 0,void 0,n),r}function oe(e,t){return function(n,r){const o=this,a=o["__v_raw"],i=Te(a),s=t?X:e?Be:Pe;return!e&&S(i,"iterate",g),a.forEach(((e,t)=>n.call(r,s(e),s(t),o)))}}function ae(e,t,n){return function(...o){const a=this["__v_raw"],i=Te(a),s=(0,r._N)(i),u="entries"===e||e===Symbol.iterator&&s,l="keys"===e&&s,c=a[e](...o),d=n?X:t?Be:Pe;return!t&&S(i,"iterate",l?y:g),{next(){const{value:e,done:t}=c.next();return t?{value:e,done:t}:{value:u?[d(e[0]),d(e[1])]:d(e),done:t}},[Symbol.iterator](){return this}}}}function ie(e){return function(...t){return"delete"!==e&&this}}function se(){const e={get(e){return Z(this,e)},get size(){return Q(this)},has:J,add:ee,set:te,delete:ne,clear:re,forEach:oe(!1,!1)},t={get(e){return Z(this,e,!1,!0)},get size(){return Q(this)},has:J,add:ee,set:te,delete:ne,clear:re,forEach:oe(!1,!0)},n={get(e){return Z(this,e,!0)},get size(){return Q(this,!0)},has(e){return J.call(this,e,!0)},add:ie("add"),set:ie("set"),delete:ie("delete"),clear:ie("clear"),forEach:oe(!0,!1)},r={get(e){return Z(this,e,!0,!0)},get size(){return Q(this,!0)},has(e){return J.call(this,e,!0)},add:ie("add"),set:ie("set"),delete:ie("delete"),clear:ie("clear"),forEach:oe(!0,!0)},o=["keys","values","entries",Symbol.iterator];return o.forEach((o=>{e[o]=ae(o,!1,!1),n[o]=ae(o,!0,!1),t[o]=ae(o,!1,!0),r[o]=ae(o,!0,!0)})),[e,n,t,r]}const[ue,le,ce,de]=se();function pe(e,t){const n=t?e?de:ce:e?le:ue;return(t,o,a)=>"__v_isReactive"===o?!e:"__v_isReadonly"===o?e:"__v_raw"===o?t:Reflect.get((0,r.RI)(n,o)&&o in t?n:t,o,a)}const fe={get:pe(!1,!1)},he={get:pe(!1,!0)},ve={get:pe(!0,!1)},me={get:pe(!0,!0)};const ge=new WeakMap,ye=new WeakMap,be=new WeakMap,we=new WeakMap;function xe(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Ce(e){return e["__v_skip"]||!Object.isExtensible(e)?0:xe((0,r.W7)(e))}function _e(e){return Fe(e)?e:Ie(e,!1,$,fe,ge)}function ke(e){return Ie(e,!1,G,he,ye)}function Se(e){return Ie(e,!0,q,ve,be)}function Ee(e){return Ie(e,!0,K,me,we)}function Ie(e,t,n,o,a){if(!(0,r.Kn)(e))return e;if(e["__v_raw"]&&(!t||!e["__v_isReactive"]))return e;const i=a.get(e);if(i)return i;const s=Ce(e);if(0===s)return e;const u=new Proxy(e,2===s?o:n);return a.set(e,u),u}function Ae(e){return Fe(e)?Ae(e["__v_raw"]):!(!e||!e["__v_isReactive"])}function Fe(e){return!(!e||!e["__v_isReadonly"])}function De(e){return!(!e||!e["__v_isShallow"])}function Re(e){return Ae(e)||Fe(e)}function Te(e){const t=e&&e["__v_raw"];return t?Te(t):e}function Oe(e){return(0,r.Nj)(e,"__v_skip",!0),e}const Pe=e=>(0,r.Kn)(e)?_e(e):e,Be=e=>(0,r.Kn)(e)?Se(e):e;function Me(e){x&&m&&(e=Te(e),E(e.dep||(e.dep=s())))}function Ne(e,t){e=Te(e),e.dep&&A(e.dep)}function Le(e){return!(!e||!0!==e.__v_isRef)}function Ve(e){return We(e,!1)}function je(e){return We(e,!0)}function We(e,t){return Le(e)?e:new He(e,t)}class He{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:Te(e),this._value=t?e:Pe(e)}get value(){return Me(this),this._value}set value(e){e=this.__v_isShallow?e:Te(e),(0,r.aU)(e,this._rawValue)&&(this._rawValue=e,this._value=this.__v_isShallow?e:Pe(e),Ne(this,e))}}function Ue(e){return Le(e)?e.value:e}const ze={get:(e,t,n)=>Ue(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const o=e[t];return Le(o)&&!Le(n)?(o.value=n,!0):Reflect.set(e,t,n,r)}};function $e(e){return Ae(e)?e:new Proxy(e,ze)}function qe(e){const t=(0,r.kJ)(e)?new Array(e.length):{};for(const n in e)t[n]=Ke(e,n);return t}class Ge{constructor(e,t,n){this._object=e,this._key=t,this._defaultValue=n,this.__v_isRef=!0}get value(){const e=this._object[this._key];return void 0===e?this._defaultValue:e}set value(e){this._object[this._key]=e}}function Ke(e,t,n){const r=e[t];return Le(r)?r:new Ge(e,t,n)}class Xe{constructor(e,t,n,r){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new b(e,(()=>{this._dirty||(this._dirty=!0,Ne(this))})),this.effect.computed=this,this.effect.active=this._cacheable=!r,this["__v_isReadonly"]=n}get value(){const e=Te(this);return Me(e),!e._dirty&&e._cacheable||(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function Ye(e,t,n=!1){let o,a;const i=(0,r.mf)(e);i?(o=e,a=r.dG):(o=e.get,a=e.set);const s=new Xe(o,a,i||!a,n);return s}},3396:function(e,t,n){"use strict";n.d(t,{$d:function(){return i},Ah:function(){return Te},Cn:function(){return W},F4:function(){return mn},FN:function(){return Dn},Fl:function(){return qn},HY:function(){return Kt},JJ:function(){return Z},Jd:function(){return Re},Ko:function(){return $e},LL:function(){return He},Nv:function(){return qe},P$:function(){return ue},Q6:function(){return he},U2:function(){return ce},Uk:function(){return yn},Us:function(){return Bt},WI:function(){return Ge},Wm:function(){return hn},Xn:function(){return Fe},Y3:function(){return C},Y8:function(){return ae},YP:function(){return ee},_:function(){return fn},aZ:function(){return ve},bv:function(){return Ae},dD:function(){return j},dG:function(){return kn},f3:function(){return J},h:function(){return Gn},iD:function(){return an},ic:function(){return De},j4:function(){return sn},kq:function(){return wn},lR:function(){return Gt},mx:function(){return Xe},nK:function(){return fe},uE:function(){return bn},up:function(){return je},w5:function(){return H},wg:function(){return en},wy:function(){return Ne}});n(6699),n(1703);var r=n(4870),o=n(7139);function a(e,t,n,r){let o;try{o=r?e(...r):e()}catch(a){s(a,t,n)}return o}function i(e,t,n,r){if((0,o.mf)(e)){const i=a(e,t,n,r);return i&&(0,o.tI)(i)&&i.catch((e=>{s(e,t,n)})),i}const u=[];for(let o=0;o<e.length;o++)u.push(i(e[o],t,n,r));return u}function s(e,t,n,r=!0){const o=t?t.vnode:null;if(t){let r=t.parent;const o=t.proxy,i=n;while(r){const t=r.ec;if(t)for(let n=0;n<t.length;n++)if(!1===t[n](e,o,i))return;r=r.parent}const s=t.appContext.config.errorHandler;if(s)return void a(s,null,10,[e,o,i])}u(e,n,o,r)}function u(e,t,n,r=!0){console.error(e)}let l=!1,c=!1;const d=[];let p=0;const f=[];let h=null,v=0;const m=[];let g=null,y=0;const b=Promise.resolve();let w=null,x=null;function C(e){const t=w||b;return e?t.then(this?e.bind(this):e):t}function _(e){let t=p+1,n=d.length;while(t<n){const r=t+n>>>1,o=T(d[r]);o<e?t=r+1:n=r}return t}function k(e){d.length&&d.includes(e,l&&e.allowRecurse?p+1:p)||e===x||(null==e.id?d.push(e):d.splice(_(e.id),0,e),S())}function S(){l||c||(c=!0,w=b.then(O))}function E(e){const t=d.indexOf(e);t>p&&d.splice(t,1)}function I(e,t,n,r){(0,o.kJ)(e)?n.push(...e):t&&t.includes(e,e.allowRecurse?r+1:r)||n.push(e),S()}function A(e){I(e,h,f,v)}function F(e){I(e,g,m,y)}function D(e,t=null){if(f.length){for(x=t,h=[...new Set(f)],f.length=0,v=0;v<h.length;v++)h[v]();h=null,v=0,x=null,D(e,t)}}function R(e){if(D(),m.length){const e=[...new Set(m)];if(m.length=0,g)return void g.push(...e);for(g=e,g.sort(((e,t)=>T(e)-T(t))),y=0;y<g.length;y++)g[y]();g=null,y=0}}const T=e=>null==e.id?1/0:e.id;function O(e){c=!1,l=!0,D(e),d.sort(((e,t)=>T(e)-T(t)));o.dG;try{for(p=0;p<d.length;p++){const e=d[p];e&&!1!==e.active&&a(e,null,14)}}finally{p=0,d.length=0,R(e),l=!1,w=null,(d.length||f.length||m.length)&&O(e)}}new Set;new Map;function P(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||o.kT;let a=n;const s=t.startsWith("update:"),u=s&&t.slice(7);if(u&&u in r){const e=`${"modelValue"===u?"model":u}Modifiers`,{number:t,trim:i}=r[e]||o.kT;i&&(a=n.map((e=>e.trim()))),t&&(a=n.map(o.He))}let l;let c=r[l=(0,o.hR)(t)]||r[l=(0,o.hR)((0,o._A)(t))];!c&&s&&(c=r[l=(0,o.hR)((0,o.rs)(t))]),c&&i(c,e,6,a);const d=r[l+"Once"];if(d){if(e.emitted){if(e.emitted[l])return}else e.emitted={};e.emitted[l]=!0,i(d,e,6,a)}}function B(e,t,n=!1){const r=t.emitsCache,a=r.get(e);if(void 0!==a)return a;const i=e.emits;let s={},u=!1;if(!(0,o.mf)(e)){const r=e=>{const n=B(e,t,!0);n&&(u=!0,(0,o.l7)(s,n))};!n&&t.mixins.length&&t.mixins.forEach(r),e.extends&&r(e.extends),e.mixins&&e.mixins.forEach(r)}return i||u?((0,o.kJ)(i)?i.forEach((e=>s[e]=null)):(0,o.l7)(s,i),r.set(e,s),s):(r.set(e,null),null)}function M(e,t){return!(!e||!(0,o.F7)(t))&&(t=t.slice(2).replace(/Once$/,""),(0,o.RI)(e,t[0].toLowerCase()+t.slice(1))||(0,o.RI)(e,(0,o.rs)(t))||(0,o.RI)(e,t))}let N=null,L=null;function V(e){const t=N;return N=e,L=e&&e.type.__scopeId||null,t}function j(e){L=e}function W(){L=null}function H(e,t=N,n){if(!t)return e;if(e._n)return e;const r=(...n)=>{r._d&&rn(-1);const o=V(t),a=e(...n);return V(o),r._d&&rn(1),a};return r._n=!0,r._c=!0,r._d=!0,r}function U(e){const{type:t,vnode:n,proxy:r,withProxy:a,props:i,propsOptions:[u],slots:l,attrs:c,emit:d,render:p,renderCache:f,data:h,setupState:v,ctx:m,inheritAttrs:g}=e;let y,b;const w=V(e);try{if(4&n.shapeFlag){const e=a||r;y=xn(p.call(e,e,f,i,v,h,m)),b=c}else{const e=t;0,y=xn(e.length>1?e(i,{attrs:c,slots:l,emit:d}):e(i,null)),b=t.props?c:z(c)}}catch(C){Jt.length=0,s(C,e,1),y=hn(Yt)}let x=y;if(b&&!1!==g){const e=Object.keys(b),{shapeFlag:t}=x;e.length&&7&t&&(u&&e.some(o.tR)&&(b=$(b,u)),x=gn(x,b))}return n.dirs&&(x=gn(x),x.dirs=x.dirs?x.dirs.concat(n.dirs):n.dirs),n.transition&&(x.transition=n.transition),y=x,V(w),y}const z=e=>{let t;for(const n in e)("class"===n||"style"===n||(0,o.F7)(n))&&((t||(t={}))[n]=e[n]);return t},$=(e,t)=>{const n={};for(const r in e)(0,o.tR)(r)&&r.slice(9)in t||(n[r]=e[r]);return n};function q(e,t,n){const{props:r,children:o,component:a}=e,{props:i,children:s,patchFlag:u}=t,l=a.emitsOptions;if(t.dirs||t.transition)return!0;if(!(n&&u>=0))return!(!o&&!s||s&&s.$stable)||r!==i&&(r?!i||G(r,i,l):!!i);if(1024&u)return!0;if(16&u)return r?G(r,i,l):!!i;if(8&u){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const n=e[t];if(i[n]!==r[n]&&!M(l,n))return!0}}return!1}function G(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let o=0;o<r.length;o++){const a=r[o];if(t[a]!==e[a]&&!M(n,a))return!0}return!1}function K({vnode:e,parent:t},n){while(t&&t.subTree===e)(e=t.vnode).el=n,t=t.parent}const X=e=>e.__isSuspense;function Y(e,t){t&&t.pendingBranch?(0,o.kJ)(e)?t.effects.push(...e):t.effects.push(e):F(e)}function Z(e,t){if(Fn){let n=Fn.provides;const r=Fn.parent&&Fn.parent.provides;r===n&&(n=Fn.provides=Object.create(r)),n[e]=t}else 0}function J(e,t,n=!1){const r=Fn||N;if(r){const a=null==r.parent?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(a&&e in a)return a[e];if(arguments.length>1)return n&&(0,o.mf)(t)?t.call(r.proxy):t}else 0}const Q={};function ee(e,t,n){return te(e,t,n)}function te(e,t,{immediate:n,deep:s,flush:u,onTrack:l,onTrigger:c}=o.kT){const d=Fn;let p,f,h=!1,v=!1;if((0,r.dq)(e)?(p=()=>e.value,h=(0,r.yT)(e)):(0,r.PG)(e)?(p=()=>e,s=!0):(0,o.kJ)(e)?(v=!0,h=e.some((e=>(0,r.PG)(e)||(0,r.yT)(e))),p=()=>e.map((e=>(0,r.dq)(e)?e.value:(0,r.PG)(e)?oe(e):(0,o.mf)(e)?a(e,d,2):void 0))):p=(0,o.mf)(e)?t?()=>a(e,d,2):()=>{if(!d||!d.isUnmounted)return f&&f(),i(e,d,3,[m])}:o.dG,t&&s){const e=p;p=()=>oe(e())}let m=e=>{f=w.onStop=()=>{a(e,d,4)}};if(Mn)return m=o.dG,t?n&&i(t,d,3,[p(),v?[]:void 0,m]):p(),o.dG;let g=v?[]:Q;const y=()=>{if(w.active)if(t){const e=w.run();(s||h||(v?e.some(((e,t)=>(0,o.aU)(e,g[t]))):(0,o.aU)(e,g)))&&(f&&f(),i(t,d,3,[e,g===Q?void 0:g,m]),g=e)}else w.run()};let b;y.allowRecurse=!!t,b="sync"===u?y:"post"===u?()=>Pt(y,d&&d.suspense):()=>A(y);const w=new r.qq(p,b);return t?n?y():g=w.run():"post"===u?Pt(w.run.bind(w),d&&d.suspense):w.run(),()=>{w.stop(),d&&d.scope&&(0,o.Od)(d.scope.effects,w)}}function ne(e,t,n){const r=this.proxy,a=(0,o.HD)(e)?e.includes(".")?re(r,e):()=>r[e]:e.bind(r,r);let i;(0,o.mf)(t)?i=t:(i=t.handler,n=t);const s=Fn;Rn(this);const u=te(a,i.bind(r),n);return s?Rn(s):Tn(),u}function re(e,t){const n=t.split(".");return()=>{let t=e;for(let e=0;e<n.length&&t;e++)t=t[n[e]];return t}}function oe(e,t){if(!(0,o.Kn)(e)||e["__v_skip"])return e;if(t=t||new Set,t.has(e))return e;if(t.add(e),(0,r.dq)(e))oe(e.value,t);else if((0,o.kJ)(e))for(let n=0;n<e.length;n++)oe(e[n],t);else if((0,o.DM)(e)||(0,o._N)(e))e.forEach((e=>{oe(e,t)}));else if((0,o.PO)(e))for(const n in e)oe(e[n],t);return e}function ae(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ae((()=>{e.isMounted=!0})),Re((()=>{e.isUnmounting=!0})),e}const ie=[Function,Array],se={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ie,onEnter:ie,onAfterEnter:ie,onEnterCancelled:ie,onBeforeLeave:ie,onLeave:ie,onAfterLeave:ie,onLeaveCancelled:ie,onBeforeAppear:ie,onAppear:ie,onAfterAppear:ie,onAppearCancelled:ie},setup(e,{slots:t}){const n=Dn(),o=ae();let a;return()=>{const i=t.default&&he(t.default(),!0);if(!i||!i.length)return;let s=i[0];if(i.length>1){let e=!1;for(const t of i)if(t.type!==Yt){0,s=t,e=!0;break}}const u=(0,r.IU)(e),{mode:l}=u;if(o.isLeaving)return de(s);const c=pe(s);if(!c)return de(s);const d=ce(c,u,o,n);fe(c,d);const p=n.subTree,f=p&&pe(p);let h=!1;const{getTransitionKey:v}=c.type;if(v){const e=v();void 0===a?a=e:e!==a&&(a=e,h=!0)}if(f&&f.type!==Yt&&(!ln(c,f)||h)){const e=ce(f,u,o,n);if(fe(f,e),"out-in"===l)return o.isLeaving=!0,e.afterLeave=()=>{o.isLeaving=!1,n.update()},de(s);"in-out"===l&&c.type!==Yt&&(e.delayLeave=(e,t,n)=>{const r=le(o,f);r[String(f.key)]=f,e._leaveCb=()=>{t(),e._leaveCb=void 0,delete d.delayedLeave},d.delayedLeave=n})}return s}}},ue=se;function le(e,t){const{leavingVNodes:n}=e;let r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function ce(e,t,n,r){const{appear:a,mode:s,persisted:u=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:d,onEnterCancelled:p,onBeforeLeave:f,onLeave:h,onAfterLeave:v,onLeaveCancelled:m,onBeforeAppear:g,onAppear:y,onAfterAppear:b,onAppearCancelled:w}=t,x=String(e.key),C=le(n,e),_=(e,t)=>{e&&i(e,r,9,t)},k=(e,t)=>{const n=t[1];_(e,t),(0,o.kJ)(e)?e.every((e=>e.length<=1))&&n():e.length<=1&&n()},S={mode:s,persisted:u,beforeEnter(t){let r=l;if(!n.isMounted){if(!a)return;r=g||l}t._leaveCb&&t._leaveCb(!0);const o=C[x];o&&ln(e,o)&&o.el._leaveCb&&o.el._leaveCb(),_(r,[t])},enter(e){let t=c,r=d,o=p;if(!n.isMounted){if(!a)return;t=y||c,r=b||d,o=w||p}let i=!1;const s=e._enterCb=t=>{i||(i=!0,_(t?o:r,[e]),S.delayedLeave&&S.delayedLeave(),e._enterCb=void 0)};t?k(t,[e,s]):s()},leave(t,r){const o=String(e.key);if(t._enterCb&&t._enterCb(!0),n.isUnmounting)return r();_(f,[t]);let a=!1;const i=t._leaveCb=n=>{a||(a=!0,r(),_(n?m:v,[t]),t._leaveCb=void 0,C[o]===e&&delete C[o])};C[o]=e,h?k(h,[t,i]):i()},clone(e){return ce(e,t,n,r)}};return S}function de(e){if(ge(e))return e=gn(e),e.children=null,e}function pe(e){return ge(e)?e.children?e.children[0]:void 0:e}function fe(e,t){6&e.shapeFlag&&e.component?fe(e.component.subTree,t):128&e.shapeFlag?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function he(e,t=!1,n){let r=[],o=0;for(let a=0;a<e.length;a++){let i=e[a];const s=null==n?i.key:String(n)+String(null!=i.key?i.key:a);i.type===Kt?(128&i.patchFlag&&o++,r=r.concat(he(i.children,t,s))):(t||i.type!==Yt)&&r.push(null!=s?gn(i,{key:s}):i)}if(o>1)for(let a=0;a<r.length;a++)r[a].patchFlag=-2;return r}function ve(e){return(0,o.mf)(e)?{setup:e,name:e.name}:e}const me=e=>!!e.type.__asyncLoader;const ge=e=>e.type.__isKeepAlive;RegExp,RegExp;function ye(e,t){return(0,o.kJ)(e)?e.some((e=>ye(e,t))):(0,o.HD)(e)?e.split(",").includes(t):!!e.test&&e.test(t)}function be(e,t){xe(e,"a",t)}function we(e,t){xe(e,"da",t)}function xe(e,t,n=Fn){const r=e.__wdc||(e.__wdc=()=>{let t=n;while(t){if(t.isDeactivated)return;t=t.parent}return e()});if(Se(t,r,n),n){let e=n.parent;while(e&&e.parent)ge(e.parent.vnode)&&Ce(r,t,n,e),e=e.parent}}function Ce(e,t,n,r){const a=Se(t,e,r,!0);Te((()=>{(0,o.Od)(r[t],a)}),n)}function _e(e){let t=e.shapeFlag;256&t&&(t-=256),512&t&&(t-=512),e.shapeFlag=t}function ke(e){return 128&e.shapeFlag?e.ssContent:e}function Se(e,t,n=Fn,o=!1){if(n){const a=n[e]||(n[e]=[]),s=t.__weh||(t.__weh=(...o)=>{if(n.isUnmounted)return;(0,r.Jd)(),Rn(n);const a=i(t,n,e,o);return Tn(),(0,r.lk)(),a});return o?a.unshift(s):a.push(s),s}}const Ee=e=>(t,n=Fn)=>(!Mn||"sp"===e)&&Se(e,t,n),Ie=Ee("bm"),Ae=Ee("m"),Fe=Ee("bu"),De=Ee("u"),Re=Ee("bum"),Te=Ee("um"),Oe=Ee("sp"),Pe=Ee("rtg"),Be=Ee("rtc");function Me(e,t=Fn){Se("ec",e,t)}function Ne(e,t){const n=N;if(null===n)return e;const r=Un(n)||n.proxy,a=e.dirs||(e.dirs=[]);for(let i=0;i<t.length;i++){let[e,n,s,u=o.kT]=t[i];(0,o.mf)(e)&&(e={mounted:e,updated:e}),e.deep&&oe(n),a.push({dir:e,instance:r,value:n,oldValue:void 0,arg:s,modifiers:u})}return e}function Le(e,t,n,o){const a=e.dirs,s=t&&t.dirs;for(let u=0;u<a.length;u++){const l=a[u];s&&(l.oldValue=s[u].value);let c=l.dir[o];c&&((0,r.Jd)(),i(c,n,8,[e.el,l,e,t]),(0,r.lk)())}}const Ve="components";function je(e,t){return Ue(Ve,e,!0,t)||e}const We=Symbol();function He(e){return(0,o.HD)(e)?Ue(Ve,e,!1)||e:e||We}function Ue(e,t,n=!0,r=!1){const a=N||Fn;if(a){const n=a.type;if(e===Ve){const e=zn(n,!1);if(e&&(e===t||e===(0,o._A)(t)||e===(0,o.kC)((0,o._A)(t))))return n}const i=ze(a[e]||n[e],t)||ze(a.appContext[e],t);return!i&&r?n:i}}function ze(e,t){return e&&(e[t]||e[(0,o._A)(t)]||e[(0,o.kC)((0,o._A)(t))])}function $e(e,t,n,r){let a;const i=n&&n[r];if((0,o.kJ)(e)||(0,o.HD)(e)){a=new Array(e.length);for(let n=0,r=e.length;n<r;n++)a[n]=t(e[n],n,void 0,i&&i[n])}else if("number"===typeof e){0,a=new Array(e);for(let n=0;n<e;n++)a[n]=t(n+1,n,void 0,i&&i[n])}else if((0,o.Kn)(e))if(e[Symbol.iterator])a=Array.from(e,((e,n)=>t(e,n,void 0,i&&i[n])));else{const n=Object.keys(e);a=new Array(n.length);for(let r=0,o=n.length;r<o;r++){const o=n[r];a[r]=t(e[o],o,r,i&&i[r])}}else a=[];return n&&(n[r]=a),a}function qe(e,t){for(let n=0;n<t.length;n++){const r=t[n];if((0,o.kJ)(r))for(let t=0;t<r.length;t++)e[r[t].name]=r[t].fn;else r&&(e[r.name]=r.fn)}return e}function Ge(e,t,n={},r,o){if(N.isCE||N.parent&&me(N.parent)&&N.parent.isCE)return hn("slot","default"===t?null:{name:t},r&&r());let a=e[t];a&&a._c&&(a._d=!1),en();const i=a&&Ke(a(n)),s=sn(Kt,{key:n.key||`_${t}`},i||(r?r():[]),i&&1===e._?64:-2);return!o&&s.scopeId&&(s.slotScopeIds=[s.scopeId+"-s"]),a&&a._c&&(a._d=!0),s}function Ke(e){return e.some((e=>!un(e)||e.type!==Yt&&!(e.type===Kt&&!Ke(e.children))))?e:null}function Xe(e){const t={};for(const n in e)t[(0,o.hR)(n)]=e[n];return t}const Ye=e=>e?On(e)?Un(e)||e.proxy:Ye(e.parent):null,Ze=(0,o.l7)(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Ye(e.parent),$root:e=>Ye(e.root),$emit:e=>e.emit,$options:e=>ot(e),$forceUpdate:e=>e.f||(e.f=()=>k(e.update)),$nextTick:e=>e.n||(e.n=C.bind(e.proxy)),$watch:e=>ne.bind(e)}),Je={get({_:e},t){const{ctx:n,setupState:a,data:i,props:s,accessCache:u,type:l,appContext:c}=e;let d;if("$"!==t[0]){const r=u[t];if(void 0!==r)switch(r){case 1:return a[t];case 2:return i[t];case 4:return n[t];case 3:return s[t]}else{if(a!==o.kT&&(0,o.RI)(a,t))return u[t]=1,a[t];if(i!==o.kT&&(0,o.RI)(i,t))return u[t]=2,i[t];if((d=e.propsOptions[0])&&(0,o.RI)(d,t))return u[t]=3,s[t];if(n!==o.kT&&(0,o.RI)(n,t))return u[t]=4,n[t];Qe&&(u[t]=0)}}const p=Ze[t];let f,h;return p?("$attrs"===t&&(0,r.j)(e,"get",t),p(e)):(f=l.__cssModules)&&(f=f[t])?f:n!==o.kT&&(0,o.RI)(n,t)?(u[t]=4,n[t]):(h=c.config.globalProperties,(0,o.RI)(h,t)?h[t]:void 0)},set({_:e},t,n){const{data:r,setupState:a,ctx:i}=e;return a!==o.kT&&(0,o.RI)(a,t)?(a[t]=n,!0):r!==o.kT&&(0,o.RI)(r,t)?(r[t]=n,!0):!(0,o.RI)(e.props,t)&&(("$"!==t[0]||!(t.slice(1)in e))&&(i[t]=n,!0))},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:a,propsOptions:i}},s){let u;return!!n[s]||e!==o.kT&&(0,o.RI)(e,s)||t!==o.kT&&(0,o.RI)(t,s)||(u=i[0])&&(0,o.RI)(u,s)||(0,o.RI)(r,s)||(0,o.RI)(Ze,s)||(0,o.RI)(a.config.globalProperties,s)},defineProperty(e,t,n){return null!=n.get?e._.accessCache[t]=0:(0,o.RI)(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};let Qe=!0;function et(e){const t=ot(e),n=e.proxy,a=e.ctx;Qe=!1,t.beforeCreate&&nt(t.beforeCreate,e,"bc");const{data:i,computed:s,methods:u,watch:l,provide:c,inject:d,created:p,beforeMount:f,mounted:h,beforeUpdate:v,updated:m,activated:g,deactivated:y,beforeDestroy:b,beforeUnmount:w,destroyed:x,unmounted:C,render:_,renderTracked:k,renderTriggered:S,errorCaptured:E,serverPrefetch:I,expose:A,inheritAttrs:F,components:D,directives:R,filters:T}=t,O=null;if(d&&tt(d,a,O,e.appContext.config.unwrapInjectedRef),u)for(const r in u){const e=u[r];(0,o.mf)(e)&&(a[r]=e.bind(n))}if(i){0;const t=i.call(n,n);0,(0,o.Kn)(t)&&(e.data=(0,r.qj)(t))}if(Qe=!0,s)for(const r in s){const e=s[r],t=(0,o.mf)(e)?e.bind(n,n):(0,o.mf)(e.get)?e.get.bind(n,n):o.dG;0;const i=!(0,o.mf)(e)&&(0,o.mf)(e.set)?e.set.bind(n):o.dG,u=qn({get:t,set:i});Object.defineProperty(a,r,{enumerable:!0,configurable:!0,get:()=>u.value,set:e=>u.value=e})}if(l)for(const r in l)rt(l[r],a,n,r);if(c){const e=(0,o.mf)(c)?c.call(n):c;Reflect.ownKeys(e).forEach((t=>{Z(t,e[t])}))}function P(e,t){(0,o.kJ)(t)?t.forEach((t=>e(t.bind(n)))):t&&e(t.bind(n))}if(p&&nt(p,e,"c"),P(Ie,f),P(Ae,h),P(Fe,v),P(De,m),P(be,g),P(we,y),P(Me,E),P(Be,k),P(Pe,S),P(Re,w),P(Te,C),P(Oe,I),(0,o.kJ)(A))if(A.length){const t=e.exposed||(e.exposed={});A.forEach((e=>{Object.defineProperty(t,e,{get:()=>n[e],set:t=>n[e]=t})}))}else e.exposed||(e.exposed={});_&&e.render===o.dG&&(e.render=_),null!=F&&(e.inheritAttrs=F),D&&(e.components=D),R&&(e.directives=R)}function tt(e,t,n=o.dG,a=!1){(0,o.kJ)(e)&&(e=lt(e));for(const i in e){const n=e[i];let s;s=(0,o.Kn)(n)?"default"in n?J(n.from||i,n.default,!0):J(n.from||i):J(n),(0,r.dq)(s)&&a?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>s.value,set:e=>s.value=e}):t[i]=s}}function nt(e,t,n){i((0,o.kJ)(e)?e.map((e=>e.bind(t.proxy))):e.bind(t.proxy),t,n)}function rt(e,t,n,r){const a=r.includes(".")?re(n,r):()=>n[r];if((0,o.HD)(e)){const n=t[e];(0,o.mf)(n)&&ee(a,n)}else if((0,o.mf)(e))ee(a,e.bind(n));else if((0,o.Kn)(e))if((0,o.kJ)(e))e.forEach((e=>rt(e,t,n,r)));else{const r=(0,o.mf)(e.handler)?e.handler.bind(n):t[e.handler];(0,o.mf)(r)&&ee(a,r,e)}else 0}function ot(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:o,optionsCache:a,config:{optionMergeStrategies:i}}=e.appContext,s=a.get(t);let u;return s?u=s:o.length||n||r?(u={},o.length&&o.forEach((e=>at(u,e,i,!0))),at(u,t,i)):u=t,a.set(t,u),u}function at(e,t,n,r=!1){const{mixins:o,extends:a}=t;a&&at(e,a,n,!0),o&&o.forEach((t=>at(e,t,n,!0)));for(const i in t)if(r&&"expose"===i);else{const r=it[i]||n&&n[i];e[i]=r?r(e[i],t[i]):t[i]}return e}const it={data:st,props:dt,emits:dt,methods:dt,computed:dt,beforeCreate:ct,created:ct,beforeMount:ct,mounted:ct,beforeUpdate:ct,updated:ct,beforeDestroy:ct,beforeUnmount:ct,destroyed:ct,unmounted:ct,activated:ct,deactivated:ct,errorCaptured:ct,serverPrefetch:ct,components:dt,directives:dt,watch:pt,provide:st,inject:ut};function st(e,t){return t?e?function(){return(0,o.l7)((0,o.mf)(e)?e.call(this,this):e,(0,o.mf)(t)?t.call(this,this):t)}:t:e}function ut(e,t){return dt(lt(e),lt(t))}function lt(e){if((0,o.kJ)(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function ct(e,t){return e?[...new Set([].concat(e,t))]:t}function dt(e,t){return e?(0,o.l7)((0,o.l7)(Object.create(null),e),t):t}function pt(e,t){if(!e)return t;if(!t)return e;const n=(0,o.l7)(Object.create(null),e);for(const r in t)n[r]=ct(e[r],t[r]);return n}function ft(e,t,n,a=!1){const i={},s={};(0,o.Nj)(s,cn,1),e.propsDefaults=Object.create(null),vt(e,t,i,s);for(const r in e.propsOptions[0])r in i||(i[r]=void 0);n?e.props=a?i:(0,r.Um)(i):e.type.props?e.props=i:e.props=s,e.attrs=s}function ht(e,t,n,a){const{props:i,attrs:s,vnode:{patchFlag:u}}=e,l=(0,r.IU)(i),[c]=e.propsOptions;let d=!1;if(!(a||u>0)||16&u){let r;vt(e,t,i,s)&&(d=!0);for(const a in l)t&&((0,o.RI)(t,a)||(r=(0,o.rs)(a))!==a&&(0,o.RI)(t,r))||(c?!n||void 0===n[a]&&void 0===n[r]||(i[a]=mt(c,l,a,void 0,e,!0)):delete i[a]);if(s!==l)for(const e in s)t&&(0,o.RI)(t,e)||(delete s[e],d=!0)}else if(8&u){const n=e.vnode.dynamicProps;for(let r=0;r<n.length;r++){let a=n[r];if(M(e.emitsOptions,a))continue;const u=t[a];if(c)if((0,o.RI)(s,a))u!==s[a]&&(s[a]=u,d=!0);else{const t=(0,o._A)(a);i[t]=mt(c,l,t,u,e,!1)}else u!==s[a]&&(s[a]=u,d=!0)}}d&&(0,r.X$)(e,"set","$attrs")}function vt(e,t,n,a){const[i,s]=e.propsOptions;let u,l=!1;if(t)for(let r in t){if((0,o.Gg)(r))continue;const c=t[r];let d;i&&(0,o.RI)(i,d=(0,o._A)(r))?s&&s.includes(d)?(u||(u={}))[d]=c:n[d]=c:M(e.emitsOptions,r)||r in a&&c===a[r]||(a[r]=c,l=!0)}if(s){const t=(0,r.IU)(n),a=u||o.kT;for(let r=0;r<s.length;r++){const u=s[r];n[u]=mt(i,t,u,a[u],e,!(0,o.RI)(a,u))}}return l}function mt(e,t,n,r,a,i){const s=e[n];if(null!=s){const e=(0,o.RI)(s,"default");if(e&&void 0===r){const e=s.default;if(s.type!==Function&&(0,o.mf)(e)){const{propsDefaults:o}=a;n in o?r=o[n]:(Rn(a),r=o[n]=e.call(null,t),Tn())}else r=e}s[0]&&(i&&!e?r=!1:!s[1]||""!==r&&r!==(0,o.rs)(n)||(r=!0))}return r}function gt(e,t,n=!1){const r=t.propsCache,a=r.get(e);if(a)return a;const i=e.props,s={},u=[];let l=!1;if(!(0,o.mf)(e)){const r=e=>{l=!0;const[n,r]=gt(e,t,!0);(0,o.l7)(s,n),r&&u.push(...r)};!n&&t.mixins.length&&t.mixins.forEach(r),e.extends&&r(e.extends),e.mixins&&e.mixins.forEach(r)}if(!i&&!l)return r.set(e,o.Z6),o.Z6;if((0,o.kJ)(i))for(let d=0;d<i.length;d++){0;const e=(0,o._A)(i[d]);yt(e)&&(s[e]=o.kT)}else if(i){0;for(const e in i){const t=(0,o._A)(e);if(yt(t)){const n=i[e],r=s[t]=(0,o.kJ)(n)||(0,o.mf)(n)?{type:n}:n;if(r){const e=xt(Boolean,r.type),n=xt(String,r.type);r[0]=e>-1,r[1]=n<0||e<n,(e>-1||(0,o.RI)(r,"default"))&&u.push(t)}}}}const c=[s,u];return r.set(e,c),c}function yt(e){return"$"!==e[0]}function bt(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:null===e?"null":""}function wt(e,t){return bt(e)===bt(t)}function xt(e,t){return(0,o.kJ)(t)?t.findIndex((t=>wt(t,e))):(0,o.mf)(t)&&wt(t,e)?0:-1}const Ct=e=>"_"===e[0]||"$stable"===e,_t=e=>(0,o.kJ)(e)?e.map(xn):[xn(e)],kt=(e,t,n)=>{if(t._n)return t;const r=H(((...e)=>_t(t(...e))),n);return r._c=!1,r},St=(e,t,n)=>{const r=e._ctx;for(const a in e){if(Ct(a))continue;const n=e[a];if((0,o.mf)(n))t[a]=kt(a,n,r);else if(null!=n){0;const e=_t(n);t[a]=()=>e}}},Et=(e,t)=>{const n=_t(t);e.slots.default=()=>n},It=(e,t)=>{if(32&e.vnode.shapeFlag){const n=t._;n?(e.slots=(0,r.IU)(t),(0,o.Nj)(t,"_",n)):St(t,e.slots={})}else e.slots={},t&&Et(e,t);(0,o.Nj)(e.slots,cn,1)},At=(e,t,n)=>{const{vnode:r,slots:a}=e;let i=!0,s=o.kT;if(32&r.shapeFlag){const e=t._;e?n&&1===e?i=!1:((0,o.l7)(a,t),n||1!==e||delete a._):(i=!t.$stable,St(t,a)),s=t}else t&&(Et(e,t),s={default:1});if(i)for(const o in a)Ct(o)||o in s||delete a[o]};function Ft(){return{app:null,config:{isNativeTag:o.NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Dt=0;function Rt(e,t){return function(n,r=null){(0,o.mf)(n)||(n=Object.assign({},n)),null==r||(0,o.Kn)(r)||(r=null);const a=Ft(),i=new Set;let s=!1;const u=a.app={_uid:Dt++,_component:n,_props:r,_container:null,_context:a,_instance:null,version:Kn,get config(){return a.config},set config(e){0},use(e,...t){return i.has(e)||(e&&(0,o.mf)(e.install)?(i.add(e),e.install(u,...t)):(0,o.mf)(e)&&(i.add(e),e(u,...t))),u},mixin(e){return a.mixins.includes(e)||a.mixins.push(e),u},component(e,t){return t?(a.components[e]=t,u):a.components[e]},directive(e,t){return t?(a.directives[e]=t,u):a.directives[e]},mount(o,i,l){if(!s){0;const c=hn(n,r);return c.appContext=a,i&&t?t(c,o):e(c,o,l),s=!0,u._container=o,o.__vue_app__=u,Un(c.component)||c.component.proxy}},unmount(){s&&(e(null,u._container),delete u._container.__vue_app__)},provide(e,t){return a.provides[e]=t,u}};return u}}function Tt(e,t,n,i,s=!1){if((0,o.kJ)(e))return void e.forEach(((e,r)=>Tt(e,t&&((0,o.kJ)(t)?t[r]:t),n,i,s)));if(me(i)&&!s)return;const u=4&i.shapeFlag?Un(i.component)||i.component.proxy:i.el,l=s?null:u,{i:c,r:d}=e;const p=t&&t.r,f=c.refs===o.kT?c.refs={}:c.refs,h=c.setupState;if(null!=p&&p!==d&&((0,o.HD)(p)?(f[p]=null,(0,o.RI)(h,p)&&(h[p]=null)):(0,r.dq)(p)&&(p.value=null)),(0,o.mf)(d))a(d,c,12,[l,f]);else{const t=(0,o.HD)(d),a=(0,r.dq)(d);if(t||a){const r=()=>{if(e.f){const n=t?f[d]:d.value;s?(0,o.kJ)(n)&&(0,o.Od)(n,u):(0,o.kJ)(n)?n.includes(u)||n.push(u):t?(f[d]=[u],(0,o.RI)(h,d)&&(h[d]=f[d])):(d.value=[u],e.k&&(f[e.k]=d.value))}else t?(f[d]=l,(0,o.RI)(h,d)&&(h[d]=l)):a&&(d.value=l,e.k&&(f[e.k]=l))};l?(r.id=-1,Pt(r,n)):r()}else 0}}function Ot(){}const Pt=Y;function Bt(e){return Mt(e)}function Mt(e,t){Ot();const n=(0,o.E9)();n.__VUE__=!0;const{insert:a,remove:i,patchProp:s,createElement:u,createText:l,createComment:c,setText:d,setElementText:p,parentNode:f,nextSibling:h,setScopeId:v=o.dG,cloneNode:m,insertStaticContent:g}=e,y=(e,t,n,r=null,o=null,a=null,i=!1,s=null,u=!!t.dynamicChildren)=>{if(e===t)return;e&&!ln(e,t)&&(r=Q(e),G(e,o,a,!0),e=null),-2===t.patchFlag&&(u=!1,t.dynamicChildren=null);const{type:l,ref:c,shapeFlag:d}=t;switch(l){case Xt:b(e,t,n,r);break;case Yt:w(e,t,n,r);break;case Zt:null==e&&x(t,n,r,i);break;case Kt:B(e,t,n,r,o,a,i,s,u);break;default:1&d?S(e,t,n,r,o,a,i,s,u):6&d?M(e,t,n,r,o,a,i,s,u):(64&d||128&d)&&l.process(e,t,n,r,o,a,i,s,u,te)}null!=c&&o&&Tt(c,e&&e.ref,a,t||e,!t)},b=(e,t,n,r)=>{if(null==e)a(t.el=l(t.children),n,r);else{const n=t.el=e.el;t.children!==e.children&&d(n,t.children)}},w=(e,t,n,r)=>{null==e?a(t.el=c(t.children||""),n,r):t.el=e.el},x=(e,t,n,r)=>{[e.el,e.anchor]=g(e.children,t,n,r,e.el,e.anchor)},C=({el:e,anchor:t},n,r)=>{let o;while(e&&e!==t)o=h(e),a(e,n,r),e=o;a(t,n,r)},_=({el:e,anchor:t})=>{let n;while(e&&e!==t)n=h(e),i(e),e=n;i(t)},S=(e,t,n,r,o,a,i,s,u)=>{i=i||"svg"===t.type,null==e?I(t,n,r,o,a,i,s,u):T(e,t,o,a,i,s,u)},I=(e,t,n,r,i,l,c,d)=>{let f,h;const{type:v,props:g,shapeFlag:y,transition:b,patchFlag:w,dirs:x}=e;if(e.el&&void 0!==m&&-1===w)f=e.el=m(e.el);else{if(f=e.el=u(e.type,l,g&&g.is,g),8&y?p(f,e.children):16&y&&F(e.children,f,null,r,i,l&&"foreignObject"!==v,c,d),x&&Le(e,null,r,"created"),g){for(const t in g)"value"===t||(0,o.Gg)(t)||s(f,t,null,g[t],l,e.children,r,i,J);"value"in g&&s(f,"value",null,g.value),(h=g.onVnodeBeforeMount)&&Sn(h,r,e)}A(f,e,e.scopeId,c,r)}x&&Le(e,null,r,"beforeMount");const C=(!i||i&&!i.pendingBranch)&&b&&!b.persisted;C&&b.beforeEnter(f),a(f,t,n),((h=g&&g.onVnodeMounted)||C||x)&&Pt((()=>{h&&Sn(h,r,e),C&&b.enter(f),x&&Le(e,null,r,"mounted")}),i)},A=(e,t,n,r,o)=>{if(n&&v(e,n),r)for(let a=0;a<r.length;a++)v(e,r[a]);if(o){let n=o.subTree;if(t===n){const t=o.vnode;A(e,t,t.scopeId,t.slotScopeIds,o.parent)}}},F=(e,t,n,r,o,a,i,s,u=0)=>{for(let l=u;l<e.length;l++){const u=e[l]=s?Cn(e[l]):xn(e[l]);y(null,u,t,n,r,o,a,i,s)}},T=(e,t,n,r,a,i,u)=>{const l=t.el=e.el;let{patchFlag:c,dynamicChildren:d,dirs:f}=t;c|=16&e.patchFlag;const h=e.props||o.kT,v=t.props||o.kT;let m;n&&Nt(n,!1),(m=v.onVnodeBeforeUpdate)&&Sn(m,n,t,e),f&&Le(t,e,n,"beforeUpdate"),n&&Nt(n,!0);const g=a&&"foreignObject"!==t.type;if(d?O(e.dynamicChildren,d,l,n,r,g,i):u||W(e,t,l,null,n,r,g,i,!1),c>0){if(16&c)P(l,t,h,v,n,r,a);else if(2&c&&h.class!==v.class&&s(l,"class",null,v.class,a),4&c&&s(l,"style",h.style,v.style,a),8&c){const o=t.dynamicProps;for(let t=0;t<o.length;t++){const i=o[t],u=h[i],c=v[i];c===u&&"value"!==i||s(l,i,u,c,a,e.children,n,r,J)}}1&c&&e.children!==t.children&&p(l,t.children)}else u||null!=d||P(l,t,h,v,n,r,a);((m=v.onVnodeUpdated)||f)&&Pt((()=>{m&&Sn(m,n,t,e),f&&Le(t,e,n,"updated")}),r)},O=(e,t,n,r,o,a,i)=>{for(let s=0;s<t.length;s++){const u=e[s],l=t[s],c=u.el&&(u.type===Kt||!ln(u,l)||70&u.shapeFlag)?f(u.el):n;y(u,l,c,null,r,o,a,i,!0)}},P=(e,t,n,r,a,i,u)=>{if(n!==r){for(const l in r){if((0,o.Gg)(l))continue;const c=r[l],d=n[l];c!==d&&"value"!==l&&s(e,l,d,c,u,t.children,a,i,J)}if(n!==o.kT)for(const l in n)(0,o.Gg)(l)||l in r||s(e,l,n[l],null,u,t.children,a,i,J);"value"in r&&s(e,"value",n.value,r.value)}},B=(e,t,n,r,o,i,s,u,c)=>{const d=t.el=e?e.el:l(""),p=t.anchor=e?e.anchor:l("");let{patchFlag:f,dynamicChildren:h,slotScopeIds:v}=t;v&&(u=u?u.concat(v):v),null==e?(a(d,n,r),a(p,n,r),F(t.children,n,p,o,i,s,u,c)):f>0&&64&f&&h&&e.dynamicChildren?(O(e.dynamicChildren,h,n,o,i,s,u),(null!=t.key||o&&t===o.subTree)&&Lt(e,t,!0)):W(e,t,n,p,o,i,s,u,c)},M=(e,t,n,r,o,a,i,s,u)=>{t.slotScopeIds=s,null==e?512&t.shapeFlag?o.ctx.activate(t,n,r,i,u):N(t,n,r,o,a,i,u):L(e,t,u)},N=(e,t,n,r,o,a,i)=>{const s=e.component=An(e,r,o);if(ge(e)&&(s.ctx.renderer=te),Nn(s),s.asyncDep){if(o&&o.registerDep(s,V),!e.el){const e=s.subTree=hn(Yt);w(null,e,t,n)}}else V(s,e,t,n,o,a,i)},L=(e,t,n)=>{const r=t.component=e.component;if(q(e,t,n)){if(r.asyncDep&&!r.asyncResolved)return void j(r,t,n);r.next=t,E(r.update),r.update()}else t.el=e.el,r.vnode=t},V=(e,t,n,a,i,s,u)=>{const l=()=>{if(e.isMounted){let t,{next:n,bu:r,u:a,parent:l,vnode:c}=e,d=n;0,Nt(e,!1),n?(n.el=c.el,j(e,n,u)):n=c,r&&(0,o.ir)(r),(t=n.props&&n.props.onVnodeBeforeUpdate)&&Sn(t,l,n,c),Nt(e,!0);const p=U(e);0;const h=e.subTree;e.subTree=p,y(h,p,f(h.el),Q(h),e,i,s),n.el=p.el,null===d&&K(e,p.el),a&&Pt(a,i),(t=n.props&&n.props.onVnodeUpdated)&&Pt((()=>Sn(t,l,n,c)),i)}else{let r;const{el:u,props:l}=t,{bm:c,m:d,parent:p}=e,f=me(t);if(Nt(e,!1),c&&(0,o.ir)(c),!f&&(r=l&&l.onVnodeBeforeMount)&&Sn(r,p,t),Nt(e,!0),u&&re){const n=()=>{e.subTree=U(e),re(u,e.subTree,e,i,null)};f?t.type.__asyncLoader().then((()=>!e.isUnmounted&&n())):n()}else{0;const r=e.subTree=U(e);0,y(null,r,n,a,e,i,s),t.el=r.el}if(d&&Pt(d,i),!f&&(r=l&&l.onVnodeMounted)){const e=t;Pt((()=>Sn(r,p,e)),i)}(256&t.shapeFlag||p&&me(p.vnode)&&256&p.vnode.shapeFlag)&&e.a&&Pt(e.a,i),e.isMounted=!0,t=n=a=null}},c=e.effect=new r.qq(l,(()=>k(d)),e.scope),d=e.update=()=>c.run();d.id=e.uid,Nt(e,!0),d()},j=(e,t,n)=>{t.component=e;const o=e.vnode.props;e.vnode=t,e.next=null,ht(e,t.props,o,n),At(e,t.children,n),(0,r.Jd)(),D(void 0,e.update),(0,r.lk)()},W=(e,t,n,r,o,a,i,s,u=!1)=>{const l=e&&e.children,c=e?e.shapeFlag:0,d=t.children,{patchFlag:f,shapeFlag:h}=t;if(f>0){if(128&f)return void z(l,d,n,r,o,a,i,s,u);if(256&f)return void H(l,d,n,r,o,a,i,s,u)}8&h?(16&c&&J(l,o,a),d!==l&&p(n,d)):16&c?16&h?z(l,d,n,r,o,a,i,s,u):J(l,o,a,!0):(8&c&&p(n,""),16&h&&F(d,n,r,o,a,i,s,u))},H=(e,t,n,r,a,i,s,u,l)=>{e=e||o.Z6,t=t||o.Z6;const c=e.length,d=t.length,p=Math.min(c,d);let f;for(f=0;f<p;f++){const r=t[f]=l?Cn(t[f]):xn(t[f]);y(e[f],r,n,null,a,i,s,u,l)}c>d?J(e,a,i,!0,!1,p):F(t,n,r,a,i,s,u,l,p)},z=(e,t,n,r,a,i,s,u,l)=>{let c=0;const d=t.length;let p=e.length-1,f=d-1;while(c<=p&&c<=f){const r=e[c],o=t[c]=l?Cn(t[c]):xn(t[c]);if(!ln(r,o))break;y(r,o,n,null,a,i,s,u,l),c++}while(c<=p&&c<=f){const r=e[p],o=t[f]=l?Cn(t[f]):xn(t[f]);if(!ln(r,o))break;y(r,o,n,null,a,i,s,u,l),p--,f--}if(c>p){if(c<=f){const e=f+1,o=e<d?t[e].el:r;while(c<=f)y(null,t[c]=l?Cn(t[c]):xn(t[c]),n,o,a,i,s,u,l),c++}}else if(c>f)while(c<=p)G(e[c],a,i,!0),c++;else{const h=c,v=c,m=new Map;for(c=v;c<=f;c++){const e=t[c]=l?Cn(t[c]):xn(t[c]);null!=e.key&&m.set(e.key,c)}let g,b=0;const w=f-v+1;let x=!1,C=0;const _=new Array(w);for(c=0;c<w;c++)_[c]=0;for(c=h;c<=p;c++){const r=e[c];if(b>=w){G(r,a,i,!0);continue}let o;if(null!=r.key)o=m.get(r.key);else for(g=v;g<=f;g++)if(0===_[g-v]&&ln(r,t[g])){o=g;break}void 0===o?G(r,a,i,!0):(_[o-v]=c+1,o>=C?C=o:x=!0,y(r,t[o],n,null,a,i,s,u,l),b++)}const k=x?Vt(_):o.Z6;for(g=k.length-1,c=w-1;c>=0;c--){const e=v+c,o=t[e],p=e+1<d?t[e+1].el:r;0===_[c]?y(null,o,n,p,a,i,s,u,l):x&&(g<0||c!==k[g]?$(o,n,p,2):g--)}}},$=(e,t,n,r,o=null)=>{const{el:i,type:s,transition:u,children:l,shapeFlag:c}=e;if(6&c)return void $(e.component.subTree,t,n,r);if(128&c)return void e.suspense.move(t,n,r);if(64&c)return void s.move(e,t,n,te);if(s===Kt){a(i,t,n);for(let e=0;e<l.length;e++)$(l[e],t,n,r);return void a(e.anchor,t,n)}if(s===Zt)return void C(e,t,n);const d=2!==r&&1&c&&u;if(d)if(0===r)u.beforeEnter(i),a(i,t,n),Pt((()=>u.enter(i)),o);else{const{leave:e,delayLeave:r,afterLeave:o}=u,s=()=>a(i,t,n),l=()=>{e(i,(()=>{s(),o&&o()}))};r?r(i,s,l):l()}else a(i,t,n)},G=(e,t,n,r=!1,o=!1)=>{const{type:a,props:i,ref:s,children:u,dynamicChildren:l,shapeFlag:c,patchFlag:d,dirs:p}=e;if(null!=s&&Tt(s,null,n,e,!0),256&c)return void t.ctx.deactivate(e);const f=1&c&&p,h=!me(e);let v;if(h&&(v=i&&i.onVnodeBeforeUnmount)&&Sn(v,t,e),6&c)Z(e.component,n,r);else{if(128&c)return void e.suspense.unmount(n,r);f&&Le(e,null,t,"beforeUnmount"),64&c?e.type.remove(e,t,n,o,te,r):l&&(a!==Kt||d>0&&64&d)?J(l,t,n,!1,!0):(a===Kt&&384&d||!o&&16&c)&&J(u,t,n),r&&X(e)}(h&&(v=i&&i.onVnodeUnmounted)||f)&&Pt((()=>{v&&Sn(v,t,e),f&&Le(e,null,t,"unmounted")}),n)},X=e=>{const{type:t,el:n,anchor:r,transition:o}=e;if(t===Kt)return void Y(n,r);if(t===Zt)return void _(e);const a=()=>{i(n),o&&!o.persisted&&o.afterLeave&&o.afterLeave()};if(1&e.shapeFlag&&o&&!o.persisted){const{leave:t,delayLeave:r}=o,i=()=>t(n,a);r?r(e.el,a,i):i()}else a()},Y=(e,t)=>{let n;while(e!==t)n=h(e),i(e),e=n;i(t)},Z=(e,t,n)=>{const{bum:r,scope:a,update:i,subTree:s,um:u}=e;r&&(0,o.ir)(r),a.stop(),i&&(i.active=!1,G(s,e,t,n)),u&&Pt(u,t),Pt((()=>{e.isUnmounted=!0}),t),t&&t.pendingBranch&&!t.isUnmounted&&e.asyncDep&&!e.asyncResolved&&e.suspenseId===t.pendingId&&(t.deps--,0===t.deps&&t.resolve())},J=(e,t,n,r=!1,o=!1,a=0)=>{for(let i=a;i<e.length;i++)G(e[i],t,n,r,o)},Q=e=>6&e.shapeFlag?Q(e.component.subTree):128&e.shapeFlag?e.suspense.next():h(e.anchor||e.el),ee=(e,t,n)=>{null==e?t._vnode&&G(t._vnode,null,null,!0):y(t._vnode||null,e,t,null,null,null,n),R(),t._vnode=e},te={p:y,um:G,m:$,r:X,mt:N,mc:F,pc:W,pbc:O,n:Q,o:e};let ne,re;return t&&([ne,re]=t(te)),{render:ee,hydrate:ne,createApp:Rt(ee,ne)}}function Nt({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function Lt(e,t,n=!1){const r=e.children,a=t.children;if((0,o.kJ)(r)&&(0,o.kJ)(a))for(let o=0;o<r.length;o++){const e=r[o];let t=a[o];1&t.shapeFlag&&!t.dynamicChildren&&((t.patchFlag<=0||32===t.patchFlag)&&(t=a[o]=Cn(a[o]),t.el=e.el),n||Lt(e,t))}}function Vt(e){const t=e.slice(),n=[0];let r,o,a,i,s;const u=e.length;for(r=0;r<u;r++){const u=e[r];if(0!==u){if(o=n[n.length-1],e[o]<u){t[r]=o,n.push(r);continue}a=0,i=n.length-1;while(a<i)s=a+i>>1,e[n[s]]<u?a=s+1:i=s;u<e[n[a]]&&(a>0&&(t[r]=n[a-1]),n[a]=r)}}a=n.length,i=n[a-1];while(a-- >0)n[a]=i,i=t[i];return n}const jt=e=>e.__isTeleport,Wt=e=>e&&(e.disabled||""===e.disabled),Ht=e=>"undefined"!==typeof SVGElement&&e instanceof SVGElement,Ut=(e,t)=>{const n=e&&e.to;if((0,o.HD)(n)){if(t){const e=t(n);return e}return null}return n},zt={__isTeleport:!0,process(e,t,n,r,o,a,i,s,u,l){const{mc:c,pc:d,pbc:p,o:{insert:f,querySelector:h,createText:v,createComment:m}}=l,g=Wt(t.props);let{shapeFlag:y,children:b,dynamicChildren:w}=t;if(null==e){const e=t.el=v(""),l=t.anchor=v("");f(e,n,r),f(l,n,r);const d=t.target=Ut(t.props,h),p=t.targetAnchor=v("");d&&(f(p,d),i=i||Ht(d));const m=(e,t)=>{16&y&&c(b,e,t,o,a,i,s,u)};g?m(n,l):d&&m(d,p)}else{t.el=e.el;const r=t.anchor=e.anchor,c=t.target=e.target,f=t.targetAnchor=e.targetAnchor,v=Wt(e.props),m=v?n:c,y=v?r:f;if(i=i||Ht(c),w?(p(e.dynamicChildren,w,m,o,a,i,s),Lt(e,t,!0)):u||d(e,t,m,y,o,a,i,s,!1),g)v||$t(t,n,r,l,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const e=t.target=Ut(t.props,h);e&&$t(t,e,null,l,0)}else v&&$t(t,c,f,l,1)}},remove(e,t,n,r,{um:o,o:{remove:a}},i){const{shapeFlag:s,children:u,anchor:l,targetAnchor:c,target:d,props:p}=e;if(d&&a(c),(i||!Wt(p))&&(a(l),16&s))for(let f=0;f<u.length;f++){const e=u[f];o(e,t,n,!0,!!e.dynamicChildren)}},move:$t,hydrate:qt};function $t(e,t,n,{o:{insert:r},m:o},a=2){0===a&&r(e.targetAnchor,t,n);const{el:i,anchor:s,shapeFlag:u,children:l,props:c}=e,d=2===a;if(d&&r(i,t,n),(!d||Wt(c))&&16&u)for(let p=0;p<l.length;p++)o(l[p],t,n,2);d&&r(s,t,n)}function qt(e,t,n,r,o,a,{o:{nextSibling:i,parentNode:s,querySelector:u}},l){const c=t.target=Ut(t.props,u);if(c){const u=c._lpa||c.firstChild;if(16&t.shapeFlag)if(Wt(t.props))t.anchor=l(i(e),t,s(e),n,r,o,a),t.targetAnchor=u;else{t.anchor=i(e);let s=u;while(s)if(s=i(s),s&&8===s.nodeType&&"teleport anchor"===s.data){t.targetAnchor=s,c._lpa=t.targetAnchor&&i(t.targetAnchor);break}l(u,t,c,n,r,o,a)}}return t.anchor&&i(t.anchor)}const Gt=zt,Kt=Symbol(void 0),Xt=Symbol(void 0),Yt=Symbol(void 0),Zt=Symbol(void 0),Jt=[];let Qt=null;function en(e=!1){Jt.push(Qt=e?null:[])}function tn(){Jt.pop(),Qt=Jt[Jt.length-1]||null}let nn=1;function rn(e){nn+=e}function on(e){return e.dynamicChildren=nn>0?Qt||o.Z6:null,tn(),nn>0&&Qt&&Qt.push(e),e}function an(e,t,n,r,o,a){return on(fn(e,t,n,r,o,a,!0))}function sn(e,t,n,r,o){return on(hn(e,t,n,r,o,!0))}function un(e){return!!e&&!0===e.__v_isVNode}function ln(e,t){return e.type===t.type&&e.key===t.key}const cn="__vInternal",dn=({key:e})=>null!=e?e:null,pn=({ref:e,ref_key:t,ref_for:n})=>null!=e?(0,o.HD)(e)||(0,r.dq)(e)||(0,o.mf)(e)?{i:N,r:e,k:t,f:!!n}:e:null;function fn(e,t=null,n=null,r=0,a=null,i=(e===Kt?0:1),s=!1,u=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&dn(t),ref:t&&pn(t),scopeId:L,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:a,dynamicChildren:null,appContext:null};return u?(_n(l,n),128&i&&e.normalize(l)):n&&(l.shapeFlag|=(0,o.HD)(n)?8:16),nn>0&&!s&&Qt&&(l.patchFlag>0||6&i)&&32!==l.patchFlag&&Qt.push(l),l}const hn=vn;function vn(e,t=null,n=null,a=0,i=null,s=!1){if(e&&e!==We||(e=Yt),un(e)){const r=gn(e,t,!0);return n&&_n(r,n),nn>0&&!s&&Qt&&(6&r.shapeFlag?Qt[Qt.indexOf(e)]=r:Qt.push(r)),r.patchFlag|=-2,r}if($n(e)&&(e=e.__vccOpts),t){t=mn(t);let{class:e,style:n}=t;e&&!(0,o.HD)(e)&&(t.class=(0,o.C_)(e)),(0,o.Kn)(n)&&((0,r.X3)(n)&&!(0,o.kJ)(n)&&(n=(0,o.l7)({},n)),t.style=(0,o.j5)(n))}const u=(0,o.HD)(e)?1:X(e)?128:jt(e)?64:(0,o.Kn)(e)?4:(0,o.mf)(e)?2:0;return fn(e,t,n,a,i,u,s,!0)}function mn(e){return e?(0,r.X3)(e)||cn in e?(0,o.l7)({},e):e:null}function gn(e,t,n=!1){const{props:r,ref:a,patchFlag:i,children:s}=e,u=t?kn(r||{},t):r,l={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&dn(u),ref:t&&t.ref?n&&a?(0,o.kJ)(a)?a.concat(pn(t)):[a,pn(t)]:pn(t):a,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:s,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Kt?-1===i?16:16|i:i,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&gn(e.ssContent),ssFallback:e.ssFallback&&gn(e.ssFallback),el:e.el,anchor:e.anchor};return l}function yn(e=" ",t=0){return hn(Xt,null,e,t)}function bn(e,t){const n=hn(Zt,null,e);return n.staticCount=t,n}function wn(e="",t=!1){return t?(en(),sn(Yt,null,e)):hn(Yt,null,e)}function xn(e){return null==e||"boolean"===typeof e?hn(Yt):(0,o.kJ)(e)?hn(Kt,null,e.slice()):"object"===typeof e?Cn(e):hn(Xt,null,String(e))}function Cn(e){return null===e.el||e.memo?e:gn(e)}function _n(e,t){let n=0;const{shapeFlag:r}=e;if(null==t)t=null;else if((0,o.kJ)(t))n=16;else if("object"===typeof t){if(65&r){const n=t.default;return void(n&&(n._c&&(n._d=!1),_n(e,n()),n._c&&(n._d=!0)))}{n=32;const r=t._;r||cn in t?3===r&&N&&(1===N.slots._?t._=1:(t._=2,e.patchFlag|=1024)):t._ctx=N}}else(0,o.mf)(t)?(t={default:t,_ctx:N},n=32):(t=String(t),64&r?(n=16,t=[yn(t)]):n=8);e.children=t,e.shapeFlag|=n}function kn(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const e in r)if("class"===e)t.class!==r.class&&(t.class=(0,o.C_)([t.class,r.class]));else if("style"===e)t.style=(0,o.j5)([t.style,r.style]);else if((0,o.F7)(e)){const n=t[e],a=r[e];!a||n===a||(0,o.kJ)(n)&&n.includes(a)||(t[e]=n?[].concat(n,a):a)}else""!==e&&(t[e]=r[e])}return t}function Sn(e,t,n,r=null){i(e,t,7,[n,r])}const En=Ft();let In=0;function An(e,t,n){const a=e.type,i=(t?t.appContext:e.appContext)||En,s={uid:In++,vnode:e,type:a,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new r.Bj(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:gt(a,i),emitsOptions:B(a,i),emit:null,emitted:null,propsDefaults:o.kT,inheritAttrs:a.inheritAttrs,ctx:o.kT,data:o.kT,props:o.kT,attrs:o.kT,slots:o.kT,refs:o.kT,setupState:o.kT,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=P.bind(null,s),e.ce&&e.ce(s),s}let Fn=null;const Dn=()=>Fn||N,Rn=e=>{Fn=e,e.scope.on()},Tn=()=>{Fn&&Fn.scope.off(),Fn=null};function On(e){return 4&e.vnode.shapeFlag}let Pn,Bn,Mn=!1;function Nn(e,t=!1){Mn=t;const{props:n,children:r}=e.vnode,o=On(e);ft(e,n,o,t),It(e,r);const a=o?Ln(e,t):void 0;return Mn=!1,a}function Ln(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=(0,r.Xl)(new Proxy(e.ctx,Je));const{setup:i}=n;if(i){const n=e.setupContext=i.length>1?Hn(e):null;Rn(e),(0,r.Jd)();const u=a(i,e,0,[e.props,n]);if((0,r.lk)(),Tn(),(0,o.tI)(u)){if(u.then(Tn,Tn),t)return u.then((n=>{Vn(e,n,t)})).catch((t=>{s(t,e,0)}));e.asyncDep=u}else Vn(e,u,t)}else jn(e,t)}function Vn(e,t,n){(0,o.mf)(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:(0,o.Kn)(t)&&(e.setupState=(0,r.WL)(t)),jn(e,n)}function jn(e,t,n){const a=e.type;if(!e.render){if(!t&&Pn&&!a.render){const t=a.template;if(t){0;const{isCustomElement:n,compilerOptions:r}=e.appContext.config,{delimiters:i,compilerOptions:s}=a,u=(0,o.l7)((0,o.l7)({isCustomElement:n,delimiters:i},r),s);a.render=Pn(t,u)}}e.render=a.render||o.dG,Bn&&Bn(e)}Rn(e),(0,r.Jd)(),et(e),(0,r.lk)(),Tn()}function Wn(e){return new Proxy(e.attrs,{get(t,n){return(0,r.j)(e,"get","$attrs"),t[n]}})}function Hn(e){const t=t=>{e.exposed=t||{}};let n;return{get attrs(){return n||(n=Wn(e))},slots:e.slots,emit:e.emit,expose:t}}function Un(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy((0,r.WL)((0,r.Xl)(e.exposed)),{get(t,n){return n in t?t[n]:n in Ze?Ze[n](e):void 0}}))}function zn(e,t=!0){return(0,o.mf)(e)?e.displayName||e.name:e.name||t&&e.__name}function $n(e){return(0,o.mf)(e)&&"__vccOpts"in e}const qn=(e,t)=>(0,r.Fl)(e,t,Mn);function Gn(e,t,n){const r=arguments.length;return 2===r?(0,o.Kn)(t)&&!(0,o.kJ)(t)?un(t)?hn(e,null,[t]):hn(e,t):hn(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):3===r&&un(n)&&(n=[n]),hn(e,t,n))}Symbol("");const Kn="3.2.37"},3862:function(e,t,n){"use strict";n.d(t,{D2:function(){return ge},F8:function(){return ye},W3:function(){return oe},iM:function(){return ve},nr:function(){return pe},ri:function(){return ke},sY:function(){return _e},uT:function(){return L}});n(6699);var r=n(7139),o=n(3396),a=n(4870);const i="http://www.w3.org/2000/svg",s="undefined"!==typeof document?document:null,u=s&&s.createElement("template"),l={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const o=t?s.createElementNS(i,e):s.createElement(e,n?{is:n}:void 0);return"select"===e&&r&&null!=r.multiple&&o.setAttribute("multiple",r.multiple),o},createText:e=>s.createTextNode(e),createComment:e=>s.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>s.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,n,r,o,a){const i=n?n.previousSibling:t.lastChild;if(o&&(o===a||o.nextSibling)){while(1)if(t.insertBefore(o.cloneNode(!0),n),o===a||!(o=o.nextSibling))break}else{u.innerHTML=r?`<svg>${e}</svg>`:e;const o=u.content;if(r){const e=o.firstChild;while(e.firstChild)o.appendChild(e.firstChild);o.removeChild(e)}t.insertBefore(o,n)}return[i?i.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function c(e,t,n){const r=e._vtc;r&&(t=(t?[t,...r]:[...r]).join(" ")),null==t?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function d(e,t,n){const o=e.style,a=(0,r.HD)(n);if(n&&!a){for(const e in n)f(o,e,n[e]);if(t&&!(0,r.HD)(t))for(const e in t)null==n[e]&&f(o,e,"")}else{const r=o.display;a?t!==n&&(o.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(o.display=r)}}const p=/\s*!important$/;function f(e,t,n){if((0,r.kJ)(n))n.forEach((n=>f(e,t,n)));else if(null==n&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const o=m(e,t);p.test(n)?e.setProperty((0,r.rs)(o),n.replace(p,""),"important"):e[o]=n}}const h=["Webkit","Moz","ms"],v={};function m(e,t){const n=v[t];if(n)return n;let o=(0,r._A)(t);if("filter"!==o&&o in e)return v[t]=o;o=(0,r.kC)(o);for(let r=0;r<h.length;r++){const n=h[r]+o;if(n in e)return v[t]=n}return t}const g="http://www.w3.org/1999/xlink";function y(e,t,n,o,a){if(o&&t.startsWith("xlink:"))null==n?e.removeAttributeNS(g,t.slice(6,t.length)):e.setAttributeNS(g,t,n);else{const o=(0,r.Pq)(t);null==n||o&&!(0,r.yA)(n)?e.removeAttribute(t):e.setAttribute(t,o?"":n)}}function b(e,t,n,o,a,i,s){if("innerHTML"===t||"textContent"===t)return o&&s(o,a,i),void(e[t]=null==n?"":n);if("value"===t&&"PROGRESS"!==e.tagName&&!e.tagName.includes("-")){e._value=n;const r=null==n?"":n;return e.value===r&&"OPTION"!==e.tagName||(e.value=r),void(null==n&&e.removeAttribute(t))}let u=!1;if(""===n||null==n){const o=typeof e[t];"boolean"===o?n=(0,r.yA)(n):null==n&&"string"===o?(n="",u=!0):"number"===o&&(n=0,u=!0)}try{e[t]=n}catch(l){0}u&&e.removeAttribute(t)}const[w,x]=(()=>{let e=Date.now,t=!1;if("undefined"!==typeof window){Date.now()>document.createEvent("Event").timeStamp&&(e=performance.now.bind(performance));const n=navigator.userAgent.match(/firefox\/(\d+)/i);t=!!(n&&Number(n[1])<=53)}return[e,t]})();let C=0;const _=Promise.resolve(),k=()=>{C=0},S=()=>C||(_.then(k),C=w());function E(e,t,n,r){e.addEventListener(t,n,r)}function I(e,t,n,r){e.removeEventListener(t,n,r)}function A(e,t,n,r,o=null){const a=e._vei||(e._vei={}),i=a[t];if(r&&i)i.value=r;else{const[n,s]=D(t);if(r){const i=a[t]=R(r,o);E(e,n,i,s)}else i&&(I(e,n,i,s),a[t]=void 0)}}const F=/(?:Once|Passive|Capture)$/;function D(e){let t;if(F.test(e)){let n;t={};while(n=e.match(F))e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[(0,r.rs)(e.slice(2)),t]}function R(e,t){const n=e=>{const r=e.timeStamp||w();(x||r>=n.attached-1)&&(0,o.$d)(T(e,n.value),t,5,[e])};return n.value=e,n.attached=S(),n}function T(e,t){if((0,r.kJ)(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map((e=>t=>!t._stopped&&e&&e(t)))}return t}const O=/^on[a-z]/,P=(e,t,n,o,a=!1,i,s,u,l)=>{"class"===t?c(e,o,a):"style"===t?d(e,n,o):(0,r.F7)(t)?(0,r.tR)(t)||A(e,t,n,o,s):("."===t[0]?(t=t.slice(1),1):"^"===t[0]?(t=t.slice(1),0):B(e,t,o,a))?b(e,t,o,i,s,u,l):("true-value"===t?e._trueValue=o:"false-value"===t&&(e._falseValue=o),y(e,t,o,a))};function B(e,t,n,o){return o?"innerHTML"===t||"textContent"===t||!!(t in e&&O.test(t)&&(0,r.mf)(n)):"spellcheck"!==t&&"draggable"!==t&&"translate"!==t&&("form"!==t&&(("list"!==t||"INPUT"!==e.tagName)&&(("type"!==t||"TEXTAREA"!==e.tagName)&&((!O.test(t)||!(0,r.HD)(n))&&t in e))))}"undefined"!==typeof HTMLElement&&HTMLElement;const M="transition",N="animation",L=(e,{slots:t})=>(0,o.h)(o.P$,U(e),t);L.displayName="Transition";const V={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},j=L.props=(0,r.l7)({},o.P$.props,V),W=(e,t=[])=>{(0,r.kJ)(e)?e.forEach((e=>e(...t))):e&&e(...t)},H=e=>!!e&&((0,r.kJ)(e)?e.some((e=>e.length>1)):e.length>1);function U(e){const t={};for(const r in e)r in V||(t[r]=e[r]);if(!1===e.css)return t;const{name:n="v",type:o,duration:a,enterFromClass:i=`${n}-enter-from`,enterActiveClass:s=`${n}-enter-active`,enterToClass:u=`${n}-enter-to`,appearFromClass:l=i,appearActiveClass:c=s,appearToClass:d=u,leaveFromClass:p=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:h=`${n}-leave-to`}=e,v=z(a),m=v&&v[0],g=v&&v[1],{onBeforeEnter:y,onEnter:b,onEnterCancelled:w,onLeave:x,onLeaveCancelled:C,onBeforeAppear:_=y,onAppear:k=b,onAppearCancelled:S=w}=t,E=(e,t,n)=>{G(e,t?d:u),G(e,t?c:s),n&&n()},I=(e,t)=>{e._isLeaving=!1,G(e,p),G(e,h),G(e,f),t&&t()},A=e=>(t,n)=>{const r=e?k:b,a=()=>E(t,e,n);W(r,[t,a]),K((()=>{G(t,e?l:i),q(t,e?d:u),H(r)||Y(t,o,m,a)}))};return(0,r.l7)(t,{onBeforeEnter(e){W(y,[e]),q(e,i),q(e,s)},onBeforeAppear(e){W(_,[e]),q(e,l),q(e,c)},onEnter:A(!1),onAppear:A(!0),onLeave(e,t){e._isLeaving=!0;const n=()=>I(e,t);q(e,p),ee(),q(e,f),K((()=>{e._isLeaving&&(G(e,p),q(e,h),H(x)||Y(e,o,g,n))})),W(x,[e,n])},onEnterCancelled(e){E(e,!1),W(w,[e])},onAppearCancelled(e){E(e,!0),W(S,[e])},onLeaveCancelled(e){I(e),W(C,[e])}})}function z(e){if(null==e)return null;if((0,r.Kn)(e))return[$(e.enter),$(e.leave)];{const t=$(e);return[t,t]}}function $(e){const t=(0,r.He)(e);return t}function q(e,t){t.split(/\s+/).forEach((t=>t&&e.classList.add(t))),(e._vtc||(e._vtc=new Set)).add(t)}function G(e,t){t.split(/\s+/).forEach((t=>t&&e.classList.remove(t)));const{_vtc:n}=e;n&&(n.delete(t),n.size||(e._vtc=void 0))}function K(e){requestAnimationFrame((()=>{requestAnimationFrame(e)}))}let X=0;function Y(e,t,n,r){const o=e._endId=++X,a=()=>{o===e._endId&&r()};if(n)return setTimeout(a,n);const{type:i,timeout:s,propCount:u}=Z(e,t);if(!i)return r();const l=i+"end";let c=0;const d=()=>{e.removeEventListener(l,p),a()},p=t=>{t.target===e&&++c>=u&&d()};setTimeout((()=>{c<u&&d()}),s+1),e.addEventListener(l,p)}function Z(e,t){const n=window.getComputedStyle(e),r=e=>(n[e]||"").split(", "),o=r(M+"Delay"),a=r(M+"Duration"),i=J(o,a),s=r(N+"Delay"),u=r(N+"Duration"),l=J(s,u);let c=null,d=0,p=0;t===M?i>0&&(c=M,d=i,p=a.length):t===N?l>0&&(c=N,d=l,p=u.length):(d=Math.max(i,l),c=d>0?i>l?M:N:null,p=c?c===M?a.length:u.length:0);const f=c===M&&/\b(transform|all)(,|$)/.test(n[M+"Property"]);return{type:c,timeout:d,propCount:p,hasTransform:f}}function J(e,t){while(e.length<t.length)e=e.concat(e);return Math.max(...t.map(((t,n)=>Q(t)+Q(e[n]))))}function Q(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function ee(){return document.body.offsetHeight}const te=new WeakMap,ne=new WeakMap,re={name:"TransitionGroup",props:(0,r.l7)({},j,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=(0,o.FN)(),r=(0,o.Y8)();let i,s;return(0,o.ic)((()=>{if(!i.length)return;const t=e.moveClass||`${e.name||"v"}-move`;if(!ue(i[0].el,n.vnode.el,t))return;i.forEach(ae),i.forEach(ie);const r=i.filter(se);ee(),r.forEach((e=>{const n=e.el,r=n.style;q(n,t),r.transform=r.webkitTransform=r.transitionDuration="";const o=n._moveCb=e=>{e&&e.target!==n||e&&!/transform$/.test(e.propertyName)||(n.removeEventListener("transitionend",o),n._moveCb=null,G(n,t))};n.addEventListener("transitionend",o)}))})),()=>{const u=(0,a.IU)(e),l=U(u);let c=u.tag||o.HY;i=s,s=t.default?(0,o.Q6)(t.default()):[];for(let e=0;e<s.length;e++){const t=s[e];null!=t.key&&(0,o.nK)(t,(0,o.U2)(t,l,r,n))}if(i)for(let e=0;e<i.length;e++){const t=i[e];(0,o.nK)(t,(0,o.U2)(t,l,r,n)),te.set(t,t.el.getBoundingClientRect())}return(0,o.Wm)(c,null,s)}}},oe=re;function ae(e){const t=e.el;t._moveCb&&t._moveCb(),t._enterCb&&t._enterCb()}function ie(e){ne.set(e,e.el.getBoundingClientRect())}function se(e){const t=te.get(e),n=ne.get(e),r=t.left-n.left,o=t.top-n.top;if(r||o){const t=e.el.style;return t.transform=t.webkitTransform=`translate(${r}px,${o}px)`,t.transitionDuration="0s",e}}function ue(e,t,n){const r=e.cloneNode();e._vtc&&e._vtc.forEach((e=>{e.split(/\s+/).forEach((e=>e&&r.classList.remove(e)))})),n.split(/\s+/).forEach((e=>e&&r.classList.add(e))),r.style.display="none";const o=1===t.nodeType?t:t.parentNode;o.appendChild(r);const{hasTransform:a}=Z(r);return o.removeChild(r),a}const le=e=>{const t=e.props["onUpdate:modelValue"]||!1;return(0,r.kJ)(t)?e=>(0,r.ir)(t,e):t};function ce(e){e.target.composing=!0}function de(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const pe={created(e,{modifiers:{lazy:t,trim:n,number:o}},a){e._assign=le(a);const i=o||a.props&&"number"===a.props.type;E(e,t?"change":"input",(t=>{if(t.target.composing)return;let o=e.value;n&&(o=o.trim()),i&&(o=(0,r.He)(o)),e._assign(o)})),n&&E(e,"change",(()=>{e.value=e.value.trim()})),t||(E(e,"compositionstart",ce),E(e,"compositionend",de),E(e,"change",de))},mounted(e,{value:t}){e.value=null==t?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:o,number:a}},i){if(e._assign=le(i),e.composing)return;if(document.activeElement===e&&"range"!==e.type){if(n)return;if(o&&e.value.trim()===t)return;if((a||"number"===e.type)&&(0,r.He)(e.value)===t)return}const s=null==t?"":t;e.value!==s&&(e.value=s)}};const fe=["ctrl","shift","alt","meta"],he={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&0!==e.button,middle:e=>"button"in e&&1!==e.button,right:e=>"button"in e&&2!==e.button,exact:(e,t)=>fe.some((n=>e[`${n}Key`]&&!t.includes(n)))},ve=(e,t)=>(n,...r)=>{for(let e=0;e<t.length;e++){const r=he[t[e]];if(r&&r(n,t))return}return e(n,...r)},me={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},ge=(e,t)=>n=>{if(!("key"in n))return;const o=(0,r.rs)(n.key);return t.some((e=>e===o||me[e]===o))?e(n):void 0},ye={beforeMount(e,{value:t},{transition:n}){e._vod="none"===e.style.display?"":e.style.display,n&&t?n.beforeEnter(e):be(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!==!n&&(r?t?(r.beforeEnter(e),be(e,!0),r.enter(e)):r.leave(e,(()=>{be(e,!1)})):be(e,t))},beforeUnmount(e,{value:t}){be(e,t)}};function be(e,t){e.style.display=t?e._vod:"none"}const we=(0,r.l7)({patchProp:P},l);let xe;function Ce(){return xe||(xe=(0,o.Us)(we))}const _e=(...e)=>{Ce().render(...e)},ke=(...e)=>{const t=Ce().createApp(...e);const{mount:n}=t;return t.mount=e=>{const o=Se(e);if(!o)return;const a=t._component;(0,r.mf)(a)||a.render||a.template||(a.template=o.innerHTML),o.innerHTML="";const i=n(o,!1,o instanceof SVGElement);return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),i},t};function Se(e){if((0,r.HD)(e)){const t=document.querySelector(e);return t}return e}},7139:function(e,t,n){"use strict";function r(e,t){const n=Object.create(null),r=e.split(",");for(let o=0;o<r.length;o++)n[r[o]]=!0;return t?e=>!!n[e.toLowerCase()]:e=>!!n[e]}n.d(t,{C_:function(){return f},DM:function(){return O},E9:function(){return oe},F7:function(){return S},Gg:function(){return $},HD:function(){return M},He:function(){return ne},Kn:function(){return L},NO:function(){return _},Nj:function(){return te},Od:function(){return A},PO:function(){return U},Pq:function(){return s},RI:function(){return D},S0:function(){return z},W7:function(){return H},WV:function(){return m},Z6:function(){return x},_A:function(){return K},_N:function(){return T},aU:function(){return Q},dG:function(){return C},e1:function(){return a},fY:function(){return r},hR:function(){return J},hq:function(){return g},ir:function(){return ee},j5:function(){return l},kC:function(){return Z},kJ:function(){return R},kT:function(){return w},l7:function(){return I},mf:function(){return B},rs:function(){return Y},tI:function(){return V},tR:function(){return E},vs:function(){return h},yA:function(){return u},yk:function(){return N},zw:function(){return y}});const o="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt",a=r(o);const i="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",s=r(i);function u(e){return!!e||""===e}function l(e){if(R(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],o=M(r)?p(r):l(r);if(o)for(const e in o)t[e]=o[e]}return t}return M(e)||L(e)?e:void 0}const c=/;(?![^(]*\))/g,d=/:(.+)/;function p(e){const t={};return e.split(c).forEach((e=>{if(e){const n=e.split(d);n.length>1&&(t[n[0].trim()]=n[1].trim())}})),t}function f(e){let t="";if(M(e))t=e;else if(R(e))for(let n=0;n<e.length;n++){const r=f(e[n]);r&&(t+=r+" ")}else if(L(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function h(e){if(!e)return null;let{class:t,style:n}=e;return t&&!M(t)&&(e.class=f(t)),n&&(e.style=l(n)),e}function v(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=m(e[r],t[r]);return n}function m(e,t){if(e===t)return!0;let n=P(e),r=P(t);if(n||r)return!(!n||!r)&&e.getTime()===t.getTime();if(n=N(e),r=N(t),n||r)return e===t;if(n=R(e),r=R(t),n||r)return!(!n||!r)&&v(e,t);if(n=L(e),r=L(t),n||r){if(!n||!r)return!1;const o=Object.keys(e).length,a=Object.keys(t).length;if(o!==a)return!1;for(const n in e){const r=e.hasOwnProperty(n),o=t.hasOwnProperty(n);if(r&&!o||!r&&o||!m(e[n],t[n]))return!1}}return String(e)===String(t)}function g(e,t){return e.findIndex((e=>m(e,t)))}const y=e=>M(e)?e:null==e?"":R(e)||L(e)&&(e.toString===j||!B(e.toString))?JSON.stringify(e,b,2):String(e),b=(e,t)=>t&&t.__v_isRef?b(e,t.value):T(t)?{[`Map(${t.size})`]:[...t.entries()].reduce(((e,[t,n])=>(e[`${t} =>`]=n,e)),{})}:O(t)?{[`Set(${t.size})`]:[...t.values()]}:!L(t)||R(t)||U(t)?t:String(t),w={},x=[],C=()=>{},_=()=>!1,k=/^on[^a-z]/,S=e=>k.test(e),E=e=>e.startsWith("onUpdate:"),I=Object.assign,A=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},F=Object.prototype.hasOwnProperty,D=(e,t)=>F.call(e,t),R=Array.isArray,T=e=>"[object Map]"===W(e),O=e=>"[object Set]"===W(e),P=e=>"[object Date]"===W(e),B=e=>"function"===typeof e,M=e=>"string"===typeof e,N=e=>"symbol"===typeof e,L=e=>null!==e&&"object"===typeof e,V=e=>L(e)&&B(e.then)&&B(e.catch),j=Object.prototype.toString,W=e=>j.call(e),H=e=>W(e).slice(8,-1),U=e=>"[object Object]"===W(e),z=e=>M(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,$=r(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),q=e=>{const t=Object.create(null);return n=>{const r=t[n];return r||(t[n]=e(n))}},G=/-(\w)/g,K=q((e=>e.replace(G,((e,t)=>t?t.toUpperCase():"")))),X=/\B([A-Z])/g,Y=q((e=>e.replace(X,"-$1").toLowerCase())),Z=q((e=>e.charAt(0).toUpperCase()+e.slice(1))),J=q((e=>e?`on${Z(e)}`:"")),Q=(e,t)=>!Object.is(e,t),ee=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},te=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},ne=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let re;const oe=()=>re||(re="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{})},5477:function(e,t,n){"use strict";var r=n(8692),o=n(1542),a=o(r("String.prototype.indexOf"));e.exports=function(e,t){var n=r(e,!!t);return"function"===typeof n&&a(e,".prototype.")>-1?o(n):n}},1542:function(e,t,n){"use strict";var r=n(9148),o=n(8692),a=o("%Function.prototype.apply%"),i=o("%Function.prototype.call%"),s=o("%Reflect.apply%",!0)||r.call(i,a),u=o("%Object.getOwnPropertyDescriptor%",!0),l=o("%Object.defineProperty%",!0),c=o("%Math.max%");if(l)try{l({},"a",{value:1})}catch(p){l=null}e.exports=function(e){var t=s(r,i,arguments);if(u&&l){var n=u(t,"length");n.configurable&&l(t,"length",{value:1+c(0,e.length-(arguments.length-1))})}return t};var d=function(){return s(r,a,arguments)};l?l(e.exports,"apply",{value:d}):e.exports.apply=d},3793:function(e,t,n){"use strict";n(1703);var r,o="object"===typeof Reflect?Reflect:null,a=o&&"function"===typeof o.apply?o.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};function i(e){console&&console.warn&&console.warn(e)}r=o&&"function"===typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!==e};function u(){u.init.call(this)}e.exports=u,e.exports.once=w,u.EventEmitter=u,u.prototype._events=void 0,u.prototype._eventsCount=0,u.prototype._maxListeners=void 0;var l=10;function c(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function d(e){return void 0===e._maxListeners?u.defaultMaxListeners:e._maxListeners}function p(e,t,n,r){var o,a,s;if(c(n),a=e._events,void 0===a?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),s=a[t]),void 0===s)s=a[t]=n,++e._eventsCount;else if("function"===typeof s?s=a[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),o=d(e),o>0&&s.length>o&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,i(u)}return e}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=f.bind(r);return o.listener=n,r.wrapFn=o,o}function v(e,t,n){var r=e._events;if(void 0===r)return[];var o=r[t];return void 0===o?[]:"function"===typeof o?n?[o.listener||o]:[o]:n?b(o):g(o,o.length)}function m(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"===typeof n)return 1;if(void 0!==n)return n.length}return 0}function g(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function y(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function b(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function w(e,t){return new Promise((function(n,r){function o(n){e.removeListener(t,a),r(n)}function a(){"function"===typeof e.removeListener&&e.removeListener("error",o),n([].slice.call(arguments))}C(e,t,a,{once:!0}),"error"!==t&&x(e,o,{once:!0})}))}function x(e,t,n){"function"===typeof e.on&&C(e,"error",t,n)}function C(e,t,n,r){if("function"===typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!==typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function o(a){r.once&&e.removeEventListener(t,o),n(a)}))}}Object.defineProperty(u,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!==typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");l=e}}),u.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},u.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},u.prototype.getMaxListeners=function(){return d(this)},u.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,o=this._events;if(void 0!==o)r=r&&void 0===o.error;else if(!r)return!1;if(r){var i;if(t.length>0&&(i=t[0]),i instanceof Error)throw i;var s=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw s.context=i,s}var u=o[e];if(void 0===u)return!1;if("function"===typeof u)a(u,this,t);else{var l=u.length,c=g(u,l);for(n=0;n<l;++n)a(c[n],this,t)}return!0},u.prototype.addListener=function(e,t){return p(this,e,t,!1)},u.prototype.on=u.prototype.addListener,u.prototype.prependListener=function(e,t){return p(this,e,t,!0)},u.prototype.once=function(e,t){return c(t),this.on(e,h(this,e,t)),this},u.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,h(this,e,t)),this},u.prototype.removeListener=function(e,t){var n,r,o,a,i;if(c(t),r=this._events,void 0===r)return this;if(n=r[e],void 0===n)return this;if(n===t||n.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!==typeof n){for(o=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){i=n[a].listener,o=a;break}if(o<0)return this;0===o?n.shift():y(n,o),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,i||t)}return this},u.prototype.off=u.prototype.removeListener,u.prototype.removeAllListeners=function(e){var t,n,r;if(n=this._events,void 0===n)return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var o,a=Object.keys(n);for(r=0;r<a.length;++r)o=a[r],"removeListener"!==o&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],"function"===typeof t)this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},u.prototype.listeners=function(e){return v(this,e,!0)},u.prototype.rawListeners=function(e){return v(this,e,!1)},u.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},u.prototype.listenerCount=m,u.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},166:function(e,t,n){"use strict";n.d(t,{dV:function(){return oh},bd:function(){return hg},WI:function(){return vg},W6:function(){return qm},Qk:function(){return Gm},dd:function(){return $m}});n(1703),n(2087),n(8675),n(3462),n(7380),n(1118),n(2801),n(4633);var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function o(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function a(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){e.done?o(e.value):new n((function(t){t(e.value)})).then(i,s)}u((r=r.apply(e,t||[])).next())}))}function i(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}var s=function(){function e(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return e.prototype.setPlatform=function(e,t){null!=this.platform&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+t+"."),this.platformName=e,this.platform=t},e.prototype.registerFlag=function(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){var r=this.urlFlags[e];console.warn("Setting feature override from URL "+e+": "+r+"."),this.set(e,r)}},e.prototype.get=function(e){return e in this.flags||(this.flags[e]=this.evaluateFlag(e)),this.flags[e]},e.prototype.getNumber=function(e){return this.get(e)},e.prototype.getBool=function(e){return this.get(e)},e.prototype.getFlags=function(){return this.flags},Object.defineProperty(e.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),e.prototype.set=function(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag "+e+" as it has not been registered.");this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)},e.prototype.evaluateFlag=function(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '"+e+"': no evaluation function found.");return this.flagRegistry[e].evaluationFn()},e.prototype.setFlags=function(e){this.flags=Object.assign({},e)},e.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},e.prototype.populateURLFlags=function(){var e=this;if(void 0!==this.global&&void 0!==this.global.location&&void 0!==this.global.location.search){var t,n,r=(t=this.global.location.search,n={},t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return u(n,t[0],t[1]),t.join("=")})),n);"tfjsflags"in r&&r.tfjsflags.split(",").forEach((function(t){var n=t.split(":"),r=n[0],o=n[1];e.urlFlags[r]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if(""+ +t===t)return+t;throw new Error("Could not parse value flag value "+t+" for flag "+e+".")}(r,o)}))}},e}();function u(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function l(){return c}var c=null,d=new Map,p=new Map;function f(e,t){var n=y(e,t);return d.get(n)}function h(e){return p.get(e)}function v(e){for(var t=d.entries(),n=[];;){var r=t.next(),o=r.done,a=r.value;if(o)break;var i=a[0],s=a[1];i.split("_")[0]===e&&n.push(s)}return n}function m(e){var t=e.kernelName,n=e.backendName,r=y(t,n);if(d.has(r))throw new Error("The kernel '"+t+"' for backend '"+n+"' is already registered");d.set(r,e)}function g(e){var t=e.kernelName;p.has(t)&&console.warn("Overriding the gradient for '"+t+"'"),p.set(t,e)}function y(e,t){return t+"_"+e}function b(e){for(var t=e.length,n=0,r=0;t>0;)r=Math.random()*t|0,n=e[--t],e[t]=e[r],e[r]=n}function w(e,t,n){return Math.max(e,Math.min(t,n))}function x(e){return e%2==0?e:e+1}function C(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function _(e,t){if(!e)throw new Error("string"==typeof t?t:t())}function k(e,t,n){void 0===n&&(n=""),_(A(e,t),(function(){return n+" Shapes "+e+" and "+t+" must match"}))}function S(e){_(null!=e,(function(){return"The input to the tensor constructor must be a non-null value."}))}function E(e,t,n){if(void 0===t&&(t=[]),void 0===n&&(n=!1),null==t&&(t=[]),Array.isArray(e)||H(e)&&!n)for(var r=0;r<e.length;++r)E(e[r],t,n);else t.push(e);return t}function I(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function A(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function F(e){return e%1==0}function D(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;var t=Math.exp(2*e);return(t-1)/(t+1)}function R(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function T(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function O(e,t,n){return void 0===t&&(t=function(e){return 0}),new Promise((function(r,o){var a=0,i=function(){if(e())r();else{a++;var s=t(a);null!=n&&a>=n?o():setTimeout(i,s)}};i()}))}function P(e,t){for(var n=1,r=-1,o=0;o<e.length;++o)if(e[o]>=0)n*=e[o];else if(-1===e[o]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+o);r=o}else if(e[o]<0)throw Error("Shapes can not be < 0. Found "+e[o]+" at dim "+o);if(-1===r){if(t>0&&t!==n)throw Error("Size("+t+") must match the product of shape "+e);return e}if(0===n)throw Error("Cannot infer the missing size in ["+e+"] when there are 0 elements");if(t%n!=0)throw Error("The implicit shape can't be a fractional number. Got "+t+" / "+n);var a=e.slice();return a[r]=t/n,a}function B(e,t){var n=t.length;return _((e=null==e?t.map((function(e,t){return t})):[].concat(e)).every((function(e){return e>=-n&&e<n})),(function(){return"All values in axis param must be in range [-"+n+", "+n+") but got axis "+e})),_(e.every((function(e){return F(e)})),(function(){return"All values in axis param must be integers but got axis "+e})),e.map((function(e){return e<0?n+e:e}))}function M(e,t){for(var n=[],r=[],o=null!=t&&Array.isArray(t)&&0===t.length,a=null==t||o?null:B(t,e).sort(),i=0,s=0;s<e.length;++s){if(null!=a){if(a[i]===s&&1!==e[s])throw new Error("Can't squeeze axis "+s+" since its dim '"+e[s]+"' is not 1");(null==a[i]||a[i]>s)&&1===e[s]&&(n.push(e[s]),r.push(s)),a[i]<=s&&i++}1!==e[s]&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function N(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error("Unknown data type "+e);n=new Uint8Array(t)}return n}function L(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type "+e);n=new Array(t)}return n}function V(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+t+" being uploaded contains "+r+".")}}function j(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}function W(e,t){return"complex64"!==t&&("float32"!==t||"complex64"===e)&&("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)}function H(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function U(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype "+e)}function z(e){if(null==e)return 0;var t=0;return e.forEach((function(e){return t+=e.length})),t}function $(e){return"string"==typeof e||e instanceof String}function q(e){return"boolean"==typeof e}function G(e){return"number"==typeof e}function K(e){return Array.isArray(e)?K(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array?"int32":G(e)?"float32":$(e)?"string":q(e)?"bool":"float32"}function X(e){return!!(e&&e.constructor&&e.call&&e.apply)}function Y(e,t){for(var n=t;n<e;++n)if(e%n==0)return n;return e}function Z(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function J(e,t,n){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=E(e)),n&&V(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){for(var r=new Uint8Array(e.length),o=0;o<r.length;++o)0!==Math.round(e[o])&&(r[o]=1);return r}throw new Error("Unknown data type "+t)}function Q(e,t){if(0===e.length)return t[0];var n=e.reduce((function(e,t){return e*t}));if(0===n)return[];if(n!==t.length)throw new Error("["+e+"] does not match the input size.");return function e(t,n,r){var o=new Array;if(1===n.length)for(var a=n[0],i=0;i<a;i++)o[i]=r[t+i];else{a=n[0];var s=n.slice(1),u=s.reduce((function(e,t){return e*t}));for(i=0;i<a;i++)o[i]=e(t+i*u,s,r)}return o}(0,e,t)}function ee(e,t){for(var n=te(e,t),r=0;r<n.length;r++)n[r]=1;return n}function te(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type "+t)}function ne(){return l().platform.now()}function re(e){e.forEach((function(t){_(Number.isInteger(t)&&t>=0,(function(){return"Tensor must have a shape comprised of positive integers but got shape ["+e+"]."}))}))}function oe(e,t){return void 0===t&&(t="utf-8"),t=t||"utf-8",l().platform.encode(e,t)}function ae(e,t){return void 0===t&&(t="utf-8"),t=t||"utf-8",l().platform.decode(e,t)}function ie(e,t,n){if(0===t)return 0;if(1===t)return e[0];for(var r=e[e.length-1],o=0;o<e.length-1;++o)r+=n[o]*e[o];return r}function se(e,t,n){if(0===t)return[];if(1===t)return[e];for(var r=new Array(t),o=0;o<r.length-1;++o)r[o]=Math.floor(e/n[o]),e-=r[o]*n[o];return r[r.length-1]=e,r}Object.freeze({shuffle:b,clamp:w,nearestLargerEven:x,sum:C,randUniform:function(e,t){var n=Math.random();return t*n+(1-n)*e},distSquared:function(e,t){for(var n=0,r=0;r<e.length;r++){var o=Number(e[r])-Number(t[r]);n+=o*o}return n},assert:_,assertShapesMatch:k,assertNonNull:S,flatten:E,sizeFromShape:I,isScalarShape:function(e){return 0===e.length},arraysEqual:A,isInt:F,tanh:D,sizeToSquarishShape:R,createShuffledIndices:function(e){for(var t=new Uint32Array(e),n=0;n<e;++n)t[n]=n;return b(t),t},rightPad:T,repeatedTry:O,inferFromImplicitShape:P,parseAxisParam:B,squeezeShape:M,getTypedArrayFromDType:N,getArrayFromDType:L,checkConversionForErrors:V,isValidDtype:j,hasEncodingLoss:W,isTypedArray:H,bytesPerElement:U,bytesFromStringArray:z,isString:$,isBoolean:q,isNumber:G,inferDtype:K,isFunction:X,nearestDivisor:Y,computeStrides:Z,toTypedArray:J,toNestedArray:Q,makeOnesTypedArray:ee,makeZerosTypedArray:te,now:ne,assertNonNegativeIntegerDimensions:re,fetch:function(e,t){return l().platform.fetch(e,t)},encodeString:oe,decodeString:ae,locToIndex:ie,indexToLoc:se});var ue=function(){function e(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new le)}return e.prototype.profileKernel=function(e,t,n){var r,o=this,a=this.backendTimer.time((function(){r=n()}));return r.forEach((function(n){n.data().then((function(r){!function(e,t,n){if("float32"!==t)return!1;for(var r=0;r<e.length;r++){var o=e[r];if(isNaN(o)||!isFinite(o))return console.warn("Found "+o+" in the result of '"+n+"'"),!0}}(r,n.dtype,e),a.then((function(a){var i="";null!=a.getExtraProfileInfo&&(i=a.getExtraProfileInfo()),o.logger.logKernelProfile(e,n,r,a.kernelMs,t,i)}))}))})),r},e}(),le=function(){function e(){}return e.prototype.logKernelProfile=function(e,t,n,r,o,a){var i="number"==typeof r?T(r+"ms",9):r.error,s=T(e,25),u=t.rank,l=t.size,c=T(t.shape.toString(),14),d="";for(var p in o){var f=o[p].shape||t.shape,h=f.length;d+=p+": "+h+"D "+(h>0?f:"")+" "}console.log("%c"+s+"\t%c"+i+"\t%c"+u+"D "+c+"\t%c"+l+"\t%c"+d+"\t%c"+a,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},e}(),ce=20,de=3,pe=7;function fe(e,t,n,r){var o=Z(t),a=function(e,t,n,r){var o=I(t),a=r[r.length-1],i=new Array(a).fill(0),s=t.length,u="complex64"===n?me(e):e;if(s>1)for(var l=0;l<o/a;l++)for(var c=l*a,d=0;d<a;d++)i[d]=Math.max(i[d],he(u[c+d],0,n).length);return i}(e,t,n,o),i=t.length,s=function e(t,n,r,o,a,i){void 0===i&&(i=!0);var s="complex64"===r?2:1,u=n[0],l=n.length;if(0===l)return"complex64"===r?[he(me(t)[0],0,r)]:"bool"===r?[ve(t[0])]:[t[0].toString()];if(1===l){if(u>ce){var c=de*s,d=Array.from(t.slice(0,c)),p=Array.from(t.slice((u-de)*s,u*s));return"complex64"===r&&(d=me(d),p=me(p)),["["+d.map((function(e,t){return he(e,a[t],r)})).join(", ")+", ..., "+p.map((function(e,t){return he(e,a[u-de+t],r)})).join(", ")+"]"]}return["["+("complex64"===r?me(t):Array.from(t)).map((function(e,t){return he(e,a[t],r)})).join(", ")+"]"]}var f=n.slice(1),h=o.slice(1),v=o[0]*s,m=[];if(u>ce){for(var g=0;g<de;g++){var y=(b=g*v)+v;m.push.apply(m,e(t.slice(b,y),f,r,h,a,!1))}for(m.push("..."),g=u-de;g<u;g++)y=(b=g*v)+v,m.push.apply(m,e(t.slice(b,y),f,r,h,a,g===u-1))}else for(g=0;g<u;g++){var b;y=(b=g*v)+v,m.push.apply(m,e(t.slice(b,y),f,r,h,a,g===u-1))}var w=2===l?",":"";for(m[0]="["+m[0]+w,g=1;g<m.length-1;g++)m[g]=" "+m[g]+w;var x=",\n";for(g=2;g<l;g++)x+="\n";return m[m.length-1]=" "+m[m.length-1]+"]"+(i?"":x),m}(e,t,n,o,a),u=["Tensor"];return r&&(u.push("  dtype: "+n),u.push("  rank: "+i),u.push("  shape: ["+t+"]"),u.push("  values:")),u.push(s.map((function(e){return"    "+e})).join("\n")),u.join("\n")}function he(e,t,n){return T(Array.isArray(e)?parseFloat(e[0].toFixed(pe))+" + "+parseFloat(e[1].toFixed(pe))+"j":$(e)?"'"+e+"'":"bool"===n?ve(e):parseFloat(e.toFixed(pe)).toString(),t)}function ve(e){return 0===e?"false":"true"}function me(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var ge=function(){function e(e,t,n){var r=this;if(this.dtype=t,this.shape=e.slice(),this.size=I(e),null!=n){var o=n.length;_(o===this.size,(function(){return"Length of values '"+o+"' does not match the size inferred by the shape '"+r.size+"'."}))}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||L(t,this.size),this.strides=Z(e)}return e.prototype.set=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];0===n.length&&(n=[0]),_(n.length===this.rank,(function(){return"The number of provided coordinates ("+n.length+") must match the rank ("+t.rank+")"}));var o=this.locToIndex(n);this.values[o]=e},e.prototype.get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];0===e.length&&(e=[0]);for(var n=0,r=0,o=e;r<o.length;r++){var a=o[r];if(a<0||a>=this.shape[n]){var i="Requested out of range element at "+e+".   Buffer shape="+this.shape;throw new Error(i)}n++}for(var s=e[e.length-1],u=0;u<e.length-1;++u)s+=this.strides[u]*e[u];return this.values[s]},e.prototype.locToIndex=function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t},e.prototype.indexToLoc=function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.toTensor=function(){return ye().makeTensor(this.values,this.shape,this.dtype)},e}(),ye=null,be=null,we=null,xe=function(){function e(e,t,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=I(e),this.strides=Z(e),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}return e.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},e.prototype.asScalar=function(){return this.throwIfDisposed(),_(1===this.size,(function(){return"The array must have only 1 element."})),this.reshape([])},e.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},e.prototype.as2D=function(e,t){return this.throwIfDisposed(),this.reshape([e,t])},e.prototype.as3D=function(e,t,n){return this.throwIfDisposed(),this.reshape([e,t,n])},e.prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),this.reshape([e,t,n,r])},e.prototype.as5D=function(e,t,n,r,o){return this.throwIfDisposed(),this.reshape([e,t,n,r,o])},e.prototype.asType=function(e){return this.throwIfDisposed(),be.cast(this,e)},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.buffer=function(){return a(this,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return[4,this.data()];case 1:return e=t.sent(),[2,be.buffer(this.shape,this.dtype,e)]}}))}))},e.prototype.bufferSync=function(){return be.buffer(this.shape,this.dtype,this.dataSync())},e.prototype.array=function(){return a(this,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return[4,this.data()];case 1:return e=t.sent(),[2,Q(this.shape,e)]}}))}))},e.prototype.arraySync=function(){return Q(this.shape,this.dataSync())},e.prototype.data=function(){return a(this,void 0,void 0,(function(){var e,t;return i(this,(function(n){switch(n.label){case 0:return this.throwIfDisposed(),e=ye().read(this.dataId),"string"!==this.dtype?[3,2]:[4,e];case 1:t=n.sent();try{return[2,t.map((function(e){return ae(e)}))]}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}n.label=2;case 2:return[2,e]}}))}))},e.prototype.dataSync=function(){this.throwIfDisposed();var e=ye().readSync(this.dataId);if("string"===this.dtype)try{return e.map((function(e){return ae(e)}))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e},e.prototype.bytes=function(){return a(this,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return this.throwIfDisposed(),[4,ye().read(this.dataId)];case 1:return e=t.sent(),"string"===this.dtype?[2,e]:[2,new Uint8Array(e.buffer)]}}))}))},e.prototype.dispose=function(){this.isDisposed||(ye().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),e.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},e.prototype.toFloat=function(){return this.asType("float32")},e.prototype.toInt=function(){return this.asType("int32")},e.prototype.toBool=function(){return this.asType("bool")},e.prototype.print=function(e){return void 0===e&&(e=!1),be.print(this,e)},e.prototype.reshape=function(e){return this.throwIfDisposed(),be.reshape(this,e)},e.prototype.reshapeAs=function(e){return this.throwIfDisposed(),this.reshape(e.shape)},e.prototype.expandDims=function(e){return void 0===e&&(e=0),be.expandDims(this,e)},e.prototype.cumsum=function(e,t,n){return void 0===e&&(e=0),void 0===t&&(t=!1),void 0===n&&(n=!1),be.cumsum(this,e,t,n)},e.prototype.squeeze=function(e){return this.throwIfDisposed(),be.squeeze(this,e)},e.prototype.clone=function(){return this.throwIfDisposed(),be.clone(this)},e.prototype.oneHot=function(e,t,n){return this.throwIfDisposed(),be.oneHot(this,e,t,n)},e.prototype.toString=function(e){return void 0===e&&(e=!1),fe(this.dataSync(),this.shape,this.dtype,e)},e.prototype.tile=function(e){return this.throwIfDisposed(),be.tile(this,e)},e.prototype.gather=function(e,t){return void 0===t&&(t=0),this.throwIfDisposed(),be.gather(this,e,t)},e.prototype.matMul=function(e,t,n){return void 0===t&&(t=!1),void 0===n&&(n=!1),this.throwIfDisposed(),be.matMul(this,e,t,n)},e.prototype.dot=function(e){return this.throwIfDisposed(),be.dot(this,e)},e.prototype.norm=function(e,t,n){return void 0===e&&(e="euclidean"),void 0===t&&(t=null),void 0===n&&(n=!1),this.throwIfDisposed(),be.norm(this,e,t,n)},e.prototype.slice=function(e,t){return this.throwIfDisposed(),be.slice(this,e,t)},e.prototype.reverse=function(e){return this.throwIfDisposed(),be.reverse(this,e)},e.prototype.concat=function(t,n){return void 0===n&&(n=0),this.throwIfDisposed(),t instanceof e&&(t=[t]),be.concat([this].concat(t),n)},e.prototype.split=function(e,t){return void 0===t&&(t=0),this.throwIfDisposed(),be.split(this,e,t)},e.prototype.stack=function(e,t){return void 0===t&&(t=0),be.stack([this,e],t)},e.prototype.unstack=function(e){return void 0===e&&(e=0),be.unstack(this,e)},e.prototype.pad=function(e,t){return void 0===t&&(t=0),be.pad(this,e,t)},e.prototype.batchNormalization=function(e,t,n,r,o){return void 0===n&&(n=.001),we("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(e,t,o,r,n)},e.prototype.batchNorm=function(e,t,n,r,o){return void 0===o&&(o=.001),this.throwIfDisposed(),be.batchNorm(this,e,t,n,r,o)},e.prototype.all=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),be.all(this,e,t)},e.prototype.any=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),be.any(this,e,t)},e.prototype.logSumExp=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),be.logSumExp(this,e,t)},e.prototype.sum=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),be.sum(this,e,t)},e.prototype.prod=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),be.prod(this,e,t)},e.prototype.mean=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),be.mean(this,e,t)},e.prototype.min=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),be.min(this,e,t)},e.prototype.max=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),be.max(this,e,t)},e.prototype.argMin=function(e){return void 0===e&&(e=null),this.throwIfDisposed(),be.argMin(this,e)},e.prototype.argMax=function(e){return void 0===e&&(e=null),this.throwIfDisposed(),be.argMax(this,e)},e.prototype.cast=function(e){return this.throwIfDisposed(),be.cast(this,e)},e.prototype.add=function(e){return this.throwIfDisposed(),be.add(this,e)},e.prototype.addStrict=function(e){return this.throwIfDisposed(),be.addStrict(this,e)},e.prototype.atan2=function(e){return this.throwIfDisposed(),be.atan2(this,e)},e.prototype.sub=function(e){return this.throwIfDisposed(),be.sub(this,e)},e.prototype.subStrict=function(e){return this.throwIfDisposed(),be.subStrict(this,e)},e.prototype.pow=function(e){return this.throwIfDisposed(),be.pow(this,e)},e.prototype.powStrict=function(e){return this.throwIfDisposed(),be.powStrict(this,e)},e.prototype.mul=function(e){return this.throwIfDisposed(),be.mul(this,e)},e.prototype.mulStrict=function(e){return this.throwIfDisposed(),be.mulStrict(this,e)},e.prototype.div=function(e){return this.throwIfDisposed(),be.div(this,e)},e.prototype.divNoNan=function(e){return this.throwIfDisposed(),be.divNoNan(this,e)},e.prototype.floorDiv=function(e){return this.throwIfDisposed(),be.floorDiv(this,e)},e.prototype.divStrict=function(e){return this.throwIfDisposed(),be.divStrict(this,e)},e.prototype.minimum=function(e){return this.throwIfDisposed(),be.minimum(this,e)},e.prototype.minimumStrict=function(e){return this.throwIfDisposed(),be.minimumStrict(this,e)},e.prototype.maximum=function(e){return this.throwIfDisposed(),be.maximum(this,e)},e.prototype.maximumStrict=function(e){return this.throwIfDisposed(),be.maximumStrict(this,e)},e.prototype.mod=function(e){return this.throwIfDisposed(),be.mod(this,e)},e.prototype.modStrict=function(e){return this.throwIfDisposed(),be.modStrict(this,e)},e.prototype.squaredDifferenceStrict=function(e){return this.throwIfDisposed(),be.squaredDifferenceStrict(this,e)},e.prototype.transpose=function(e){return this.throwIfDisposed(),be.transpose(this,e)},e.prototype.notEqual=function(e){return this.throwIfDisposed(),be.notEqual(this,e)},e.prototype.notEqualStrict=function(e){return this.throwIfDisposed(),be.notEqualStrict(this,e)},e.prototype.less=function(e){return this.throwIfDisposed(),be.less(this,e)},e.prototype.lessStrict=function(e){return this.throwIfDisposed(),be.lessStrict(this,e)},e.prototype.equal=function(e){return this.throwIfDisposed(),be.equal(this,e)},e.prototype.equalStrict=function(e){return this.throwIfDisposed(),be.equalStrict(this,e)},e.prototype.lessEqual=function(e){return this.throwIfDisposed(),be.lessEqual(this,e)},e.prototype.lessEqualStrict=function(e){return this.throwIfDisposed(),be.lessEqualStrict(this,e)},e.prototype.greater=function(e){return this.throwIfDisposed(),be.greater(this,e)},e.prototype.greaterStrict=function(e){return this.throwIfDisposed(),be.greaterStrict(this,e)},e.prototype.greaterEqual=function(e){return this.throwIfDisposed(),be.greaterEqual(this,e)},e.prototype.greaterEqualStrict=function(e){return this.throwIfDisposed(),be.greaterEqualStrict(this,e)},e.prototype.logicalAnd=function(e){return this.throwIfDisposed(),be.logicalAnd(this,e)},e.prototype.logicalOr=function(e){return this.throwIfDisposed(),be.logicalOr(this,e)},e.prototype.logicalNot=function(){return this.throwIfDisposed(),be.logicalNot(this)},e.prototype.logicalXor=function(e){return this.throwIfDisposed(),be.logicalXor(this,e)},e.prototype.where=function(e,t){return this.throwIfDisposed(),be.where(e,this,t)},e.prototype.neg=function(){return this.throwIfDisposed(),be.neg(this)},e.prototype.ceil=function(){return this.throwIfDisposed(),be.ceil(this)},e.prototype.floor=function(){return this.throwIfDisposed(),be.floor(this)},e.prototype.sign=function(){return this.throwIfDisposed(),be.sign(this)},e.prototype.isNaN=function(){return this.throwIfDisposed(),be.isNaN(this)},e.prototype.isInf=function(){return this.throwIfDisposed(),be.isInf(this)},e.prototype.isFinite=function(){return this.throwIfDisposed(),be.isFinite(this)},e.prototype.exp=function(){return this.throwIfDisposed(),be.exp(this)},e.prototype.expm1=function(){return this.throwIfDisposed(),be.expm1(this)},e.prototype.log=function(){return this.throwIfDisposed(),be.log(this)},e.prototype.log1p=function(){return this.throwIfDisposed(),be.log1p(this)},e.prototype.sqrt=function(){return this.throwIfDisposed(),be.sqrt(this)},e.prototype.rsqrt=function(){return this.throwIfDisposed(),be.rsqrt(this)},e.prototype.square=function(){return this.throwIfDisposed(),be.square(this)},e.prototype.reciprocal=function(){return this.throwIfDisposed(),be.reciprocal(this)},e.prototype.abs=function(){return this.throwIfDisposed(),be.abs(this)},e.prototype.clipByValue=function(e,t){return this.throwIfDisposed(),be.clipByValue(this,e,t)},e.prototype.relu=function(){return this.throwIfDisposed(),be.relu(this)},e.prototype.relu6=function(){return this.throwIfDisposed(),be.relu6(this)},e.prototype.elu=function(){return this.throwIfDisposed(),be.elu(this)},e.prototype.selu=function(){return this.throwIfDisposed(),be.selu(this)},e.prototype.leakyRelu=function(e){return void 0===e&&(e=.2),this.throwIfDisposed(),be.leakyRelu(this,e)},e.prototype.prelu=function(e){return this.throwIfDisposed(),be.prelu(this,e)},e.prototype.sigmoid=function(){return this.throwIfDisposed(),be.sigmoid(this)},e.prototype.logSigmoid=function(){return this.throwIfDisposed(),be.logSigmoid(this)},e.prototype.softplus=function(){return this.throwIfDisposed(),be.softplus(this)},e.prototype.zerosLike=function(){return this.throwIfDisposed(),be.zerosLike(this)},e.prototype.onesLike=function(){return this.throwIfDisposed(),be.onesLike(this)},e.prototype.sin=function(){return this.throwIfDisposed(),be.sin(this)},e.prototype.cos=function(){return this.throwIfDisposed(),be.cos(this)},e.prototype.tan=function(){return this.throwIfDisposed(),be.tan(this)},e.prototype.asin=function(){return this.throwIfDisposed(),be.asin(this)},e.prototype.acos=function(){return this.throwIfDisposed(),be.acos(this)},e.prototype.atan=function(){return this.throwIfDisposed(),be.atan(this)},e.prototype.sinh=function(){return this.throwIfDisposed(),be.sinh(this)},e.prototype.cosh=function(){return this.throwIfDisposed(),be.cosh(this)},e.prototype.tanh=function(){return this.throwIfDisposed(),be.tanh(this)},e.prototype.asinh=function(){return this.throwIfDisposed(),be.asinh(this)},e.prototype.acosh=function(){return this.throwIfDisposed(),be.acosh(this)},e.prototype.atanh=function(){return this.throwIfDisposed(),be.atanh(this)},e.prototype.erf=function(){return this.throwIfDisposed(),be.erf(this)},e.prototype.round=function(){return this.throwIfDisposed(),be.round(this)},e.prototype.step=function(e){return void 0===e&&(e=0),this.throwIfDisposed(),be.step(this,e)},e.prototype.softmax=function(e){return void 0===e&&(e=-1),this.throwIfDisposed(),be.softmax(this,e)},e.prototype.logSoftmax=function(e){return void 0===e&&(e=-1),this.throwIfDisposed(),be.logSoftmax(this,e)},e.prototype.resizeBilinear=function(e,t){return void 0===t&&(t=!1),this.throwIfDisposed(),be.image.resizeBilinear(this,e,t)},e.prototype.resizeNearestNeighbor=function(e,t){return void 0===t&&(t=!1),this.throwIfDisposed(),be.image.resizeNearestNeighbor(this,e,t)},e.prototype.conv1d=function(e,t,n,r,o,a){return void 0===r&&(r="NWC"),void 0===o&&(o=1),this.throwIfDisposed(),be.conv1d(this,e,t,n,r,o,a)},e.prototype.conv2d=function(e,t,n,r,o,a){return void 0===r&&(r="NHWC"),void 0===o&&(o=[1,1]),this.throwIfDisposed(),be.conv2d(this,e,t,n,r,o,a)},e.prototype.conv2dTranspose=function(e,t,n,r,o){return this.throwIfDisposed(),be.conv2dTranspose(this,e,t,n,r,o)},e.prototype.depthwiseConv2D=function(e,t,n,r,o,a){return void 0===r&&(r="NHWC"),void 0===o&&(o=[1,1]),this.throwIfDisposed(),be.depthwiseConv2d(this,e,t,n,r,o,a)},e.prototype.separableConv2d=function(e,t,n,r,o,a){return void 0===o&&(o=[1,1]),void 0===a&&(a="NHWC"),this.throwIfDisposed(),be.separableConv2d(this,e,t,n,r,o,a)},e.prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),be.avgPool(this,e,t,n,r)},e.prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),be.maxPool(this,e,t,n,r)},e.prototype.localResponseNormalization=function(e,t,n,r){return void 0===e&&(e=5),void 0===t&&(t=1),void 0===n&&(n=1),void 0===r&&(r=.5),be.localResponseNormalization(this,e,t,n,r)},e.prototype.pool=function(e,t,n,r,o){return this.throwIfDisposed(),be.pool(this,e,t,n,r,o)},e.prototype.variable=function(e,t,n){return void 0===e&&(e=!0),this.throwIfDisposed(),ye().makeVariable(this,e,t,n)},e.prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),be.unsortedSegmentSum(this,e,t)},e.prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),be.batchToSpaceND(this,e,t)},e.prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),be.spaceToBatchND(this,e,t)},e.prototype.topk=function(e,t){return void 0===e&&(e=1),void 0===t&&(t=!0),this.throwIfDisposed(),be.topk(this,e,t)},e.prototype.stridedSlice=function(e,t,n,r,o,a,i,s){return void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===i&&(i=0),void 0===s&&(s=0),this.throwIfDisposed(),be.stridedSlice(this,e,t,n,r,o,a,i,s)},e.prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),be.depthToSpace(this,e,t)},e.prototype.fft=function(){return this.throwIfDisposed(),be.spectral.fft(this)},e.prototype.ifft=function(){return this.throwIfDisposed(),be.spectral.ifft(this)},e.prototype.rfft=function(){return this.throwIfDisposed(),be.spectral.rfft(this)},e.prototype.irfft=function(){return this.throwIfDisposed(),be.spectral.irfft(this)},e}();Object.defineProperty(xe,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.dataId&&null!=e.shape&&null!=e.dtype}});var Ce,_e,ke,Se,Ee,Ie=function(e){function t(t,n,r,o){var a=e.call(this,t.shape,t.dtype,t.dataId,o)||this;return a.trainable=n,a.name=r,a}return o(t,e),t.prototype.assign=function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value ("+e.dtype+") and previous value ("+this.dtype+") must match");if(!A(e.shape,this.shape))throw new Error("shape of the new value ("+e.shape+") and previous value ("+this.shape+") must match");ye().disposeTensor(this),this.dataId=e.dataId,ye().incRef(this,null)},t.prototype.dispose=function(){ye().disposeVariable(this),this.isDisposedInternal=!0},t}(xe);Object.defineProperty(Ie,Symbol.hasInstance,{value:function(e){return e instanceof xe&&null!=e.assign&&e.assign instanceof Function}}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(Ce||(Ce={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(_e||(_e={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(ke||(ke={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(Se||(Se={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(Ee||(Ee={}));var Ae={float32:Se,int32:_e,bool:ke,complex64:Ee};function Fe(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast "+e+" with "+t)}return Ae[e][t]}function De(e){return Fe(e,"int32")}function Re(e,t){if(e.dtype===t.dtype)return[e,t];var n=Fe(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function Te(e,t){_(e.dtype===t.dtype,(function(){return"The dtypes of the first("+e.dtype+") and second("+t.dtype+") input must match"}))}function Oe(e){var t=[];return function e(t,n,r){if(null!=t)if(t instanceof xe)n.push(t);else if(o=t,Array.isArray(o)||"object"==typeof o){var o,a=t;for(var i in a){var s=a[i];r.has(s)||(r.add(s),e(s,n,r))}}}(e,t,new Set),t}Object.freeze({makeTypesMatch:Re,assertTypesMatch:Te,isTensorInList:function(e,t){return t.some((function(t){return t.id===e.id}))},getTensorsInContainer:Oe});var Pe,Be=function(){function e(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return e.prototype.dispose=function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()},e}(),Me=function(){function e(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new Be}return e.prototype.ready=function(){return a(this,void 0,void 0,(function(){var e,t,n;return i(this,(function(r){switch(r.label){case 0:if(null!=this.pendingBackendInit)return[2,this.pendingBackendInit.then((function(){}))];if(null!=this.backendInstance)return[2];e=this.getSortedBackends(),t=0,r.label=1;case 1:return t<e.length?(n=e[t],[4,this.initializeBackend(n).success]):[3,5];case 2:return r.sent()?[4,this.setBackend(n)]:[3,4];case 3:return r.sent(),[2];case 4:return t++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}}))}))},Object.defineProperty(e.prototype,"backend",{get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '"+t+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(t)}return this.backendInstance},enumerable:!0,configurable:!0}),e.prototype.backendNames=function(){return Object.keys(this.registryFactory)},e.prototype.findBackend=function(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;if(this.initializeBackend(e).asyncInit)return null}return this.registry[e]},e.prototype.findBackendFactory=function(e){return e in this.registryFactory?this.registryFactory[e].factory:null},e.prototype.registerBackend=function(e,t,n){return void 0===n&&(n=1),e in this.registryFactory?(console.warn(e+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)},e.prototype.setBackend=function(e){return a(this,void 0,void 0,(function(){var t,n,r;return i(this,(function(o){switch(o.label){case 0:if(null==this.registryFactory[e])throw new Error("Backend name '"+e+"' not found in registry");return this.backendName=e,null!=this.registry[e]?[3,4]:(this.backendInstance=null,t=this.initializeBackend(e),n=t.success,t.asyncInit?[4,n]:[3,2]);case 1:return r=o.sent(),[3,3];case 2:r=n,o.label=3;case 3:if(!r)return[2,!1];o.label=4;case 4:return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new ue(this.backendInstance),[2,!0]}}))}))},e.prototype.setupRegisteredKernels=function(){var e=this;v(this.backendName).forEach((function(t){null!=t.setupFunc&&t.setupFunc(e.backendInstance)}))},e.prototype.disposeRegisteredKernels=function(e){var t=this;v(e).forEach((function(n){null!=n.disposeFunc&&n.disposeFunc(t.registry[e])}))},e.prototype.initializeBackend=function(e){var t=this,n=this.registryFactory[e];if(null==n)throw new Error("Cannot initialize backend "+e+", no registration found.");try{var r=n.factory();if(Promise.resolve(r)===r){var o=++this.pendingBackendInitId,a=r.then((function(n){return!(o<t.pendingBackendInitId)&&(t.registry[e]=n,t.pendingBackendInit=null,!0)})).catch((function(n){return!(o<t.pendingBackendInitId)&&(t.pendingBackendInit=null,console.warn("Initialization of backend "+e+" failed"),console.warn(n.stack||n.message),!1)}));return this.pendingBackendInit=a,{success:a,asyncInit:!0}}return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(t){return console.warn("Initialization of backend "+e+" failed"),console.warn(t.stack||t.message),{success:!1,asyncInit:!1}}},e.prototype.removeBackend=function(e){if(!(e in this.registryFactory))throw new Error(e+" backend not found in registry");this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},e.prototype.getSortedBackends=function(){var e=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority}))},e.prototype.initializeBackendsAndReturnBest=function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var n=e[t],r=this.initializeBackend(n),o=r.success,a=r.asyncInit;if(a||o)return{name:n,asyncInit:a}}throw new Error("Could not initialize any backends, all backend initializations failed.")},e.prototype.moveData=function(e,t){var n=this.state.tensorInfo.get(t),r=n.backend,o=this.readSync(t);r.disposeData(t),n.backend=e,e.move(t,o,n.shape,n.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},e.prototype.tidy=function(e,t){var n,r=this,o=null;if(null==t){if("function"!=typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");o=e}return this.scopedRun((function(){return r.startScope(o)}),(function(){return r.endScope(n)}),(function(){return(n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n}))},e.prototype.scopedRun=function(e,t,n){e();try{var r=n();return t(),r}catch(e){throw t(),e}},e.prototype.nextTensorId=function(){return e.nextTensorId++},e.prototype.nextVariableId=function(){return e.nextVariableId++},e.prototype.clone=function(e){var t=this.makeTensorFromDataId(e.dataId,e.shape,e.dtype),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(function(e){return{x:function(){return e.toFloat()}}}),[]),t},e.prototype.runKernel=function(e,t,n,r,o){return this.runKernelFunc(null,t,null,e,n,r,o)},e.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},e.prototype.checkKernelForMemLeak=function(e,t,n){var r=this.backend.numDataIds(),o=0;n.forEach((function(e){o+="complex64"===e.dtype?3:1}));var a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],i=r-t-o-a;if(i>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+i+" data ids) after running '"+e+"'")},e.prototype.runKernelFunc=function(e,t,n,r,o,a,i){var s,u=this;void 0===a&&(a=[]),void 0===i&&(i=[]);var l=[],c=this.isTapeOn();null==r&&(r=null!=this.state.activeScope?this.state.activeScope.name:"");var d,p=function(e){c&&(l=e.map((function(e){return u.keep(u.clone(e))})))},h=this.state.numBytes,v=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var m,g=f(r,this.backendName);return d=null!=g?function(){var e=u.backend.numDataIds();m=g.kernelFunc({inputs:t,attrs:o,backend:u.backend});var n=Array.isArray(m)?m:[m];u.shouldCheckForMemLeaks()&&u.checkKernelForMemLeak(r,e,n);var s=n.map((function(e){var t=e.dataId,n=e.shape,r=e.dtype;return u.makeTensorFromDataId(t,n,r)})),l=s.filter((function(e,t){return i[t]}));return p((a||[]).slice().concat(l)),s}:function(){var t=u.backend.numDataIds();m=u.tidy((function(){return e(u.backend,p)}));var n=Array.isArray(m)?m:[m];return u.shouldCheckForMemLeaks()&&u.checkKernelForMemLeak(r,t,n),n},this.scopedRun((function(){return u.state.kernelDepth++}),(function(){return u.state.kernelDepth--}),(function(){s=u.ENV.getBool("DEBUG")?u.profiler.profileKernel(r,t,(function(){return d()})):d()})),c&&this.addTapeNode(r,t,s,n,l),this.state.profiling&&this.state.activeProfile.kernels.push({name:r,bytesAdded:this.state.numBytes-h,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-v,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(t).map((function(e){return t[e].shape})),outputShapes:s.map((function(e){return e.shape}))}),Array.isArray(m)?s:s[0]},e.prototype.makeTensor=function(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;var o=e;"string"===n&&$(e[0])&&(o=e.map((function(e){return oe(e)})));var a=r.write(o,t,n),i=new xe(t,n,a,this.nextTensorId());if(this.incRef(i,r),"string"===n){var s=this.state.tensorInfo.get(a),u=z(o);this.state.numBytes+=u-s.bytes,s.bytes=u}return i},e.prototype.makeTensorFromDataId=function(e,t,n,r){var o=new xe(t,n=n||"float32",e,this.nextTensorId());return this.incRef(o,r),o},e.prototype.makeVariable=function(e,t,n,r){void 0===t&&(t=!0),n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.asType(r));var o=new Ie(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[o.name])throw new Error("Variable with name "+o.name+" was already registered");return this.state.registeredVariables[o.name]=o,this.incRef(o,this.backend),o},e.prototype.incRef=function(e,t){var n=this.state.tensorInfo.has(e.dataId)?this.state.tensorInfo.get(e.dataId).refCount:0;if(this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++,0===n){this.state.numDataBuffers++;var r=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(r=e.size*U(e.dtype)),this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:r,refCount:0}),this.state.numBytes+=r}this.state.tensorInfo.get(e.dataId).refCount++,e instanceof Ie||this.track(e)},e.prototype.disposeTensor=function(e){if(this.state.tensorInfo.has(e.dataId)){this.state.numTensors--,"string"===e.dtype&&this.state.numStringTensors--;var t=this.state.tensorInfo.get(e.dataId);t.refCount<=1?("complex64"!==e.dtype&&(this.state.numBytes-=t.bytes),this.state.numDataBuffers--,t.backend.disposeData(e.dataId),this.state.tensorInfo.delete(e.dataId)):this.state.tensorInfo.get(e.dataId).refCount--}},e.prototype.disposeVariables=function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}},e.prototype.disposeVariable=function(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]},e.prototype.memory=function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e},e.prototype.profile=function(e){return a(this,void 0,void 0,(function(){var t,n;return i(this,(function(r){return this.state.profiling=!0,t=this.state.numBytes,n=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map((function(e){return e.totalBytesSnapshot}))),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n,[2,this.state.activeProfile]}))}))},e.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth},e.prototype.addTapeNode=function(e,t,n,r,o){var a=this,i={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:o},s=h(e);null!=s&&(r=s.gradFunc),null!=r&&(i.gradient=function(e){return e=e.map((function(e,t){if(null==e){var r=n[t],o=te(r.size,r.dtype);return a.makeTensor(o,r.shape,r.dtype)}return e})),r(e.length>1?e:e[0],o)}),this.state.activeTape.push(i)},e.prototype.keep=function(e){return e.kept=!0,e},e.prototype.startTape=function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++},e.prototype.endTape=function(){this.state.gradientDepth--},e.prototype.startScope=function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t},e.prototype.endScope=function(e){for(var t=this,n=Oe(e),r=new Set(n.map((function(e){return e.id}))),o=0;o<this.state.activeScope.track.length;o++){var a=this.state.activeScope.track[o];a.kept||r.has(a.id)||a.dispose()}var i=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach((function(e){e.kept||e.scopeId!==i.id||t.track(e)}))},e.prototype.gradients=function(e,t,n,r){var o=this;if(void 0===r&&(r=!1),_(t.length>0,(function(){return"gradients() received an empty list of xs."})),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '"+n.dtype+"'");var a=this.scopedRun((function(){return o.startTape()}),(function(){return o.endTape()}),(function(){return o.tidy("forward",e)}));_(a instanceof xe,(function(){return"The result y returned by f() must be a tensor."}));var i=function(e,t,n){for(var r={},o={},a=0;a<t.length;a++)r[t[a].id]=!0;for(a=0;a<e.length;a++){var i=(h=e[a]).inputs;for(var s in i){for(var u=i[s],l=!1,c=0;c<t.length;c++)if(r[u.id]){h.outputs.forEach((function(e){return r[e.id]=!0})),l=!0,o[h.id]=!0;break}if(l)break}}var d={};d[n.id]=!0;var p={};for(a=e.length-1;a>=0;a--)for(i=(h=e[a]).inputs,c=0;c<h.outputs.length;c++)if(d[h.outputs[c].id]){for(var s in i)d[i[s].id]=!0,p[h.id]=!0;break}var f=[];for(a=0;a<e.length;a++){var h;if(o[(h=e[a]).id]&&p[h.id]){var v={};for(var s in h.inputs){var m=h.inputs[s];r[m.id]&&(v[s]=m)}var g=Object.assign({},h);g.inputs=v,g.outputs=h.outputs,f.push(g)}}return f}(this.state.activeTape,t,a);if(!r&&0===i.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var e,r,s={};s[a.id]=null==n?(e=a.shape,r=ee(I(e),"float32"),Ne.makeTensor(r,e,"float32")):n,function(e,t,n){for(var r=function(r){var o=t[r],a=[];if(o.outputs.forEach((function(t){var n=e[t.id];null!=n?a.push(n):a.push(null)})),null==o.gradient)throw new Error("Cannot compute gradient: gradient function not found for "+o.kernelName+".");var i=o.gradient(a),s=function(t){if(!(t in i))throw new Error("Cannot backprop through input "+t+". Available gradients found: "+Object.keys(i)+".");var r=n((function(){return i[t]()}));if("float32"!==r.dtype)throw new Error("Error in gradient for op "+o.kernelName+". The gradient of input "+t+" must have 'float32' dtype, but has '"+r.dtype+"'");var a=o.inputs[t];if(!A(r.shape,a.shape))throw new Error("Error in gradient for op "+o.kernelName+". The gradient of input '"+t+"' has shape '"+r.shape+"', which does not match the shape of the input '"+a.shape+"'");if(null==e[a.id])e[a.id]=r;else{var s=e[a.id];e[a.id]=s.add(r),s.dispose()}};for(var u in o.inputs)s(u)},o=t.length-1;o>=0;o--)r(o)}(s,i,(function(e){return o.tidy(e)}));var u=t.map((function(e){return s[e.id]}));return 0===o.state.gradientDepth&&(o.state.activeTape.forEach((function(e){for(var t=0,n=e.saved;t<n.length;t++)n[t].dispose()})),o.state.activeTape=null),{value:a,grads:u}}))},e.prototype.customGrad=function(e){var t=this;return _(X(e),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var n,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];_(r.every((function(e){return e instanceof xe})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var a={};return r.forEach((function(e,t){a[t]=e})),t.runKernelFunc((function(t,o){return _((n=e.apply(void 0,r.concat([o]))).value instanceof xe,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),_(X(n.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),n.value}),a,(function(e,t){var o=n.gradFunc(e,t),a=Array.isArray(o)?o:[o];_(a.length===r.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),_(a.every((function(e){return e instanceof xe})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var i={};return a.forEach((function(e,t){i[t]=function(){return e}})),i}))}},e.prototype.readSync=function(e){return this.state.tensorInfo.get(e).backend.readSync(e)},e.prototype.read=function(e){return this.state.tensorInfo.get(e).backend.read(e)},e.prototype.time=function(e){return a(this,void 0,void 0,(function(){var t,n;return i(this,(function(r){switch(r.label){case 0:return t=ne(),[4,this.backend.time(e)];case 1:return(n=r.sent()).wallMs=ne()-t,[2,n]}}))}))},e.prototype.track=function(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e},Object.defineProperty(e.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),e.prototype.reset=function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new Be,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},e.nextTensorId=0,e.nextVariableId=0,e}(),Ne=function(){var e=function(){if(null==Pe){var e=void 0;if("undefined"!=typeof window)e=window;else if("undefined"!=typeof n.g)e=n.g;else if("undefined"!=typeof process)e=process;else{if("undefined"==typeof self)throw new Error("Could not find a global object");e=self}Pe=e}return Pe}();if(null==e._tfengine){var t=new s(e);e._tfengine=new Me(t)}return function(e){c=e}(e._tfengine.ENV),ye=function(){return e._tfengine},e._tfengine}();function Le(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}var Ve=l();Ve.registerFlag("DEBUG",(function(){return!1}),(function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),Ve.registerFlag("IS_BROWSER",(function(){return Le()})),Ve.registerFlag("IS_NODE",(function(){return"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node})),Ve.registerFlag("IS_CHROME",(function(){return"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),Ve.registerFlag("PROD",(function(){return!1})),Ve.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return Ve.getBool("DEBUG")})),Ve.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),Ve.registerFlag("IS_TEST",(function(){return!1}));var je,We,He,Ue={},ze={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function $e(e,t){Ue[e]=t}function qe(e){e in Ue||(Ue[e]=function(e){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var t=function(e){if("undefined"!=typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e);return t.addEventListener("webglcontextlost",(function(t){t.preventDefault(),delete Ue[e]}),!1),1===e?t.getContext("webgl",ze)||t.getContext("experimental-webgl",ze):t.getContext("webgl2",ze)}(e));var t=Ue[e];return t.isContextLost()?(delete Ue[e],qe(e)):(t.disable(t.DEPTH_TEST),t.disable(t.STENCIL_TEST),t.disable(t.BLEND),t.disable(t.DITHER),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SAMPLE_COVERAGE),t.enable(t.SCISSOR_TEST),t.enable(t.CULL_FACE),t.cullFace(t.BACK),Ue[e])}function Ge(e,t){return[t,e]}function Ke(e){var t=I(e);return R(Math.ceil(t/4))}function Xe(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function Ye(e,t){var n,r,o,a,i,s,u,c,d,p=e;return 2===l().getNumber("WEBGL_VERSION")?(n=p.R32F,r=p.R16F,o=p.RGBA16F,a=p.RGBA32F,i=p.RED,s=4,u=1,c=p.HALF_FLOAT,d=p.FLOAT):(n=e.RGBA,r=e.RGBA,o=e.RGBA,a=p.RGBA,i=e.RGBA,s=4,u=4,c=null!=t?t.HALF_FLOAT_OES:null,d=e.FLOAT),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:o,internalFormatPackedFloat:a,textureFormatFloat:i,downloadTextureFormat:e.RGBA,downloadUnpackNumChannels:s,defaultNumChannels:u,textureTypeHalfFloat:c,textureTypeFloat:d}}function Ze(e,t,n){var r=n();return t&&function(e){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+tt(e,t))}(e),r}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(je||(je={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(We||(We={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(He||(He={}));var Je=5.96e-8,Qe=65504;function et(e){return!!(l().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||Je<Math.abs(e)&&Math.abs(e)<Qe)}function tt(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+t}}function nt(e,t,n){return St(e,t,(function(){return e.getExtension(n)}),'Extension "'+n+'" not supported on this browser.')}function rt(e,t,n){var r=St(e,t,(function(){return e.createShader(e.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(Ze(e,t,(function(){return e.shaderSource(r,n)})),Ze(e,t,(function(){return e.compileShader(r)})),!1===e.getShaderParameter(r,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function ot(e,t,n){var r=St(e,t,(function(){return e.createShader(e.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(Ze(e,t,(function(){return e.shaderSource(r,n)})),Ze(e,t,(function(){return e.compileShader(r)})),!1===e.getShaderParameter(r,e.COMPILE_STATUS))throw function(e,t){var n=st.exec(t);if(null==n)return console.log("Couldn't parse line number in error: "+t),void console.log(e);for(var r=+n[1],o=e.split("\n"),a=o.length.toString().length+2,i=o.map((function(e,t){return T((t+1).toString(),a)+e})),s=0,u=0;u<i.length;u++)s=Math.max(i[u].length,s);var l=i.slice(0,r-1),c=i.slice(r-1,r),d=i.slice(r);console.log(l.join("\n")),console.log(t.split("\n")[0]),console.log("%c "+T(c[0],s),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(d.join("\n"))}(n,e.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var at,it,st=/ERROR: [0-9]+:([0-9]+):/g;function ut(e,t){return St(e,t,(function(){return e.createProgram()}),"Unable to create WebGLProgram.")}function lt(e,t,n){if(Ze(e,t,(function(){return e.linkProgram(n)})),!1===e.getProgramParameter(n,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}function ct(e,t,n){if(Ze(e,t,(function(){return e.validateProgram(n)})),!1===e.getProgramParameter(n,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function dt(e,t,n){var r=St(e,t,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return Ze(e,t,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),Ze(e,t,(function(){return e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW)})),r}function pt(e,t,n){var r=St(e,t,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return Ze(e,t,(function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r)})),Ze(e,t,(function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,n,e.STATIC_DRAW)})),r}function ft(e,t){return St(e,t,(function(){return e.createTexture()}),"Unable to create WebGLTexture.")}function ht(e,t){var n=l().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var r="["+e+"x"+t+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n)throw r="["+e+"x"+t+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU ["+n+"x"+n+"].")}function vt(e,t){return St(e,t,(function(){return e.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}function mt(e,t,n,r,o,a,i,s){var u=e.getAttribLocation(n,r);return-1!==u&&(Ze(e,t,(function(){return e.bindBuffer(e.ARRAY_BUFFER,o)})),Ze(e,t,(function(){return e.vertexAttribPointer(u,a,e.FLOAT,!1,i,s)})),Ze(e,t,(function(){return e.enableVertexAttribArray(u)})),!0)}function gt(e,t,n,r){Et(e,r),Ze(e,t,(function(){return e.activeTexture(e.TEXTURE0+r)})),Ze(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,n)}))}function yt(e,t,n,r){return St(e,t,(function(){return e.getUniformLocation(n,r)}),'uniform "'+r+'" not present in program.')}function bt(e,t,n){return e.getUniformLocation(t,n)}function wt(e,t,n,r,o,a){Ze(e,t,(function(){return gt(e,t,r,a)})),Ze(e,t,(function(){return e.uniform1i(o,a)}))}function xt(e,t,n,r){Ze(e,t,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,r)})),Ze(e,t,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0)}))}function Ct(e,t,n){Ze(e,t,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)})),Ze(e,t,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)}))}function _t(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+kt(e,t))}function kt(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+t}}function St(e,t,n,r){var o=Ze(e,t,(function(){return n()}));if(null==o)throw new Error(r);return o}function Et(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n)throw new Error("textureUnit must be in [gl.TEXTURE0, gl.TEXTURE"+n+"].")}function It(e,t){return void 0===t&&(t=2),I(e.slice(0,e.length-t))}function At(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function Ft(e){var t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[It(e)].concat(At(e))),t}function Dt(e,t){var n;void 0===t&&(t=!1);var r=l().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(r*=2,1===(e=e.map((function(t,n){return n>=e.length-2?x(e[n]):e[n]}))).length&&(e=[2,e[0]])),2!==e.length){var o=M(e);e=o.newShape}var a=I(e);if(e.length<=1&&a<=r)return[1,a];if(2===e.length&&e[0]<=r&&e[1]<=r)return e;if(3===e.length&&e[0]*e[1]<=r&&e[2]<=r)return[e[0]*e[1],e[2]];if(3===e.length&&e[0]<=r&&e[1]*e[2]<=r)return[e[0],e[1]*e[2]];if(4===e.length&&e[0]*e[1]*e[2]<=r&&e[3]<=r)return[e[0]*e[1]*e[2],e[3]];if(4===e.length&&e[0]<=r&&e[1]*e[2]*e[3]<=r)return[e[0],e[1]*e[2]*e[3]];if(t){var i=It(e),s=2,u=2;return e.length&&(s=(n=At(e))[0],u=n[1]),R(a=i*(s/2)*(u/2)).map((function(e){return 2*e}))}return R(a)}function Rt(e){return e%2==0}function Tt(e,t){if(A(e=e.slice(-2),t=t.slice(-2)))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){var n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r)return!0;if(Rt(n)&&Rt(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&Rt(e[0])&&Rt(t[0])}function Ot(e){if(null==at){var t=qe(e);at=t.getParameter(t.MAX_TEXTURE_SIZE)}return at}function Pt(e){if(null==it){var t=qe(e);it=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,it)}function Bt(e){if(0===e)return 0;var t=qe(e);return Mt(t,"EXT_disjoint_timer_query_webgl2")&&2===e?2:Mt(t,"EXT_disjoint_timer_query")?1:0}function Mt(e,t){return null!=e.getExtension(t)}function Nt(e){try{if(null!=qe(e))return!0}catch(e){return!1}return!1}function Lt(e){if(0===e)return!1;var t=qe(e);if(1===e){if(!Mt(t,"OES_texture_float"))return!1}else if(!Mt(t,"EXT_color_buffer_float"))return!1;return jt(t)}function Vt(e){if(0===e)return!1;var t=qe(e);if(1!==e){if(Mt(t,"EXT_color_buffer_float"))return jt(t);if(Mt(t,"EXT_color_buffer_half_float")){var n=t.getExtension("EXT_color_buffer_half_float");return function(e,t){var n=Ye(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);var o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(o),a}(t,n)}return!1}return!!Mt(t,"OES_texture_float")&&!!Mt(t,"WEBGL_color_buffer_float")&&jt(t)}function jt(e){var t=Ye(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var o=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),o}function Wt(e){return 2===e&&null!=qe(e).fenceSync}var Ht=Object.freeze({callAndCheck:Ze,canBeRepresented:et,getWebGLErrorMessage:tt,getExtensionOrThrow:nt,createVertexShader:rt,createFragmentShader:ot,createProgram:ut,linkProgram:lt,validateProgram:ct,createStaticVertexBuffer:dt,createStaticIndexBuffer:pt,getNumChannels:function(){return 2===l().getNumber("WEBGL_VERSION")?1:4},createTexture:ft,validateTextureSize:ht,createFramebuffer:vt,bindVertexBufferToProgramAttribute:mt,bindTextureUnit:gt,unbindTextureUnit:function(e,t,n){Et(e,n),Ze(e,t,(function(){return e.activeTexture(e.TEXTURE0+n)})),Ze(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))},getProgramUniformLocationOrThrow:yt,getProgramUniformLocation:bt,bindTextureToProgramUniformSampler:wt,bindCanvasToFramebuffer:function(e,t){Ze(e,t,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)})),Ze(e,t,(function(){return e.viewport(0,0,e.canvas.width,e.canvas.height)})),Ze(e,t,(function(){return e.scissor(0,0,e.canvas.width,e.canvas.height)}))},bindColorTextureToFramebuffer:xt,unbindColorTextureFromFramebuffer:Ct,validateFramebuffer:_t,getFramebufferErrorMessage:kt,getBatchDim:It,getRowsCols:At,getShapeAs3D:Ft,getTextureShapeFromLogicalShape:Dt,isReshapeFree:Tt,getWebGLMaxTextureSize:Ot,resetMaxTextureSize:function(){at=null},resetMaxTexturesInShader:function(){it=null},getMaxTexturesInShader:Pt,getWebGLDisjointQueryTimerVersion:Bt,hasExtension:Mt,isWebGLVersionEnabled:Nt,isCapableOfRenderingToFloatTexture:Lt,isDownloadFloatTextureEnabled:Vt,isWebGLFenceEnabled:Wt}),Ut=l();function zt(e){l().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function $t(e,t){return Ne.tidy(e,t)}function qt(e){Oe(e).forEach((function(e){return e.dispose()}))}function Gt(e){return Ne.keep(e)}function Kt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];l().getBool("IS_TEST")||console.warn.apply(console,e)}function Xt(e,t){var n=e;if(H(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];for(var r=[];Array.isArray(n)||H(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&l().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function e(t,n,r){if(r=r||[],Array.isArray(t)||H(t)){_(n.length>0,(function(){return"Element arr["+r.join("][")+"] should be a primitive, but is an array of "+t.length+" elements"})),_(t.length===n[0],(function(){return"Element arr["+r.join("][")+"] should have "+n[0]+" elements, but has "+t.length+" elements"}));for(var o=n.slice(1),a=0;a<t.length;++a)e(t[a],o,r.concat(a))}else _(0===n.length,(function(){return"Element arr["+r.join("][")+"] is a primitive, but should be an array/TypedArray of "+n[0]+" elements"}))}(e,r,[]),r}function Yt(e,t,n,r){if(null!=e&&("numeric"!==e&&e!==t||"numeric"===e&&"string"===t))throw new Error("Argument '"+n+"' passed to '"+r+"' must be "+e+" tensor, but got "+t+" tensor")}function Zt(e,t,n,r){if(void 0===r&&(r="numeric"),e instanceof xe)return Yt(r,e.dtype,t,n),e;var o=K(e);if("string"!==o&&["bool","int32","float32"].indexOf(r)>=0&&(o=r),Yt(r,o,t,n),null==e||!H(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e){var a=null==e?"null":e.constructor.name;throw new Error("Argument '"+t+"' passed to '"+n+"' must be a Tensor or TensorLike, but got '"+a+"'")}var i=Xt(e,o);H(e)||Array.isArray(e)||(e=[e]);var s="string"!==o?J(e,o,l().getBool("DEBUG")):E(e,[],!0);return Ne.makeTensor(s,i,o)}function Jt(e,t,n,r){if(void 0===r&&(r="numeric"),!Array.isArray(e))throw new Error("Argument "+t+" passed to "+n+" must be a `Tensor[]` or `TensorLike[]`");return e.map((function(e,r){return Zt(e,t+"["+r+"]",n)}),r)}function Qt(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function en(e,t,n){for(var r=e.length+t.length,o=[],a=0,i=0,s=0;s<r;s++)-1===n.indexOf(s)?o.push(e[a++]):o.push(t[i++]);return o}function tn(e,t){for(var n=[],r=e.length,o=0;o<r;o++)-1===t.indexOf(o)&&n.push(e[o]);return[n,t.map((function(t){return e[t]}))]}function nn(e,t){return en(e,t.map((function(e){return 1})),t)}function rn(e,t,n){_(Qt(t,n),(function(){return e+" supports only inner-most axes for now. Got axes "+t+" and rank-"+n+" input."}))}function on(e,t){if(Qt(e,t))return null;for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((function(e){return n.push(e)})),n}function an(e){return e.map((function(e,t){return[t,e]})).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]}))}function sn(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}function un(e,t){var n=e[0].length;e.forEach((function(e,t){_(e.length===n,(function(){return"Error in concat"+n+"D: rank of tensors["+t+"] must be the same as the rank of the rest ("+n+")"}))})),_(t>=0&&t<n,(function(){return"Error in concat"+n+"D: axis must be between 0 and "+(n-1)+"."}));var r=e[0];e.forEach((function(e,o){for(var a=0;a<n;a++)_(a===t||e[a]===r[a],(function(){return"Error in concat"+n+"D: Shape of tensors["+o+"] ("+e+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+o+"."}))}))}function ln(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}function cn(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+t.length+" keys.");var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1));var o=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Ne.startScope(n);try{var o=r.apply(void 0,e);return o instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),Ne.endScope(o),o}catch(e){throw Ne.endScope(null),e}};return Object.defineProperty(o,"name",{value:n,configurable:!0}),o}Ut.registerFlag("HAS_WEBGL",(function(){return Ut.getNumber("WEBGL_VERSION")>0})),Ut.registerFlag("WEBGL_VERSION",(function(){return Nt(2)?2:Nt(1)?1:0})),Ut.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return 2===Ut.get("WEBGL_VERSION")})),Ut.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),Ut.registerFlag("WEBGL_FORCE_F16_TEXTURES",(function(){return!1})),Ut.registerFlag("WEBGL_PACK",(function(){return Ut.getBool("HAS_WEBGL")})),Ut.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return Ut.getBool("WEBGL_PACK")})),Ut.registerFlag("WEBGL_PACK_CLIP",(function(){return Ut.getBool("WEBGL_PACK")})),Ut.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return!1})),Ut.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return Ut.getBool("WEBGL_PACK")})),Ut.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(function(){return Ut.getBool("WEBGL_PACK")})),Ut.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return Ut.getBool("WEBGL_PACK")})),Ut.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return Ut.getBool("WEBGL_PACK")})),Ut.registerFlag("WEBGL_PACK_REDUCE",(function(){return Ut.getBool("WEBGL_PACK")})),Ut.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return Ut.getBool("WEBGL_PACK")})),Ut.registerFlag("WEBGL_CONV_IM2COL",(function(){return Ut.getBool("WEBGL_PACK")})),Ut.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return Ot(Ut.getNumber("WEBGL_VERSION"))})),Ut.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return Pt(Ut.getNumber("WEBGL_VERSION"))})),Ut.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var e=Ut.getNumber("WEBGL_VERSION");return 0===e?0:Bt(e)})),Ut.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return Ut.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(e=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))));var e})),Ut.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(function(){return Lt(Ut.getNumber("WEBGL_VERSION"))})),Ut.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return!Ut.getBool("WEBGL_FORCE_F16_TEXTURES")&&Ut.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")})),Ut.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return Vt(Ut.getNumber("WEBGL_VERSION"))})),Ut.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return Wt(Ut.getNumber("WEBGL_VERSION"))})),Ut.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return Ut.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),we=zt;var dn=cn({complex_:function(e,t){var n=Zt(e,"real","complex"),r=Zt(t,"imag","complex");return k(n.shape,r.shape,"real and imag shapes, "+n.shape+" and "+r.shape+", must match in call to tf.complex()."),Ne.runKernelFunc((function(e){return e.complex(n,r)}),{$real:n,$imag:r})}}),pn=cn({real_:function(e){var t=Zt(e,"input","real");return Ne.runKernelFunc((function(e){return e.real(t)}),{$input:t})}}),fn=cn({imag_:function(e){var t=Zt(e,"input","imag");return Ne.runKernelFunc((function(e){return e.imag(t)}),{$input:t})}});function hn(e,t,n){return vn(e,t,Xt(e,n),n)}function vn(e,t,n,r){if(null==r&&(r=K(e)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!H(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){re(t);var o=I(t),a=I(n);_(o===a,(function(){return"Based on the provided shape, ["+t+"], the tensor should have "+o+" values but has "+a}));for(var i=0;i<n.length;++i){var s=n[i],u=i!==n.length-1||s!==I(t.slice(i));_(n[i]===t[i]||!u,(function(){return"Error creating a new Tensor. Inferred shape ("+n+") does not match the provided shape ("+t+"). "}))}}return H(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?J(e,r,l().getBool("DEBUG")):E(e,[],!0),Ne.makeTensor(e,t,r)}function mn(e,t){if((H(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&H(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return vn(e,[],[],t)}function gn(e,t){S(e);var n=Xt(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return vn(e,null,n,t)}function yn(e,t,n){if(S(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");var r=Xt(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return vn(e,t,r,n)}function bn(e,t,n){if(S(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");var r=Xt(e,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return vn(e,t,r,n)}function wn(e,t,n){if(S(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");var r=Xt(e,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return vn(e,t,r,n)}function xn(e,t,n){if(S(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");var r=Xt(e,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return vn(e,t,r,n)}function Cn(e,t,n){if(S(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");var r=Xt(e,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return vn(e,t=t||r,r,n)}function _n(e,t,n,r){return void 0===t&&(t=!0),Ne.makeVariable(e,t,n,r)}function kn(e,t){if(void 0===t&&(t="float32"),"complex64"===t){var n=kn(e,"float32"),r=Sn(e,"float32");return dn(n,r)}var o=ee(I(e),t);return Ne.makeTensor(o,e,t)}function Sn(e,t){if(void 0===t&&(t="float32"),"complex64"===t){var n=Sn(e,"float32"),r=Sn(e,"float32");return dn(n,r)}var o=te(I(e),t);return Ne.makeTensor(o,e,t)}function En(e,t,n){return Ne.runKernelFunc((function(r){return r.fill(e,t,n)}),{})}function In(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");return Ne.runKernelFunc((function(r){return r.linspace(e,t,n)}),{})}function An(e,t,n,r){if(void 0===n&&(n=1),void 0===r&&(r="float32"),0===n)throw new Error("Cannot have a step of zero");if(e===t||e<t&&n<0||t<e&&n>1)return Sn([0],r);var o=te(Math.abs(Math.ceil((t-e)/n)),r);t<e&&1===n&&(n=-1),o[0]=e;for(var a=1;a<o.length;a++)o[a]=o[a-1]+n;return gn(o,r)}var Fn=cn({onesLike_:function(e){var t=Zt(e,"x","onesLike");if("complex64"===t.dtype){var n=Fn(pn(t)),r=Dn(fn(t));return dn(n,r)}return Ne.runKernelFunc((function(e){return e.onesLike(t)}),{$x:t},(function(e,t){return{$x:function(){return Dn(e)}}}))}}),Dn=cn({zerosLike_:function(e){var t=Zt(e,"x","zerosLike");return Ne.runKernelFunc((function(e){return e.zerosLike(t)}),{$x:t},(function(e,t){return{$x:function(){return Dn(e)}}}))}}),Rn=cn({concat_:function(e,t){void 0===t&&(t=0),_(e.length>=1,(function(){return"Pass at least one tensor to concat"}));var n=Jt(e,"tensors","concat");"complex64"===n[0].dtype&&n.forEach((function(e){if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype "+e.dtype+". ")})),t=B(t,n[0].shape)[0];var r=ln(n.map((function(e){return e.shape})),t);if(0===I(r))return hn([],r);if(1===(n=n.filter((function(e){return e.size>0}))).length)return n[0];var o=n.map((function(e){return e.shape}));un(o,t);var a=n,i={axis:t};return Ne.runKernelFunc((function(e){return e.concat(n,t)}),a,(function(e){var n=o.map((function(e){return e[t]}));return Mn(e,n,t).map((function(e){return function(){return e}}))}),"Concat",i)}}),Tn=cn({concat1d_:function(e){return Rn(e,0)}}),On=cn({concat2d_:function(e,t){return Rn(e,t)}}),Pn=cn({concat3d_:function(e,t){return Rn(e,t)}}),Bn=cn({concat4d_:function(e,t){return Rn(e,t)}}),Mn=cn({split_:function(e,t,n){void 0===n&&(n=0);var r,o=Zt(e,"x","split");return n=B(n,o.shape)[0],"number"==typeof t?(_(o.shape[n]%t==0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(t).fill(o.shape[n]/t)):(_(o.shape[n]===t.reduce((function(e,t){return e+t})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=t),Ne.runKernelFunc((function(e){return e.split(o,r,n)}),{$x:o},(function(e){return{$x:function(){return Rn(e,n)}}}))}});function Nn(e,t){return e(t={exports:{}},t.exports),t.exports}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self&&self;var Ln=Nn((function(e){!function(e,t,n){function r(e){var t,n=this,r=(t=4022871197,function(e){e=e.toString();for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}function o(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function a(e,t){var n=new r(e),a=t&&t.state,i=n.next;return i.int32=function(){return 4294967296*n.next()|0},i.double=function(){return i()+11102230246251565e-32*(2097152*i()|0)},i.quick=i,a&&("object"==typeof a&&o(a,n),i.state=function(){return o(n,{})}),i}t&&t.exports?t.exports=a:n&&n.amd?n((function(){return a})):this.alea=a}(0,e,!1)})),Vn=Nn((function(e){!function(e,t,n){function r(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function o(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function a(e,t){var n=new r(e),a=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,a&&("object"==typeof a&&o(a,n),i.state=function(){return o(n,{})}),i}t&&t.exports?t.exports=a:n&&n.amd?n((function(){return a})):this.xor128=a}(0,e,!1)})),jn=Nn((function(e){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function o(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function a(e,t){var n=new r(e),a=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,a&&("object"==typeof a&&o(a,n),i.state=function(){return o(n,{})}),i}t&&t.exports?t.exports=a:n&&n.amd?n((function(){return a})):this.xorwow=a}(0,e,!1)})),Wn=Nn((function(e){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.x,o=t.i;return e=r[o],n=(e^=e>>>7)^e<<24,n^=(e=r[o+1&7])^e>>>10,n^=(e=r[o+3&7])^e>>>3,n^=(e=r[o+4&7])^e<<7,e=r[o+7&7],n^=(e^=e<<13)^e<<9,r[o]=n,t.i=o+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function o(e,t){return t.x=e.x.slice(),t.i=e.i,t}function a(e,t){null==e&&(e=+new Date);var n=new r(e),a=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,a&&(a.x&&o(a,n),i.state=function(){return o(n,{})}),i}t&&t.exports?t.exports=a:n&&n.amd?n((function(){return a})):this.xorshift7=a}(0,e,!1)})),Hn=Nn((function(e){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.w,o=t.X,a=t.i;return t.w=r=r+1640531527|0,n=o[a+34&127],e=o[a=a+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=o[a]=n^e,t.i=a,n+(r^r>>>16)|0},function(e,t){var n,r,o,a,i,s=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),o=0,a=-32;a<u;++a)t&&(r^=t.charCodeAt((a+32)%t.length)),0===a&&(i=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,a>=0&&(i=i+1640531527|0,o=0==(n=s[127&a]^=r+i)?o+1:0);for(o>=128&&(s[127&(t&&t.length||0)]=-1),o=127,a=512;a>0;--a)r=s[o+34&127],n=s[o=o+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[o]=r^n;e.w=i,e.X=s,e.i=o}(t,e)}function o(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function a(e,t){null==e&&(e=+new Date);var n=new r(e),a=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,a&&(a.X&&o(a,n),i.state=function(){return o(n,{})}),i}t&&t.exports?t.exports=a:n&&n.amd?n((function(){return a})):this.xor4096=a}(0,e,!1)})),Un=Nn((function(e){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,o=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^o,o=o-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^o,t.a=o-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function o(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function a(e,t){var n=new r(e),a=t&&t.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},i.int32=n.next,i.quick=i,a&&("object"==typeof a&&o(a,n),i.state=function(){return o(n,{})}),i}t&&t.exports?t.exports=a:n&&n.amd?n((function(){return a})):this.tychei=a}(0,e,!1)})),zn=Nn((function(e){!function(t,r){var o,a=this,i=256,s=6,u="random",l=r.pow(i,s),c=r.pow(2,52),d=2*c,p=i-1;function f(e,n,p){var f=[],y=m(function e(t,n){var r,o=[],a=typeof t;if(n&&"object"==a)for(r in t)try{o.push(e(t[r],n-1))}catch(e){}return o.length?o:"string"==a?t:t+"\0"}((n=1==n?{entropy:!0}:n||{}).entropy?[e,g(t)]:null==e?function(){try{var e;return o&&(e=o.randomBytes)?e=e(i):(e=new Uint8Array(i),(a.crypto||a.msCrypto).getRandomValues(e)),g(e)}catch(e){var n=a.navigator,r=n&&n.plugins;return[+new Date,a,r,a.screen,g(t)]}}():e,3),f),b=new h(f),w=function(){for(var e=b.g(s),t=l,n=0;e<c;)e=(e+n)*i,t*=i,n=b.g(1);for(;e>=d;)e/=2,t/=2,n>>>=1;return(e+n)/t};return w.int32=function(){return 0|b.g(4)},w.quick=function(){return b.g(4)/4294967296},w.double=w,m(g(b.S),t),(n.pass||p||function(e,t,n,o){return o&&(o.S&&v(o,b),e.state=function(){return v(b,{})}),n?(r[u]=e,t):e})(w,y,"global"in n?n.global:this==r,n.state)}function h(e){var t,n=e.length,r=this,o=0,a=r.i=r.j=0,s=r.S=[];for(n||(e=[n++]);o<i;)s[o]=o++;for(o=0;o<i;o++)s[o]=s[a=p&a+e[o%n]+(t=s[o])],s[a]=t;(r.g=function(e){for(var t,n=0,o=r.i,a=r.j,s=r.S;e--;)t=s[o=p&o+1],n=n*i+s[p&(s[o]=s[a=p&a+t])+(s[a]=t)];return r.i=o,r.j=a,n})(i)}function v(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function m(e,t){for(var n,r=e+"",o=0;o<r.length;)t[p&o]=p&(n^=19*t[p&o])+r.charCodeAt(o++);return g(t)}function g(e){return String.fromCharCode.apply(0,e)}if(r["seed"+u]=f,m(r.random(),t),e.exports){e.exports=f;try{o=n(4902)}catch(e){}}}([],Math)}));zn.alea=Ln,zn.xor128=Vn,zn.xorwow=jn,zn.xorshift7=Wn,zn.xor4096=Hn,zn.tychei=Un;var $n=zn.alea,qn=function(){function e(e,t,n,r,o){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var a=o||Math.random();this.random=$n(a.toString())}return e.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,n,r=!1;!r;){var o=void 0,a=void 0,i=void 0;do{i=(o=2*this.random()-1)*o+(a=2*this.random()-1)*a}while(i>=1||0===i);var s=Math.sqrt(-2*Math.log(i)/i);t=this.mean+this.stdDev*o*s,n=this.mean+this.stdDev*a*s,this.truncated&&!this.isValidTruncated(t)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(t)},e.prototype.convertValue=function(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)},e.prototype.isValidTruncated=function(e){return e<=this.upper&&e>=this.lower},e}(),Gn=function(){function e(e,t,n,r){this.alpha=e,this.beta=1/t,this.dtype=n;var o=r||Math.random();this.randu=$n(o.toString()),this.randn=new qn(0,1,n,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}return e.prototype.nextValue=function(){for(var e,t,n,r,o,a;;){do{r=this.randn.nextValue(),a=1+this.c*r}while(a<=0);if(a*=a*a,t=1-.331*(e=r*r)*e,n=.5*e+this.d*(1-a+Math.log(a)),(o=this.randu())<t||Math.log(o)<n)break}return a=1/this.beta*this.d*a,this.alpha<1&&(a*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(a)},e.prototype.convertValue=function(e){return"float32"===this.dtype?e:Math.round(e)},e}(),Kn=function(){function e(e,t,n,r){var o=this;if(void 0===e&&(e=0),void 0===t&&(t=1),this.canReturnFloat=function(){return null==o.dtype||"float32"===o.dtype},this.min=e,this.range=t-e,this.dtype=n,null==r&&(r=Math.random()),"number"==typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+e+" - "+t+" <= 1 and dtype is not float");this.random=$n(r)}return e.prototype.convertValue=function(e){return this.canReturnFloat()?e:Math.round(e)},e.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},e}();function Xn(e,t,n){return void 0===t&&(t="float32"),t=t||"float32",re(e),new ge(e,t,n)}function Yn(e,t){void 0===t&&(t=!1),console.log(e.toString(t))}var Zn=cn({batchToSpaceND_:function(e,t,n){var r=Zt(e,"x","batchToSpaceND"),o=t.reduce((function(e,t){return e*t}));return _(r.rank>=1+t.length,(function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+t.length})),_(n.length===t.length,(function(){return"crops.length is "+n.length+" but should be equal to blockShape.length  "+t.length})),_(r.shape[0]%o==0,(function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+t.join(" * ")+" === "+o})),Ne.runKernelFunc((function(e){return e.batchToSpaceND(r,t,n)}),{$x:r},(function(e){return{$x:function(){return e.spaceToBatchND(t,n)}}}))}}),Jn=cn({broadcastTo_:function(e,t){var n=Zt(e,"broadcastTo","x"),r=n.shape;if(t.some((function(e){return!(e>0)||e%1!=0})))throw new Error("broadcastTo(): Invalid broadcast shape ["+t+"].");if(t.length<n.rank)throw new Error("broadcastTo(): shape.length="+t.length+" < input.rank="+n.rank+".");if(t.length>n.rank){for(var o=n.shape.slice();o.length<t.length;)o.unshift(1);n=n.reshape(o)}for(var a=Array.from(t),i=t.length-1;i>=0;i--)if(n.shape[i]===t[i])a[i]=1;else if(1!==n.shape[i])throw new Error("broadcastTo(): ["+r+"] cannot be broadcast to ["+t+"].");var s=a.map((function(e,t){return e>1?t:-1})).filter((function(e){return e>=0}));return 0===s.length?n.clone():Ne.runKernelFunc((function(e){return e.tile(n,a)}),{input:n},(function(e){return{input:function(){return e.sum(s,!0)}}}))}}),Qn=cn({cast_:function(e,t){var n=Zt(e,"x","cast");if(!j(t))throw new Error("Failed to cast to unknown dtype "+t);if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");var r={dtype:t};return Ne.runKernelFunc((function(e){return e.cast(n,t)}),{x:n},(function(e){return{x:function(){return e.clone()}}}),"Cast",r)}}),er=cn({clone_:function(e){var t=Zt(e,"x","clone",null);return Ne.runKernelFunc((function(){return Ne.makeTensorFromDataId(t.dataId,t.shape,t.dtype)}),{$x:t},(function(e){return{$x:function(){return e.toFloat()}}}))}}),tr=cn({cumsum_:function(e,t,n,r){void 0===t&&(t=0),void 0===n&&(n=!1),void 0===r&&(r=!1);var o=Zt(e,"x","cumsum"),a=on([t|=0],o.rank),i=o;null!=a&&(i=o.transpose(a));var s=sn(1,o.rank)[0],u=Ne.runKernelFunc((function(e){return e.cumsum(i,s,n,r)}),{permutedX:i},(function(e){return{permutedX:function(){return e.cumsum(t,n,!r)}}}));return null!=a&&(u=u.transpose(a)),u}}),nr=cn({depthToSpace_:function(e,t,n){void 0===n&&(n="NHWC");var r=Zt(e,"x","depthToSpace"),o="NHWC"===n?r.shape[1]:r.shape[2],a="NHWC"===n?r.shape[2]:r.shape[3],i="NHWC"===n?r.shape[3]:r.shape[1];return _(o*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n      "+o+" and "+t+"  for depthToSpace with input shape\n      "+r.shape})),_(a*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n      "+a+" and "+t+" for depthToSpace with input shape\n          "+r.shape})),_(i%(t*t)==0,(function(){return"Dimension size must be evenly divisible by "+t*t+" but is "+i+" for depthToSpace with input shape "+r.shape})),Ne.runKernelFunc((function(e){return e.depthToSpace(r,t,n)}),{$x:r})}}),rr=cn({expandDims_:function(e,t){void 0===t&&(t=0);var n=Zt(e,"x","expandDims",null);_(t<=n.rank,(function(){return"Axis must be <= rank of the tensor"}));var r=n.shape.slice();return t<0&&(_(-(n.rank+1)<=t,(function(){return"Axis must be in the interval ["+-(n.rank+1)+", "+n.rank+"]"})),t=n.rank+t+1),r.splice(t,0,1),mr(n,r)}}),or=cn({eye_:function(e,t,n,r){void 0===r&&(r="float32"),null==t&&(t=e);for(var o=Xn([e,t],r),a=e<=t?e:t,i=0;i<a;++i)o.set(1,i,i);var s=o.toTensor().as2D(e,t);if(null==n)return s;if(1===n.length)return wr(rr(s,0),[n[0],1,1]);if(2===n.length)return wr(rr(rr(s,0),0),[n[0],n[1],1,1]);if(3===n.length)return wr(rr(rr(rr(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+n.length+"D.")}}),ar=cn({multinomial_:function(e,t,n,r){void 0===r&&(r=!1);var o=Zt(e,"logits","multinomial"),a=o.size,i=o.rank;if(a<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+a+".");if(i>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+i);n=n||Math.random();var s=1===i?o.as2D(1,-1):o,u=Ne.runKernelFunc((function(e){return e.multinomial(s,r,t,n)}),{logits2D:s});return 1===i?u.as1D():u}}),ir=cn({oneHot_:function(e,t,n,r){if(void 0===n&&(n=1),void 0===r&&(r=0),t<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+t);var o=Zt(e,"indices","oneHot","int32"),a=o.shape.concat([t]);return o=o.flatten(),Ne.runKernelFunc((function(e){return e.oneHot(o,t,n,r)}),{$indices:o},(function(e){return{$indices:function(){return Sn(o.shape,"float32")}}})).reshape(a)}}),sr=cn({pad_:function(e,t,n){void 0===n&&(n=0);var r=Zt(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var o={paddings:t,constantValue:n};return Ne.runKernelFunc((function(e){return e.pad(r,t,n)}),{x:r},(function(e){var n=t.map((function(e){return e[0]}));return{x:function(){return e.slice(n,r.shape)}}}),"PadV2",o)}}),ur=cn({pad1d_:function(e,t,n){return void 0===n&&(n=0),_(2===t.length,(function(){return"Invalid number of paddings. Must be length of 2."})),sr(e,[t],n)}}),lr=cn({pad2d_:function(e,t,n){return void 0===n&&(n=0),_(2===t.length&&2===t[0].length&&2===t[1].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),sr(e,t,n)}}),cr=cn({pad3d_:function(e,t,n){return void 0===n&&(n=0),_(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),sr(e,t,n)}}),dr=cn({pad4d_:function(e,t,n){return void 0===n&&(n=0),_(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),sr(e,t,n)}}),pr=cn({rand_:function(e,t,n){var r=I(e),o=null;if(null==n||"float32"===n)o=new Float32Array(r);else if("int32"===n)o=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type "+n);o=new Uint8Array(r)}for(var a=0;a<r;a++)o[a]=t();return Ne.makeTensor(o,e,n)}}),fr=cn({randomNormal_:function(e,t,n,r,o){if(void 0===t&&(t=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);for(var a=new qn(t,n,r,!1,o),i=Xn(e,r),s=0;s<i.values.length;s++)i.values[s]=a.nextValue();return i.toTensor()}}),hr=cn({randomGamma_:function(e,t,n,r,o){if(void 0===n&&(n=1),void 0===r&&(r="float32"),null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type "+r);for(var a=new Gn(t,n,r,o),i=Xn(e,r),s=0;s<i.values.length;s++)i.values[s]=a.nextValue();return i.toTensor()}}),vr=cn({randomUniform_:function(e,t,n,r,o){void 0===t&&(t=0),void 0===n&&(n=1),void 0===r&&(r="float32");for(var a=Xn(e,r),i=new Kn(t,n,null,o),s=0;s<a.values.length;s++)a.values[s]=i.nextValue();return a.toTensor()}}),mr=cn({reshape_:function(e,t){var n=Zt(e,"x","reshape",null);t=P(t,n.size),_(n.size===I(t),(function(){return"new shape and old shape must have the same number of elements."}));var r={shape:t};return Ne.runKernelFunc((function(e){return e.reshape(n,t)}),{x:n},(function(e){return{x:function(){return e.reshape(n.shape)}}}),"Reshape",r)}}),gr=cn({spaceToBatchND_:function(e,t,n){var r=Zt(e,"x","spaceToBatchND");return _(r.rank>=1+t.length,(function(){return"input rank "+r.rank+" should be > than [blockShape] "+t.length})),_(n.length===t.length,(function(){return"paddings.shape[0] "+n.length+" must be equal to [blockShape] "+t.length})),_(r.shape.reduce((function(e,r,o){return o>0&&o<=t.length?e&&(r+n[o-1][0]+n[o-1][1])%t[o-1]==0:e}),!0),(function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+n.toString()+" must be divisible by blockShapes "+t.toString()})),Ne.runKernelFunc((function(e){return e.spaceToBatchND(r,t,n)}),{$x:r},(function(e){return{$x:function(){return e.batchToSpaceND(t,n)}}}))}}),yr=cn({squeeze_:function(e,t){var n=Zt(e,"x","squeeze");return mr(n,M(n.shape,t).newShape)}}),br=cn({stack_:function(e,t){void 0===t&&(t=0);var n=Jt(e,"tensors","stack");if(_(n.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),1===n.length)return n[0].expandDims(t);var r=n[0].rank,o=n[0].shape,a=n[0].dtype;_(t<=r,(function(){return"Axis must be <= rank of the tensor"})),n.forEach((function(e){k(o,e.shape,"All tensors passed to stack must have matching shapes")})),n.forEach((function(e){_(a===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var i=n.map((function(e){return e.expandDims(t)}));return Rn(i,t)}}),wr=cn({tile_:function(e,t){var n=Zt(e,"x","tile",null);_(n.rank===t.length,(function(){return"Error in transpose: rank of input "+n.rank+" must match length of reps "+t+"."}));var r=[n],o={reps:t};return Ne.runKernelFunc((function(e,r){var o=e.tile(n,t);return r([n]),o}),{x:n},(function(e,n){var r=n[0];return{x:function(){var n=Dn(r);if(1===r.rank)for(var o=0;o<t[0];++o)n=n.add(e.slice([o*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(o=0;o<t[0];++o)for(var a=0;a<t[1];++a)n=n.add(e.slice([o*r.shape[0],a*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(o=0;o<t[0];++o)for(a=0;a<t[1];++a)for(var i=0;i<t[2];++i)n=n.add(e.slice([o*r.shape[0],a*r.shape[1],i*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+r.rank+" tensors yet.");for(o=0;o<t[0];++o)for(a=0;a<t[1];++a)for(i=0;i<t[2];++i)for(var s=0;s<t[3];++s)n=n.add(e.slice([o*r.shape[0],a*r.shape[1],i*r.shape[2],s*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return n}}}),"Tile",o,r)}}),xr=cn({truncatedNormal_:function(e,t,n,r,o){if(void 0===t&&(t=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);for(var a=new qn(t,n,r,!0,o),i=Xn(e,r),s=0;s<i.values.length;s++)i.values[s]=a.nextValue();return i.toTensor()}}),Cr=cn({unstack_:function(e,t){void 0===t&&(t=0),t=t||0;var n=Zt(e,"x","unstack");_(t>=-n.shape.length&&t<n.shape.length,(function(){return"Axis = "+t+" is not in [-"+n.shape.length+", "+n.shape.length+")"})),t<0&&(t+=n.shape.length);var r={axis:t};return Ne.runKernelFunc((function(e){return e.unstack(n,t)}),{x:n},(function(e){return{x:function(){return br(e,t)}}}),"Unpack",r)}}),_r=function(e,t){return a(this,void 0,void 0,(function(){var n,r,o,a,s,u,l,c,d,p;return i(this,(function(i){switch(i.label){case 0:return n=Zt(e,"x","setdiff1d"),r=Zt(t,"y","setdiff1d"),_(n.dtype===r.dtype,(function(){return"x and y should have the same dtype, but got x ("+n.dtype+") and y ("+r.dtype+")."})),_(1===n.rank,(function(){return"x should be 1D tensor, but got x ("+n.shape+")."})),_(1===r.rank,(function(){return"y should be 1D tensor, but got y ("+r.shape+")."})),[4,n.data()];case 1:return o=i.sent(),[4,r.data()];case 2:for(a=i.sent(),s=new Set(a),u=0,d=0;d<o.length;d++)s.has(o[d])||u++;for(l=new ge([u],n.dtype),c=new ge([u],"int32"),d=0,p=0;d<o.length;d++)s.has(o[d])||(l.values[p]=o[d],c.values[p]=d,p++);return[2,[l.toTensor(),c.toTensor()]]}}))}))};function kr(e,t,n,r){void 0===r&&(r=!0);var o=[];if(r)(o=o.concat(t.slice(0))).push(e[0]/n),o=o.concat(e.slice(1));else{o=o.concat(e[0]);for(var a=t.length,i=0;i<a;++i)o=o.concat([e[i+1]/t[i],t[i]]);o=o.concat(e.slice(a+1))}return o}function Sr(e,t,n){void 0===n&&(n=!0);var r=[];if(n){r.push(t);for(var o=t+1;o<e;++o)o<=2*t?(r.push(o),r.push(o-(t+1))):r.push(o)}else{var a=[],i=[];for(o=1;o<e;++o)o>=2*t+1||o%2==1?i.push(o):a.push(o);r.push.apply(r,a),r.push(0),r.push.apply(r,i)}return r}function Er(e,t,n,r){void 0===r&&(r=!0);var o=[];r?o.push(e[0]/n):o.push(e[0]*n);for(var a=1;a<e.length;++a)a<=t.length?r?o.push(t[a-1]*e[a]):o.push(e[a]/t[a-1]):o.push(e[a]);return o}function Ir(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function Ar(e,t,n){for(var r=e.slice(0,1),o=0;o<n;++o)r.push(e[o+1]-t[o][0]-t[o][1]);return r}function Fr(e,t){if(e.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+e.rank+".");if(t.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+t.dtype+".");if(t.shape[t.rank-1]>e.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+t.shape[t.rank-1]+" vs. "+e.rank);if(0===e.size)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+e.shape+".");for(var n=t.shape,r=n[n.length-1],o=1,a=0;a<n.length-1;++a)o*=n[a];var i=e.shape,s=n.slice();s.pop();var u=1;for(a=r;a<e.rank;++a)u*=i[a],s.push(i[a]);var l=Z(e.shape).map((function(e){return e/u})).concat([1]).slice(0,r);return[s,o,u,l]}Object.freeze({prepareAndValidate:Fr});var Dr=30;function Rr(e){return e<=Dr?e:Y(e,Math.floor(Math.sqrt(e)))}function Tr(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,o=t.rank>1?t.rank-1:1,a="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+n.shape+", indices.shape: "+t.shape+", shape: "+e+", sliceDim: "+r+", and batchDim: "+o+".";if(n.rank<o)throw new Error(a+" update.rank < "+o+". ");if(e.length<r+(n.rank-o))throw new Error(a+" Output shape length < "+(r+(n.rank-o)));if(n.rank!==o+e.length-r)throw new Error(a+" update.rank != "+(o+e.length-r));for(var i=0;i<o;++i)if(n.shape[i]!==t.shape[i])throw new Error(a+" updates.shape["+i+"] ("+n.shape[i]+") != indices.shape["+i+"] ("+t.shape[i]+").");for(i=0;i<n.rank-o;++i)if(n.shape[i+o]!==e[i+r])throw new Error(a+" updates.shape["+(i+o)+"] ("+n.shape[i+o]+") != shape["+(i+o)+"] ("+e[i+o]+")")}function Or(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+e.rank+".");if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: "+t.dtype);if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+n);if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: "+t.shape);if(0===e.size)throw new Error("Updates specified for empty output. updates shape: "+e.shape)}Tr(n,t,e)}function Pr(e,t,n){for(var r=t.shape.length,o=r>1?t.shape[r-1]:1,a=n.length,i=1,s=o;s<a;++s)i*=n[s];var u=o<1?1:o;return{sliceRank:o,numUpdates:I(t.shape)/u,sliceSize:i,strides:Z(n.slice(0,o)).concat([1]),outputSize:I(n)}}Object.freeze({validateUpdateShape:Tr,validateInput:Or,calculateShapes:Pr});function Br(e,t,n){_(e.rank===t.length,(function(){return"Error in slice"+e.rank+"D: Length of begin "+t+" must match the rank of the array ("+e.rank+")."})),_(e.rank===n.length,(function(){return"Error in slice"+e.rank+"D: Length of size "+n+" must match the rank of the array ("+e.rank+")."}));for(var r=function(r){_(t[r]+n[r]<=e.shape[r],(function(){return"Error in slice"+e.rank+"D: begin["+r+"] + size["+r+"] ("+(t[r]+n[r])+") would overflow input.shape["+r+"] ("+e.shape[r]+")"}))},o=0;o<e.rank;++o)r(o)}function Mr(e){for(var t=[],n=0;e>0;)1&e&&t.push(n),e/=2,n++;return t}function Nr(e,t,n){for(var r=[],o=0;o<e.length;o++)r[o]=Math.ceil((t[o]-e[o])/n[o]);return r}function Lr(e,t,n,r,o){var a=t[o],i=n[o]||1;(e&1<<o||null==a)&&(a=i>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var s=r[o];return a<0&&(a+=s),w(0,a,s-1)}function Vr(e,t,n,r,o){var a=t[o],i=n[o]||1;(e&1<<o||null==a)&&(a=i>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var s=r[o];return a<0&&(a+=s),i>0?w(0,a,s):w(-1,a,s-1)}function jr(e,t,n){for(var r=n.length,o=0;o<n.length;o++)if(n[o]>1){r=o;break}for(o=r+1;o<n.length;o++)if(t[o]>0||n[o]!==e[o])return!1;return!0}function Wr(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}Object.freeze({assertParamsValid:Br,maskToAxes:Mr,computeOutShape:Nr,startForAxis:Lr,stopForAxis:Vr,isSliceContinous:jr,computeFlatOffset:Wr});function Hr(e,t){_(X(e),(function(){return"The f passed in variableGrads(f) must be a function"})),_(null==t||Array.isArray(t)&&t.every((function(e){return e instanceof Ie})),(function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"}));var n=null!=t;if(!n)for(var r in t=[],Ne.registeredVariables)t.push(Ne.registeredVariables[r]);var o=n?t.filter((function(e){return!e.trainable})):null,a=t.length;_((t=t.filter((function(e){return e.trainable}))).length>0,(function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+a+" variables is trainable."}));var i=Ne.gradients(e,t,null,!0),s=i.value,u=i.grads;_(u.some((function(e){return null!=e})),(function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."})),_(0===s.rank,(function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+s.rank+" tensor"}));var l={};return t.forEach((function(e,t){null!=u[t]&&(l[e.name]=u[t])})),null!=o&&o.forEach((function(e){return l[e.name]=null})),{value:s,grads:l}}function Ur(e){return Ne.customGrad(e)}var zr=cn({softmax_:function(e,t){void 0===t&&(t=-1);var n=Zt(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and dim was "+t);return Ne.runKernelFunc((function(e,r){var o=e.softmax(n,t);return r([o]),o}),{logits:n},(function(e,n){var r=n[0],o=e.mul(r);return{logits:function(){return o.sub(o.sum([t],!0).mul(r))}}}),"Softmax",{dim:t},[],[!0])}}),$r=cn({logSoftmax_:function(e,t){void 0===t&&(t=-1);var n=Zt(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and axis was "+t);return Ur((function(e,n){var r=e.max(t,!0),o=e.sub(r),a=o.toFloat().sub(o.exp().sum(t,!0).log());return n([a]),{value:a,gradFunc:function(e,n){var r=n[0].exp();return e.sub(e.sum(t,!0).mul(r))}}}))(n)}}),qr=function(){function e(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}return e.prototype.get=function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)},e.prototype.set=function(e,t){this.dataIdsCount++,this.data.set(e,t)},e.prototype.has=function(e){return this.data.has(e)},e.prototype.delete=function(e){return this.dataIdsCount--,this.data.delete(e)},e.prototype.numDataIds=function(){return this.dataIdsCount},e}(),Gr=function(){function e(){}return e.prototype.time=function(e){return Kr("time")},e.prototype.read=function(e){return Kr("read")},e.prototype.readSync=function(e){return Kr("readSync")},e.prototype.numDataIds=function(){return Kr("numDataIds")},e.prototype.disposeData=function(e){return Kr("disposeData")},e.prototype.write=function(e,t,n){return Kr("write")},e.prototype.move=function(e,t,n,r){return Kr("move")},e.prototype.memory=function(){return Kr("memory")},e.prototype.floatPrecision=function(){return Kr("floatPrecision")},e.prototype.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},e.prototype.batchMatMul=function(e,t,n,r){return Kr("batchMatMul")},e.prototype.fusedBatchMatMul=function(e){return e.a,e.b,e.transposeA,e.transposeB,e.bias,e.activation,e.preluActivationWeights,Kr("fusedBatchMatMul")},e.prototype.slice=function(e,t,n){return Kr("slice")},e.prototype.stridedSlice=function(e,t,n,r){return Kr("stridedSlice")},e.prototype.unstack=function(e,t){return Kr("unstack")},e.prototype.reverse=function(e,t){return Kr("reverse")},e.prototype.concat=function(e,t){return Kr("concat")},e.prototype.neg=function(e){return Kr("neg")},e.prototype.add=function(e,t){return Kr("add")},e.prototype.addN=function(e){return Kr("addN")},e.prototype.subtract=function(e,t){return Kr("subtract")},e.prototype.multiply=function(e,t){return Kr("multiply")},e.prototype.realDivide=function(e,t){return Kr("realDivide")},e.prototype.floorDiv=function(e,t){return Kr("floorDiv")},e.prototype.sum=function(e,t){return Kr("sum")},e.prototype.prod=function(e,t){return Kr("prod")},e.prototype.unsortedSegmentSum=function(e,t,n){return Kr("unsortedSegmentSum")},e.prototype.argMin=function(e,t){return Kr("argMin")},e.prototype.argMax=function(e,t){return Kr("argMax")},e.prototype.equal=function(e,t){return Kr("equal")},e.prototype.notEqual=function(e,t){return Kr("notEqual")},e.prototype.less=function(e,t){return Kr("less")},e.prototype.lessEqual=function(e,t){return Kr("lessEqual")},e.prototype.greater=function(e,t){return Kr("greater")},e.prototype.greaterEqual=function(e,t){return Kr("greaterEqual")},e.prototype.logicalNot=function(e){return Kr("logicalNot")},e.prototype.logicalAnd=function(e,t){return Kr("logicalAnd")},e.prototype.logicalOr=function(e,t){return Kr("logicalOr")},e.prototype.where=function(e){return Kr("where")},e.prototype.select=function(e,t,n){return Kr("select")},e.prototype.topk=function(e,t,n){return Kr("topk")},e.prototype.min=function(e,t){return Kr("min")},e.prototype.minimum=function(e,t){return Kr("minimum")},e.prototype.mod=function(e,t){return Kr("mod")},e.prototype.max=function(e,t){return Kr("max")},e.prototype.maximum=function(e,t){return Kr("maximum")},e.prototype.all=function(e,t){return Kr("all")},e.prototype.any=function(e,t){return Kr("any")},e.prototype.squaredDifference=function(e,t){return Kr("squaredDifference")},e.prototype.ceil=function(e){return Kr("ceil")},e.prototype.floor=function(e){return Kr("floor")},e.prototype.round=function(e){return Kr("round")},e.prototype.sign=function(e){return Kr("sign")},e.prototype.isNaN=function(e){return Kr("isNaN")},e.prototype.isInf=function(e){return Kr("isInf")},e.prototype.isFinite=function(e){return Kr("isFinite")},e.prototype.pow=function(e,t){return Kr("pow")},e.prototype.exp=function(e){return Kr("exp")},e.prototype.expm1=function(e){return Kr("expm1")},e.prototype.softmax=function(e,t){return Kr("softmax")},e.prototype.log=function(e){return Kr("log")},e.prototype.log1p=function(e){return Kr("log1p")},e.prototype.sqrt=function(e){return Kr("sqrt")},e.prototype.rsqrt=function(e){return Kr("rsqrt")},e.prototype.square=function(e){return Kr("square")},e.prototype.reciprocal=function(e){return Kr("reciprocal")},e.prototype.relu=function(e){return Kr("relu")},e.prototype.relu6=function(e){return Kr("relu6")},e.prototype.prelu=function(e,t){return Kr("prelu")},e.prototype.elu=function(e){return Kr("elu")},e.prototype.eluDer=function(e,t){return Kr("eluDer")},e.prototype.selu=function(e){return Kr("selu")},e.prototype.int=function(e){return Kr("int")},e.prototype.clip=function(e,t,n){return Kr("clip")},e.prototype.abs=function(e){return Kr("abs")},e.prototype.complexAbs=function(e){return Kr("complexAbs")},e.prototype.sigmoid=function(e){return Kr("sigmoid")},e.prototype.softplus=function(e){return Kr("softplus")},e.prototype.sin=function(e){return Kr("sin")},e.prototype.cos=function(e){return Kr("cos")},e.prototype.tan=function(e){return Kr("tan")},e.prototype.asin=function(e){return Kr("asin")},e.prototype.acos=function(e){return Kr("acos")},e.prototype.atan=function(e){return Kr("atan")},e.prototype.atan2=function(e,t){return Kr("atan2")},e.prototype.sinh=function(e){return Kr("sinh")},e.prototype.cosh=function(e){return Kr("cosh")},e.prototype.tanh=function(e){return Kr("tanh")},e.prototype.asinh=function(e){return Kr("asinh")},e.prototype.acosh=function(e){return Kr("acosh")},e.prototype.atanh=function(e){return Kr("atanh")},e.prototype.erf=function(e){return Kr("erf")},e.prototype.step=function(e,t){return Kr("step")},e.prototype.fusedConv2d=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,Kr("fusedConv2d")},e.prototype.conv2d=function(e,t,n){return Kr("conv2d")},e.prototype.conv2dDerInput=function(e,t,n){return Kr("conv2dDerInput")},e.prototype.conv2dDerFilter=function(e,t,n){return Kr("conv2dDerFilter")},e.prototype.fusedDepthwiseConv2D=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,Kr("fusedDepthwiseConv2D")},e.prototype.depthwiseConv2D=function(e,t,n){return Kr("depthwiseConv2D")},e.prototype.depthwiseConv2DDerInput=function(e,t,n){return Kr("depthwiseConv2DDerInput")},e.prototype.depthwiseConv2DDerFilter=function(e,t,n){return Kr("depthwiseConv2DDerFilter")},e.prototype.conv3d=function(e,t,n){return Kr("conv3d")},e.prototype.conv3dDerInput=function(e,t,n){return Kr("conv3dDerInput")},e.prototype.conv3dDerFilter=function(e,t,n){return Kr("conv3dDerFilter")},e.prototype.maxPool=function(e,t){return Kr("maxPool")},e.prototype.maxPoolBackprop=function(e,t,n,r){return Kr("maxPoolBackprop")},e.prototype.avgPool=function(e,t){return Kr("avgPool")},e.prototype.avgPoolBackprop=function(e,t,n){return Kr("avgPoolBackprop")},e.prototype.avgPool3d=function(e,t){return Kr("avgPool3d")},e.prototype.avgPool3dBackprop=function(e,t,n){return Kr("avgPool3dBackprop")},e.prototype.maxPool3d=function(e,t){return Kr("maxPool3d")},e.prototype.maxPool3dBackprop=function(e,t,n,r){return Kr("maxPool3dBackprop")},e.prototype.reshape=function(e,t){return Kr("reshape")},e.prototype.cast=function(e,t){return Kr("cast")},e.prototype.tile=function(e,t){return Kr("tile")},e.prototype.pad=function(e,t,n){return Kr("pad")},e.prototype.transpose=function(e,t){return Kr("transpose")},e.prototype.gather=function(e,t,n){return Kr("gather")},e.prototype.gatherND=function(e,t){return Kr("gatherND")},e.prototype.scatterND=function(e,t,n){return Kr("scatterND")},e.prototype.batchToSpaceND=function(e,t,n){return Kr("batchToSpaceND")},e.prototype.spaceToBatchND=function(e,t,n){return Kr("spaceToBatchND")},e.prototype.resizeBilinear=function(e,t,n,r){return Kr("resizeBilinear")},e.prototype.resizeBilinearBackprop=function(e,t,n){return Kr("resizeBilinearBackprop")},e.prototype.resizeNearestNeighbor=function(e,t,n,r){return Kr("resizeNearestNeighbor")},e.prototype.resizeNearestNeighborBackprop=function(e,t,n){return Kr("resizeNearestNeighborBackprop")},e.prototype.batchNormalization=function(e,t,n,r,o,a){return Kr("batchNormalization")},e.prototype.localResponseNormalization4D=function(e,t,n,r,o){return Kr("localResponseNormalization4D")},e.prototype.LRNGrad=function(e,t,n,r,o,a,i){return Kr("LRNGrad")},e.prototype.multinomial=function(e,t,n,r){return Kr("multinomial")},e.prototype.oneHot=function(e,t,n,r){return Kr("oneHot")},e.prototype.cumsum=function(e,t,n,r){return Kr("cumsum")},e.prototype.nonMaxSuppression=function(e,t,n,r,o){return Kr("nonMaxSuppression")},e.prototype.fft=function(e){return Kr("fft")},e.prototype.ifft=function(e){return Kr("ifft")},e.prototype.complex=function(e,t){return Kr("complex")},e.prototype.real=function(e){return Kr("real")},e.prototype.imag=function(e){return Kr("imag")},e.prototype.cropAndResize=function(e,t,n,r,o,a){return Kr("cropAndResize")},e.prototype.depthToSpace=function(e,t,n){return Kr("depthToSpace")},e.prototype.split=function(e,t,n){return Kr("split")},e.prototype.sparseToDense=function(e,t,n,r){return Kr("sparseToDense")},e.prototype.diag=function(e){return Kr("diag")},e.prototype.fill=function(e,t,n){return Kr("fill")},e.prototype.onesLike=function(e){return Kr("onesLike")},e.prototype.zerosLike=function(e){return Kr("zerosLike")},e.prototype.linspace=function(e,t,n){return Kr("linspace")},e.prototype.dispose=function(){return Kr("dispose")},e}();function Kr(e){throw new Error("'"+e+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function Xr(e,t){for(var n=e.length,r=[],o=0;o<n;o++){var a=n-1-o,i=e[a]||1;(t[t.length-1-o]||1)>1&&1===i&&r.unshift(a)}return r}function Yr(e,t){for(var n=[],r=0;r<t.length;r++){var o=e[e.length-r-1],a=t.length-r-1,i=t[a];(null==o||1===o&&i>1)&&n.unshift(a)}return n}function Zr(e,t){for(var n=[],r=Math.max(e.length,t.length),o=0;o<r;o++){var a=e[e.length-o-1];null==a&&(a=1);var i=t[t.length-o-1];if(null==i&&(i=1),1===a)n.unshift(i);else if(1===i)n.unshift(a);else{if(a!==i)throw Error("Operands could not be broadcast together with shapes "+e+" and "+t+".");n.unshift(a)}}return n}function Jr(e,t,n,r,o,a,i){void 0===i&&(i="channelsLast");var s,u=ro(t),l=u[0],c=u[1];if("channelsLast"===i)s=[l,c,e[3],e[3]];else{if("channelsFirst"!==i)throw new Error("Unknown dataFormat "+i);s=[l,c,e[1],e[1]]}return eo(e,s,n,r,o,a,!1,i)}function Qr(e,t,n,r,o,a,i){void 0===i&&(i="NDHWC");var s,u,l=oo(t),c=l[0],d=l[1],p=l[2];if("NDHWC"===i)u="channelsLast",s=[c,d,p,e[4],e[4]];else{if("NCDHW"!==i)throw new Error("Unknown dataFormat "+i);u="channelsFirst",s=[c,d,p,e[1],e[1]]}return to(e,s,n,r,o,!1,u,a)}function eo(e,t,n,r,o,a,i,s){void 0===i&&(i=!1),void 0===s&&(s="channelsLast");var u=[-1,-1,-1,-1],l=u[0],c=u[1],d=u[2],p=u[3];if("channelsLast"===s)l=e[0],c=e[1],d=e[2],p=e[3];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat "+s);l=e[0],p=e[1],c=e[2],d=e[3]}var f,h=t[0],v=t[1],m=t[3],g=ro(n),y=g[0],b=g[1],w=ro(r),x=w[0],C=w[1],k=ao(h,x),S=ao(v,C),E=function(e,t,n,r,o,a,i,s){var u,l,c;if("number"==typeof e){u={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};var d=function(e,t,n,r,o){null==r&&(r=no(e,t,n));var a=e[0],i=e[1],s=io((a-t+2*r)/n+1,o);_(F(s),(function(){return"The output # of rows ("+s+") must be an integer. Change the stride and/or zero pad parameters"}));var u=io((i-t+2*r)/n+1,o);return _(F(u),(function(){return"The output # of columns ("+u+") must be an integer. Change the stride and/or zero pad parameters"})),[s,u]}([t,n],a,r,e,s);l=d[0],c=d[1]}else if("same"===e){l=Math.ceil(t/r),c=Math.ceil(n/o);var p=Math.max(0,(l-1)*r+a-t),f=Math.max(0,(c-1)*o+i-n),h=Math.floor(p/2),v=p-h,m=Math.floor(f/2);u={top:h,bottom:v,left:m,right:f-m,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: "+e);u={top:0,bottom:0,left:0,right:0,type:"VALID"},l=Math.ceil((t-a+1)/r),c=Math.ceil((n-i+1)/o)}return{padInfo:u,outHeight:l,outWidth:c}}(o,c,d,y,b,k,S,a),I=E.padInfo,A=E.outHeight,D=E.outWidth,R=i?m*p:m;return"channelsFirst"===s?f=[l,R,A,D]:"channelsLast"===s&&(f=[l,A,D,R]),{batchSize:l,dataFormat:s,inHeight:c,inWidth:d,inChannels:p,outHeight:A,outWidth:D,outChannels:R,padInfo:I,strideHeight:y,strideWidth:b,filterHeight:h,filterWidth:v,effectiveFilterHeight:k,effectiveFilterWidth:S,dilationHeight:x,dilationWidth:C,inShape:e,outShape:f,filterShape:t}}function to(e,t,n,r,o,a,i,s){void 0===a&&(a=!1),void 0===i&&(i="channelsLast");var u=[-1,-1,-1,-1,-1],l=u[0],c=u[1],d=u[2],p=u[3],f=u[4];if("channelsLast"===i)l=e[0],c=e[1],d=e[2],p=e[3],f=e[4];else{if("channelsFirst"!==i)throw new Error("Unknown dataFormat "+i);l=e[0],f=e[1],c=e[2],d=e[3],p=e[4]}var h,v=t[0],m=t[1],g=t[2],y=t[4],b=oo(n),w=b[0],x=b[1],C=b[2],k=oo(r),S=k[0],E=k[1],I=k[2],A=ao(v,S),D=ao(m,E),R=ao(g,I),T=function(e,t,n,r,o,a,i,s,u,l,c){var d,p,f,h;if("number"==typeof e){d={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};var v=function(e,t,n,r,o,a){null==o&&(o=no(e,t,r));var i=e[0],s=e[1],u=e[2],l=io((i-t+2*o)/r+1,a);_(F(l),(function(){return"The output # of depths ("+l+") must be an integer. Change the stride and/or zero pad parameters"}));var c=io((s-t+2*o)/r+1,a);_(F(c),(function(){return"The output # of rows ("+c+") must be an integer. Change the stride and/or zero pad parameters"}));var d=io((u-t+2*o)/r+1,a);return _(F(d),(function(){return"The output # of columns ("+d+") must be an integer. Change the stride and/or zero pad parameters"})),[l,c,d,n]}([t,n,r,1],s,1,o,e,c);p=v[0],f=v[1],h=v[2]}else if("same"===e){p=Math.ceil(t/o),f=Math.ceil(n/a),h=Math.ceil(r/i);var m=(p-1)*o+s-t,g=(f-1)*a+u-n,y=(h-1)*i+l-r,b=Math.floor(m/2),w=m-b,x=Math.floor(g/2),C=g-x,k=Math.floor(y/2);d={top:x,bottom:C,left:k,right:y-k,front:b,back:w,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: "+e);d={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},p=Math.ceil((t-s+1)/o),f=Math.ceil((n-u+1)/a),h=Math.ceil((r-l+1)/i)}return{padInfo:d,outDepth:p,outHeight:f,outWidth:h}}(o,c,d,p,w,x,C,A,D,R,s),O=T.padInfo,P=T.outDepth,B=T.outHeight,M=T.outWidth,N=a?y*f:y;return"channelsFirst"===i?h=[l,N,P,B,M]:"channelsLast"===i&&(h=[l,P,B,M,N]),{batchSize:l,dataFormat:i,inDepth:c,inHeight:d,inWidth:p,inChannels:f,outDepth:P,outHeight:B,outWidth:M,outChannels:N,padInfo:O,strideDepth:w,strideHeight:x,strideWidth:C,filterDepth:v,filterHeight:m,filterWidth:g,effectiveFilterDepth:A,effectiveFilterHeight:D,effectiveFilterWidth:R,dilationDepth:S,dilationHeight:E,dilationWidth:I,inShape:e,outShape:h,filterShape:t}}function no(e,t,n,r){void 0===r&&(r=1);var o=ao(t,r);return Math.floor((e[0]*(n-1)-n+o)/2)}function ro(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function oo(e){return"number"==typeof e?[e,e,e]:e}function ao(e,t){return t<=1?e:e+(e-1)*(t-1)}function io(e,t){if(!t)return e;switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode "+t)}}function so(e){var t=ro(e),n=t[0],r=t[1],o=t[2];return 1===n&&1===r&&1===o}function uo(e,t){return so(e)||so(t)}function lo(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat "+e)}function co(e,t,n){if("complex64"===t){if("complex64"===e.dtype)return e.clone();var r=Sn(e.shape),o=e.toFloat(),a=n.complex(o,r);return r.dispose(),o.dispose(),a}if(!W(e.dtype,t))return Ne.makeTensorFromDataId(e.dataId,e.shape,t);if("complex64"===e.dtype){var i=n.real(e);return a=i.cast(t),i.dispose(),a}if("int32"===t)return n.int(e);if("bool"===t){var s=mn(0,e.dtype);return a=n.notEqual(e,s),s.dispose(),a}throw new Error("Error in Cast: failed to cast "+e.dtype+" to "+t)}function po(e,t){return Ne.makeTensorFromDataId(e.dataId,t,e.dtype)}function fo(e,t,n){var r=(t-e)/(n-1),o=te(n,"float32");o[0]=e;for(var a=1;a<o.length;a++)o[a]=o[a-1]+r;return gn(o,"float32")}Object.freeze({castTensor:co,reshapeTensor:po,linspaceImpl:fo,upcastType:Fe,axesAreInnerMostDims:Qt,combineLocations:en,computeOutAndReduceShapes:tn,expandShapeToKeepDim:nn,assertAxesAreInnerMostDims:rn,getAxesPermutation:on,getUndoAxesPermutation:an,getInnerMostAxes:sn,getBroadcastDims:Xr,getReductionAxes:Yr,assertAndGetBroadcastShape:Zr,assertParamsConsistent:un,computeOutShape:ln,computePool2DInfo:Jr,computePool3DInfo:Qr,computeConv2DInfo:eo,computeConv3DInfo:to,computeDefaultPad:no,tupleValuesAreOne:so,eitherStridesOrDilationsAreOne:uo,convertConv2DDataFormat:lo,PARALLELIZE_THRESHOLD:Dr,computeOptimalWindowSize:Rr});function ho(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+e.length+", imag: "+t.length+".");for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function vo(e,t){return{real:e[2*t],imag:e[2*t+1]}}function mo(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function go(e,t,n){var r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}function yo(e,t,n){var r=function(e,t,n){return function(e,t,n){for(var r=0,o=e.length,a=0,i=!1;r<o;){var s=n(t,e[a=r+(o-r>>>1)]);s>0?r=a+1:(o=a,i=!s)}return i?r:-r-1}(e,t,n||bo)}(e,t,n),o=r<0?-(r+1):r;e.splice(o,0,t)}function bo(e,t){return e>t?1:e<t?-1:0}function wo(e,t,n,r,o){return Co(e,t,n,r,o,0).selectedIndices}function xo(e,t,n,r,o,a){var i=Co(e,t,n,r,o,a,!0);return i.numValidOutputs.dispose(),{selectedIndices:i.selectedIndices,selectedScores:i.selectedScores}}function Co(e,t,n,r,o,a,i,s){void 0===i&&(i=!1),void 0===s&&(s=!1);for(var u=Array.from(t).map((function(e,t){return{score:e,boxIndex:t,suppressBeginIndex:0}})).filter((function(e){return e.score>o})).sort(So),l=a>0?-.5/a:0,c=[],d=[];c.length<n&&u.length>0;){var p=u.pop(),f=p.score,h=p.boxIndex,v=p.suppressBeginIndex;if(f<o)break;for(var m=!1,g=c.length-1;g>=v;--g){var y=_o(e,h,c[g]);if(y>=r){m=!0;break}if(p.score=p.score*ko(r,l,y),p.score<=o)break}p.suppressBeginIndex=c.length,m||(p.score===f?(c.push(h),d.push(p.score)):p.score>o&&yo(u,p,So))}var b=c.length;return s&&(c.fill(0,b),d.fill(0,b)),{selectedIndices:gn(c,"int32"),selectedScores:gn(d,"float32"),numValidOutputs:mn(b,"int32")}}function _o(e,t,n){var r=e.subarray(4*t,4*t+4),o=e.subarray(4*n,4*n+4),a=Math.min(r[0],r[2]),i=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),l=Math.min(o[0],o[2]),c=Math.min(o[1],o[3]),d=Math.max(o[0],o[2]),p=Math.max(o[1],o[3]),f=(s-a)*(u-i),h=(d-l)*(p-c);if(f<=0||h<=0)return 0;var v=Math.max(a,l),m=Math.max(i,c),g=Math.min(s,d),y=Math.min(u,p),b=Math.max(g-v,0)*Math.max(y-m,0);return b/(f+h-b)}function ko(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function So(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}function Eo(e,t,n){var r=new Array(e.rank).fill(0),o=e.shape.slice();return t.map((function(t){o[n]=t;var a=e.slice(r,o);return r[n]+=t,a}))}function Io(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];var o=Xn(n,e.dtype);for(r=0;r<o.values.length;++r){for(var a=o.indexToLoc(r),i=new Array(e.rank),s=0;s<i.length;s++)i[s]=a[s]%e.shape[s];var u=e.locToIndex(i);o.values[r]=e.values[u]}return o.toTensor()}function Ao(e,t,n,r,o){for(var a=t[t.length-1],i=[e.length/a,a],s=i[0],u=i[1],l=N(n,s*r),c=N("int32",s*r),d=0;d<s;d++){for(var p=d*u,f=e.subarray(p,p+u),h=[],v=0;v<f.length;v++)h.push({value:f[v],index:v});h.sort((function(e,t){return t.value-e.value}));var m=d*r,g=l.subarray(m,m+r),y=c.subarray(m,m+r);for(v=0;v<r;v++)g[v]=h[v].value,y[v]=h[v].index}var b=t.slice();return b[b.length-1]=r,[hn(l,b,n),hn(c,b,"int32")]}function Fo(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r);var o=Xn(e,"int32"),a=Xn([n.length,e.length],"int32");for(r=0;r<n.length;r++){var i=o.indexToLoc(n[r]),s=r*e.length;a.values.set(i,s)}return a.toTensor()}var Do=function(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map((function(e,t){return"T"+t}));var n=[];this.variableNames.forEach((function(e){n.push("float v"+e+" = get"+e+"AtOutCoords();")}));var r=this.variableNames.map((function(e){return"v"+e})).join(" + ");this.userCode="\n      void main() {\n        "+n.join("\n        ")+"\n\n        float result = "+r+";\n        setOutput(result);\n      }\n    "},Ro=function(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map((function(e,t){return"T"+t}));var n=[];this.variableNames.forEach((function(e){n.push("vec4 v"+e+" = get"+e+"AtOutCoords();")}));var r=this.variableNames.map((function(e){return"v"+e})).join(" + ");this.userCode="\n      void main() {\n        "+n.join("\n        ")+"\n\n        vec4 result = "+r+";\n        setOutput(result);\n      }\n    "},To=function(e,t,n){this.variableNames=["A"];var r=e.windowSize,o=e.batchSize,a=e.inSize,i=Math.ceil(a/r);n||this.variableNames.push("bestIndicesA"),this.outputShape=[o,i];var s="max"===t?">":"<",u=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+r+";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < "+r+"; i++) {\n          int inIdx = "+u+";\n          float candidate = getA(batch, inIdx);\n          if (candidate "+s+" bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    "};function Oo(e,t){return["x","y","z","w","u","v"].slice(0,t).map((function(t){return e+"."+t}))}function Po(e,t){return 1===t?[e]:Oo(e,t)}function Bo(){var e,t,n,r,o,a,i,s,u,c;return 2===l().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",o="texture",a="outputColor",i="out vec4 outputColor;",s="\n      bool isnan_custom(float val) {\n        return (val > 0.0 || val < 0.0) ? false : val != 0.0;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",u="",c="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",o="texture2D",a="gl_FragColor",i="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",u="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",c="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:o,output:a,defineOutput:i,defineSpecialNaN:s,defineSpecialInf:u,defineRound:c}}function Mo(e,t,n){void 0===n&&(n="index");var r=Z(t);return r.map((function(t,o){return"int "+e[o]+" = "+n+" / "+t+"; "+(o===r.length-1?"int "+e[o+1]+" = "+n+" - "+e[o]+" * "+t:"index -= "+e[o]+" * "+t)+";"})).join("")}function No(e){var t=Z(e).map((function(e){return e.toString()}));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * "+t[0]+" + coords.y * "+t[1]+" + coords.z;\n  }\n"}var Lo="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n";function Vo(e,t,n,r){var o=[];e.forEach((function(e){var t=I(e.shapeInfo.logicalShape);e.shapeInfo.isUniform?o.push("uniform float "+e.name+(t>1?"["+t+"]":"")+";"):(o.push("uniform sampler2D "+e.name+";"),o.push("uniform int offset"+e.name+";"))}));var a,i,s=o.join("\n"),u=e.map((function(e){return function(e,t,n){void 0===n&&(n=!1);var r="";r+=n?Wo(e):jo(e);var o=e.shapeInfo.logicalShape,a=t.logicalShape;return o.length<=a.length&&(r+=n?function(e,t){var n,r=e.name,o=r.charAt(0).toUpperCase()+r.slice(1),a="get"+o+"AtOutCoords",i=e.shapeInfo.logicalShape.length,s=t.logicalShape.length,u=Xr(e.shapeInfo.logicalShape,t.logicalShape),l=Ko(s),c=s-i,d=["x","y","z","w","u","v"];n=0===i?"":s<2&&u.length>=1?"coords = 0;":u.map((function(e){return"coords."+d[e+c]+" = 0;"})).join("\n");var p="";p=s<2&&i>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords."+d[t+c]})).join(", ");var f="return outputValue;",h=1===I(e.shapeInfo.logicalShape),v=1===I(t.logicalShape);if(1!==i||h||v){if(h&&!v)f=1===s?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(u.length){var m=i-2,g=i-1;u.indexOf(m)>-1&&u.indexOf(g)>-1?f="return vec4(outputValue.x);":u.indexOf(m)>-1?f="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":u.indexOf(g)>-1&&(f="return vec4(outputValue.xx, outputValue.zz);")}}else f="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 "+a+"() {\n      "+l+" coords = getOutputCoords();\n      "+n+"\n      vec4 outputValue = get"+o+"("+p+");\n      "+f+"\n    }\n  "}(e,t):function(e,t){var n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),o="get"+r+"AtOutCoords",a=t.texShape,i=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,u=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===u&&null==e.shapeInfo.flatOffset&&A(i,a))return"\n      float "+o+"() {\n        return sampleTexture("+n+", resultUV);\n      }\n    ";var l,c=Ko(u),d=Xr(e.shapeInfo.logicalShape,t.logicalShape),p=u-s,f=["x","y","z","w","u","v"];l=0===s?"":u<2&&d.length>=1?"coords = 0;":d.map((function(e){return"coords."+f[e+p]+" = 0;"})).join("\n");var h="";return h=u<2&&s>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords."+f[t+p]})).join(", "),"\n    float "+o+"() {\n      "+c+" coords = getOutputCoords();\n      "+l+"\n      return get"+r+"("+h+");\n    }\n  "}(e,t)),r}(e,t,r)})).join("\n"),l=t.texShape,c=Bo(),d=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return "+e.texture2D+"(textureSampler, uv).r;\n    }\n  "}(c),p=function(e){return e.version+"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    "+e.varyingFs+" vec2 resultUV;\n    "+e.defineOutput+"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    "+e.defineSpecialNaN+"\n    "+e.defineSpecialInf+"\n    "+e.defineRound+"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    "+Ho+"\n    "+Uo+"\n    "+zo+"\n  "}(c);return t.isPacked?(a=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];return 1===n[0]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * "+n[1]+".0);\n      }\n    ":1===n[1]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * "+n[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      return 2 * (resTexRC.x * "+n[1]+" + resTexRC.y);\n    }\n  "}(0,t);case 2:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(A(e,t))return"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2("+n[0]+", "+n[1]+"));\n      }\n    ";var r=Math.ceil(e[1]/2);return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n      int r = 2 * (index / "+r+");\n      int c = imod(index, "+r+") * 2;\n\n      return ivec2(r, c);\n    }\n  "}(e,t);case 3:return n=e,r=t,o=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],a=Math.ceil(n[2]/2),i=a*Math.ceil(n[1]/2),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+o[0]+", "+o[1]+"));\n      int index = resTexRC.x * "+o[1]+" + resTexRC.y;\n\n      int b = index / "+i+";\n      index -= b * "+i+";\n\n      int r = 2 * (index / "+a+");\n      int c = imod(index, "+a+") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";default:return function(e,t){for(var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],r=Math.ceil(e[e.length-1]/2),o=r*Math.ceil(e[e.length-2]/2),a=o,i="",s="b, r, c",u=2;u<e.length-1;u++)a*=e[e.length-u-1],i="\n      int b"+u+" = index / "+a+";\n      index -= b"+u+" * "+a+";\n    "+i,s="b"+u+", "+s;return"\n    ivec"+e.length+" getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n\n      "+i+"\n\n      int b = index / "+o+";\n      index -= b * "+o+";\n\n      int r = 2 * (index / "+r+");\n      int c = imod(index, "+r+") * 2;\n\n      return ivec"+e.length+"("+s+");\n    }\n  "}(e,t)}var n,r,o,a,i}(t.logicalShape,l),i=function(e){return"\n    void setOutput(vec4 val) {\n      "+e.output+" = val;\n    }\n  "}(c)):(a=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t){return 1===t[0]?"\n      int getOutputCoords() {\n        return int(resultUV.x * "+t[1]+".0);\n      }\n    ":1===t[1]?"\n      int getOutputCoords() {\n        return int(resultUV.y * "+t[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+t[0]+", "+t[1]+"));\n      return resTexRC.x * "+t[1]+" + resTexRC.y;\n    }\n  "}(0,t);case 2:return function(e,t){return A(e,t)?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2("+t[0]+", "+t[1]+"));\n      }\n    ":1===e[1]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+t[0]+", "+t[1]+"));\n        int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":1===e[0]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+t[0]+", "+t[1]+"));\n        int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n      int r = index / "+e[1]+";\n      int c = index - r * "+e[1]+";\n      return ivec2(r, c);\n    }\n  "}(e,t);case 3:return n=t,r=Mo(["r","c","d"],e),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n      "+r+"\n      return ivec3(r, c, d);\n    }\n  ";case 4:return function(e,t){var n=Mo(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n      "+n+"\n      return ivec4(r, c, d, d2);\n    }\n  "}(e,t);case 5:return function(e,t){var n=Mo(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2("+t[0]+",\n                             "+t[1]+"));\n\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n\n      "+n+"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  "}(e,t);case 6:return function(e,t){var n=Mo(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n\n      "+n+"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  "}(e,t);default:throw new Error(e.length+"-D output sampling is not yet supported")}var n,r}(t.logicalShape,l),i=function(e){return"\n    void setOutput(float val) {\n      "+e.output+" = vec4(val, 0, 0, 0);\n    }\n  "}(c)),r&&(p+=$o),[p,d,i,s,a,u,n].join("\n")}function jo(e){var t=e.shapeInfo.logicalShape;switch(t.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return"float "+n+"() {return "+t+";}";var r=e.shapeInfo.texShape,o=r[0],a=r[1];if(1===o&&1===a)return"\n      float "+n+"() {\n        return sampleTexture("+t+", halfCR);\n      }\n    ";var i=e.shapeInfo.texShape,s=i[0],u=i[1],l=qo(t);return"\n    float "+n+"() {\n      vec2 uv = uvFromFlat("+s+", "+u+", "+l+");\n      return sampleTexture("+t+", uv);\n    }\n  "}(e);case 1:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return"\n      float "+n+"(int index) {\n        "+Go(e)+"\n      }\n    ";var r=e.shapeInfo.texShape,o=r[0],a=r[1];if(1===a&&1===o)return"\n      float "+n+"(int index) {\n        return sampleTexture("+t+", halfCR);\n      }\n    ";var i=qo(t);return 1===a?"\n      float "+n+"(int index) {\n        vec2 uv = vec2(0.5, (float(index + "+i+") + 0.5) / "+o+".0);\n        return sampleTexture("+t+", uv);\n      }\n    ":1===o?"\n      float "+n+"(int index) {\n        vec2 uv = vec2((float(index + "+i+") + 0.5) / "+a+".0, 0.5);\n        return sampleTexture("+t+", uv);\n      }\n    ":"\n    float "+n+"(int index) {\n      vec2 uv = uvFromFlat("+o+", "+a+", index + "+i+");\n      return sampleTexture("+t+", uv);\n    }\n  "}(e);case 2:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=e.shapeInfo.texShape;if(null!=o&&A(t,o)){var a=o[0],i=o[1];return"\n    float "+r+"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2("+i+".0, "+a+".0);\n      return sampleTexture("+n+", uv);\n    }\n  "}var s=M(t),u=s.newShape,l=s.keptDims,c=u;if(c.length<t.length){var d=Xo(e,c);return"\n      "+jo(d)+"\n      float "+r+"(int row, int col) {\n        return "+r+"("+Yo(["row","col"],l)+");\n      }\n    "}if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2("+t[1]+", 1)));\n        "+Go(e)+"\n      }\n    ";var p=o[0],f=o[1],h=qo(n);return 1===f?"\n    float "+r+"(int row, int col) {\n      float index = dot(vec3(row, col, "+h+"), vec3("+t[1]+", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / "+p+".0);\n      return sampleTexture("+n+", uv);\n    }\n  ":1===p?"\n    float "+r+"(int row, int col) {\n      float index = dot(vec3(row, col, "+h+"), vec3("+t[1]+", 1, 1));\n      vec2 uv = vec2((index + 0.5) / "+f+".0, 0.5);\n      return sampleTexture("+n+", uv);\n    }\n  ":"\n  float "+r+"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * "+t[1]+" + col + "+h+";\n    vec2 uv = uvFromFlat("+p+", "+f+", index);\n    return sampleTexture("+n+", uv);\n  }\n"}(e);case 3:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=t[1]*t[2],a=t[2],i=M(t),s=i.newShape,u=i.keptDims,l=s;if(l.length<t.length){var c=Xo(e,l);return"\n        "+jo(c)+"\n        float "+r+"(int row, int col, int depth) {\n          return "+r+"("+Yo(["row","col","depth"],u)+");\n        }\n      "}if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3("+o+", "+a+", 1)));\n        "+Go(e)+"\n      }\n    ";var d=e.shapeInfo.texShape,p=d[0],f=d[1],h=e.shapeInfo.flatOffset;if(f===o&&null==h)return"\n        float "+r+"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2("+a+", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2("+f+".0, "+p+".0);\n          return sampleTexture("+n+", uv);\n        }\n      ";if(f===a&&null==h)return"\n    float "+r+"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2("+t[1]+", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+f+".0, "+p+".0);\n      return sampleTexture("+n+", uv);\n    }\n  ";var v=qo(n);return"\n      float "+r+"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * "+o+" + col * "+a+" + depth + "+v+";\n        vec2 uv = uvFromFlat("+p+", "+f+", index);\n        return sampleTexture("+n+", uv);\n      }\n  "}(e);case 4:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=t[3],a=t[2]*o,i=t[1]*a,s=M(t),u=s.newShape,l=s.keptDims;if(u.length<t.length){var c=Xo(e,u);return"\n      "+jo(c)+"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        return "+r+"("+Yo(["row","col","depth","depth2"],l)+");\n      }\n    "}if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4("+i+", "+a+", "+o+", 1)));\n        "+Go(e)+"\n      }\n    ";var d=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,f=p[0],h=p[1];if(h===i&&null==d)return"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3("+a+", "+o+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+h+".0, "+f+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ";if(h===o&&null==d)return"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3("+t[1]*t[2]+", "+t[2]+", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+h+".0, "+f+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ";var v=qo(n);return"\n    float "+r+"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+i+" + col * "+a+" +\n          depth * "+o+" + depth2;\n      vec2 uv = uvFromFlat("+f+", "+h+", index + "+v+");\n      return sampleTexture("+n+", uv);\n    }\n  "}(e);case 5:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=t[4],a=t[3]*o,i=t[2]*a,s=t[1]*i,u=M(t),l=u.newShape,c=u.keptDims;if(l.length<t.length){var d=Xo(e,l);return"\n      "+jo(d)+"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        return "+r+"("+Yo(["row","col","depth","depth2","depth3"],c)+");\n      }\n    "}if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+s+", "+i+", "+a+", "+o+")) +\n          depth3;\n        "+Go(e)+"\n      }\n    ";var p=e.shapeInfo.flatOffset,f=e.shapeInfo.texShape,h=f[0],v=f[1];if(v===s&&null==p)return"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4("+i+", "+a+", "+o+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+v+".0, "+h+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ";if(v===o&&null==p)return"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+t[1]*t[2]*t[3]+",\n               "+t[2]*t[3]+", "+t[3]+", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+v+".0, "+h+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ";var m=qo(n);return"\n    float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+s+" + col * "+i+" + depth * "+a+" +\n          depth2 * "+o+" + depth3 + "+m+";\n      vec2 uv = uvFromFlat("+h+", "+v+", index);\n      return sampleTexture("+n+", uv);\n    }\n  "}(e);case 6:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=M(t),a=o.newShape,i=o.keptDims;if(a.length<t.length){var s=Xo(e,a);return"\n      "+jo(s)+"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return "+r+"("+Yo(["row","col","depth","depth2","depth3","depth4"],i)+");\n      }\n    "}var u=t[5],l=t[4]*u,c=t[3]*l,d=t[2]*c,p=t[1]*d;if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4("+p+", "+d+", "+c+", "+l+")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2("+u+", 1)));\n        "+Go(e)+"\n      }\n    ";var f=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,v=h[0],m=h[1];if(m===p&&null==f)return"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4("+d+", "+c+", "+l+", "+u+")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+m+".0, "+v+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ";if(m===u&&null==f)return"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4("+t[1]*t[2]*t[3]*t[4]+",\n               "+t[2]*t[3]*t[4]+",\n               "+t[3]*t[4]+",\n               "+t[4]+")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+m+".0, "+v+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ";var g=qo(n);return"\n    float "+r+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+p+" + col * "+d+" + depth * "+c+" +\n          depth2 * "+l+" + depth3 * "+u+" + depth4 + "+g+";\n      vec2 uv = uvFromFlat("+v+", "+m+", index);\n      return sampleTexture("+n+", uv);\n    }\n  "}(e);default:throw new Error(t.length+"-D input sampling is not yet supported")}}function Wo(e){var t,n,r;switch(e.shapeInfo.logicalShape.length){case 0:return t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=Bo(),"\n    vec4 "+n+"() {\n      return "+r.texture2D+"("+t+", halfCR);\n    }\n  ";case 1:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=e.shapeInfo.texShape,o=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],a=Bo();return"\n    vec4 "+n+"(int index) {\n      vec2 uv = packedUVfrom1D(\n        "+o[0]+", "+o[1]+", index);\n      return "+a.texture2D+"("+t+", uv);\n    }\n  "}(e);case 2:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=e.shapeInfo.texShape,a=o[0],i=o[1],s=Bo();if(null!=o&&A(t,o))return"\n      vec4 "+r+"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2("+i+".0, "+a+".0);\n\n        return "+s.texture2D+"("+n+", uv);\n      }\n    ";var u=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],l=Math.ceil(t[1]/2);return"\n    vec4 "+r+"(int row, int col) {\n      vec2 uv = packedUVfrom2D("+l+", "+u[0]+", "+u[1]+", row, col);\n      return "+s.texture2D+"("+n+", uv);\n    }\n  "}(e);case 3:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),o=e.shapeInfo.texShape,a=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)];if(1===t[0]){var i=t.slice(1),s=Xo(e,i);return"\n        "+Wo(s)+"\n        vec4 "+r+"(int b, int row, int col) {\n          return "+r+"("+Yo(["b","row","col"],[1,2])+");\n        }\n      "}var u=a[0],l=a[1],c=Math.ceil(t[2]/2),d=c*Math.ceil(t[1]/2),p=Bo();return"\n    vec4 "+r+"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        "+u+", "+l+", "+d+", "+c+", b, row, col);\n      return "+p.texture2D+"("+n+", uv);\n    }\n  "}(e);default:return function(e){for(var t=e.shapeInfo.logicalShape,n=t.length,r=e.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1),a=e.shapeInfo.texShape,i=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],s=i[0],u=i[1],l=Math.ceil(t[n-1]/2),c=l*Math.ceil(t[n-2]/2),d="int b, int row, int col",p="b * "+c+" + (row / 2) * "+l+" + (col / 2)",f=2;f<n-1;f++)d="int b"+f+", "+d,c*=t[n-f-1],p="b"+f+" * "+c+" + "+p;var h=Bo();return"\n    vec4 "+o+"("+d+") {\n      int index = "+p+";\n      int texR = index / "+u+";\n      int texC = index - texR * "+u+";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+u+", "+s+");\n      return "+h.texture2D+"("+r+", uv);\n    }\n  "}(e)}}var Ho="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Uo="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",zo="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",$o="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function qo(e){return"offset"+e}function Go(e){var t=e.name,n=I(e.shapeInfo.logicalShape);return n<2?"return "+t+";":"\n    for (int i = 0; i < "+n+"; i++) {\n      if (i == index) {\n        return "+t+"[i];\n      }\n    }\n  "}function Ko(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank "+e+" is not yet supported")}function Xo(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function Yo(e,t){return t.map((function(t){return e[t]})).join(", ")}var Zo=function(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,_(e.length>2,(function(){return"Packed arg"+(n.charAt(0).toUpperCase()+n.slice(1))+" supports only inputs with rank above 2."}));var o=e[e.length-1],a=Math.ceil(o/t);this.outputShape=e.slice(0,-1),a>1&&this.outputShape.push(a),r||this.variableNames.push("bestIndicesA");var i,s,u=this.outputShape,l=u.length,c=Ko(l),d=Po("coords",l);if(1===a){var p=Ko(s=l+1);i="\n        "+p+" sourceLocR = "+p+"("+d.join()+", 0);\n        ++"+d[l-1]+";\n        "+p+" sourceLocG = "+p+"("+d.join()+", 0);\n        ++"+d[l-2]+";\n        "+p+" sourceLocA = "+p+"("+d.join()+", 0);\n        --"+d[l-1]+";\n        "+p+" sourceLocB = "+p+"("+d.join()+", 0);\n        --"+d[l-2]+";"}else s=l,i="\n        "+c+" sourceLocR = coords;\n        ++"+d[l-1]+";\n        "+c+" sourceLocG = coords;\n        ++"+d[l-2]+";\n        "+c+" sourceLocA = coords;\n        --"+d[l-1]+";\n        "+c+" sourceLocB = coords;\n        --"+d[l-2]+";";var f=["x","y","z","w","u","v"].slice(0,s),h="."+f[s-1],v=f.map((function(e){return"int "+e})),m=Po("sourceLocR",s-1).concat("inIdx.r"),g=Po("sourceLocG",s-1).concat("inIdx.g"),y=Po("sourceLocB",s-1).concat("inIdx.b"),b=Po("sourceLocA",s-1).concat("inIdx.a"),w="max"===n?"greaterThan":"lessThan",x=r?"":"\n          inIdx = round(vec4(getBestIndicesAChannel("+m.join()+"),\n                             getBestIndicesAChannel("+g.join()+"),\n                             getBestIndicesAChannel("+y.join()+"),\n                             getBestIndicesAChannel("+b.join()+")));",C="vec4(\n            getAChannel("+m.join()+"),\n            hasNextCol ? getAChannel("+g.join()+") : 0.,\n            hasNextRow ? getAChannel("+y.join()+") : 0.,\n            hasNextRow && hasNextCol ? getAChannel("+b.join()+") : 0.)",k=r?"":"\n      float getBestIndicesAChannel("+v.join()+") {\n        return getChannel(getBestIndicesA("+f.join()+"),\n                                          vec2("+f.slice(-2).join()+"));\n      }";this.userCode="\n      float getAChannel("+v.join()+") {\n        return getChannel(getA("+f.join()+"),\n                               vec2("+f.slice(-2).join()+"));\n      }\n      "+k+"\n      void main() {\n        "+c+" coords = getOutputCoords();\n        bool hasNextCol = "+d[l-1]+" < "+(u[l-1]-1)+";\n        bool hasNextRow = "+d[l-2]+" < "+(u[l-2]-1)+";\n        "+i+"\n        ivec4 srcIdx = ivec4(sourceLocR"+h+", sourceLocG"+h+",\n          sourceLocB"+h+", sourceLocA"+h+") * "+t+";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = "+C+";\n\n        for (int i = 0; i < "+t+"; i++) {\n          inIdx = srcIdx;\n          "+x+"\n          vec4 candidate = "+C+";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4("+w+"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    "},Jo=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,o=e.strideWidth,a=e.dilationHeight,i=e.dilationWidth,s=e.effectiveFilterHeight,u=e.effectiveFilterWidth,l=s-1-e.padInfo.top,c=u-1-e.padInfo.left,d=1/(t*n);this.userCode="\n      const ivec2 pads = ivec2("+l+", "+c+");\n      const float avgMultiplier = float("+d+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+s+";\n            wR += "+a+") {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+u+";\n            wC+= "+i+") {\n            float dyC = float(dyCCorner + wC) / "+o+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Qo=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,o=e.strideDepth,a=e.strideHeight,i=e.strideWidth,s=e.dilationDepth,u=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterDepth,d=e.effectiveFilterHeight,p=e.effectiveFilterWidth,f=c-1-e.padInfo.front,h=d-1-e.padInfo.top,v=p-1-e.padInfo.left,m=1/(t*n*r);this.userCode="\n      const ivec3 pads = ivec3("+f+", "+h+", "+v+");\n      const float avgMultiplier = float("+m+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < "+c+";\n            wD += "+s+") {\n          float dyD = float(dyDCorner + wD) / "+o+".0;\n\n          if (dyD < 0.0 || dyD >= "+e.outDepth+".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < "+d+";\n              wR += "+u+") {\n            float dyR = float(dyRCorner + wR) / "+a+".0;\n\n            if (dyR < 0.0 || dyR >= "+e.outHeight+".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < "+p+";\n                wC += "+l+") {\n              float dyC = float(dyCCorner + wC) / "+i+".0;\n\n              if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},ea=function(e,t,n,r,o,a){this.outputShape=[],this.variableNames=["x","mean","variance"],Zr(e,t),Zr(e,n);var i="0.0";null!=r&&(Zr(e,r),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");var s="1.0";null!=o&&(Zr(e,o),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = "+i+";\n        float scale = "+s+";\n        float inv = scale * inversesqrt(variance + float("+a+"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    "},ta=function(e,t,n,r,o,a){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Zr(e,t),Zr(e,n);var i="vec4(0.0)";null!=r&&(Zr(e,r),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");var s="vec4(1.0)";null!=o&&(Zr(e,o),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        vec4 offset = "+i+";\n        vec4 scale = "+s+";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4("+a+"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    "},na="return areal * breal - aimag * bimag;",ra="return areal * bimag + aimag * breal;",oa=function(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Zr(t,n),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        "+e+"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    "},aa="return a + b;",ia="return a - b;",sa="return a * b;",ua="return (a < 0.) ? b * a : a;",la=function(e,t,n){this.variableNames=["A","B"],this.outputShape=Zr(t,n),this.userCode="\n      float binaryOperation(float a, float b) {\n        "+e+"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    "},ca="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",da=function(e,t,n,r){void 0===r&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Zr(t,n);var o=this.outputShape.length,a="";if(r)if(0===o||1===I(this.outputShape))a="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else if(a="\n          "+Ko(o)+" coords = getOutputCoords();\n        ",1===o)a+="\n            result.y = (coords + 1) >= "+this.outputShape[0]+" ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ";else{var i=Po("coords",o);a+="\n            bool nextRowOutOfBounds =\n              ("+i[o-2]+" + 1) >= "+this.outputShape[o-2]+";\n            bool nextColOutOfBounds =\n              ("+i[o-1]+" + 1) >= "+this.outputShape[o-1]+";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        "+e+"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        "+a+"\n\n        setOutput(result);\n      }\n    "},pa=function(){function e(e){this.variableNames=["A"],this.outputShape=e,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e,t){var n=this;return function(r,o){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(o,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(o,"maxVal")),r.gl.uniform1f(n.minLoc,e),r.gl.uniform1f(n.maxLoc,t)}},e}(),fa=function(){function e(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e,t){var n=this;return function(r,o){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(o,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(o,"maxVal")),r.gl.uniform1f(n.minLoc,e),r.gl.uniform1f(n.maxLoc,t)}},e}(),ha=function(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "},va=function(e){this.outputShape=[],this.outputShape=ln(e,1),this.variableNames=e.map((function(e,t){return"T"+t}));var t=new Array(e.length-1);t[0]=e[0][1];for(var n=1;n<t.length;n++)t[n]=t[n-1]+e[n][1];var r=["if (yC < "+t[0]+") setOutput(getT0(yR, yC));"];for(n=1;n<t.length;n++){var o=t[n-1];r.push("else if (yC < "+t[n]+") setOutput(getT"+n+"(yR, yC-"+o+"));")}var a=t.length,i=t[t.length-1];r.push("else setOutput(getT"+a+"(yR, yC-"+i+"));"),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        "+r.join("\n        ")+"\n      }\n    "},ma=function(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=ln(e,t);var n=this.outputShape,r=n.length,o=Ko(r),a=Po("coords",r),i=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map((function(e,t){return"T"+t}));var s=new Array(e.length-1);s[0]=e[0][t];for(var u=1;u<s.length;u++)s[u]=s[u-1]+e[u][t];var l=i[t],c=i.slice(-2),d=i.join(),p="if ("+l+" < "+s[0]+") {\n        return getChannel(\n            getT0("+d+"), vec2("+c.join()+"));\n        }";for(u=1;u<s.length;u++){var f=s[u-1];p+="\n        if ("+l+" < "+s[u]+"  && "+l+" >= "+s[u-1]+") {\n          return getChannel(\n            getT"+u+"("+ga(i,l,f)+"),\n            vec2("+ga(c,l,f)+"));\n        }"}var h=s.length,v=s[s.length-1];p+="\n        return getChannel(\n          getT"+h+"("+ga(i,l,v)+"),\n          vec2("+ga(c,l,v)+"));",this.userCode="\n      float getValue("+i.map((function(e){return"int "+e}))+") {\n        "+p+"\n      }\n\n      void main() {\n        "+o+" coords = getOutputCoords();\n        vec4 result = vec4(getValue("+a+"), 0., 0., 0.);\n\n        "+a[r-1]+" = "+a[r-1]+" + 1;\n        if ("+a[r-1]+" < "+n[r-1]+") {\n          result.g = getValue("+a+");\n        }\n\n        "+a[r-2]+" = "+a[r-2]+" + 1;\n        if ("+a[r-2]+" < "+n[r-2]+") {\n          result.a = getValue("+a+");\n        }\n\n        "+a[r-1]+" = "+a[r-1]+" - 1;\n        if ("+a[r-2]+" < "+n[r-2]+" &&\n            "+a[r-1]+" < "+n[r-1]+") {\n          result.b = getValue("+a+");\n        }\n        setOutput(result);\n      }\n    "};function ga(e,t,n){var r=e.indexOf(t);return e.map((function(e,t){return t===r?e+" - "+n:e})).join()}var ya=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,o=e.padInfo.left,a="channelsLast"===e.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n            int xR = wR + yR * "+t+" - "+r+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+o+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              if ("+a+") {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},ba=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,o=e.strideWidth,a="channelsLast"===e.dataFormat,i=t-1-e.padInfo.top,s=n-1-e.padInfo.left,u=a?1:2,l=a?2:3,c=a?3:1;this.userCode="\n      const ivec2 pads = ivec2("+i+", "+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords["+c+"];\n\n        ivec2 dyCorner = ivec2(coords["+u+"], coords["+l+"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+t+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+o+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            for (int d2 = 0; d2 < "+e.outChannels+"; d2++) {\n\n              if ("+a+") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},wa=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,o=e.padInfo.front,a=e.padInfo.top,i=e.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yF = 0; yF < "+e.outDepth+"; yF++) {\n            int xF = wF + yF * "+t+" - "+o+";\n\n            if (xF < 0 || xF >= "+e.inDepth+") {\n              continue;\n            }\n\n            for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n              int xR = wR + yR * "+n+" - "+a+";\n\n              if (xR < 0 || xR >= "+e.inHeight+") {\n                continue;\n              }\n\n              for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n                int xC = wC + yC * "+r+" - "+i+";\n\n                if (xC < 0 || xC >= "+e.inWidth+") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},xa=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,o=e.strideDepth,a=e.strideHeight,i=e.strideWidth,s=t-1-e.padInfo.front,u=n-1-e.padInfo.top,l=r-1-e.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3("+s+", "+u+", "+l+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+t+"; wF++) {\n          float dyF = float(dyFCorner + wF) / "+o+".0;\n\n          if (dyF < 0.0 || dyF >= "+e.outDepth+".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = "+t+" - 1 - wF;\n\n          for (int wR = 0; wR < "+n+"; wR++) {\n            float dyR = float(dyRCorner + wR) / "+a+".0;\n\n            if (dyR < 0.0 || dyR >= "+e.outHeight+".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = "+n+" - 1 - wR;\n\n            for (int wC = 0; wC < "+r+"; wC++) {\n              float dyC = float(dyCCorner + wC) / "+i+".0;\n\n              if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = "+r+" - 1 - wC;\n\n              for (int d2 = 0; d2 < "+e.outChannels+"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Ca=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,o=e.padInfo.left,a=e.outChannels/e.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * "+a+" + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n            int xR = wR + yR * "+t+" - "+r+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+o+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},_a=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,o=e.strideWidth,a=t-1-e.padInfo.top,i=n-1-e.padInfo.left,s=e.outChannels/e.inChannels;this.userCode="\n      const ivec2 pads = ivec2("+a+", "+i+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+t+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+o+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < "+s+"; dm++) {\n              int d2 = d1 * "+s+" + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},ka=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var o=e.padInfo.top,a=e.padInfo.left,i=e.strideHeight,s=e.strideWidth,u=e.dilationHeight,l=e.dilationWidth,c=e.filterHeight,d=e.filterWidth,p=4*Math.floor(e.inChannels/4),f=e.inChannels%4,h="channelsLast"===e.dataFormat,v=h?1:2,m=h?2:3,g=h?3:1,y="",b="";n&&(y=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"\n          float activation(float x) {\n            "+n+"\n          }\n        ",b="result = activation(result);");var w=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+y+"\n\n      const ivec2 strides = ivec2("+i+", "+s+");\n      const ivec2 pads = ivec2("+o+", "+a+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords["+g+"];\n\n        ivec2 xRCCorner =\n            ivec2(coords["+v+"], coords["+m+"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+c+"; wR++) {\n          int xR = xRCorner + wR * "+u+";\n\n          if (xR < 0 || xR >= "+e.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+d+"; wC++) {\n            int xC = xCCorner + wC * "+l+";\n\n            if (xC < 0 || xC >= "+e.inWidth+") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < "+p+"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if ("+h+") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if ("+(1===f)+") {\n\n              if ("+h+") {\n                dotProd +=\n                    getX(batch, xR, xC, "+p+") *\n                    getW(wR, wC, "+p+", d2);\n              } else {\n                dotProd +=\n                    getX(batch, "+p+", xR, xC) *\n                    getW(wR, wC, "+p+", d2);\n              }\n\n            } else if ("+(2===f)+") {\n              vec2 wValues = vec2(\n                getW(wR, wC, "+p+", d2),\n                getW(wR, wC, "+p+" + 1, d2)\n              );\n\n              if ("+h+") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, "+p+"),\n                  getX(batch, xR, xC, "+p+" + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, "+p+", xR, xC),\n                  getX(batch, "+p+" + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if ("+(3===f)+") {\n              vec3 wValues = vec3(\n                getW(wR, wC, "+p+", d2),\n                getW(wR, wC, "+p+" + 1, d2),\n                getW(wR, wC, "+p+" + 2, d2)\n              );\n\n              if ("+h+") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, "+p+"),\n                  getX(batch, xR, xC, "+p+" + 1),\n                  getX(batch, xR, xC, "+p+" + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, "+p+", xR, xC),\n                  getX(batch, "+p+" + 1, xR, xC),\n                  getX(batch, "+p+" + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        "+w+"\n        "+b+"\n        setOutput(result);\n      }\n    "},Sa=function(e){this.variableNames=["x","W"],this.outputShape=e.outShape;var t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,o=e.strideDepth,a=e.strideHeight,i=e.strideWidth,s=e.dilationDepth,u=e.dilationHeight,l=e.dilationWidth,c=e.filterDepth,d=e.filterHeight,p=e.filterWidth,f=4*Math.floor(e.inChannels/4),h=e.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3("+o+", "+a+", "+i+");\n      const ivec3 pads = ivec3("+t+", "+n+", "+r+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+c+"; wF++) {\n          int xF = xFCorner + wF * "+s+";\n\n          if (xF < 0 || xF >= "+e.inDepth+") {\n            continue;\n          }\n\n          for (int wR = 0; wR < "+d+"; wR++) {\n            int xR = xRCorner + wR * "+u+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+p+"; wC++) {\n              int xC = xCCorner + wC * "+l+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < "+f+"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if ("+(1===h)+") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, "+f+") *\n                  getW(wF, wR, wC, "+f+", d2);\n              } else if ("+(2===h)+") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, "+f+"),\n                  getX(batch, xF, xR, xC, "+f+" + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, "+f+", d2),\n                  getW(wF, wR, wC, "+f+" + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if ("+(3===h)+") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, "+f+"),\n                  getX(batch, xF, xR, xC, "+f+" + 1),\n                  getX(batch, xF, xR, xC, "+f+" + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, "+f+", d2),\n                  getW(wF, wR, wC, "+f+" + 1, d2),\n                  getW(wF, wR, wC, "+f+" + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Ea=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var o=e.inHeight,a=e.inWidth,i=e.padInfo.top,s=e.padInfo.left,u=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,d=e.dilationWidth,p=e.filterHeight,f=e.filterWidth,h=e.outChannels/e.inChannels,v="",m="";n&&(v=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"\n          float activation(float x) {\n            "+n+"\n          }\n        ",m="result = activation(result);");var g=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+v+"\n\n      const ivec2 strides = ivec2("+u+", "+l+");\n      const ivec2 pads = ivec2("+i+", "+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / "+h+";\n        int q = d2 - d1 * "+h+";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < "+p+"; wR++) {\n          int xR = xRCorner + wR * "+c+";\n\n          if (xR < 0 || xR >= "+o+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+f+"; wC++) {\n            int xC = xCCorner + wC * "+d+";\n\n            if (xC < 0 || xC >= "+a+") {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        "+g+"\n        "+m+"\n        setOutput(result);\n      }\n    "},Ia=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.outShape;for(var o=e.inHeight,a=e.inWidth,i=e.padInfo.top,s=e.padInfo.left,u=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,d=e.dilationWidth,p=e.filterHeight,f=e.filterWidth,h=f,v="int xR; int xC; int xCOffset;",m=0;m<p;m++)for(var g=0;g<f;g++)v+="\n          vec4 xTexelR"+m+"C"+2*g+" = vec4(0.);\n          vec4 wR"+m+"C"+g+" = vec4(0.);\n          vec4 xR"+m+"C"+g+" = vec4(0.);";for(m=0;m<p;m++)for(var y=0;y<h;y++){if(v+="\n          xR = xRCorner + "+m*c+";\n          xC = xCCorner + "+(g=2*y)*d+";\n        ",1===l){if(g<f&&(v+=s%2==1?"\n                xCOffset = xC + 1;\n                if(xR >= 0 && xR < "+o+" && xCOffset >= 0 && xCOffset < "+a+") {\n                  xTexelR"+m+"C"+g+" = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= "+a+") {\n                    xTexelR"+m+"C"+g+".zw = vec2(0.);\n                  }\n                } else {\n                  xTexelR"+m+"C"+g+" = vec4(0.);\n                }\n\n                xCOffset = xC + 1 - 2;\n                if(xR >= 0 && xR < "+o+" && xCOffset >= 0 && xCOffset < "+a+") {\n                  vec4 previous = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= "+a+") {\n                    previous.zw = vec2(0.);\n                  }\n\n                  xR"+m+"C"+g+" = vec4(previous.zw, xTexelR"+m+"C"+g+".xy);\n                } else {\n                  xR"+m+"C"+g+" = vec4(0, 0, xTexelR"+m+"C"+g+".xy);\n                }\n              ":"\n                if(xR >= 0 && xR < "+o+" && xC >= 0 && xC < "+a+") {\n                  xTexelR"+m+"C"+g+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+m+"C"+g+" = vec4(0.);\n                }\n\n                xR"+m+"C"+g+" = xTexelR"+m+"C"+g+";\n              ",g+1<f)){var b=s%2==0?x(d):d;d%2==0&&s%2==1||d%2!=0&&s%2!=1?(v+="\n                  xCOffset = xC + "+s%2+" + "+b+";\n\n                  if(xR >= 0 && xR < "+o+" &&\n                    xCOffset >= 0 && xCOffset < "+a+") {\n                    xTexelR"+m+"C"+(g+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n                ",d>1&&(v+="\n                    xCOffset -= 2;\n                    if(xR >= 0 && xR < "+o+" &&\n                      xCOffset >= 0 && xCOffset < "+a+") {\n                      xTexelR"+m+"C"+g+" = getX(batch, xR, xCOffset, d1);\n                    } else {\n                      xTexelR"+m+"C"+g+" = vec4(0.);\n                    }\n                  "),v+="\n                  xR"+m+"C"+(g+1)+" = vec4(\n                    xTexelR"+m+"C"+g+".zw, xTexelR"+m+"C"+(g+2)+".xy);\n                "):v+="\n                  xCOffset = xC + "+b+";\n\n                  if(xR >= 0 && xR < "+o+" &&\n                    xCOffset >= 0 && xCOffset < "+a+") {\n                    xTexelR"+m+"C"+(g+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n\n                  xR"+m+"C"+(g+1)+" = xTexelR"+m+"C"+(g+2)+";\n                "}}else g<f&&(v+="\n              if(xR >= 0 && xR < "+o+") {\n            ",s%2==1?(v+="\n                xCOffset = xC + 1 - "+l+";\n                if(xCOffset >= 0 && xCOffset < "+a+") {\n                  xTexelR"+m+"C"+g+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+m+"C"+g+" = vec4(0.);\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < "+a+") {\n                  xTexelR"+m+"C"+(g+2)+" = getX(batch, xR, xC + 1, d1);\n                } else {\n                  xTexelR"+m+"C"+(g+2)+" = vec4(0.);\n                }\n\n                xR"+m+"C"+g+" = vec4(\n                  xTexelR"+m+"C"+g+".zw, xTexelR"+m+"C"+(g+2)+".zw);\n              ",g+1<f&&(v+="\n                  vec4 final = vec4(0.);\n                  xCOffset = xC + 1 + "+l+";\n                  if(xCOffset >= 0 && xCOffset < "+a+") {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xR"+m+"C"+(g+1)+" = vec4(xTexelR"+m+"C"+(g+2)+".xy, final.xy);\n                ")):(v+="\n                if(xC >= 0 && xC < "+a+") {\n                  xTexelR"+m+"C"+g+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+m+"C"+g+" = vec4(0.);\n                }\n\n                xCOffset = xC + "+l+";\n                if(xCOffset >= 0 && xCOffset < "+a+") {\n                  xTexelR"+m+"C"+(g+2)+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+m+"C"+(g+2)+" = vec4(0.);\n                }\n\n                xR"+m+"C"+g+" = vec4(\n                  xTexelR"+m+"C"+g+".xy, xTexelR"+m+"C"+(g+2)+".xy);\n              ",g+1<f&&(v+="\n                  xR"+m+"C"+(g+1)+" = vec4(\n                    xTexelR"+m+"C"+g+".zw, xTexelR"+m+"C"+(g+2)+".zw);\n                ")),v+="}");g<f&&(v+="\n            vec4 wTexelR"+m+"C"+g+" = getW("+m+", "+g+", d1, q);\n            wR"+m+"C"+g+" = vec4(wTexelR"+m+"C"+g+".xz, wTexelR"+m+"C"+g+".xz);\n          ",g+1<f&&(v+="\n              vec4 wTexelR"+m+"C"+(g+1)+" = getW("+m+", "+(g+1)+", d1, q);\n              wR"+m+"C"+(g+1)+" =\n                vec4(wTexelR"+m+"C"+(g+1)+".xz, wTexelR"+m+"C"+(g+1)+".xz);"))}for(m=0;m<p;m++)for(g=0;g<f;g++)v+="dotProd += xR"+m+"C"+g+" * wR"+m+"C"+g+";";var w="",C="";n&&(w=r?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"vec4 activation(vec4 x) {\n          "+n+"\n        }",C="result = activation(result);");var _=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+w+"\n\n      const ivec2 strides = ivec2("+u+", "+l+");\n      const ivec2 pads = ivec2("+i+", "+s+");\n\n      void main() {\n\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2;\n        int q = 0;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        vec4 dotProd = vec4(0.);\n\n        "+v+"\n\n        vec4 result = dotProd;\n        "+_+"\n        "+C+"\n        setOutput(result);\n      }\n    "},Aa=function(e,t,n,r,o){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var a=e[0],i=e[1],s=e[2],u=e[3],l=t[0],c=n[0],d=n[1];this.outputShape=[l,c,d,u];var p="bilinear"===r?1:0,f=[i-1+".0",s-1+".0"],h=f[0],v=f[1],m=c>1?[""+(i-1)/(c-1),"(y2-y1) * height_ratio","y1*"+h+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+h],g=m[0],y=m[1],b=m[2],w=d>1?[""+(s-1)/(d-1),"(x2-x1) * width_ratio","x1*"+v+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+v],x=w[0],C=w[1],_=w[2];this.userCode="\n      const float height_ratio = float("+g+");\n      const float width_ratio = float("+x+");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= "+a+") {\n          return;\n        }\n\n        float height_scale = "+y+";\n        float width_scale = "+C+";\n\n        float in_y = "+b+";\n        if( in_y < 0.0 || in_y > "+h+" ) {\n          setOutput(float("+o+"));\n          return;\n        }\n        float in_x = "+_+";\n        if( in_x < 0.0 || in_x > "+v+" ) {\n          setOutput(float("+o+"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if("+p+" == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    "},Fa=function(e,t,n){this.variableNames=["x"],this.outputShape=e;var r=e.length,o=e[e.length-1],a=n?"<":">";this.userCode="\n      int getIndex(int i) {\n        "+(n?"return "+o+" -i - 1;":"return i;")+"\n      }\n\n      void main() {\n        "+Ko(r)+" coords = getOutputCoords();\n        int end = "+Da(r,"coords")+";\n        float val = 0.0;\n        for (int i = "+o+" - 1; i >= 0; i -= 1) {\n          int idx = getIndex(i);\n          if (idx "+a+" end) {\n            continue;\n          }\n          if (idx == end && "+t+") {\n            continue;\n          }\n          "+Da(r,"coords")+" = idx;\n          val += getX("+function(e,t){if(1===e)return""+t;if(2===e)return t+".x, "+t+".y";if(3===e)return t+".x, "+t+".y, "+t+".z";if(4===e)return t+".x, "+t+".y, "+t+".z, "+t+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}(r,"coords")+");\n        }\n        setOutput(val);\n      }\n    "};function Da(e,t){if(1===e)return""+t;if(2===e)return t+".y";if(3===e)return t+".z";if(4===e)return t+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}var Ra=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=je.DENSE;var t=Ke(e),n=Bo();this.outputShape=e,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        "+Mo(["r","c","d"],e)+"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2("+t[0]+", "+t[1]+"));\n        int index = 4 * (resTexRC.x * "+t[1]+" + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        "+n.output+" = result;\n      }\n    "},Ta=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=je.DENSE;var t=Ke(e),n=Bo();this.outputShape=e,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        "+Mo(["r","c","d"],e)+"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2("+t[0]+", "+t[1]+"));\n        int index = 4 * (resTexRC.x * "+t[1]+" + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        "+n.output+" = result;\n      }\n    "},Oa=function(){function e(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = "+this.getHeightCoordString()+";\n      int w = "+this.getWidthCoordString()+";\n      int d = "+this.getDepthCoordString()+";\n\n      int in_h = h / "+t+";\n      int offset_h = imod(h, "+t+");\n      int in_w = w / "+t+";\n      int offset_w = imod(w, "+t+");\n      int offset_d = (offset_h * "+t+" + offset_w) *\n        "+this.getOutputDepthSize()+";\n      int in_d = d + offset_d;\n\n      float result = "+this.getInputSamplingString()+";\n      setOutput(result);\n    }\n  "}return e.prototype.getHeightCoordString=function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"},e.prototype.getWidthCoordString=function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"},e.prototype.getDepthCoordString=function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"},e.prototype.getOutputDepthSize=function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]},e.prototype.getInputSamplingString=function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},e}(),Pa=function(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "},Ba=function(e){this.variableNames=["A"],this.outTexUsage=We.DOWNLOAD;var t=Bo();this.outputShape=e,this.userCode="\n      "+Lo+"\n\n      void main() {\n        float x = getAAtOutCoords();\n        "+t.output+" = encode_float(x);\n      }\n    "},Ma=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=We.DOWNLOAD;var t=Bo();this.outputShape=e,this.userCode="\n      "+Lo+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        "+t.output+" = encode_float(x);\n      }\n    "},Na=function(e,t,n){void 0===n&&(n=!1),this.variableNames=["A"];var r=Bo(),o=t[0],a=t[1];this.outputShape=e;var i="result";n&&(i="floor(result * 255. + 0.5)"),this.userCode="\n      "+No(e)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n        \n        int r = flatIndex / "+a+";\n        int c = imod(flatIndex, "+a+");\n        vec2 uv = (vec2(c, r) + halfCR) / vec2("+a+".0, "+o+".0);\n        vec4 values = "+r.texture2D+"(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        "+r.output+" = vec4("+i+", 0., 0., 0.);\n      }\n    "},La=function(e,t,n){void 0===n&&(n=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=Bo(),o=t[0],a=t[1];this.outputShape=e;var i="",s="result";n&&(s="floor(result * 255. + 0.5)");for(var u=0;u<=1;u++)for(var l=0;l<=1;l++){var c=2*u+l;i+="\n          localCoords = coords;\n          if(localCoords[2] + "+l+" < "+e[2]+") {\n            localCoords[2] += "+l+";\n            if(localCoords[1] + "+u+" < "+e[1]+") {\n              localCoords[1] += "+u+";\n\n              flatIndex = getFlatIndex(localCoords);\n              offset = imod(flatIndex, 4);\n\n              flatIndex = idiv(flatIndex, 4, 1.);\n\n              r = flatIndex / "+a+";\n              c = imod(flatIndex, "+a+");\n              uv = (vec2(c, r) + halfCR) / vec2("+a+".0, "+o+".0);\n              values = "+r.texture2D+"(A, uv);\n\n              if(offset == 0) {\n                result["+c+"] = values[0];\n              } else if(offset == 1) {\n                result["+c+"] = values[1];\n              } else if(offset == 2) {\n                result["+c+"] = values[2];\n              } else {\n                result["+c+"] = values[3];\n              }\n            }\n          }\n        "}this.userCode="\n      "+No(e)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        vec4 result = vec4(0.);\n        int flatIndex, r, c, offset;\n        ivec3 localCoords;\n        vec2 uv;\n        vec4 values;\n\n        "+i+"\n\n        "+r.output+" = "+s+";\n      }\n    "},Va="return real * expR - imag * expI;",ja="return real * expI + imag * expR;",Wa=function(e,t,n){this.variableNames=["real","imag"];var r=t[1];this.outputShape=t;var o=n?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,a=n?r+".0":"1.0";this.userCode="\n      const float exponentMultiplier = "+o+";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        "+e+"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float("+r+");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < "+r+"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / "+a+";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    "},Ha=function(){function e(e,t){this.outputShape=[],this.variableNames=["x"],this.outputShape=e,this.userCode="\n      uniform float value;\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;return function(n,r){null==t.valueLoc&&(t.valueLoc=n.getUniformLocationNoThrow(r,"value")),n.gl.uniform1f(t.valueLoc,e)}},e}(),Ua=function(e,t,n){this.variableNames=["A","indices"];var r=e.slice();r[n]=t,this.outputShape=r,this.rank=r.length;var o=Ko(this.rank),a=function(e,t){var n=e.length;if(n>4)throw Error("Gather for rank "+n+" is not yet supported");if(1===n)return"int(getIndices(resRC))";for(var r=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],a=0;a<e.length;a++)a===t?o.push("int(getIndices("+r[a]+"))"):o.push(""+r[a]);return o.join()}(e,n);this.userCode="\n      void main() {\n        "+o+" resRC = getOutputCoords();\n        setOutput(getA("+a+"));\n      }\n    "},za=function(e,t,n){this.sliceDim=e,this.strides=t,this.variableNames=["x","indices"],this.outputShape=n;var r=Ko(t.length),o=Ko(n.length),a=this.sliceDim>1?"strides[j]":"strides";this.userCode="\n        "+r+" strides = "+r+"("+this.strides+");\n         void main() {\n          "+o+" coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < "+this.sliceDim+"; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * "+a+";\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      "};function $a(e,t){var n=Bo();return rt(e,t,n.version+"\n    precision highp float;\n    "+n.attribute+" vec3 clipSpacePos;\n    "+n.attribute+" vec2 uv;\n    "+n.varyingVs+" vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }")}function qa(e,t){return dt(e,t,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function Ga(e,t){return pt(e,t,new Uint16Array([0,1,2,2,1,3]))}function Ka(e,t,n,r,o,a,i){ht(n,r);var s=ft(e,t),u=e.TEXTURE_2D;return Ze(e,t,(function(){return e.bindTexture(u,s)})),Ze(e,t,(function(){return e.texParameteri(u,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)})),Ze(e,t,(function(){return e.texParameteri(u,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)})),Ze(e,t,(function(){return e.texParameteri(u,e.TEXTURE_MIN_FILTER,e.NEAREST)})),Ze(e,t,(function(){return e.texParameteri(u,e.TEXTURE_MAG_FILTER,e.NEAREST)})),Ze(e,t,(function(){return e.texImage2D(u,0,o,n,r,0,a,i,null)})),Ze(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)})),s}function Xa(e,t,n,r,o){var a=Ge(n,r);return Ka(e,t,a[0],a[1],o.internalFormatFloat,o.textureFormatFloat,e.FLOAT)}function Ya(e,t,n,r,o){var a=Ge(n,r);return Ka(e,t,a[0],a[1],o.internalFormatHalfFloat,o.textureFormatFloat,o.textureTypeHalfFloat)}function Za(e,t,n,r,o){var a=Ge(n,r);return Ka(e,t,a[0],a[1],e.RGBA,e.RGBA,e.UNSIGNED_BYTE)}function Ja(e,t,n,r,o){var a=Xe(n,r);return Ka(e,t,a[0],a[1],o.internalFormatPackedFloat,e.RGBA,e.FLOAT)}function Qa(e,t,n,r,o){var a=Xe(n,r);return Ka(e,t,a[0],a[1],o.internalFormatPackedHalfFloat,e.RGBA,o.textureTypeHalfFloat)}function ei(e,t,n,r){return Ze(e,t,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),mt(e,t,n,"clipSpacePos",r,3,20,0)&&mt(e,t,n,"uv",r,2,20,12)}function ti(e,t,n,r,o,a,i){var s,u,l;Ze(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,n)})),a instanceof Uint8Array?(s=new Uint8Array(r*o*4),u=e.UNSIGNED_BYTE,l=e.RGBA):(s=new Float32Array(r*o*4),u=e.FLOAT,l=i.internalFormatPackedFloat),s.set(a),Ze(e,t,(function(){return e.texImage2D(e.TEXTURE_2D,0,l,r,o,0,e.RGBA,u,s)})),Ze(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}function ni(e,t,n,r){Ze(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,n)})),r.data instanceof Uint8Array?Ze(e,t,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,r.width,r.height,0,e.RGBA,e.UNSIGNED_BYTE,r.data)})):Ze(e,t,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r)})),Ze(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}function ri(e,t,n,r,o){var a=e.createBuffer();Ze(e,t,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,a)}));var i=16*n*r;return Ze(e,t,(function(){return e.bufferData(e.PIXEL_PACK_BUFFER,i,e.STREAM_READ)})),Ze(e,t,(function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,0)})),Ze(e,t,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)})),a}function oi(e,t,n){var r=e,o=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,o),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),o}function ai(e,t,n,r,o){var a=Ge(n,r),i=a[0],s=a[1],u=new Uint8Array(n*r*4);return Ze(e,t,(function(){return e.readPixels(0,0,i,s,o.downloadTextureFormat,e.UNSIGNED_BYTE,u)})),new Float32Array(u.buffer)}function ii(e,t,n,r,o,a,i,s){var u=e,l=new Float32Array(function(e,t){var n=Xe(e,t);return n[0]*n[1]*4}(a,i));return u.bindBuffer(u.PIXEL_PACK_BUFFER,t),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,l),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),l}function si(e,t,n,r){var o=new Float32Array(n*r*4);return Ze(e,t,(function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,o)})),o}var ui=Object.freeze({createVertexShader:$a,createVertexBuffer:qa,createIndexBuffer:Ga,createFloat32MatrixTexture:Xa,createFloat16MatrixTexture:Ya,createUnsignedBytesMatrixTexture:Za,createPackedMatrixTexture:Ja,createFloat16PackedMatrixTexture:Qa,bindVertexProgramAttributeStreams:ei,uploadDenseMatrixToTexture:ti,uploadPixelDataToTexture:ni,createBufferFromOutputTexture:ri,downloadFloat32MatrixFromBuffer:oi,downloadByteEncodedFloatMatrixFromOutputTexture:ai,downloadPackedMatrixFromBuffer:ii,downloadMatrixFromPackedOutputTexture:si}),li=function(){function e(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var t=l().getNumber("WEBGL_VERSION");null!=e?(this.gl=e,$e(t,e)):this.gl=qe(t);var n="WEBGL_color_buffer_float";if(1===l().getNumber("WEBGL_VERSION")){if(this.textureFloatExtension=nt(this.gl,this.debug,"OES_texture_float"),Mt(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=nt(this.gl,this.debug,"OES_texture_half_float");else if(l().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),Mt(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=nt(this.gl,this.debug,"EXT_color_buffer_half_float");else if(l().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",Mt(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!Mt(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=qa(this.gl,this.debug),this.indexBuffer=Ga(this.gl,this.debug),this.framebuffer=vt(this.gl,this.debug),this.textureConfig=Ye(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(e.prototype,"debug",{get:function(){return l().getBool("DEBUG")},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){var e=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;Ze(t,this.debug,(function(){return t.finish()})),Ze(t,this.debug,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)})),Ze(t,this.debug,(function(){return t.deleteFramebuffer(e.framebuffer)})),Ze(t,this.debug,(function(){return t.bindBuffer(t.ARRAY_BUFFER,null)})),Ze(t,this.debug,(function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)})),Ze(t,this.debug,(function(){return t.deleteBuffer(e.indexBuffer)})),this.disposed=!0}},e.prototype.createFloat32MatrixTexture=function(e,t){return this.throwIfDisposed(),Xa(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createFloat16MatrixTexture=function(e,t){return this.throwIfDisposed(),Ya(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createUnsignedBytesMatrixTexture=function(e,t){return this.throwIfDisposed(),Za(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.uploadPixelDataToTexture=function(e,t){this.throwIfDisposed(),ni(this.gl,this.debug,e,t)},e.prototype.uploadDenseMatrixToTexture=function(e,t,n,r){this.throwIfDisposed(),ti(this.gl,this.debug,e,t,n,r,this.textureConfig)},e.prototype.createFloat16PackedMatrixTexture=function(e,t){return this.throwIfDisposed(),Qa(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createPackedMatrixTexture=function(e,t){return this.throwIfDisposed(),Ja(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.deleteMatrixTexture=function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(Ct(this.gl,this.debug,this.framebuffer),this.outputTexture=null),Ze(this.gl,this.debug,(function(){return t.gl.deleteTexture(e)}))},e.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return ai(r.gl,r.debug,t,n,r.textureConfig)}))},e.prototype.downloadPackedMatrixFromBuffer=function(e,t,n,r,o,a){return ii(this.gl,e,0,0,0,o,a,this.textureConfig)},e.prototype.downloadFloat32MatrixFromBuffer=function(e,t){return oi(this.gl,e,t)},e.prototype.createBufferFromTexture=function(e,t,n){this.bindTextureToFrameBuffer(e);var r=ri(this.gl,this.debug,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r},e.prototype.createAndWaitForFence=function(){var e=this.createFence(this.gl);return this.pollFence(e)},e.prototype.createFence=function(e){var t,n,r=this;if(l().getBool("WEBGL_FENCE_API_ENABLED")){var o=e,a=o.fenceSync(o.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=function(){var e=o.clientWaitSync(a,0,0);return e===o.ALREADY_SIGNALED||e===o.CONDITION_SATISFIED},t=a}else l().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(t,l().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:t,isFencePassed:n}},e.prototype.downloadMatrixFromPackedTexture=function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return si(r.gl,r.debug,t,n)}))},e.prototype.createProgram=function(e){this.throwIfDisposed();var t=this.gl,n=ot(t,this.debug,e),r=$a(t,this.debug),o=ut(t,this.debug);return Ze(t,this.debug,(function(){return t.attachShader(o,r)})),Ze(t,this.debug,(function(){return t.attachShader(o,n)})),lt(t,this.debug,o),this.debug&&ct(t,this.debug,o),this.vertexAttrsAreBound||(this.setProgram(o),this.vertexAttrsAreBound=ei(t,this.debug,this.program,this.vertexBuffer)),o},e.prototype.deleteProgram=function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&Ze(this.gl,this.debug,(function(){return t.gl.deleteProgram(e)}))},e.prototype.setProgram=function(e){var t=this;this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&ct(this.gl,this.debug,this.program),Ze(this.gl,this.debug,(function(){return t.gl.useProgram(e)}))},e.prototype.getUniformLocation=function(e,t,n){return void 0===n&&(n=!0),this.throwIfDisposed(),n?yt(this.gl,this.debug,e,t):bt(this.gl,e,t)},e.prototype.getAttributeLocation=function(e,t){var n=this;return this.throwIfDisposed(),Ze(this.gl,this.debug,(function(){return n.gl.getAttribLocation(e,t)}))},e.prototype.getUniformLocationNoThrow=function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)},e.prototype.setInputMatrixTexture=function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),wt(this.gl,this.debug,this.program,e,t,n)},e.prototype.setOutputMatrixTexture=function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)},e.prototype.setOutputPackedMatrixTexture=function(e,t,n){this.throwIfDisposed();var r=Xe(t,n),o=r[0],a=r[1];this.setOutputMatrixTextureDriver(e,o,a)},e.prototype.setOutputMatrixWriteRegion=function(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)},e.prototype.setOutputPackedMatrixWriteRegion=function(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},e.prototype.debugValidate=function(){null!=this.program&&ct(this.gl,this.debug,this.program),_t(this.gl)},e.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),Ze(e,this.debug,(function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}))},e.prototype.blockUntilAllProgramsCompleted=function(){var e=this;this.throwIfDisposed(),Ze(this.gl,this.debug,(function(){return e.gl.finish()}))},e.prototype.getQueryTimerExtension=function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=nt(this.gl,this.debug,2===l().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},e.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},e.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},e.prototype.beginQuery=function(){if(2===l().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),o=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,o),o},e.prototype.endQuery=function(){if(2!==l().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT)}},e.prototype.waitForQueryAndGetTime=function(e){return a(this,void 0,void 0,(function(){var t=this;return i(this,(function(n){switch(n.label){case 0:return[4,O((function(){return t.disposed||t.isQueryAvailable(e,l().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}))];case 1:return n.sent(),[2,this.getQueryTime(e,l().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}}))}))},e.prototype.getQueryTime=function(e,t){if(0===t)return null;if(2===t){var n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6},e.prototype.isQueryAvailable=function(e,t){if(0===t)return!0;if(2===t){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),o=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),o&&!this.disjoint}return o=(r=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT),null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),o&&!this.disjoint},e.prototype.pollFence=function(e){var t=this;return new Promise((function(n){t.addItemToPoll((function(){return e.isFencePassed()}),(function(){return n()}))}))},e.prototype.pollItems=function(){for(var e=function(e){for(var t=0;t<e.length;++t)if(!e[t]())break;return t-1}(this.itemsToPoll.map((function(e){return e.isDoneFn}))),t=0;t<=e;++t)(0,this.itemsToPoll[t].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(e+1)},e.prototype.addItemToPoll=function(e,t){var n=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||O((function(){return n.pollItems(),0===n.itemsToPoll.length}))},e.prototype.bindTextureToFrameBuffer=function(e){this.throwIfDisposed(),xt(this.gl,this.debug,e,this.framebuffer),this.debug&&_t(this.gl)},e.prototype.unbindTextureToFrameBuffer=function(){null!=this.outputTexture?(xt(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&_t(this.gl)):Ct(this.gl,this.debug,this.framebuffer)},e.prototype.downloadMatrixDriver=function(e,t){this.bindTextureToFrameBuffer(e);var n=t();return this.unbindTextureToFrameBuffer(),n},e.prototype.setOutputMatrixTextureDriver=function(e,t,n){this.throwIfDisposed();var r=this.gl;xt(r,this.debug,e,this.framebuffer),this.debug&&_t(r),this.outputTexture=e,Ze(r,this.debug,(function(){return r.viewport(0,0,t,n)})),Ze(r,this.debug,(function(){return r.scissor(0,0,t,n)}))},e.prototype.setOutputMatrixWriteRegionDriver=function(e,t,n,r){var o=this;this.throwIfDisposed(),Ze(this.gl,this.debug,(function(){return o.gl.scissor(e,t,n,r)}))},e.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},e.prototype.throwIfNoProgram=function(){if(null==this.program)throw new Error("No GPU program is currently set.")},e}();function ci(e,t){if(e.length!==t.length)throw Error("Binary was compiled with "+e.length+" inputs, but was executed with "+t.length+" inputs");e.forEach((function(e,n){var r=e.logicalShape,o=t[n],a=o.shape;if(!A(r,a))throw Error("Binary was compiled with different shapes than the current args. Shapes "+r+" and "+a+" must match");if(!e.isUniform||!o.isUniform){var i=e.texShape,s=o.isUniform?null:o.texData.texShape;if(!A(i,s))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+i+" and "+s+" must match")}}))}var di=function(e,t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var r=n.filterWidth,o=n.inChannels,a=n.strideWidth,i=n.strideHeight,s=n.padInfo,u=n.outWidth,l=n.dilationWidth,c=n.dilationHeight,d=n.dataFormat,p=s.left,f=s.top,h=o*r,v=Bo(),m="channelsLast"===d,g=m?0:1,y=m?1:2,b="",w=0;w<=1;w++)for(var x=0;x<=1;x++)b+="\n          blockIndex = rc.y + "+x+";\n          pos = rc.x + "+w+";\n\n          if(blockIndex < "+e[1]+" && pos < "+e[0]+") {\n            offsetY = int(blockIndex / ("+u+")) * "+i+" - "+f+";\n            d0 = offsetY + "+c+" * (pos / "+h+");\n\n            if(d0 < "+t[g]+" && d0 >= 0) {\n\n              offsetX = int(mod(float(blockIndex), "+u+".) * "+a+". - "+p+".);\n              d1 = offsetX + "+l+" * (int(mod(float(pos), "+h+".) / "+o+".));\n\n              if(d1 < "+t[y]+" && d1 >= 0) {\n\n                ch = int(mod(float(pos), "+o+".));\n\n                if ("+m+") {\n                  innerDims = vec2(d1, ch);\n                  result["+(2*w+x)+"] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result["+(2*w+x)+"] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ";this.userCode="\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        "+b+"\n\n        "+v.output+" = result;\n      }\n    "},pi=function(e,t,n,r,o){this.variableNames=["x"],this.outputShape=[];var a,i=t,s=e[3]-1;this.outputShape=e;var u="float("+n+") + float("+r+") * sum";a=.5===o?"inversesqrt("+u+")":1===o?"1.0/("+u+")":"exp(log("+u+") * float(-"+o+"));",this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -"+i+"; j <= "+i+"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  "+s+") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * "+a+";\n        setOutput(val);\n      }\n    "},fi=function(e,t,n,r,o){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=o,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < "+this.depth+"; ++d) {\n          int depthBegin = int(max(0.0, float(d - "+t+")));\n          int depthEnd = int(min(float("+this.depth+"),\n              float(d + "+t+" + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = "+this.depth+";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float("+r+") * norm + float("+n+");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float("+r+")\n                * float("+o+")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * "+o+");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    "},hi=function(e,t,n,r,o){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var a,i=t,s=e[3]-1;this.outputShape=e;var u="float("+n+") + float("+r+") * sum";a=.5===o?"inversesqrt("+u+")":1===o?"1.0/("+u+")":"exp(log("+u+") * float(-"+o+"));",this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < "+this.outputShape[3]+";\n        bool hasNextRow = c < "+this.outputShape[2]+";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - "+i+";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - "+i+"; j <= "+i+"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2("+s+"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * "+a+";\n        setOutput(result);\n      }\n    "},vi=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideHeight,n=e.strideWidth,r=e.dilationHeight,o=e.effectiveFilterHeight,a=e.effectiveFilterWidth,i=o-1-e.padInfo.top,s=a-1-e.padInfo.left,u=o*a-1;this.userCode="\n      const ivec2 pads = ivec2("+i+", "+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+o+";\n          wR += "+r+") {\n          float dyR = float(dyRCorner + wR) / "+t+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+a+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+n+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = "+u+" - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * "+a+" + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},mi=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,o=e.dilationDepth,a=e.dilationHeight,i=e.dilationWidth,s=e.effectiveFilterDepth,u=e.effectiveFilterHeight,l=e.effectiveFilterWidth,c=s-1-e.padInfo.front,d=u-1-e.padInfo.top,p=l-1-e.padInfo.left,f=s*u*l-1;this.userCode="\n      const ivec3 pads = ivec3("+c+", "+d+", "+p+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < "+s+";\n           wD += "+o+") {\n          float dyD = float(dyDCorner + wD) / "+t+".0;\n\n          if (dyD < 0.0 || dyD >= "+e.outDepth+".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < "+u+";\n              wR += "+a+") {\n            float dyR = float(dyRCorner + wR) / "+n+".0;\n\n            if (dyR < 0.0 || dyR >= "+e.outHeight+".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < "+l+";\n                wC += "+i+") {\n              float dyC = float(dyCCorner + wC) / "+r+".0;\n\n              if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = "+f+" -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * "+u+" * "+l+" +\n                  wR * "+l+" + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},gi=function(e,t,n,r,o,a,i){void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===o&&(o=!1),void 0===a&&(a=null),void 0===i&&(i=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;var s=n?e[1]:e[2],u=Math.ceil(s/2),l=n?"i * 2, rc.y":"rc.y, i * 2",c=r?"rc.z, i * 2":"i * 2, rc.z",d=n?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],p=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],f="",h="";a&&(f=i?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          "+a+"\n        }":"vec4 activation(vec4 x) {\n          "+a+"\n        }",h="result = activation(result);");var v=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+f+"\n\n      const float sharedDimension = "+u+".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < "+u+"; i++) {\n          vec4 a = getMatrixA(rc.x, "+l+");\n          vec4 b = getMatrixB(rc.x, "+c+");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += ("+d[0]+" * "+p[0]+");\n          result += ("+d[1]+" * "+p[1]+");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        "+v+"\n\n        "+h+"\n\n        setOutput(result);\n      }\n    "},yi=function(){function e(e,t,n){this.variableNames=["probs"],this.outputShape=[e,n],this.userCode="\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < "+(t-1)+"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float("+(t-1)+"));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;return function(n,r){null==t.seedLoc&&(t.seedLoc=n.getUniformLocation(r,"seed")),n.gl.uniform1f(t.seedLoc,e)}},e}(),bi=function(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float("+r+"), float("+n+"),\n                      float(index == coords.y)));\n      }\n    "},wi=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e;var t=e.length;if(0===t)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var n=Po("rc",t),r=Ko(t),o=function(e,t,n){if(1===e)return"rc > "+t[0];for(var r="",o=e-2;o<e;o++)r+=n[o]+" >= "+t[o],o<e-1&&(r+="||");return r}(t,e,n),a=function(e,t,n,r){if(1===e)return"";var o=r.slice(-2);return"\n    int r = "+o[0]+";\n    int c = "+o[1]+";\n    int rp1 = r + 1;\n    int cp1 = c + 1;\n\n    bool cEdge = cp1 >= "+t+";\n    bool rEdge = rp1 >= "+n+";\n  "}(t,e[e.length-1],e[e.length-2],n),i=function(e,t){var n=e.length,r=function(e,t){for(var n=[],r=0;r<=1;r++)for(var o=0;o<=1;o++){for(var a=(0===r?"r":"rp1")+", "+(0===o?"c":"cp1"),i=2;i<e;i++)a=t[t.length-1-i]+","+a;n.push(a)}return n}(n,t);return 1===n?"getA(rc),\n            rc + 1 >= "+e[0]+" ? 0. : getA(rc + 1),\n            0, 0":"getA("+r[0]+"),\n          cEdge ? 0. : getA("+r[1]+"),\n          rEdge ? 0. : getA("+r[2]+"),\n          rEdge || cEdge ? 0. : getA("+r[3]+")"}(e,n);this.userCode="\n        void main() {\n          "+r+" rc = getOutputCoords();\n\n          if("+o+") {\n            setOutput(vec4(0));\n          } else {\n            "+a+"\n\n            setOutput(vec4("+i+"));\n          }\n        }\n      "}},xi=function(e,t,n){this.variableNames=["x"],this.outputShape=t.map((function(t,n){return t[0]+e[n]+t[1]}));var r=e.length,o=Ko(r),a=t.map((function(e){return e[0]})).join(","),i=t.map((function(t,n){return t[0]+e[n]})).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?"\n      "+o+" start = "+o+"("+a+");\n      "+o+" end = "+o+"("+i+");\n\n      void main() {\n        "+o+" outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(float("+n+"));\n        } else {\n          "+o+" coords = outC - start;\n          setOutput(getX("+s+"));\n        }\n      }\n    ":"\n        int start = "+a+";\n        int end = "+i+";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(float("+n+"));\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      "},Ci=function(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map((function(t,n){return t[0]+e[n]+t[1]}));for(var r=e.length,o=Ko(r),a=t.map((function(e){return e[0]})).join(","),i=t.map((function(t,n){return t[0]+e[n]})).join(","),s=Po("rc",r),u=Po("source",r),l=s[r-1]+" < "+this.outputShape[r-1],c=1===r?"source":"vec2("+u.slice(-2).join()+")",d=[o+" rc = outputLoc;",s[r-1]+" += 1;\n       if("+l+") {\n      ",1===r?"":"}\n       rc = outputLoc;\n       "+s[r-2]+" += 1;\n       if("+s[r-2]+" < "+this.outputShape[r-2]+") {",1===r?"":"  "+s[r-1]+" += 1;\n         if("+l+") {"],p=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",f="",h=0,v=1===r?2:4;h<v;h++)f+="\n        "+d[h]+"\n        if ("+p+") {\n          result["+h+"] = float("+n+");\n        } else {\n          "+o+" source = rc - start;\n          result["+h+"] = getChannel(getX("+u.join()+"), "+c+");\n        }\n      ";f+=1===r?"} ":"}}",this.userCode="\n      const "+o+" start = "+o+"("+a+");\n      const "+o+" end = "+o+"("+i+");\n\n      void main() {\n        "+o+" outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        "+f+"\n        setOutput(result);\n      }\n    "},_i=function(e,t,n){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");var r=e.filterWidth,o=e.strideHeight,a=e.strideWidth,i=e.dilationHeight,s=e.dilationWidth,u=e.effectiveFilterHeight,l=e.effectiveFilterWidth,c=e.padInfo.top,d=e.padInfo.left;this.outputShape=e.outShape;var p="avg"===t,f="0.0";if(p||(f="-1.0 / 1e-20"),n)this.userCode="\n        const ivec2 strides = ivec2("+o+", "+a+");\n        const ivec2 pads = ivec2("+c+", "+d+");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < "+u+";\n              wR += "+i+") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+l+";\n                wC += "+s+") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value >= currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = wR * "+l+" + wC;\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ";else{var h=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(h="avgValue / count");var v=4*Math.floor(r/4),m=r%4,g="\n      if ("+p+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec2 strides = ivec2("+o+", "+a+");\n      const ivec2 pads = ivec2("+c+", "+d+");\n      const float initializationValue = "+f+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= "+e.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+f+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < "+u+";\n            wR += "+i+") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= "+e.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+v+"; wC += 4) {\n            int xC = xCCorner + wC * "+s+";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+s+", d),\n              getValue(batch, xR, xC + 2 * "+s+", d),\n              getValue(batch, xR, xC + 3 * "+s+", d)\n            );\n\n            "+g+"\n          }\n\n          int xC = xCCorner + "+v+";\n          if ("+(1===m)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            "+g+"\n          } else if ("+(2===m)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+s+", d),\n              initializationValue,\n              initializationValue\n            );\n\n            "+g+"\n          } else if ("+(3===m)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+s+", d),\n              getValue(batch, xR, xC + 2 * "+s+", d),\n              initializationValue\n            );\n\n            "+g+"\n          }\n        }\n        setOutput("+h+");\n      }\n    "}},ki=function(e,t,n){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");var r=e.filterWidth,o=e.strideDepth,a=e.strideHeight,i=e.strideWidth,s=e.dilationDepth,u=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterDepth,d=e.effectiveFilterHeight,p=e.effectiveFilterWidth,f=e.padInfo.front,h=e.padInfo.top,v=e.padInfo.left;this.outputShape=e.outShape;var m="avg"===t,g="0.0";if(m||(g="-1.0 / 1e-20"),n)this.userCode="\n        const ivec3 strides =\n            ivec3("+o+", "+a+", "+i+");\n        const ivec3 pads = ivec3("+f+", "+h+", "+v+");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < "+c+";\n              wD += "+s+") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= "+e.inDepth+") {\n              continue;\n            }\n\n            for (int wR = 0; wR < "+d+";\n                wR += "+u+") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= "+e.inHeight+") {\n                continue;\n              }\n\n              for (int wC = 0; wC < "+p+";\n                  wC += "+l+") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= "+e.inWidth+") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value >= currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition =\n                      wD * "+d+" * "+p+" +\n                      wR * "+p+" + wC;;\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ";else{var y=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(y="avgValue / count");var b=4*Math.floor(r/4),w=r%4,x="\n      if ("+m+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec3 strides =\n        ivec3("+o+", "+a+", "+i+");\n      const ivec3 pads = ivec3("+f+", "+h+", "+v+");\n      const float initializationValue = "+g+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= "+e.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+g+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < "+c+";\n            wD += "+s+") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= "+e.inDepth+") {\n            continue;\n          }\n\n          for (int wR = 0; wR < "+d+";\n            wR += "+u+") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+b+"; wC += 4) {\n              int xC = xCCorner + wC * "+l+";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+l+", ch),\n                getValue(batch, xD, xR, xC + 2 * "+l+", ch),\n                getValue(batch, xD, xR, xC + 3 * "+l+", ch)\n              );\n\n              "+x+"\n            }\n\n            int xC = xCCorner + "+b+";\n            if ("+(1===w)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              "+x+"\n            } else if ("+(2===w)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+l+", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              "+x+"\n            } else if ("+(3===w)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+l+", ch),\n                getValue(batch, xD, xR, xC + 2 * "+l+", ch),\n                initializationValue\n              );\n\n              "+x+"\n            }\n          }\n          setOutput("+y+");\n        }\n      }\n    "}},Si=function(e,t){this.variableNames=["x"];var n=e.windowSize,r=e.batchSize,o=e.inSize,a=Math.ceil(o/n);this.outputShape=[r,a];var i="0.0",s="";"prod"===t?i="1.0":"min"===t?(i="1.0 / 1e-20",s="min"):"max"===t&&(i="-1.0 / 1e-20",s="max");var u=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===t?u="sumValue":"prod"===t?u="prodValue":"all"===t?u="allValue":"any"===t&&(u="anyValue");var l=4*Math.floor(n/4),c=n%4,d="\n      if ("+("sum"===t)+") {\n        sumValue += dot(values, ones);\n      } else if ("+("prod"===t)+") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = "+s+"(values, minMaxValue);\n      }\n    ",p="vec4";"all"===t?(i="1.0",d="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",p="bvec4"):"any"===t&&(i="0.0",d="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",p="bvec4");var f="";o%n>0&&(f="\n        if (inIdx < 0 || inIdx >= "+o+") {\n          return initializationValue;\n        }\n      "),this.userCode="\n      const float initializationValue = "+i+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        "+f+"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+n+";\n\n        vec4 minMaxValue = vec4("+i+");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < "+l+"; i += 4) {\n          int inIdx = inOffset + i;\n          "+p+" values = "+p+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          "+d+"\n        }\n\n        int inIdx = inOffset + "+l+";\n        if ("+(1===c)+") {\n          "+p+" values = "+p+"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          "+d+"\n        } else if ("+(2===c)+") {\n          "+p+" values = "+p+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          "+d+"\n        } else if ("+(3===c)+") {\n          "+p+" values = "+p+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          "+d+"\n        }\n        setOutput("+u+");\n      }\n    "},Ei=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var n="",r=0;r<4;r++){var o="thisRC = rc;";r%2==1&&(o+="thisRC.z += 1;"),r>1&&(o+="thisRC.y += 1;"),n+="\n        "+o+"\n        "+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+"\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result["+r+"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        "+(r>0?"}":"")+"\n      "}this.userCode="\n      \n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      "+Mo(["r","c","d"],t)+"\n      return ivec3(r, c, d);\n    }\n  \n      "+No(e)+"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = "+e[1]+";\n        int cols = "+e[2]+";\n\n        "+n+"\n\n        setOutput(result);\n      }\n    "},Ii=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,o=r[1],a=r[2],i=e.shape,s=i[1],u=i[2],l=[n&&s>1?o-1:o,n&&u>1?a-1:a],c=[n&&s>1?s-1:s,n&&u>1?u-1:u],d=l[0]/c[0],p=l[1]/c[1],f=1/d,h=1/p,v=2*Math.ceil(f)+2,m=2*Math.ceil(h)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+d+");\n        const float widthScale = float("+p+");\n\n        const float invHeightScale = float("+f+");\n        const float invWidthScale = float("+h+");\n\n        const int winHeight = int("+v+");\n        const int winWidth = int("+m+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+s+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+u+") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), "+(o-1)+".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), "+(a-1)+".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},Ai=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var o=e[0],a=e[1],i=e[2],s=e[3];this.outputShape=[o,t,n,s];var u=[r&&t>1?a-1:a,r&&n>1?i-1:i],l=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+u[0]/l[0]+",\n          "+u[1]/l[1]+");\n      const vec2 inputShapeRC = vec2("+a+".0, "+i+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    "},Fi=function(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=e[0],a=e[1],i=e[2],s=e[3];this.outputShape=[o,t,n,s];var u=[r&&t>1?a-1:a,r&&n>1?i-1:i],l=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          "+u[0]/l[0]+",\n          "+u[1]/l[1]+",\n          "+u[1]/l[1]+");\n      const vec3 inputShapeRC = vec3("+a+".0, "+i+".0,\n                                     "+i+".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < "+(s-1)+";\n        bool hasNextRow = coords.z < "+(n-1)+";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    "},Di=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,o=r[1],a=r[2],i=e.shape,s=i[1],u=i[2],l=[n&&s>1?o-1:o,n&&u>1?a-1:a],c=[n&&s>1?s-1:s,n&&u>1?u-1:u],d=l[0]/c[0],p=l[1]/c[1],f=1/d,h=1/p,v=2*Math.ceil(f)+2,m=2*Math.ceil(h)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+d+");\n        const float widthScale = float("+p+");\n\n        const float invHeightScale = float("+f+");\n        const float invWidthScale = float("+h+");\n\n        const int winHeight = int("+v+");\n        const int winWidth = int("+m+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+s+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+u+") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float("+l[0]+") *\n                (float(dyR) / float("+c[0]+"));\n\n            float sourceFracCol =\n                float("+l[1]+") *\n                  (float(dyC) / float("+c[1]+"));\n\n            int sourceNearestRow = int(min(\n                float(int("+o+") - 1),\n                "+n+" ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int("+a+") - 1),\n                "+n+" ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},Ri=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var o=e[0],a=e[1],i=e[2],s=e[3];this.outputShape=[o,t,n,s];var u=[r&&t>1?a-1:a,r&&n>1?i-1:i],l=[r&&t>1?t-1:t,r&&n>1?n-1:n],c=r?"0.5":"0.0";this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+u[0]/l[0]+",\n          "+u[1]/l[1]+");\n      const vec2 inputShapeRC = vec2("+a+".0, "+i+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + "+c+")));\n\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    "},Ti=function(e,t){this.variableNames=["x"];var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");if(this.outputShape=e,1!==n){var r=e.map((function(n,r){return function(n){return-1!==t.indexOf(n)&&1!==e[n]?e[n]+" - coords["+n+"] - 1":"coords["+n+"]"}(r)})).join(","),o=Ko(n);this.userCode="\n      void main() {\n        "+o+" coords = getOutputCoords();\n        setOutput(getX("+r+"));\n      }\n    "}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX("+e[0]+" - coord - 1));\n        }\n      "},Oi=function(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");this.outputShape=e;var r=Po("rc",n),o=r[n-1]+" + 1 < "+this.outputShape[n-1],a=r[n-2]+" + 1 < "+this.outputShape[n-2],i=Ko(n);function s(n){var r=e.map((function(r,o){return function(n,r){return-1!==t.indexOf(n)&&1!==e[n]?e[n]+" - "+r[n]+" - 1":""+r[n]}(o,n)}));return"getChannel(getX("+r.join(",")+"), vec2("+r.slice(-2).join(",")+"))"}this.userCode=1===n?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX("+e[0]+" - rc - 1),\n            "+e[0]+" - rc - 1);\n          if("+o+"){\n              result.g = getChannel(getX("+e[0]+" - (rc  + 1) - 1),\n                "+e[0]+" - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      ":"\n        void main() {\n          "+i+" rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = "+function(e){return s(e)}(r.slice())+";\n          if("+o+"){\n            result.g = "+function(e){return e[n-1]="("+e[n-1]+" + 1)",s(e)}(r.slice())+";\n          }\n          if("+a+") {\n            result.b = "+function(e){return e[n-2]="("+e[n-2]+" + 1)",s(e)}(r.slice())+";\n            if("+o+") {\n              result.a = "+function(e){return e[n-1]="("+e[n-1]+" + 1)",e[n-2]="("+e[n-2]+" + 1)",s(e)}(r.slice())+";\n            }\n          }\n          setOutput(result);\n        }\n    "},Pi=function(e,t,n,r,o,a,i){void 0===i&&(i=!0),this.variableNames=["updates","indices","defaultValue"],this.outputShape=a;var s=Ko(o.length),u=Ko(a.length),l="";1===n?l="i":2===n&&(l="i, j");var c="getIndices("+l+")",d="";1===r?d="i":2===r&&(d="i, coords[1]");var p="getUpdates("+d+")",f=t>1?"strides[j]":"strides";this.userCode="\n        "+s+" strides = "+s+"("+o+");\n\n        void main() {\n          "+u+" coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < "+e+"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < "+t+"; j++) {\n              int index = round("+c+");\n              flattenedIndex += index * "+f+";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += "+p+";\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      "},Bi=function(e,t){this.variableNames=["x","segmentIds"];var n=e.windowSize,r=e.batchSize,o=e.inSize,a=e.numSegments,i=a*Math.ceil(o/n);this.outputShape=[r,i];var s=4*Math.floor(n/4),u=n%4,l="\n        sumValue += dot(values, segFilter);\n    ",c="";o%n>0&&(c="\n        if (inIdx < 0 || inIdx >= "+o+") {\n          return initializationValue;\n        }\n      ");var d="";o%n>0&&(d="\n        if (inIdx < 0 || inIdx >= "+o+") {\n          return -1.0;\n        }\n      "),this.userCode="\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        "+c+"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        "+d+"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          "+a+")) * float("+n+"));\n        int currentSeg = int(mod(float(outIdx), float("+a+")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < "+s+"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          "+l+"\n        }\n\n        int inIdx = inOffset + "+s+";\n        if ("+(1===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          "+l+"\n        } else if ("+(2===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          "+l+"\n        } else if ("+(3===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          "+l+"\n        }\n        setOutput(sumValue);\n      }\n    "},Mi=function(e,t,n){var r,o;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error("Where for rank "+n+" is not yet supported");if(1===n)o="resRC",r="resRC";else{for(var a=["resRC.x","resRC.y","resRC.z","resRC.w"],i=[],s=[],u=0;u<t.length;u++)s.push(""+a[u]),u<e&&i.push(""+a[u]);r=i.join(),o=s.join()}var l=Ko(n);this.userCode="\n      void main() {\n        "+l+" resRC = getOutputCoords();\n        float cVal = getC("+r+");\n        if (cVal >= 1.0) {\n          setOutput(getA("+o+"));\n        } else {\n          setOutput(getB("+o+"));\n        }\n      }\n    "},Ni=function(){function e(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;var t,n=Ko(this.rank),r="uniform int start["+this.rank+"];",o=function(e){if(1===e)return"sourceLoc";if(e<=6)return Li.slice(0,e).map((function(e){return"sourceLoc."+e})).join(",");throw Error("Slicing for rank "+e+" is not yet supported")}(this.rank);t="\n        "+n+" sourceLoc;\n        "+n+" coords = getOutputCoords();\n        "+e.map((function(e,t){return"sourceLoc."+Li[t]+" = start["+t+"] + coords."+Li[t]+";"})).join("\n")+"\n      ",this.userCode="\n      "+r+"\n      void main() {\n        "+t+"\n        setOutput(getSource("+o+"));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(n,r){null==t.startLoc&&(t.startLoc=n.getUniformLocationNoThrow(r,"start"),null==t.startLoc)||n.gl.uniform1iv(t.startLoc,e)}},e}(),Li=["x","y","z","w","u","v"],Vi=function(){function e(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length;var t=Ko(this.rank),n=Po("coords",this.rank),r=Po("sourceLoc",this.rank),o=1===this.rank?"sourceLoc":"vec2("+r.slice(-2).join()+")",a="getChannel(getSource("+r.join()+"), "+o+")",i="\n      result.x = "+a+";\n      if (++"+n[this.rank-1]+" < "+e[this.rank-1]+") {\n        ++"+r[this.rank-1]+";\n        result.y = "+a+";\n        --"+r[this.rank-1]+";\n      }\n    ",s=1===this.rank?"":"\n      --"+n[this.rank-1]+";\n      if (++"+n[this.rank-2]+" < "+e[this.rank-2]+") {\n        ++"+r[this.rank-2]+";\n        result.z = "+a+";\n        if (++"+n[this.rank-1]+" < "+e[this.rank-1]+") {\n          ++"+r[this.rank-1]+";\n          result.w = "+a+";\n        }\n      }\n    ",u=this.rank<=4?"sourceLoc = coords +\n            "+t+"("+e.map((function(e,t){return"start["+t+"]"})).join()+");":e.map((function(e,t){return r[t]+" = "+n[t]+" + start["+t+"];"})).join("\n");this.userCode="\n      uniform int start["+this.rank+"];\n      void main() {\n        "+t+" coords = getOutputCoords();\n        "+t+" sourceLoc;\n        "+u+"\n        vec4 result = vec4(0.);\n        "+i+"\n        "+s+"\n        setOutput(result);\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(n,r){null==t.startLoc&&(t.startLoc=n.getUniformLocationNoThrow(r,"start"),null==t.startLoc)||n.gl.uniform1iv(t.startLoc,e)}},e}(),ji=function(e,t,n){this.variableNames=["x"],this.outputShape=n;var r=n.length,o=Ko(n.length),a=Ko(n.length),i="";if(1===r)i="coords * strides + begin";else{var s=0;i=n.map((function(e,t){return s++,1===n.length?"coords * strides["+t+"] + begin["+t+"]":"coords["+(s-1)+"] * strides["+t+"] + begin["+t+"]"})).join(",")}this.userCode="\n      "+o+" begin = "+o+"("+e+");\n      "+o+" strides = "+o+"("+t+");\n\n      void main() {\n        "+a+" coords = getOutputCoords();\n        setOutput(getX("+i+"));\n      }\n    "},Wi=function(){function e(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return e.prototype.acquireTexture=function(e,t,n){var r,o=Hi(t,n),a=Ui(e,o,n);if(a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]),this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var i=this.freeTextures[a].shift();return this.usedTextures[a].push(i),i}return this.numUsedTextures++,this.log(),o===He.PACKED_2X2_FLOAT32?r=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):o===He.PACKED_2X2_FLOAT16?r=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):o===He.UNPACKED_FLOAT32?r=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):o===He.UNPACKED_FLOAT16?r=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):o===He.PACKED_4X1_UNSIGNED_BYTE&&(r=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(r),r},e.prototype.releaseTexture=function(e,t,n,r){if(null!=this.freeTextures){var o=Ui(t,Hi(n,r),r);o in this.freeTextures||(this.freeTextures[o]=[]),this.freeTextures[o].push(e),this.numFreeTextures++,this.numUsedTextures--;var a=this.usedTextures[o],i=a.indexOf(e);if(i<0)throw new Error("Cannot release a texture that was never provided by this texture manager");a.splice(i,1),this.log()}},e.prototype.log=function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+e+")")}},e.prototype.getNumUsedTextures=function(){return this.numUsedTextures},e.prototype.getNumFreeTextures=function(){return this.numFreeTextures},e.prototype.dispose=function(){var e=this;if(null!=this.freeTextures){for(var t in this.freeTextures)this.freeTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t)}));for(var t in this.usedTextures)this.usedTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},e}();function Hi(e,t){if(e===We.UPLOAD)return He.PACKED_2X2_FLOAT32;if(e===We.RENDER||null==e)return function(e){return l().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?He.PACKED_2X2_FLOAT32:He.UNPACKED_FLOAT32:e?He.PACKED_2X2_FLOAT16:He.UNPACKED_FLOAT16}(t);if(e===We.DOWNLOAD||e===We.PIXELS)return He.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+e)}function Ui(e,t,n){return e[0]+"_"+e[1]+"_"+t+"_"+n}var zi=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[r]*t[r];this.outputShape=n,this.rank=n.length;var o=Ko(this.rank),a=function(e){var t=e.length;if(t>5)throw Error("Tile for rank "+t+" is not yet supported");if(1===t)return"imod(resRC, "+e[0]+")";for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],o=0;o<e.length;o++)r.push("imod("+n[o]+", "+e[o]+")");return r.join()}(e);this.userCode="\n      void main() {\n        "+o+" resRC = getOutputCoords();\n        setOutput(getA("+a+"));\n      }\n    "},$i=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];this.outputShape=n,this.rank=n.length;var o=Ko(this.rank),a=function(e){var t=e.length;if(t>6)throw Error("Transpose for rank "+t+" is not yet supported");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t),o=0;o<e.length;o++)r[e[o]]=n[o];return r.join()}(t);this.userCode="\n    void main() {\n      "+o+" resRC = getOutputCoords();\n      setOutput(getA("+a+"));\n    }\n    "},qi=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var o=Ko(this.rank),a=Oo("rc",this.rank),i=new Array(this.rank);for(r=0;r<t.length;r++)i[t[r]]=a[r];var s="vec2("+i.slice(-2).join()+")",u="++"+a[this.rank-1]+" < "+n[this.rank-1],l="getChannel(getA("+i.join()+"), "+s+")";this.userCode="\n    void main() {\n      "+o+" rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = "+l+";\n      if("+u+") {\n        result[1] = "+l+";\n      }\n      --"+a[this.rank-1]+";\n      if(++"+a[this.rank-2]+" < "+n[this.rank-2]+") {\n        result[2] = "+l+";\n        if("+u+") {\n          result[3] = "+l+";\n        }\n      }\n      setOutput(result);\n    }\n    "},Gi=1.7580993408473768,Ki=1.0507009873554805,Xi=function(e,t){this.variableNames=["A"],this.outputShape=e,this.userCode="\n      float unaryOperation(float x) {\n        "+t+"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "},Yi="if (isnan(x)) return x;",Zi="return x;",Ji="return abs(x);",Qi=Yi+"\n  return (x < 0.0) ? 0.0 : x;\n",es=Yi+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",ts="return (x >= 0.0) ? x : (exp(x) - 1.0);",ns="\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = "+Gi+";\n  float scale = "+Ki+";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n",rs="return -x;",os="return ceil(x);",as="return floor(x);",is="return exp(x);",ss="return exp(x) - 1.0;",us=Yi+"\n  return sin(x);\n",ls=Yi+"\n  return cos(x);\n",cs=Yi+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n",ds=Yi+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n",ps=Yi+"\n  return atan(x);\n",fs=Yi+"return log(x + sqrt(x * x + 1.0));",hs=Yi+"\n  if (x < 1.0) return NAN;\n  return log(x + sqrt(x * x - 1.0));",vs=Yi+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\n  return (log(1.0 + x) - log(1.0 - x)) / 2.0;",ms="return x;",gs="return x;",ys="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",bs="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",ws="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",xs=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        "+t+"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "},Cs=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e;var t=e.length,n=Po("rc",t),r=Ko(t),o=function(e,t){if(1===e)return"rc";for(var n="",r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(t,n),a=n.slice(-2),i=t<=1?"rc":"vec2("+a.join(",")+")";this.userCode="\n      void main() {\n        "+r+" rc = getOutputCoords();\n        vec4 packedInput = getA("+o+");\n\n        setOutput(getChannel(packedInput, "+i+"));\n      }\n    "},_s={};function ks(e,t){if(void 0===t&&(t=!1),"linear"===e)return t?gs:Zi;if("relu"===e)return t?ys:Qi;if("elu"===e)return t?ws:ts;if("relu6"===e)return t?bs:es;if("prelu"===e)return t?ca:ua;throw new Error("Activation "+e+" has not been implemented for the WebGL backend.")}var Ss=600,Es=function(e){function t(t){var n,r=e.call(this)||this;if(r.pendingRead=new WeakMap,r.pendingDisposal=new WeakSet,r.dataRefCount=new WeakMap,r.numBytesInGPU=0,r.uploadWaitMs=0,r.downloadWaitMs=0,r.warnedAboutMemory=!1,r.pendingDeletes=0,r.disposed=!1,!l().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null==t){var o=qe(l().getNumber("WEBGL_VERSION"));r.binaryCache=((n=l().getNumber("WEBGL_VERSION"))in _s||(_s[n]={}),_s[n]),r.gpgpu=new li(o),r.canvas=o.canvas,r.gpgpuCreatedLocally=!0}else r.gpgpu=t,r.binaryCache={},r.gpgpuCreatedLocally=!1,r.canvas=t.gl.canvas;return r.textureManager=new Wi(r.gpgpu),r.numMBBeforeWarning=null==l().global.screen?1024:l().global.screen.height*l().global.screen.width*window.devicePixelRatio*Ss/1024/1024,r.texData=new qr(r,Ne),r}return o(t,e),t.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},t.prototype.write=function(e,t,n){if(l().getBool("DEBUG")&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:We.UPLOAD}),r},t.prototype.move=function(e,t,n,r){if(l().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:We.UPLOAD})},t.prototype.readSync=function(e){var t=this.texData.get(e),n=t.values,r=t.dtype,o=t.complexTensors,a=t.slice,i=t.shape,s=t.isPacked;if(null!=a){var u=void 0;u=s?new xs(i,ms):new Xi(i,ms);var l=this.runWebGLProgram(u,[{dataId:e,shape:i,dtype:r}],r),c=this.readSync(l.dataId);return this.disposeData(l.dataId),c}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;var d,p,f=null!=this.activeTimers;return f&&(d=ne()),p="complex64"===r?ho(o.real.dataSync(),o.imag.dataSync()):this.getValuesFromTexture(e),f&&(this.downloadWaitMs+=ne()-d),this.convertAndCacheOnCPU(e,p)},t.prototype.read=function(e){return a(this,void 0,void 0,(function(){var t,n,r,o,a,s,u,c,d,p,f,h,v,m,g,y,b,w,x,C,_,k;return i(this,(function(i){switch(i.label){case 0:if(this.pendingRead.has(e))return t=this.pendingRead.get(e),[2,new Promise((function(e){return t.push(e)}))];if(n=this.texData.get(e),r=n.values,o=n.shape,a=n.slice,s=n.dtype,u=n.complexTensors,c=n.isPacked,null!=a)return d=void 0,d=c?new xs(o,ms):new Xi(o,ms),p=this.runWebGLProgram(d,[{dataId:e,shape:o,dtype:s}],s),f=this.read(p.dataId),this.disposeData(p.dataId),[2,f];if(null!=r)return[2,this.convertAndCacheOnCPU(e)];if(!l().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===l().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return h=null,"complex64"!==s&&l().get("WEBGL_BUFFER_SUPPORTED")&&(v=this.decode(e),m=this.texData.get(v.dataId),h=(k=this.gpgpu).createBufferFromTexture.apply(k,[m.texture].concat(Ke(o)))),this.pendingRead.set(e,[]),"complex64"===s?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:i.sent(),i.label=2;case 2:return"complex64"!==s?[3,4]:[4,Promise.all([u.real.data(),u.imag.data()])];case 3:return y=i.sent(),b=y[0],w=y[1],g=ho(b,w),[3,5];case 4:null==h?g=this.getValuesFromTexture(e):(x=I(o),g=this.gpgpu.downloadFloat32MatrixFromBuffer(h,x)),i.label=5;case 5:return null!=v&&this.disposeData(v.dataId),C=this.convertAndCacheOnCPU(e,g),_=this.pendingRead.get(e),this.pendingRead.delete(e),_.forEach((function(e){return e(C)})),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e),this.pendingDeletes--),[2,C]}}))}))},t.prototype.checkNumericalProblems=function(e){if(null!=e)for(var t=0;t<e.length;t++){var n=e[t];if(!et(n)){if(l().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value "+n+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value "+n+" cannot be represented on this device.")}}},t.prototype.getValuesFromTexture=function(e){var t,n=this.texData.get(e),r=n.shape,o=n.dtype,a=n.isPacked,i=I(r);if(l().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var s=this.decode(e),u=this.texData.get(s.dataId),c=(t=this.gpgpu).downloadMatrixFromPackedTexture.apply(t,[u.texture].concat(Ke(r))).subarray(0,i);return this.disposeData(s.dataId),c}var d=l().getBool("WEBGL_PACK")&&!0===a,p=d?Ft(r):r,f=d?new Ma(p):new Ba(p),h=this.runWebGLProgram(f,[{shape:p,dtype:o,dataId:e}],"float32"),v=this.texData.get(h.dataId),m=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(v.texture,v.texShape[0],v.texShape[1]).subarray(0,i);return this.disposeData(h.dataId),m},t.prototype.time=function(e){return a(this,void 0,void 0,(function(){var t,n,r,o,a,s,u;return i(this,(function(i){switch(i.label){case 0:return t=this.activeTimers,n=[],r=!1,null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,e(),o=E(this.activeTimers.map((function(e){return e.query}))).filter((function(e){return null!=e})),a=E(this.activeTimers.map((function(e){return e.name}))).filter((function(e){return null!=e})),this.activeTimers=t,r&&(this.programTimersStack=null),s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},l().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(o)]:[3,2];case 1:return u=i.sent(),s.kernelMs=C(u),s.getExtraProfileInfo=function(){return u.map((function(e,t){return{name:a[t],ms:e}})).map((function(e){return e.name+": "+e.ms})).join(", ")},[3,3];case 2:s.kernelMs={error:"WebGL query timers are not supported in this environment."},i.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,s]}}))}))},t.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},t.prototype.startTimer=function(){return l().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:ne(),endMs:null}},t.prototype.endTimer=function(e){return l().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=ne(),e)},t.prototype.getQueryTime=function(e){return a(this,void 0,void 0,(function(){var t;return i(this,(function(n){return l().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(e)]:[2,(t=e).endMs-t.startMs]}))}))},t.prototype.disposeData=function(e){if(!this.pendingDisposal.has(e)){if(this.pendingRead.has(e))return this.pendingDisposal.add(e),void this.pendingDeletes++;if(this.texData.has(e)){this.releaseGPUData(e);var t=this.texData.get(e).complexTensors;null!=t&&(t.real.dispose(),t.imag.dispose()),this.texData.delete(e)}}},t.prototype.releaseGPUData=function(e){var t=this.texData.get(e),n=t.texture,r=t.dtype,o=t.texShape,a=t.usage,i=t.isPacked,s=t.slice,u=s&&s.origDataId||e,l=this.dataRefCount.get(u);l>1?this.dataRefCount.set(u,l-1):(this.dataRefCount.delete(u),null!=n&&(this.numBytesInGPU-=this.computeBytes(o,r),this.textureManager.releaseTexture(n,o,a,i)));var c=this.texData.get(e);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null},t.prototype.getTexture=function(e){return this.uploadToGPU(e),this.texData.get(e).texture},t.prototype.getDataInfo=function(e){return this.texData.get(e)},t.prototype.getCPUBackend=function(){return l().getBool("WEBGL_CPU_FORWARD")?(null==this.cpuBackend&&(this.cpuBackend=Ne.findBackend("cpu")),this.cpuBackend):null},t.prototype.shouldExecuteOnCPU=function(e,t){var n=this;return void 0===t&&(t=128),null!=this.getCPUBackend()&&e.every((function(e){return null==n.texData.get(e.dataId).texture&&e.size<t}))},t.prototype.getGPGPUContext=function(){return this.gpgpu},t.prototype.complex=function(e,t){var n=this.makeOutput(e.shape,"complex64");return this.texData.get(n.dataId).complexTensors={real:Ne.keep(e.clone()),imag:Ne.keep(t.clone())},n},t.prototype.real=function(e){return this.texData.get(e.dataId).complexTensors.real.clone()},t.prototype.imag=function(e){return this.texData.get(e.dataId).complexTensors.imag.clone()},t.prototype.slice=function(e,t,n){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.slice(e,t,n);if(0===I(n))return hn([],n,e.dtype);var r=this.texData.get(e.dataId).isPacked,o=jr(e.shape,t,n);if(r||!o){var a=l().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Vi(n):new Ni(n),i=a.getCustomSetupFunc(t);return this.compileAndRun(a,[e],null,i)}return this.uploadToGPU(e.dataId),this.shallowSlice(e,t,n)},t.prototype.shallowSlice=function(e,t,n){var r=this.texData.get(e.dataId),o=this.makeOutput(n,e.dtype),a=this.texData.get(o.dataId);Object.assign(a,r),a.shape=n,a.dtype=e.dtype;var i=Wr(t,e.strides);r.slice&&(i+=r.slice.flatOffset),a.slice={flatOffset:i,origDataId:r.slice&&r.slice.origDataId||e.dataId};var s=this.dataRefCount.get(a.slice.origDataId)||1;return this.dataRefCount.set(a.slice.origDataId,s+1),o},t.prototype.stridedSlice=function(e,t,n,r){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.stridedSlice(e,t,n,r);var o=Nr(t,n,r);if(o.some((function(e){return 0===e})))return hn([],o);var a=new ji(t,r,o);return this.compileAndRun(a,[e])},t.prototype.reverse=function(e,t){var n=l().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Oi(e.shape,t):new Ti(e.shape,t);return this.compileAndRun(n,[e])},t.prototype.concat=function(e,t){if("complex64"===e[0].dtype){var n=e.map((function(e){return pn(e)})),r=e.map((function(e){return fn(e)}));return dn(this.concat(n,t),this.concat(r,t))}if(this.shouldExecuteOnCPU(e))return this.cpuBackend.concat(e,t);if(1===e.length)return e[0];if(e.length>l().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var o=Math.floor(e.length/2),a=this.concat(e.slice(0,o),t),i=this.concat(e.slice(o),t);return this.concat([a,i],t)}if(l().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].rank>1){var s=new ma(e.map((function(e){return e.shape})),t);return this.compileAndRun(s,e)}var u=ln(e.map((function(e){return e.shape})),t),c=e.map((function(e){return e.as2D(-1,I(e.shape.slice(t)))})),d=new va(c.map((function(e){return e.shape})));return this.compileAndRun(d,c).reshape(u)},t.prototype.neg=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.neg(e);if(l().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,rs,e.dtype);var t=new Xi(e.shape,rs);return this.compileAndRun(t,[e])},t.prototype.batchMatMul=function(e,t,n,r){var o=n?e.shape[2]:e.shape[1],a=r?t.shape[1]:t.shape[2],i=n?e.shape[1]:e.shape[2],s=e.shape[0];if((1===o||1===a)&&i>1e3){n&&(e=e.transpose([0,2,1])),r&&(t=t.transpose([0,2,1]));var u=1===a?e:e.as3D(s,i,1),l=1===a?2:1,c=1===a?t.as3D(s,1,i):t;return this.multiply(u,c).sum(l,!0)}var d=Fe(e.dtype,t.dtype),p=new gi(e.shape,[s,o,a],n,r);return this.compileAndRun(p,[e,t],d)},t.prototype.fusedBatchMatMul=function(e){var t=e.a,n=e.b,r=e.transposeA,o=e.transposeB,a=e.bias,i=e.activation,s=e.preluActivationWeights,u=r?t.shape[2]:t.shape[1],l=o?n.shape[1]:n.shape[2],c=t.shape[0],d=Fe(t.dtype,n.dtype),p=null!=a,f=null!=s,h=i?ks(i,!0):null,v=new gi(t.shape,[c,u,l],r,o,p,h,f),m=[t,n];return a&&m.push(a),s&&m.push(s),this.compileAndRun(v,m,d)},t.prototype.multiply=function(e,t){if("complex64"===e.dtype){var n=this.texData.get(e.dataId),r=this.texData.get(t.dataId),o=new oa(na,e.shape,t.shape),a=new oa(ra,e.shape,t.shape),i=[this.makeComplexComponentTensorInfo(e,n.complexTensors.real),this.makeComplexComponentTensorInfo(e,n.complexTensors.imag),this.makeComplexComponentTensorInfo(t,r.complexTensors.real),this.makeComplexComponentTensorInfo(t,r.complexTensors.imag)],s=this.compileAndRun(o,i),u=this.compileAndRun(a,i),c=this.complex(s,u);return s.dispose(),u.dispose(),c}if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.multiply(e,t);if(l().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,sa,e.dtype);var d=new la(sa,e.shape,t.shape);return this.compileAndRun(d,[e,t],e.dtype)},t.prototype.batchNormalization=function(e,t,n,r,o,a){var i=[e,t,n],s=null;null!=a&&(s=a.shape,i.push(a));var u=null;if(null!=o&&(u=o.shape,i.push(o)),l().getBool("WEBGL_PACK_NORMALIZATION")){var c=new ta(e.shape,t.shape,n.shape,s,u,r);return this.compileAndRun(c,i)}var d=new ea(e.shape,t.shape,n.shape,s,u,r);return this.compileAndRun(d,i)},t.prototype.localResponseNormalization4D=function(e,t,n,r,o){var a=l().getBool("WEBGL_PACK_NORMALIZATION")?new hi(e.shape,t,n,r,o):new pi(e.shape,t,n,r,o);return this.compileAndRun(a,[e])},t.prototype.LRNGrad=function(e,t,n,r,o,a,i){var s=new fi(t.shape,r,o,a,i);return this.compileAndRun(s,[t,n,e])},t.prototype.tile=function(e,t){if("string"===e.dtype){var n=this.readSync(e.dataId).map((function(e){return ae(e)}));return Io(Xn(e.shape,e.dtype,n),t)}var r=new zi(e.shape,t);return this.compileAndRun(r,[e])},t.prototype.pad=function(e,t,n){var r=l().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Ci(e.shape,t,n):new xi(e.shape,t,n);return this.compileAndRun(r,[e])},t.prototype.transpose=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.transpose(e,t);var n=l().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new qi(e.shape,t):new $i(e.shape,t);return this.compileAndRun(n,[e])},t.prototype.gather=function(e,t,n){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.gather(e,t,n);var r=new Ua(e.shape,t.size,n);return this.compileAndRun(r,[e,t])},t.prototype.batchToSpaceND=function(e,t,n){_(e.rank<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var r=t.reduce((function(e,t){return e*t})),o=kr(e.shape,t,r),a=Sr(o.length,t.length),i=Er(e.shape,t,r),s=Ir(n,t.length),u=Ar(i,n,t.length);return e.reshape(o).transpose(a).reshape(i).slice(s,u)},t.prototype.spaceToBatchND=function(e,t,n){_(e.rank<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var r=t.reduce((function(e,t){return e*t})),o=[[0,0]];o.push.apply(o,n);for(var a=1+t.length;a<e.shape.length;++a)o.push([0,0]);var i=e.pad(o),s=kr(i.shape,t,r,!1),u=Sr(s.length,t.length,!1),l=Er(i.shape,t,r,!1);return i.reshape(s).transpose(u).reshape(l)},t.prototype.reduce=function(e,t,n){var r=e.shape[0],o=e.shape[1],a=Rr(o),i=new Si({windowSize:a,inSize:o,batchSize:r},t),s=this.compileAndRun(i,[e],n);return 1===s.shape[1]?s:this.reduce(s,t,n)},t.prototype.argReduce=function(e,t,n){void 0===n&&(n=null);var r=e.shape[0],o=e.shape[1];null!=n&&(r=n.shape[0],o=n.shape[1]);var a=Rr(o),i=new To({windowSize:a,inSize:o,batchSize:r},t,null==n),s=[e];null!=n&&s.push(n);var u=this.compileAndRun(i,s,"int32");return 1===u.shape[1]?u:this.argReduce(e,t,u)},t.prototype.argReducePacked=function(e,t,n){void 0===n&&(n=null);var r=null!=n?n.shape:e.shape,o=Rr(r[r.length-1]),a=new Zo(r,o,t,null==n),i=null==n?[e]:[e,n],s=this.compileAndRun(a,i,"int32");return s.rank===e.rank?this.argReducePacked(e,t,s):s},t.prototype.sum=function(e,t){rn("sum",t,e.rank);var n=tn(e.shape,t),r=n[0],o=I(n[1]),a=e.as2D(-1,o),i=De(e.dtype);return this.reduce(a,"sum",i).reshape(r)},t.prototype.prod=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.prod(e,t);var n=tn(e.shape,t),r=n[0],o=I(n[1]),a=e.as2D(-1,o),i=De(e.dtype);return this.reduce(a,"prod",i).reshape(r)},t.prototype.unsortedSegmentSum=function(e,t,n){var r=0,o=on([r],e.rank),a=e;null!=o&&(a=e.transpose(o),r=sn(1,e.rank)[0]);var i=function(e,t,n){for(var r=[],o=e.length,a=0;a<o;a++)a!==t?r.push(e[a]):r.push(n);return r}(a.shape,r,n),s=I([a.shape[r]]),u=a.as2D(-1,s),l=De(e.dtype),c=this.segOpCompute(u,"unsortedSegmentSum",t,l,n).reshape(i);return null!=o&&(c=c.transpose(an(o))),c},t.prototype.segOpCompute=function(e,t,n,r,o){var a=e.shape[0],i=e.shape[1],s=function(e,t){var n,r=!1;for(e<=Dr?(n=e,r=!0):n=Y(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=Y(e,n+1);return n}(i,o),u=new Bi({windowSize:s,inSize:i,batchSize:a,numSegments:o},t),l=this.compileAndRun(u,[e,n],r);return l.shape[1]===o?l:(n=An(0,o).tile([i/s]),this.segOpCompute(l,t,n,r,o))},t.prototype.argMinMaxReduce=function(e,t,n){var r=[t];if(rn("arg"+n.charAt(0).toUpperCase()+n.slice(1),r,e.rank),!l().getBool("WEBGL_PACK_REDUCE")||e.rank<=2){var o=tn(e.shape,r),a=o[0],i=I(o[1]),s=e.as2D(-1,i);return this.argReduce(s,n).reshape(a)}return this.argReducePacked(e,n)},t.prototype.argMin=function(e,t){return this.argMinMaxReduce(e,t,"min")},t.prototype.argMax=function(e,t){return this.argMinMaxReduce(e,t,"max")},t.prototype.cumsum=function(e,t,n,r){if(t!==e.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(e.rank-1)+" but got axis="+t);var o=new Fa(e.shape,n,r);return this.compileAndRun(o,[e])},t.prototype.equal=function(e,t){if(l().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(equal(a, b));\n","bool");var n=new la("return float(a == b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.notEqual=function(e,t){if(l().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(notEqual(a, b));\n","bool");var n=new la("return float(a != b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.less=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.less(e,t);if(l().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(lessThan(a, b));\n","bool");var n=new la("return float(a < b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.lessEqual=function(e,t){if(l().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(lessThanEqual(a, b));\n","bool");var n=new la("return float(a <= b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.greater=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.greater(e,t);if(l().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(greaterThan(a, b));\n","bool");var n=new la("return float(a > b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.greaterEqual=function(e,t){if(l().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(greaterThanEqual(a, b));\n","bool");var n=new la("return float(a >= b);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.logicalNot=function(e){var t=new Xi(e.shape,"return float(!(x >= 1.0));");return this.compileAndRun(t,[e])},t.prototype.logicalAnd=function(e,t){if(l().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n","bool");var n=new la("return float(a >= 1.0 && b >= 1.0);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.logicalOr=function(e,t){if(l().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n","bool");var n=new la("return float(a >= 1.0 || b >= 1.0);",e.shape,t.shape);return this.compileAndRun(n,[e,t],"bool")},t.prototype.select=function(e,t,n){var r=new Mi(e.rank,t.shape,t.rank);return this.compileAndRun(r,[e,t,n],Fe(t.dtype,n.dtype))},t.prototype.where=function(e){Kt("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return Fo(e.shape,t)},t.prototype.topk=function(e,t,n){return Ao(e.dataSync(),e.shape,e.dtype,t)},t.prototype.min=function(e,t){rn("min",t,e.rank);var n=tn(e.shape,t),r=n[0],o=I(n[1]),a=e.as2D(-1,o);return this.reduce(a,"min",a.dtype).reshape(r)},t.prototype.minimum=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.minimum(e,t);var n=l().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new da("\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new la("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.mod=function(e,t){var n=l().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new da("\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new la("if (b == 0.0) return NAN;\n  return mod(a, b);",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.max=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.max(e,t);rn("max",t,e.rank);var n=tn(e.shape,t),r=n[0],o=I(n[1]),a=e.as2D(-1,o);return this.reduce(a,"max",a.dtype).reshape(r)},t.prototype.maximum=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.maximum(e,t);var n=l().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new da("\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new la("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.all=function(e,t){rn("all",t,e.rank);var n=tn(e.shape,t),r=n[0],o=I(n[1]),a=e.as2D(-1,o);return this.reduce(a,"all",a.dtype).reshape(r)},t.prototype.any=function(e,t){rn("any",t,e.rank);var n=tn(e.shape,t),r=n[0],o=I(n[1]),a=e.as2D(-1,o);return this.reduce(a,"any",a.dtype).reshape(r)},t.prototype.realDivide=function(e,t){if(l().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n","float32",!0);var n=new la("\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",e.shape,t.shape);return this.compileAndRun(n,[e,t],"float32")},t.prototype.floorDiv=function(e,t){if(l().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n","int32");var n=new la("\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",e.shape,t.shape);return this.compileAndRun(n,[e,t],"int32")},t.prototype.add=function(e,t){if("complex64"===e.dtype&&"complex64"===t.dtype)return this.complexSeparableBinaryOp(e,t,aa);if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.add(e,t);var n=Fe(e.dtype,t.dtype);if(l().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,aa,n);var r=new la(aa,e.shape,t.shape);return this.compileAndRun(r,[e,t],n)},t.prototype.packedUnaryOp=function(e,t,n){var r=new xs(e.shape,t);return this.compileAndRun(r,[e],n)},t.prototype.packedBinaryOp=function(e,t,n,r,o){void 0===o&&(o=!1);var a=new da(n,e.shape,t.shape,o);return this.compileAndRun(a,[e,t],r)},t.prototype.complexSeparableBinaryOp=function(e,t,n){var r=this,o=this.texData.get(e.dataId),a=this.texData.get(t.dataId),i=[[o.complexTensors.real,a.complexTensors.real],[o.complexTensors.imag,a.complexTensors.imag]].map((function(o){var a=o[0],i=o[1],s=r.makeComplexComponentTensorInfo(e,a),u=r.makeComplexComponentTensorInfo(t,i),l=new la(n,e.shape,t.shape);return r.compileAndRun(l,[s,u],Fe(a.dtype,i.dtype))})),s=i[0],u=i[1],l=this.complex(s,u);return s.dispose(),u.dispose(),l},t.prototype.makeComplexComponentTensorInfo=function(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}},t.prototype.addN=function(e){if(1===e.length)return e[0];if(e.length>l().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var t=Math.floor(e.length/2),n=this.addN(e.slice(0,t)),r=this.addN(e.slice(t));return this.addN([n,r])}var o=e.map((function(e){return e.dtype})).reduce((function(e,t){return Fe(e,t)})),a=e.map((function(e){return e.shape})),i=l().getBool("WEBGL_PACK")?new Ro(e[0].shape,a):new Do(e[0].shape,a);return this.compileAndRun(i,e,o)},t.prototype.subtract=function(e,t){if("complex64"===e.dtype&&"complex64"===t.dtype)return this.complexSeparableBinaryOp(e,t,ia);if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.subtract(e,t);var n=Fe(e.dtype,t.dtype);if(l().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,ia,e.dtype);var r=new la(ia,e.shape,t.shape);return this.compileAndRun(r,[e,t],n)},t.prototype.pow=function(e,t){var n=l().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new da("\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new la("\nif(a < 0.0 && floor(b) < b){\n  return NAN;\n}\nif (b == 0.0) {\n  return 1.0;\n}\nreturn (round(mod(b, 2.0)) != 1) ?\n    pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",e.shape,t.shape),r=Fe(e.dtype,t.dtype);return this.compileAndRun(n,[e,t],r)},t.prototype.ceil=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.ceil(e);if(l().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,os,e.dtype);var t=new Xi(e.shape,os);return this.compileAndRun(t,[e])},t.prototype.floor=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.floor(e);if(l().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,as,e.dtype);var t=new Xi(e.shape,as);return this.compileAndRun(t,[e])},t.prototype.sign=function(e){var t=new Xi(e.shape,"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n");return this.compileAndRun(t,[e])},t.prototype.isNaN=function(e){var t=new Xi(e.shape,"return float(isnan(x));");return this.compileAndRun(t,[e],"bool")},t.prototype.isInf=function(e){var t=new Xi(e.shape,"return float(isinf(x));");return this.compileAndRun(t,[e],"bool")},t.prototype.isFinite=function(e){var t=new Xi(e.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(t,[e],"bool")},t.prototype.round=function(e){var t=new Xi(e.shape,"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n");return this.compileAndRun(t,[e])},t.prototype.exp=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.exp(e);if(l().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,is,e.dtype);var t=new Xi(e.shape,is);return this.compileAndRun(t,[e])},t.prototype.expm1=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.expm1(e);if(l().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,ss,e.dtype);var t=new Xi(e.shape,ss);return this.compileAndRun(t,[e])},t.prototype.softmax=function(e,t){var n=B([t],e.shape),r=this.max(e,n),o=nn(r.shape,n),a=this.subtract(e,r.reshape(o)),i=this.exp(a),s=this.sum(i,n).reshape(o);return this.realDivide(i,s)},t.prototype.log=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.log(e);if(l().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,"\n  vec4 result = log(x);\n  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));\n  result.r = isNaN.r == 1.0 ? NAN : result.r;\n  result.g = isNaN.g == 1.0 ? NAN : result.g;\n  result.b = isNaN.b == 1.0 ? NAN : result.b;\n  result.a = isNaN.a == 1.0 ? NAN : result.a;\n\n  return result;\n",e.dtype);var t=new Xi(e.shape,"if (x < 0.0) return NAN;\n  return log(x);");return this.compileAndRun(t,[e])},t.prototype.log1p=function(e){var t=new Xi(e.shape,"return log(1.0 + x);");return this.compileAndRun(t,[e])},t.prototype.sqrt=function(e){var t=new Xi(e.shape,"return sqrt(x);");return this.compileAndRun(t,[e])},t.prototype.rsqrt=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.rsqrt(e);var t=new Xi(e.shape,"return inversesqrt(x);");return this.compileAndRun(t,[e])},t.prototype.reciprocal=function(e){var t=new Xi(e.shape,"return 1.0 / x;");return this.compileAndRun(t,[e])},t.prototype.relu=function(e){var t;return t=l().getBool("WEBGL_PACK")?new xs(e.shape,ys):new Xi(e.shape,Qi),this.compileAndRun(t,[e])},t.prototype.relu6=function(e){var t;return t=l().getBool("WEBGL_PACK")?new xs(e.shape,bs):new Xi(e.shape,es),this.compileAndRun(t,[e])},t.prototype.prelu=function(e,t){var n=l().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new da(ca,e.shape,t.shape):new la(ua,e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.elu=function(e){if(l().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,ws,e.dtype);var t=new Xi(e.shape,ts);return this.compileAndRun(t,[e])},t.prototype.eluDer=function(e,t){var n=l().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new da("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",e.shape,t.shape):new la("return (b >= 1.0) ? a : a * (b + 1.0);",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.selu=function(e){var t=new Xi(e.shape,ns);return this.compileAndRun(t,[e])},t.prototype.int=function(e){var t=new Xi(e.shape,"return float(int(x));");return this.compileAndRun(t,[e],"int32")},t.prototype.clip=function(e,t,n){var r,o=(r=l().getBool("WEBGL_PACK_CLIP")?new fa(e.shape):new pa(e.shape)).getCustomSetupFunc(t,n);return this.compileAndRun(r,[e],null,o)},t.prototype.abs=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.abs(e);if(l().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,Ji,e.dtype);var t=new Xi(e.shape,Ji);return this.compileAndRun(t,[e])},t.prototype.complexAbs=function(e){var t=this.texData.get(e.dataId),n=new ha(e.shape),r=[this.makeComplexComponentTensorInfo(e,t.complexTensors.real),this.makeComplexComponentTensorInfo(e,t.complexTensors.imag)];return this.compileAndRun(n,r)},t.prototype.sigmoid=function(e){var t=new Xi(e.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(t,[e])},t.prototype.softplus=function(e){var t=new Xi(e.shape,"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n");return this.compileAndRun(t,[e])},t.prototype.sin=function(e){var t=new Xi(e.shape,us);return this.compileAndRun(t,[e])},t.prototype.cos=function(e){var t=new Xi(e.shape,ls);return this.compileAndRun(t,[e])},t.prototype.tan=function(e){var t=new Xi(e.shape,"return tan(x);");return this.compileAndRun(t,[e])},t.prototype.asin=function(e){var t=new Xi(e.shape,cs);return this.compileAndRun(t,[e])},t.prototype.acos=function(e){var t=new Xi(e.shape,ds);return this.compileAndRun(t,[e])},t.prototype.atan=function(e){var t=new Xi(e.shape,ps);return this.compileAndRun(t,[e])},t.prototype.atan2=function(e,t){var n=l().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new da("\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new la("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},t.prototype.sinh=function(e){var t=new Xi(e.shape,"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n");return this.compileAndRun(t,[e])},t.prototype.cosh=function(e){var t=new Xi(e.shape,"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n");return this.compileAndRun(t,[e])},t.prototype.tanh=function(e){var t=new Xi(e.shape,"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n");return this.compileAndRun(t,[e])},t.prototype.asinh=function(e){var t=new Xi(e.shape,fs);return this.compileAndRun(t,[e])},t.prototype.acosh=function(e){var t=new Xi(e.shape,hs);return this.compileAndRun(t,[e])},t.prototype.atanh=function(e){var t=new Xi(e.shape,vs);return this.compileAndRun(t,[e])},t.prototype.erf=function(e){var t=new Xi(e.shape,'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = 0.3275911;\n  float a1 = 0.254829592;\n  float a2 = -0.284496736;\n  float a3 = 1.421413741;\n  float a4 = -1.453152027;\n  float a5 = 1.061405429;\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n');return this.compileAndRun(t,[e])},t.prototype.step=function(e,t){var n=new Xi(e.shape,function(e){return void 0===e&&(e=0),Yi+"\n    return x > 0.0 ? 1.0 : float("+e+");\n  "}(t));return this.compileAndRun(n,[e])},t.prototype.conv2dByMatMul=function(e,t,n,r,o,a){var i=e.shape,s=this.texData.get(e.dataId),u=n.inChannels,c=i[0]*i[1]*i[2],d=n.outChannels,p="channelsLast"===n.dataFormat,f=(1===c||1===d)&&u>1e3,h=i[2]%2!=0&&!!s.isPacked;if(f||!l().getBool("WEBGL_LAZILY_UNPACK")||!l().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!h){var v=p?i[0]*i[1]*i[2]:i[0]*i[2]*i[3],m=this.reshape(e,[1,v,n.inChannels]),g=this.reshape(t,[1,n.inChannels,n.outChannels]);return this.reshape(this.fusedBatchMatMul({a:m,b:g,transposeA:!1,transposeB:!1,bias:r,activation:o,preluActivationWeights:a}),n.outShape)}var y=p?i[0]*i[1]*(i[2]+1):i[0]*i[2]*(i[3]+1),b={dataId:e.dataId,shape:[1,y,n.inChannels],dtype:e.dtype},w=s.shape;s.shape=s.shape.slice(),s.shape[s.shape.length-2]++,_(Tt(s.shape,b.shape),(function(){return"packed reshape "+s.shape+" to "+b.shape+" isn't free"}));var x=this.reshape(t,[1,n.inChannels,n.outChannels]),C=this.fusedBatchMatMul({a:b,b:x,transposeA:!1,transposeB:!1,bias:r,activation:o,preluActivationWeights:a}),k=this.texData.get(C.dataId);return _(k.isPacked,(function(){return"batchMatMul result is expected to be packed"})),s.shape=w,k.shape=n.outShape,Ne.makeTensorFromDataId(C.dataId,n.outShape,C.dtype)},t.prototype.conv2dWithIm2Row=function(e,t,n,r,o,a){var i=n.filterWidth,s=n.filterHeight,u=n.inChannels,l=n.outWidth,c=n.outHeight,d="channelsLast"===n.dataFormat,p=i*s*u,f=c*l,h=[p,f],v=e.squeeze([0]),m=t.reshape([1,p,-1]),g=new di(h,v.shape,n),y=this.compileAndRun(g,[v]).reshape([1,h[0],h[1]]),b=null!=r,w=null!=a,x=o?ks(o,!0):null,C=new gi(y.shape,[1,f,n.outChannels],!0,!1,b,x,w),_=[y,m];r&&_.push(r),w&&_.push(a);var k=this.compileAndRun(C,_);return d?k.reshape([1,c,l,n.outChannels]):k.reshape([1,n.outChannels,c,l])},t.prototype.fusedConv2d=function(e){var t=e.input,n=e.filter,r=e.convInfo,o=e.bias,a=e.activation,i=e.preluActivationWeights;if(1===r.filterHeight&&1===r.filterWidth&&1===r.dilationHeight&&1===r.dilationWidth&&1===r.strideHeight&&1===r.strideWidth&&("SAME"===r.padInfo.type||"VALID"===r.padInfo.type))return this.conv2dByMatMul(t,n,r,o,a,i);if(l().getBool("WEBGL_CONV_IM2COL")&&1===t.shape[0])return this.conv2dWithIm2Row(t,n,r,o,a,i);var s=null!=o,u=null!=i,c=a?ks(a,!1):null,d=new ka(r,s,c,u),p=[t,n];return o&&p.push(o),i&&p.push(i),this.compileAndRun(d,p)},t.prototype.conv2d=function(e,t,n){if(1===n.filterHeight&&1===n.filterWidth&&1===n.dilationHeight&&1===n.dilationWidth&&1===n.strideHeight&&1===n.strideWidth&&("SAME"===n.padInfo.type||"VALID"===n.padInfo.type))return this.conv2dByMatMul(e,t,n);if(l().getBool("WEBGL_CONV_IM2COL")&&1===e.shape[0])return this.conv2dWithIm2Row(e,t,n);var r=new ka(n);return this.compileAndRun(r,[e,t])},t.prototype.conv2dDerInput=function(e,t,n){var r=new ba(n);return this.compileAndRun(r,[e,t])},t.prototype.conv2dDerFilter=function(e,t,n){var r=new ya(n);return this.compileAndRun(r,[e,t])},t.prototype.fusedDepthwiseConv2D=function(e){var t,n=e.input,r=e.filter,o=e.convInfo,a=e.bias,i=e.activation,s=e.preluActivationWeights,u=l().getBool("WEBGL_PACK_DEPTHWISECONV")&&o.strideWidth<=2&&o.outChannels/o.inChannels==1,c=i?ks(i,u):null,d=[n,r],p=null!=a,f=null!=s;return p&&d.push(a),f&&d.push(s),u?(t=new Ia(o,p,c,f),this.compileAndRun(t,d)):(t=new Ea(o,p,c,f),this.compileAndRun(t,d))},t.prototype.depthwiseConv2D=function(e,t,n){var r;return l().getBool("WEBGL_PACK_DEPTHWISECONV")&&n.strideWidth<=2&&n.outChannels/n.inChannels==1?(r=new Ia(n),this.compileAndRun(r,[e,t])):(r=new Ea(n),this.compileAndRun(r,[e,t]))},t.prototype.depthwiseConv2DDerInput=function(e,t,n){var r=new _a(n);return this.compileAndRun(r,[e,t])},t.prototype.depthwiseConv2DDerFilter=function(e,t,n){var r=new Ca(n);return this.compileAndRun(r,[e,t])},t.prototype.conv3d=function(e,t,n){var r=new Sa(n);return this.compileAndRun(r,[e,t])},t.prototype.conv3dDerInput=function(e,t,n){var r=new xa(n);return this.compileAndRun(r,[e,t])},t.prototype.conv3dDerFilter=function(e,t,n){var r=new wa(n);return this.compileAndRun(r,[e,t])},t.prototype.maxPool=function(e,t){var n=new _i(t,"max",!1);return this.compileAndRun(n,[e])},t.prototype.avgPool=function(e,t){var n=new _i(t,"avg",!1);return this.compileAndRun(n,[e],"float32")},t.prototype.maxPoolBackprop=function(e,t,n,r){var o=new _i(r,"max",!0),a=this.compileAndRun(o,[t]),i=new vi(r),s=this.compileAndRun(i,[e,a],t.dtype);return a.dispose(),s},t.prototype.avgPoolBackprop=function(e,t,n){var r=new Jo(n);return this.compileAndRun(r,[e],t.dtype)},t.prototype.cast=function(e,t){return co(e,t,this)},t.prototype.unstack=function(e,t){for(var n=e.shape[t],r=new Array(e.rank-1),o=0,a=0;a<e.rank;a++)a!==t&&(r[o++]=e.shape[a]);var i=new Array(e.rank).fill(0),s=e.shape.slice();s[t]=1;var u=new Array(n);for(a=0;a<u.length;a++)i[t]=a,u[a]=this.slice(e,i,s).reshape(r);return u},t.prototype.avgPool3d=function(e,t){var n=new ki(t,"avg",!1);return this.compileAndRun(n,[e],"float32")},t.prototype.avgPool3dBackprop=function(e,t,n){var r=new Qo(n);return this.compileAndRun(r,[e],t.dtype)},t.prototype.maxPool3d=function(e,t){var n=new ki(t,"max",!1);return this.compileAndRun(n,[e],"float32")},t.prototype.maxPool3dBackprop=function(e,t,n,r){var o=new ki(r,"max",!0),a=this.compileAndRun(o,[t]),i=new mi(r),s=this.compileAndRun(i,[e,a],t.dtype);return a.dispose(),s},t.prototype.reshape=function(e,t){var n=this.texData.get(e.dataId);if(n.isPacked&&!Tt(e.shape,t)&&(null===n.texture||!Tt(n.shape,t))){var r=this.packedReshape(e,t);return Ne.makeTensorFromDataId(r.dataId,r.shape,r.dtype)}return po(e,t)},t.prototype.resizeBilinear=function(e,t,n,r){var o=l().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new Fi(e.shape,t,n,r):new Ai(e.shape,t,n,r);return this.compileAndRun(o,[e],"float32")},t.prototype.resizeBilinearBackprop=function(e,t,n){var r=new Ii(e,t,n);return this.compileAndRun(r,[e])},t.prototype.resizeNearestNeighbor=function(e,t,n,r){var o=new Ri(e.shape,t,n,r);return this.compileAndRun(o,[e])},t.prototype.resizeNearestNeighborBackprop=function(e,t,n){var r=new Di(e,t,n);return this.compileAndRun(r,[e])},t.prototype.multinomial=function(e,t,n,r){var o=t?e:zr(e),a=o.shape[0],i=o.shape[1],s=new yi(a,i,n),u=s.getCustomSetupFunc(r);return this.compileAndRun(s,[o],"int32",u)},t.prototype.oneHot=function(e,t,n,r){var o=new bi(e.size,t,n,r);return this.compileAndRun(o,[e])},t.prototype.diag=function(e){var t=new Pa(e.size);return this.compileAndRun(t,[e])},t.prototype.nonMaxSuppression=function(e,t,n,r,o){return Kt("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),wo(e.dataSync(),t.dataSync(),n,r,o)},t.prototype.cropAndResize=function(e,t,n,r,o,a){var i=new Aa(e.shape,t.shape,r,o,a);return this.compileAndRun(i,[e,t,n],"float32")},t.prototype.depthToSpace=function(e,t,n){_(t>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: "+t}));var r=e.shape[0],o="NHWC"===n?e.shape[1]:e.shape[2],a="NHWC"===n?e.shape[2]:e.shape[3],i="NHWC"===n?e.shape[3]:e.shape[1],s=o*t,u=a*t,l=i/(t*t),c=new Oa("NHWC"===n?[r,s,u,l]:[r,l,s,u],t,n);return this.compileAndRun(c,[e])},t.prototype.split=function(e,t,n){return Eo(e,t,n)},t.prototype.scatterND=function(e,t,n){var r=Pr(0,e,n),o=r.sliceRank,a=r.numUpdates,i=r.sliceSize,s=r.strides,u=r.outputSize,l=[u/i,i],c=e.reshape([a,o]),d=t.reshape([a,i]);if(0===u)return po(hn([]),n);var p=mn(0),f=new Pi(a,o,c.rank,d.rank,s,l);return this.compileAndRun(f,[d,c,p]).reshape(n)},t.prototype.sparseToDense=function(e,t,n,r){var o=Pr(0,e,n),a=o.sliceRank,i=o.numUpdates,s=o.strides,u=o.outputSize,l=new Pi(i,a,e.rank,t.rank,s,[u,1],!1);return this.compileAndRun(l,[t,e,r]).reshape(n)},t.prototype.fft=function(e){return this.fftImpl(e,!1)},t.prototype.ifft=function(e){return this.fftImpl(e,!0)},t.prototype.fftImpl=function(e,t){var n=this.texData.get(e.dataId),r=new Wa(Va,e.shape,t),o=new Wa(ja,e.shape,t),a=[this.makeComplexComponentTensorInfo(e,n.complexTensors.real),this.makeComplexComponentTensorInfo(e,n.complexTensors.imag)],i=this.compileAndRun(r,a),s=this.compileAndRun(o,a),u=this.complex(i,s).as2D(e.shape[0],e.shape[1]);return i.dispose(),s.dispose(),u},t.prototype.gatherND=function(e,t){var n=t.shape,r=n[n.length-1],o=Fr(e,t),a=o[0],i=o[1],s=o[2],u=o[3],l=t.reshape([i,r]),c=e.reshape([e.size/s,s]),d=new za(r,u,[i,s]);return this.compileAndRun(d,[c,l]).reshape(a)},t.prototype.fill=function(e,t,n){if("string"===(n=n||K(t))){var r=L(n,I(e));return r.fill(t),Ne.makeTensor(r,e,n,this)}var o=new Ha(e,t),a=o.getCustomSetupFunc(t);return this.compileAndRun(o,[],n,a)},t.prototype.onesLike=function(e){if("string"===e.dtype)throw new Error("onesLike is not supported under string dtype");return this.fill(e.shape,1,e.dtype)},t.prototype.zerosLike=function(e){return this.fill(e.shape,"string"===e.dtype?"":0,e.dtype)},t.prototype.linspace=function(e,t,n){return fo(e,t,n)},t.prototype.makeTensorInfo=function(e,t){var n=this.write(null,e,t);return this.texData.get(n).usage=null,{dataId:n,shape:e,dtype:t}},t.prototype.makeOutput=function(e,t){var n=this.makeTensorInfo(e,t).dataId;return Ne.makeTensorFromDataId(n,e,t,this)},t.prototype.unpackTensor=function(e){var t=new Cs(e.shape);return this.runWebGLProgram(t,[e],e.dtype)},t.prototype.packTensor=function(e){var t=new wi(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)},t.prototype.packedReshape=function(e,t){var n=[It(e.shape)].concat(At(e.shape)),r={dtype:e.dtype,shape:n,dataId:e.dataId},o=[It(t)].concat(At(t)),a=new Ei(o,n),i=this.runWebGLProgram(a,[r],e.dtype,null,!0);return{dataId:i.dataId,shape:t,dtype:i.dtype}},t.prototype.decode=function(e){var t,n=this.texData.get(e),r=n.isPacked,o=n.shape,a=n.dtype,i=Ft(o);return t=r?new Ta(i):new Ra(i),{dtype:a,shape:o,dataId:this.runWebGLProgram(t,[{shape:i,dtype:a,dataId:e}],a,null,!0).dataId}},t.prototype.runWebGLProgram=function(e,t,n,r,o){var a=this;void 0===o&&(o=!1);var i=this.makeTensorInfo(e.outputShape,n),s=this.texData.get(i.dataId);if(e.packedOutput&&(s.isPacked=!0),e.outPackingScheme===je.DENSE){var u=Ke(e.outputShape);s.texShape=u.map((function(e){return 2*e}))}if(null!=e.outTexUsage&&(s.usage=e.outTexUsage),0===I(i.shape))return s.values=N(i.dtype,0),i;var c=[],d=t.map((function(t){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=a.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&I(t.shape)<=l().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}else if(!!n.isPacked!=!!e.packedInputs)t=n.isPacked?a.unpackTensor(t):a.packTensor(t),c.push(t),n=a.texData.get(t.dataId);else if(n.isPacked&&!Tt(n.shape,t.shape)){var r=t,o=t.shape;t.shape=n.shape,t=a.packedReshape(t,o),c.push(t),n=a.texData.get(t.dataId),r.shape=o}return a.uploadToGPU(t.dataId),{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(i.dataId);var p,f={shape:i.shape,texData:s,isUniform:!1},h=function(e,t,n){var r="";t.concat(n).forEach((function(e){var t=null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0,n=e.isUniform?"uniform":e.texData.texShape;r+=e.shape+"_"+n+"_"+t}));var o=e.userCode,a=e.constructor.name;return a+"_"+r+"_"+o}(e,d,f),v=this.getAndSaveBinary(h,(function(){return function(e,t,n,r){var o=t.userCode,a=n.map((function(e,n){var r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),i=a.map((function(e){return e.shapeInfo})),s={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},u=Vo(a,s,o,t.packedInputs),c=e.createProgram(u),d=null,p=e.getUniformLocation(c,"NAN",!1);1===l().getNumber("WEBGL_VERSION")&&(d=e.getUniformLocation(c,"INFINITY",!1));for(var f={},h=0;h<t.variableNames.length;h++){var v=t.variableNames[h];f[v]=e.getUniformLocation(c,v,!1),f["offset"+v]=e.getUniformLocation(c,"offset"+v,!1)}return{program:t,source:u,webGLProgram:c,uniformLocations:f,inShapeInfos:i,outShapeInfo:s,infLoc:d,nanLoc:p}}(a.gpgpu,e,d,f)})),m=null!=this.activeTimers;if(m&&(p=this.startTimer()),function(e,t,n,r,o){ci(t.inShapeInfos,n),ci([t.outShapeInfo],[r]);var a=r.texData.texture,i=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(a,i[0],i[1]):e.setOutputMatrixTexture(a,i[0],i[1]),e.setProgram(t.webGLProgram),1===l().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach((function(n,r){var o=t.program.variableNames[r],a=t.uniformLocations[o],i=t.uniformLocations["offset"+o];if(null!=a)if(n.isUniform)if(I(n.shape)<2)e.gl.uniform1f(a,n.uniformValues[0]);else{var s=n.uniformValues;s instanceof Float32Array||(s=new Float32Array(s)),e.gl.uniform1fv(a,s)}else null!=n.texData.slice&&null!=i&&e.gl.uniform1i(i,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture,a,r)})),null!=o&&o(e,t.webGLProgram),e.executeProgram()}(this.gpgpu,v,d,f,r),c.forEach((function(e){return a.disposeData(e.dataId)})),m&&(p=this.endTimer(p),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(p)})),!l().getBool("WEBGL_LAZILY_UNPACK")&&s.isPacked&&!1===o){var g=this.unpackTensor(i);return this.disposeData(i.dataId),g}return i},t.prototype.compileAndRun=function(e,t,n,r,o){void 0===o&&(o=!1),n=n||t[0].dtype;var a=this.runWebGLProgram(e,t,n,r,o);return Ne.makeTensorFromDataId(a.dataId,a.shape,a.dtype)},t.prototype.getAndSaveBinary=function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]},t.prototype.getTextureManager=function(){return this.textureManager},t.prototype.dispose=function(){var e=this;this.disposed||(l().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach((function(t){e.gpgpu.deleteProgram(e.binaryCache[t].webGLProgram),delete e.binaryCache[t]})),this.textureManager.dispose(),null!=this.canvas&&"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},t.prototype.floatPrecision=function(){var e=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=$t((function(){if(!l().get("WEBGL_RENDER_FLOAT32_ENABLED")){var t=l().getBool("DEBUG");l().set("DEBUG",!1);var n=e.abs(mn(1e-8)).dataSync()[0];if(l().set("DEBUG",t),n>0)return 32}return 16}))),this.floatPrecisionValue},t.prototype.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},t.prototype.uploadToGPU=function(e){var t,n=this.texData.get(e),r=n.shape,o=n.dtype,a=n.values,i=n.texture,s=n.usage,u=n.isPacked;if(null==i){var l,c=null!=this.activeTimers;c&&(l=ne());var d=n.texShape;if(null==d&&(d=Dt(r,u),n.texShape=d),null!=a){var p=Ft(r),f=void 0,h=d[1],v=d[0],m=a instanceof Uint8Array;u?(h=(t=Xe(d[0],d[1]))[0],v=t[1],f=new La(p,[v,h],m)):f=new Na(p,[v,h],m);var g=this.makeTensorInfo([v,h],o);this.texData.get(g.dataId).usage=m?We.PIXELS:We.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(g.dataId),h,v,a);var y=this.runWebGLProgram(f,[g],o,null,!0),b=this.texData.get(y.dataId);n.texture=b.texture,n.texShape=b.texShape,n.isPacked=b.isPacked,n.usage=b.usage,this.disposeData(g.dataId),this.texData.delete(y.dataId),n.values=null,c&&(this.uploadWaitMs+=ne()-l)}else{var w=this.acquireTexture(d,s,o,u);n.texture=w}}},t.prototype.convertAndCacheOnCPU=function(e,t){var n=this.texData.get(e),r=n.dtype;return this.releaseGPUData(e),null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){for(var n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length),r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}throw new Error("Unknown dtype "+t)}(t,r)),n.values},t.prototype.acquireTexture=function(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var o=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+o+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,r)},t.prototype.computeBytes=function(e,t){return e[0]*e[1]*U(t)},t}(Gr);Le()&&Ne.registerBackend("webgl",(function(){return new Es}),2);var Is=cn({square_:function(e){var t=Zt(e,"x","square"),n=[t];return Ne.runKernelFunc((function(e,n){return n([t]),e.square(t)}),{x:t},null,"Square",{},n,[])}}),As="SquaredDifference",Fs=cn({squaredDifference_:function(e,t){var n,r=Zt(e,"a","squaredDifference"),o=Zt(t,"b","squaredDifference");n=Re(r,o),r=n[0],o=n[1],Zr(r.shape,o.shape);var a={a:r,b:o},i=[r,o];return Ne.runKernelFunc((function(e,t){var n=e.squaredDifference(r,o);return t([r,o]),n}),a,(function(e,t){var n=t[0],r=t[1],o=mn(2);return{a:function(){return e.mul(n.sub(r).mul(o))},b:function(){return e.mul(r.sub(n).mul(o))}}}),As,{},i,[])}}),Ds=cn({abs_:function(e){var t=Zt(e,"x","abs");return"complex64"===t.dtype?Ne.runKernelFunc((function(e){return e.complexAbs(t)}),{$x:t}):Ne.runKernelFunc((function(e,n){var r=e.abs(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return e.mul(n.toFloat().step(-1))}}}),"Abs")}}),Rs=cn({acos_:function(e){var t=Zt(e,"x","acos");return Ne.runKernelFunc((function(e,n){var r=e.acos(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.divStrict(mn(1).sub(n.toFloat().square()).sqrt()).neg()}}}))}}),Ts=cn({acosh_:function(e){var t=Zt(e,"x","acosh");return Ne.runKernelFunc((function(e,n){var r=e.acosh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.divStrict(n.toFloat().square().sub(1).sqrt())}}}))}}),Os=cn({asin_:function(e){var t=Zt(e,"x","asin");return Ne.runKernelFunc((function(e,n){var r=e.asin(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.divStrict(mn(1).sub(n.toFloat().square()).sqrt())}}}))}}),Ps=cn({asinh_:function(e){var t=Zt(e,"x","asinh");return Ne.runKernelFunc((function(e,n){var r=e.asinh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.divStrict(mn(1).add(n.toFloat().square()).sqrt())}}}))}}),Bs=cn({atan_:function(e){var t=Zt(e,"x","atan");return Ne.runKernelFunc((function(e,n){var r=e.atan(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.toFloat().square().add(1))}}}))}}),Ms=cn({atanh_:function(e){var t=Zt(e,"x","atanh");return Ne.runKernelFunc((function(e,n){var r=e.atanh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(mn(1).sub(n.toFloat().square()))}}}))}}),Ns=cn({ceil_:function(e){var t=Zt(e,"x","ceil");return Ne.runKernelFunc((function(e){return e.ceil(t)}),{$x:t},(function(e){return{$x:function(){return Dn(e)}}}))}}),Ls=cn({clipByValue_:function(e,t,n){var r=Zt(e,"x","clipByValue");_(t<=n,(function(){return"Error in clip: min ("+t+") must be less than or equal to max ("+n+")."}));var o=[r],a={min:t,max:n};return Ne.runKernelFunc((function(e,o){var a=e.clip(r,t,n);return o([r]),a}),{x:r},(function(e,r){var o=r[0];return{x:function(){return e.where(o.greaterEqual(t).logicalAnd(o.lessEqual(n)),Dn(e))}}}),"ClipByValue",a,o)}}),Vs=cn({cos_:function(e){var t=Zt(e,"x","cos"),n=[t];return Ne.runKernelFunc((function(e,n){var r=e.cos(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return n.toFloat().sin().neg().mul(e)}}}),"Cos",{},n)}}),js=cn({cosh_:function(e){var t=Zt(e,"x","cosh");return Ne.runKernelFunc((function(e,n){var r=e.cosh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return n.toFloat().sinh().mulStrict(e)}}}))}}),Ws=cn({erf_:function(e){var t=Zt(e,"x","erf");return _("int32"===t.dtype||"float32"===t.dtype,(function(){return"Input dtype must be `int32` or `float32`."})),"int32"===t.dtype&&(t=t.toFloat()),Ne.runKernelFunc((function(e,n){var r=e.erf(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}}))}}),Hs=cn({exp_:function(e){var t=Zt(e,"x","exp");return Ne.runKernelFunc((function(e,n){var r=e.exp(t);return n([r]),r}),{x:t},(function(e,t){return{x:function(){return e.mulStrict(t[0])}}}),"Exp",{},[],[!0])}}),Us=cn({expm1_:function(e){var t=Zt(e,"x","expm1");return Ne.runKernelFunc((function(e,n){var r=e.expm1(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.exp())}}}))}}),zs=cn({floor_:function(e){var t=Zt(e,"x","floor");return Ne.runKernelFunc((function(e){return e.floor(t)}),{$x:t},(function(e){return{$x:function(){return Dn(e)}}}))}}),$s=cn({log_:function(e){var t=Zt(e,"x","log"),n=[t];return Ne.runKernelFunc((function(e,n){var r=e.log(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return e.div(n.toFloat())}}}),"Log",{},n)}}),qs=cn({log1p_:function(e){var t=Zt(e,"x","log1p");return Ne.runKernelFunc((function(e,n){var r=e.log1p(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.add(1))}}}))}}),Gs=cn({logSigmoid_:function(e){var t=Zt(e,"x","logSigmoid");return Ne.runKernelFunc((function(e,n){var r=e.softplus(t.neg()).neg();return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.neg().sigmoid())}}}))}}),Ks=cn({neg_:function(e){var t=Zt(e,"x","neg"),n=[t];return Ne.runKernelFunc((function(e){return e.neg(t)}),{x:t},(function(e){return{x:function(){return e.neg()}}}),"Neg",{},n)}}),Xs=cn({reciprocal_:function(e){var t=Zt(e,"x","reciprocal");return Ne.runKernelFunc((function(e,n){var r=e.reciprocal(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.square().neg())}}}))}}),Ys=cn({round_:function(e){var t=Zt(e,"x","round");return Ne.runKernelFunc((function(e){return e.round(t)}),{$x:t},(function(e){return{$x:function(){return Dn(e)}}}))}}),Zs=cn({rsqrt_:function(e){var t=Zt(e,"x","rsqrt"),n=[t];return Ne.runKernelFunc((function(e,n){var r=e.rsqrt(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return e.div(n.pow(1.5).mul(2)).neg()}}}),"Rsqrt",{},n)}}),Js=cn({sigmoid_:function(e){var t=Zt(e,"x","sigmoid");return Ne.runKernelFunc((function(e,n){var r=e.sigmoid(t);return n([r]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return e.mul(n.mul(mn(1).sub(n)))}}}),"Sigmoid")}}),Qs=cn({sign_:function(e){var t=Zt(e,"x","sign");return Ne.runKernelFunc((function(e){return e.sign(t)}),{$x:t},(function(e){return{$x:function(){return Dn(e)}}}))}}),eu=cn({isNaN_:function(e){var t=Zt(e,"x","isNaN");return Ne.runKernelFunc((function(e){return e.isNaN(t)}),{$x:t},(function(e){return{$x:function(){return Dn(e)}}}))}}),tu=cn({isInf_:function(e){var t=Zt(e,"x","isInf");return Ne.runKernelFunc((function(e){return e.isInf(t)}),{$x:t},(function(e){return{$x:function(){return Dn(e)}}}))}}),nu=cn({isFinite_:function(e){var t=Zt(e,"x","isFinite");return Ne.runKernelFunc((function(e){return e.isFinite(t)}),{$x:t},(function(e){return{$x:function(){return Dn(e)}}}))}}),ru=cn({sin_:function(e){var t=Zt(e,"x","sin"),n=[t];return Ne.runKernelFunc((function(e,n){var r=e.sin(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return n.toFloat().cos().mul(e)}}}),"Sin",{},n)}}),ou=cn({sinh_:function(e){var t=Zt(e,"x","sinh");return Ne.runKernelFunc((function(e,n){var r=e.sinh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return n.toFloat().cosh().mulStrict(e)}}}))}}),au=cn({softplus_:function(e){var t=Zt(e,"x","softplus");return Ne.runKernelFunc((function(e,n){var r=e.softplus(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.sigmoid())}}}))}}),iu=cn({sqrt_:function(e){var t=Zt(e,"x","sqrt");return Ne.runKernelFunc((function(e,n){var r=e.sqrt(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.toFloat().sqrt().mul(2))}}}))}}),su=cn({step_:function(e,t){void 0===t&&(t=0);var n=Zt(e,"x","step");return Ne.runKernelFunc((function(e){return e.step(n,t)}),{$x:n},(function(e){return{$x:function(){return Dn(e)}}}))}}),uu=cn({tan_:function(e){var t=Zt(e,"x","tan");return Ne.runKernelFunc((function(e,n){var r=e.tan(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.cos().square())}}}))}}),lu=cn({tanh_:function(e){var t=Zt(e,"x","tanh");return Ne.runKernelFunc((function(e,n){var r=e.tanh(t);return n([r]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return mn(1).sub(n.square()).mulStrict(e)}}}),"Tanh",{},null,[!0])}});function cu(e,t,n,r,o,a){var i,s,u=Zt(e,"x","batchNorm"),l=Zt(t,"mean","batchNorm"),c=Zt(n,"variance","batchNorm");return null!=o&&(i=Zt(o,"scale","batchNorm")),null!=r&&(s=Zt(r,"offset","batchNorm")),_(2===u.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."})),_(2===l.rank||1===l.rank,(function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+l.rank+"."})),_(2===c.rank||1===c.rank,(function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+c.rank+"."})),null!=i&&_(2===i.rank||1===i.rank,(function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+i.rank+"."})),null!=s&&_(2===s.rank||1===s.rank,(function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+s.rank+"."})),fu(u,l,c,s,i,a)}function du(e,t,n,r,o,a){var i,s,u=Zt(e,"x","batchNorm"),l=Zt(t,"mean","batchNorm"),c=Zt(n,"variance","batchNorm");return null!=o&&(i=Zt(o,"scale","batchNorm")),null!=r&&(s=Zt(r,"offset","batchNorm")),_(3===u.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."})),_(3===l.rank||1===l.rank,(function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+l.rank+"."})),_(3===c.rank||1===c.rank,(function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+c.rank+"."})),null!=i&&_(3===i.rank||1===i.rank,(function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+i.rank+"."})),null!=s&&_(3===s.rank||1===s.rank,(function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+s.rank+"."})),fu(u,l,c,s,i,a)}function pu(e,t,n,r,o,a){var i,s,u=Zt(e,"x","batchNorm"),l=Zt(t,"mean","batchNorm"),c=Zt(n,"variance","batchNorm");return null!=o&&(i=Zt(o,"scale","batchNorm")),null!=r&&(s=Zt(r,"offset","batchNorm")),_(4===u.rank,(function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+u.rank+"."})),_(4===l.rank||1===l.rank,(function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+l.rank+"."})),_(4===c.rank||1===c.rank,(function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+c.rank+"."})),null!=i&&_(4===i.rank||1===i.rank,(function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+i.rank+"."})),null!=s&&_(4===s.rank||1===s.rank,(function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+s.rank+"."})),fu(u,l,c,s,i,a)}function fu(e,t,n,r,o,a){null==a&&(a=.001);var i,s,u,l=Zt(e,"x","batchNorm"),c=Zt(t,"mean","batchNorm"),d=Zt(n,"variance","batchNorm");null!=o&&(i=Zt(o,"scale","batchNorm")),null!=r&&(s=Zt(r,"offset","batchNorm")),_(c.rank===d.rank,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),_(null==s||c.rank===s.rank,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),_(null==i||c.rank===i.rank,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."})),u=0===l.rank||1===l.rank?l.as4D(1,1,1,l.size):2===l.rank?l.as4D(1,1,l.shape[0],l.shape[1]):3===l.rank?l.as4D(1,l.shape[0],l.shape[1],l.shape[2]):l;var p=[l,c,d,i];return Ne.runKernelFunc((function(e,t){var n=e.batchNormalization(u,hu(c),hu(d),a,hu(i),hu(s));return t([l,c,d,i]),n}),{x:l,mean:c,variance:d,scale:i,offset:s},(function(e,t){var n=t,r=n[0],o=n[1],i=n[2],s=n[3],l=null==s?mn(1):s,c=Yr(o.shape,u.shape),d=[];if(1===o.rank){for(var p=0;p<u.shape.length-1;++p)d.push(u.shape[p]);d.push(1)}var f=r.sub(o),h=e.mul(l),v=Zs(i.add(mn(a))),m=v.mul(v).mul(v).mul(mn(-.5));return{x:function(){return 1===o.rank?e.mul(wr(v.as4D(1,1,1,o.shape[0]),d)).mul(l).reshape(r.shape):e.mul(v).mul(l).reshape(r.shape)},mean:function(){var e=v.mul(mn(-1)).mul(h);return 1===o.rank&&(e=e.sum(c)),e.reshape(o.shape)},variance:function(){var e=m.mul(f).mul(h);return 1===o.rank&&(e=e.sum(c)),e.reshape(o.shape)},scale:function(){var t=f.mul(v),n=e.mul(t);return 1===o.rank&&(n=n.sum(c)),n.reshape(o.shape)},offset:function(){var t=e;return 1===o.rank&&(t=t.sum(c)),t.reshape(o.shape)}}}),"BatchNormalization",{varianceEpsilon:a},p).reshape(l.shape)}function hu(e){return null==e?null:0===e.rank?e.as1D():1===e.rank?e:2===e.rank?e.as4D(1,1,e.shape[0],e.shape[1]):3===e.rank?e.as4D(1,e.shape[0],e.shape[1],e.shape[2]):e}function vu(){zt("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var mu=cn({batchNormalization2d_:function(e,t,n,r,o,a){return void 0===r&&(r=.001),vu(),cu(e,t,n,a,o,r)}}),gu=cn({batchNormalization3d_:function(e,t,n,r,o,a){return void 0===r&&(r=.001),vu(),du(e,t,n,a,o,r)}}),yu=cn({batchNormalization4d_:function(e,t,n,r,o,a){return void 0===r&&(r=.001),vu(),pu(e,t,n,a,o,r)}}),bu=cn({batchNormalization_:function(e,t,n,r,o,a){return void 0===r&&(r=.001),vu(),fu(e,t,n,a,o,r)}}),wu=cn({batchNorm_:fu}),xu=cn({batchNorm2d_:cu}),Cu=cn({batchNorm3d_:du}),_u=cn({batchNorm4d_:pu}),ku=cn({logicalAnd_:function(e,t){var n=Zt(e,"a","logicalAnd","bool"),r=Zt(t,"b","logicalAnd","bool");return Zr(n.shape,r.shape),Ne.runKernelFunc((function(e){return e.logicalAnd(n,r)}),{a:n,b:r},null,"LogicalAnd")}}),Su=cn({logicalNot_:function(e){var t=Zt(e,"x","logicalNot","bool");return Ne.runKernelFunc((function(e){return e.logicalNot(t)}),{$x:t})}}),Eu=cn({logicalOr_:function(e,t){var n=Zt(e,"a","logicalOr","bool"),r=Zt(t,"b","logicalOr","bool");return Zr(n.shape,r.shape),Ne.runKernelFunc((function(e){return e.logicalOr(n,r)}),{$a:n,$b:r})}}),Iu=cn({logicalXor_:function(e,t){var n=Zt(e,"a","logicalXor","bool"),r=Zt(t,"b","logicalXor","bool");return Zr(n.shape,r.shape),Eu(e,t).logicalAnd(ku(e,t).logicalNot())}}),Au=cn({where_:function(e,t,n){var r=Zt(t,"a","where"),o=Zt(n,"b","where"),a=Zt(e,"condition","where","bool");return k(r.shape,o.shape,"Error in where: "),1===a.rank?_(a.shape[0]===r.shape[0],(function(){return"The first dimension of `a` must match the size of `condition`."})):k(a.shape,o.shape,"Error in where: "),Ne.runKernelFunc((function(e,t){var n=e.select(a,r,o);return t([a]),n}),{$condition:a,$a:r,$b:o},(function(e,t){var n=t[0];return{$condition:function(){return Dn(n).toFloat()},$a:function(){return e.mul(n.cast(e.dtype))},$b:function(){return e.mul(n.logicalNot().cast(e.dtype))}}}))}}),Fu=function(e){return a(this,void 0,void 0,(function(){var t,n,r;return i(this,(function(o){switch(o.label){case 0:return[4,(t=Zt(e,"condition","whereAsync","bool")).data()];case 1:return n=o.sent(),r=Fo(t.shape,n),e!==t&&t.dispose(),[2,r]}}))}))},Du=cn({add_:function(e,t){var n,r=Zt(e,"a","add"),o=Zt(t,"b","add");n=Re(r,o),r=n[0],o=n[1];var a=Zr(r.shape,o.shape);return Ne.runKernelFunc((function(e){return e.add(r,o)}),{a:r,b:o},(function(e){return{a:function(){var t=e,n=Yr(r.shape,a);return n.length>0&&(t=t.sum(n)),t.reshape(r.shape)},b:function(){var t=e,n=Yr(o.shape,a);return n.length>0&&(t=t.sum(n)),t.reshape(o.shape)}}}),"Add")}}),Ru=cn({addN_:function(e){_(Array.isArray(e),(function(){return"The argument passed to tf.addN() must be a list of tensors"})),_(e.length>=1,(function(){return"Must pass at least one tensor to tf.addN(), but got "+e.length}));var t=e.map((function(e,t){return Zt(e,"tensors"+t,"addN")})),n=t[0];t.forEach((function(e){if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((function(e){if(!A(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));var r=t;return Ne.runKernelFunc((function(e){return e.addN(t)}),r,(function(e){var n={};return t.forEach((function(t,r){n[r]=function(){return e.clone()}})),n}),"AddN")}}),Tu=cn({addStrict_:function(e,t){var n=Zt(e,"a","addStrict"),r=Zt(t,"b","addStrict");return k(n.shape,r.shape,"Error in addStrict: "),n.add(r)}}),Ou=cn({atan2_:function(e,t){var n,r=Zt(e,"a","atan2"),o=Zt(t,"b","atan2");n=Re(r,o),r=n[0],o=n[1];var a=Zr(r.shape,o.shape);return Ne.runKernelFunc((function(e,t){var n=e.atan2(r,o);return t([r,o]),n}),{$a:r,$b:o},(function(e,t){var n=t[0],r=t[1];return{$a:function(){var t=Du(n.square(),r.square()),o=e.mul(r.div(t)),i=Yr(n.shape,a);return i.length>0&&(o=o.sum(i)),o.reshape(n.shape)},$b:function(){var t=Du(n.square(),r.square()),o=Ks(e.mul(n.div(t))),i=Yr(r.shape,a);return i.length>0&&(o=o.sum(i)),o.reshape(r.shape)}}}))}}),Pu=cn({div_:function(e,t){var n,r=Zt(e,"a","div"),o=Zt(t,"b","div");if(n=Re(r,o),r=n[0],o=n[1],"int32"===r.dtype&&"int32"===o.dtype)return Nu(r,o);var a=Zr(r.shape,o.shape);return Ne.runKernelFunc((function(e,t){var n=e.realDivide(r,o);return t([r,o]),n}),{a:r,b:o},(function(e,t){var n=t[0],r=t[1];return{a:function(){var t=e.div(r.toFloat()),o=Yr(n.shape,a);return o.length>0?t.sum(o).reshape(n.shape):t},b:function(){var t=e.mul(n.toFloat()),o=Yr(r.shape,a);o.length>0&&(t=t.sum(o).reshape(r.shape));var i=r.square();return t.div(i.toFloat()).neg()}}}),"Div")}}),Bu=cn({divNoNan_:function(e,t){var n,r=Zt(e,"a","div"),o=Zt(t,"b","div");r=(n=Re(r,o))[0],o=n[1];var a=Pu(r,o),i=Dn(a),s=o.equal(i);return Au(s,i,a)}}),Mu=cn({divStrict_:function(e,t){var n=Zt(e,"a","div"),r=Zt(t,"b","div");return k(n.shape,r.shape,"Error in divideStrict: "),n.div(r)}}),Nu=cn({floorDiv_:function(e,t){var n,r=Zt(e,"a","floorDiv"),o=Zt(t,"b","floorDiv");n=Re(r,o),r=n[0],o=n[1];var a=Zr(r.shape,o.shape);return Ne.runKernelFunc((function(e,t){var n=e.floorDiv(r,o);return t([r,o]),n}),{a:r,b:o},(function(e,t){var n=t[0],r=t[1];return{a:function(){var t=e.div(r.toFloat()),o=Yr(n.shape,a);return o.length>0?t.sum(o).reshape(n.shape):t},b:function(){var t=e.mul(n.toFloat()),o=Yr(r.shape,a);o.length>0&&(t=t.sum(o).reshape(r.shape));var i=r.square();return t.div(i.toFloat()).neg()}}}),"FloorDiv")}}),Lu=cn({maximum_:function(e,t){var n,r=Zt(e,"a","maximum"),o=Zt(t,"b","maximum");return n=Re(r,o),r=n[0],o=n[1],"bool"===r.dtype&&(r=r.toInt(),o=o.toInt()),Zr(r.shape,o.shape),Ne.runKernelFunc((function(e,t){var n=e.maximum(r,o);return t([r,o]),n}),{a:r,b:o},(function(e,t){var n=t[0],r=t[1];return{a:function(){return e.mul(n.greaterEqual(r).toFloat())},b:function(){return e.mul(n.less(r).toFloat())}}}),"Maximum")}}),Vu=cn({maximumStrict_:function(e,t){var n=Zt(e,"a","maximumStrict"),r=Zt(t,"b","maximumStrict");return k(n.shape,r.shape,"Error in maximumStrict: "),n.maximum(r)}}),ju=cn({minimum_:function(e,t){var n,r=Zt(e,"a","minimum"),o=Zt(t,"b","minimum");return n=Re(r,o),r=n[0],o=n[1],"bool"===r.dtype&&(r=r.toInt(),o=o.toInt()),Zr(r.shape,o.shape),Ne.runKernelFunc((function(e,t){var n=e.minimum(r,o);return t([r,o]),n}),{a:r,b:o},(function(e,t){var n=t[0],r=t[1];return{a:function(){return e.mul(n.lessEqual(r).toFloat())},b:function(){return e.mul(n.greater(r).toFloat())}}}),"Minimum")}}),Wu=cn({minimumStrict_:function(e,t){var n=Zt(e,"a","minimumStrict"),r=Zt(t,"b","minimumStrict");return k(n.shape,r.shape,"Error in minimumStrict: "),n.minimum(r)}}),Hu=cn({mod_:function(e,t){var n,r=Zt(e,"a","mod"),o=Zt(t,"b","mod");n=Re(r,o),r=n[0],o=n[1];var a=Zr(r.shape,o.shape);return Ne.runKernelFunc((function(e,t){var n=e.mod(r,o);return t([r,o]),n}),{$a:r,$b:o},(function(e,t){var n=t[0],r=t[1];return{$a:function(){var t=Yr(n.shape,a);return t.length>0?e.sum(t).reshape(n.shape):e},$b:function(){var t=e.mul(n.div(r).floor().neg()),o=Yr(r.shape,a);return o.length>0?t.sum(o).reshape(r.shape):t}}}))}}),Uu=cn({modStrict_:function(e,t){var n=Zt(e,"a","modStrict"),r=Zt(t,"b","modStrict");return k(n.shape,r.shape,"Error in modStrict: "),n.mod(r)}}),zu=cn({mul_:function(e,t){var n,r=Zt(e,"a","mul"),o=Zt(t,"b","mul");n=Re(r,o),r=n[0],o=n[1];var a=Zr(r.shape,o.shape);return Ne.runKernelFunc((function(e,t){var n=e.multiply(r,o);return t([r,o]),n}),{a:r,b:o},(function(e,t){var n=t[0],r=t[1];return{a:function(){var t=e.mul(r.toFloat()),o=Yr(n.shape,a);return o.length>0?t.sum(o).reshape(n.shape):t},b:function(){var t=e.mul(n.toFloat()),o=Yr(r.shape,a);return o.length>0?t.sum(o).reshape(r.shape):t}}}),"Mul")}}),$u=cn({mulStrict_:function(e,t){var n=Zt(e,"a","mul"),r=Zt(t,"b","mul");return k(n.shape,r.shape,"Error in multiplyStrict: "),n.mul(r)}}),qu=cn({pow_:function(e,t){var n,r=Zt(e,"base","pow"),o=Zt(t,"exp","pow");n=Re(r,o),r=n[0],o=n[1];var a=Zr(r.shape,o.shape),i=[r,o];return Ne.runKernelFunc((function(e,t){var n=e.pow(r,o);return t([r,o,n]),n}),{a:r,b:o},(function(e,t){var n=t[0],r=t[1],o=t[2];return{a:function(){var t=r.toFloat(),o=e.mul(t.mul(n.pow(t.sub(mn(1))))),i=Yr(n.shape,a);return i.length>0&&(o=o.sum(i)),o.reshape(n.shape)},b:function(){var t=n.greater(0),i=n.log().where(t,Dn(n)),s=e.mul(o.mul(i)),u=Yr(r.shape,a);return u.length>0&&(s=s.sum(u)),s.reshape(r.shape)}}}),"Pow",{},i,[!0])}}),Gu=cn({powStrict_:function(e,t){return k(e.shape,t.shape,"Error in powStrict: "),e.pow(t)}}),Ku=cn({squaredDifferenceStrict_:function(e,t){var n=Zt(e,"a","squaredDifferenceStrict"),r=Zt(t,"b","squaredDifferenceStrict");return k(n.shape,r.shape,"Error in squaredDifferenceStrict: "),n.squaredDifference(r)}}),Xu=cn({sub_:function(e,t){var n,r=Zt(e,"a","sub"),o=Zt(t,"b","sub");n=Re(r,o),r=n[0],o=n[1];var a=Zr(r.shape,o.shape);return Ne.runKernelFunc((function(e){return e.subtract(r,o)}),{a:r,b:o},(function(e){return{a:function(){var t=e,n=Yr(r.shape,a);return n.length>0&&(t=t.sum(n)),t.reshape(r.shape)},b:function(){var t=e,n=Yr(o.shape,a);return n.length>0&&(t=t.sum(n)),t.neg().reshape(o.shape)}}}),"Sub")}}),Yu=cn({subStrict_:function(e,t){var n=Zt(e,"a","subStrict"),r=Zt(t,"b","subStrict");return k(n.shape,r.shape,"Error in subStrict: "),n.sub(r)}}),Zu=cn({equal_:function(e,t){var n,r=Zt(e,"a","equal"),o=Zt(t,"b","equal");return n=Re(r,o),r=n[0],o=n[1],Zr(r.shape,o.shape),Ne.runKernelFunc((function(e){return e.equal(r,o)}),{$a:r,$b:o})}}),Ju=cn({equalStrict_:function(e,t){var n=Zt(e,"a","equalStrict"),r=Zt(t,"b","equalStrict");return k(n.shape,r.shape,"Error in equalStrict: "),n.equal(r)}}),Qu=cn({greater_:function(e,t){var n,r=Zt(e,"a","greater"),o=Zt(t,"b","greater");return n=Re(r,o),r=n[0],o=n[1],Zr(r.shape,o.shape),Ne.runKernelFunc((function(e){return e.greater(r,o)}),{a:r,b:o},null,"Greater")}}),el=cn({greaterEqual_:function(e,t){var n,r=Zt(e,"a","greaterEqual"),o=Zt(t,"b","greaterEqual");return n=Re(r,o),r=n[0],o=n[1],Zr(r.shape,o.shape),Ne.runKernelFunc((function(e,t){var n=e.greaterEqual(r,o);return t([r,o]),n}),{a:r,b:o},(function(e,t){var n=t[0],r=t[1];return{a:function(){return Dn(n)},b:function(){return Dn(r)}}}),"GreaterEqual")}}),tl=cn({greaterEqualStrict_:function(e,t){var n=Zt(e,"a","greaterEqualStrict"),r=Zt(t,"b","greaterEqualStrict");return k(n.shape,r.shape,"Error in greaterEqualStrict: "),n.greaterEqual(r)}}),nl=cn({greaterStrict_:function(e,t){var n=Zt(e,"a","greaterStrict"),r=Zt(t,"b","greaterStrict");return k(n.shape,r.shape,"Error in greaterStrict: "),n.greater(r)}}),rl=cn({less_:function(e,t){var n,r=Zt(e,"a","less"),o=Zt(t,"b","less");return n=Re(r,o),r=n[0],o=n[1],Zr(r.shape,o.shape),Ne.runKernelFunc((function(e){return e.less(r,o)}),{a:r,b:o},null,"Less")}}),ol=cn({lessEqual_:function(e,t){var n,r=Zt(e,"a","lessEqual"),o=Zt(t,"b","lessEqual");return n=Re(r,o),r=n[0],o=n[1],Zr(r.shape,o.shape),Ne.runKernelFunc((function(e,t){var n=e.lessEqual(r,o);return t([r,o]),n}),{a:r,b:o},null,"LessEqual")}}),al=cn({lessEqualStrict_:function(e,t){var n=Zt(e,"a","lessEqualStrict"),r=Zt(t,"b","lessEqualStrict");return k(n.shape,r.shape,"Error in lessEqualStrict: "),n.lessEqual(r)}}),il=cn({lessStrict_:function(e,t){var n=Zt(e,"a","lessStrict"),r=Zt(t,"b","lessStrict");return k(n.shape,r.shape,"Error in lessStrict: "),n.less(r)}}),sl=cn({notEqual_:function(e,t){var n,r=Zt(e,"a","notEqual"),o=Zt(t,"b","notEqual");return n=Re(r,o),r=n[0],o=n[1],Zr(r.shape,o.shape),Ne.runKernelFunc((function(e){return e.notEqual(r,o)}),{a:r,b:o},null,"NotEqual")}}),ul=cn({notEqualStrict_:function(e,t){var n=Zt(e,"a","notEqualStrict"),r=Zt(t,"b","notEqualStrict");return k(n.shape,r.shape,"Error in notEqualStrict: "),n.notEqual(r)}});function ll(e,t){for(var n=[],r=e;r<t;++r)n.push(r);return n}function cl(e){for(var t=[],n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var dl=cn({gather_:function(e,t,n){void 0===n&&(n=0);var r=Zt(e,"x","gather"),o=Zt(t,"indices","gather","int32");n=B(n,r.shape)[0];var a=function(e,t,n){for(var r=e.shape[n],o=[],a=1,i=1,s=0;s<n;s++)o.push(e.shape[s]),a*=e.shape[s];for(s=0;s<t.rank;s++)o.push(t.shape[s]);for(s=n+1;s<e.rank;s++)o.push(e.shape[s]),i*=e.shape[s];return{batchSize:a,sliceSize:i,dimSize:r,outputShape:o}}(r,o,n);return Ne.runKernelFunc((function(e,t){var a=e.gather(r,o.flatten(),n);return t([o]),a}),{x:r,indices:o},(function(e,t){var o=t[0];return{x:function(){var t=r.shape,a=o.size,i=t.slice(0,n),s=i.length,u=t.slice(n,t.length).slice(1),l=u.length,c=ll(0,s),d=ll(s+1,s+1+l),p=cl([i,[a],u]),f=e.reshape(p),h=o.reshape([a]),v=cl([[s],c,d]),m=f.transpose(v),g=pl(m,h,r.shape[n]),y=an(v);return g.transpose(y)},indices:function(){return o}}}),"Gather",{axis:n}).reshape(a.outputShape)}}),pl=cn({unsortedSegmentSum_:function(e,t,n){var r=Zt(e,"x","unsortedSegmentSum"),o=Zt(t,"segmentIds","unsortedSegmentSum","int32");return _(F(n),(function(){return"numSegments must be of dtype int"})),Ne.runKernelFunc((function(e,t){var a=e.unsortedSegmentSum(r,o,n);return t([o]),a}),{$x:r},(function(e,t){var n=t[0];return{$x:function(){return function(e,t){for(var n=Lu(t,Dn(t)),r=dl(e,n),o=el(t,mn(0,"int32")),a=r.rank-o.rank,i=0;i<a;++i)o=rr(o,i+1);o=ku(o,kn(r.shape,"bool"));var s=Dn(r);return Au(o,r,s)}(e,n)}}}))}}),fl=function(e,t,n){return a(this,void 0,void 0,(function(){var r,o,a,s,u,l,c,d,p,f,h,v,m;return i(this,(function(i){switch(i.label){case 0:for(r=Zt(e,"tensor","boolMask"),o=Zt(t,"mask","boolMask","bool"),a=null==n?0:n,s=o.rank,u=r.shape,_(s>0,(function(){return"mask cannot be scalar"})),k(u.slice(a,a+s),o.shape,"mask's shape must match the first K dimensions of tensor's shape,"),l=1,c=a;c<a+s;c++)l*=u[c];return d=u.slice(0,a).concat([l],u.slice(a+s)),p=r.reshape(d),f=o.reshape([-1]),[4,Fu(f)];case 1:return h=i.sent(),v=h.squeeze([1]),m=dl(p,v,a),e!==r&&r.dispose(),t!==o&&o.dispose(),v.dispose(),p.dispose(),f.dispose(),h.dispose(),[2,m]}}))}))};function hl(e,t,n,r,o,a,i){void 0===a&&(a="NHWC"),_(e.length===t.rank,(function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"}));var s=e,u=t,l=!1;3===t.rank&&(l=!0,u=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]),s=[1,e[0],e[1],e[2]]),_(4===s.length,(function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+s.length+"."})),_(4===u.rank,(function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+u.rank})),_(4===n.rank,(function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank}));var c="NHWC"===a?s[3]:s[1],d="NHWC"===a?u.shape[3]:u.shape[1];_(c===n.shape[2],(function(){return"Error in conv2dDerInput: depth of input ("+c+") must match input depth for filter "+n.shape[2]+"."})),_(d===n.shape[3],(function(){return"Error in conv2dDerInput: depth of output ("+d+") must match output depth for filter "+n.shape[3]+"."})),null!=i&&_(F(o),(function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+o+"."}));var p=lo(a),f=eo(s,n.shape,r,1,o,i,!1,p),h=Ne.runKernelFunc((function(e,t){var r=e.conv2dDerInput(u,n,f);return t([n,u]),r}),{dy4D:u,filter:n},(function(e,t){var n=t[0],s=t[1];return{dy4D:function(){return yl(e,n,r,o,a,1,i)},filter:function(){return wl(e,s,n.shape,r,o,a,i)}}}));return l?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h}function vl(e){var t=function(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}(e),n=t[0],r=t[1],o=t[2];return 1===n&&1===r&&1===o}function ml(e,t,n,r,o){_(e.length===t.rank,(function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"}));var a=e,i=t,s=!1;4===t.rank&&(s=!0,i=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]),a=[1,e[0],e[1],e[2],e[3]]);var u=a[4],l=i.shape[4];_(5===a.length,(function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+a.length+"."})),_(5===i.rank,(function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+i.rank})),_(5===n.rank,(function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+n.rank})),_(u===n.shape[3],(function(){return"Error in conv3dDerInput: depth of input ("+u+") must match input depth for filter "+n.shape[3]+"."})),_(l===n.shape[4],(function(){return"Error in conv3dDerInput: depth of output ("+l+") must match output depth for filter "+n.shape[4]+"."}));var c=to(a,n.shape,r,1,o),d=Ne.runKernelFunc((function(e){return e.conv3dDerInput(i,n,c)}),{dy5D:i});return s?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}var gl=cn({conv1d_:function(e,t,n,r,o,a,i){void 0===o&&(o="NWC"),void 0===a&&(a=1);var s=Zt(e,"x","conv1d"),u=Zt(t,"filter","conv1d"),l=s,c=!1;2===s.rank&&(c=!0,l=s.as3D(1,s.shape[0],s.shape[1])),_(3===l.rank,(function(){return"Error in conv1d: input must be rank 3, but got rank "+l.rank+"."})),_(3===u.rank,(function(){return"Error in conv1d: filter must be rank 3, but got rank "+u.rank+"."})),null!=i&&_(F(r),(function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."})),_(l.shape[2]===u.shape[1],(function(){return"Error in conv1d: depth of input ("+l.shape[2]+") must match input depth for filter "+u.shape[1]+"."})),_(uo(n,a),(function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+n+" and dilation '"+a+"'"})),_("NWC"===o,(function(){return"Error in conv1d: got dataFormat of "+o+" but only NWC is currently supported."}));var d=u.as4D(1,u.shape[0],u.shape[1],u.shape[2]),p=l.as4D(l.shape[0],1,l.shape[1],l.shape[2]),f=yl(p,d,[1,n],r,"NHWC",[1,a],i);return c?f.as2D(f.shape[2],f.shape[3]):f.as3D(f.shape[0],f.shape[2],f.shape[3])}}),yl=cn({conv2d_:function(e,t,n,r,o,a,i){void 0===o&&(o="NHWC"),void 0===a&&(a=[1,1]);var s=Zt(e,"x","conv2d"),u=Zt(t,"filter","conv2d"),l=s,c=!1;3===s.rank&&(c=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),_(4===l.rank,(function(){return"Error in conv2d: input must be rank 4, but got rank "+l.rank+"."})),_(4===u.rank,(function(){return"Error in conv2d: filter must be rank 4, but got rank "+u.rank+"."})),null!=i&&_(F(r),(function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."}));var d="NHWC"===o?l.shape[3]:l.shape[1];_(d===u.shape[2],(function(){return"Error in conv2d: depth of input ("+d+") must match input depth for filter "+u.shape[2]+"."})),_(uo(n,a),(function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"}));var p=lo(o),f=eo(l.shape,u.shape,n,a,r,i,!1,p),h=[u,l],v=Ne.runKernelFunc((function(e,t){var n=e.conv2d(l,u,f);return t([u,l]),n}),{x:l,filter:u},(function(e,t){var i=t,s=i[0],u=i[1];return _(so(a),(function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+a+"'"})),{x:function(){return xl(u.shape,e,s,n,r,o)},filter:function(){return wl(u,e,s.shape,n,r,o)}}}),"Conv2D",f,h);return c?v.as3D(v.shape[1],v.shape[2],v.shape[3]):v}}),bl=cn({conv3d_:function(e,t,n,r,o,a){void 0===o&&(o="NDHWC"),void 0===a&&(a=[1,1,1]);var i=Zt(e,"x","conv3d"),s=Zt(t,"filter","conv3d"),u=i,l=!1;4===i.rank&&(l=!0,u=i.as5D(1,i.shape[0],i.shape[1],i.shape[2],i.shape[3])),_(5===u.rank,(function(){return"Error in conv3d: input must be rank 5, but got rank "+u.rank+"."})),_(5===s.rank,(function(){return"Error in conv3d: filter must be rank 5, but got rank "+s.rank+"."})),_(u.shape[4]===s.shape[3],(function(){return"Error in conv3d: depth of input ("+u.shape[4]+") must match input depth for filter "+s.shape[3]+"."})),_(function(e,t){return vl(e)||vl(t)}(n,a),(function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"})),_("NDHWC"===o,(function(){return"Error in conv3d: got dataFormat of "+o+" but only NDHWC is currently supported."}));var c=to(u.shape,s.shape,n,a,r),d=Ne.runKernelFunc((function(e,t){var n=e.conv3d(u,s,c);return t([u,s]),n}),{x:u,$filter:s},(function(e,t){_(vl(a),(function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+a+"'"}));var o=t[0],i=t[1];return{x:function(){return ml(o.shape,e,i,n,r)},$filter:function(){return function(e,t,n,r,o){var a=e;4===e.rank&&(a=e.as5D(1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]));var i=t;4===i.rank&&(i=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3])),_(5===a.rank,(function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+a.shape+"."})),_(5===i.rank,(function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+i.shape+"."})),_(5===n.length,(function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+n+"."})),_(a.shape[4]===n[3],(function(){return"Error in conv3dDerFilter: depth of input "+a.shape[4]+") must match input depth in filter ("+n[3]+"."})),_(i.shape[4]===n[4],(function(){return"Error in conv3dDerFilter: depth of dy ("+i.shape[4]+") must match output depth for filter ("+n[4]+")."}));var s=to(a.shape,n,r,1,o);return Ne.runKernelFunc((function(e){return e.conv3dDerFilter(a,i,s)}),{x5D:a,dy5D:i})}(o,e,i.shape,n,r)}}}));return l?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}}),wl=cn({conv2dDerFilter_:function(e,t,n,r,o,a,i){void 0===a&&(a="NHWC");var s=e;3===e.rank&&(s=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var u=t;3===u.rank&&(u=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),_(4===s.rank,(function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+s.shape+"."})),_(4===u.rank,(function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+u.shape+"."})),_(4===n.length,(function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+"."}));var l="NHWC"===a?s.shape[3]:s.shape[1],c="NHWC"===a?u.shape[3]:u.shape[1];_(l===n[2],(function(){return"Error in conv2dDerFilter: depth of input "+l+") must match input depth in filter ("+n[2]+"."})),_(c===n[3],(function(){return"Error in conv2dDerFilter: depth of dy ("+c+") must match output depth for filter ("+n[3]+")."})),null!=i&&_(F(o),(function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+o+"."}));var d=lo(a),p=eo(s.shape,n,r,1,o,i,!1,d);return Ne.runKernelFunc((function(e){return e.conv2dDerFilter(s,u,p)}),{x4D:s,dy4D:u})}}),xl=cn({conv2dDerInput_:hl}),Cl=cn({depthwiseConv2d_:function(e,t,n,r,o,a,i){void 0===o&&(o="NHWC"),void 0===a&&(a=[1,1]);var s=Zt(e,"x","depthwiseConv2d"),u=Zt(t,"filter","depthwiseConv2d"),l=s,c=!1;3===s.rank&&(c=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),_(4===l.rank,(function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+l.rank+"."})),_(4===u.rank,(function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+u.rank+"."})),_(l.shape[3]===u.shape[2],(function(){return"Error in depthwiseConv2d: number of input channels ("+l.shape[3]+") must match the inChannels dimension in filter "+u.shape[2]+"."})),null==a&&(a=[1,1]),_(uo(n,a),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"})),null!=i&&_(F(r),(function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."}));var d=eo(l.shape,u.shape,n,a,r,i,!0),p=[l,u],f=Ne.runKernelFunc((function(e,t){var n=e.depthwiseConv2D(l,u,d);return t([l,u]),n}),{x:l,filter:u},(function(e,t){_(so(a),(function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+a+"'"}));var n=t[0],r=t[1];return{x:function(){return _l(n.shape,e,r,d)},filter:function(){return kl(n,e,r.shape,d)}}}),"DepthwiseConv2dNative",d,p);return c?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}}),_l=cn({depthwiseConv2dDerInput_:function(e,t,n,r){var o=t,a=!1;3===t.rank&&(a=!0,o=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var i=Ne.runKernelFunc((function(e){return e.depthwiseConv2DDerInput(o,n,r)}),{dy4D:o});return a?i.as3D(i.shape[1],i.shape[2],i.shape[3]):i}}),kl=cn({depthwiseConv2dDerFilter_:function(e,t,n,r){var o=e;3===e.rank&&(o=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var a=t;return 3===a.rank&&(a=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),Ne.runKernelFunc((function(e){return e.depthwiseConv2DDerFilter(o,a,r)}),{x4D:o,dy4D:a})}}),Sl=cn({separableConv2d_:function(e,t,n,r,o,a,i){void 0===a&&(a=[1,1]),void 0===i&&(i="NHWC");var s=Zt(e,"x","separableConv2d"),u=Zt(t,"depthwiseFilter","separableConv2d"),l=Zt(n,"pointwiseFilter","separableConv2d"),c=s,d=!1;if(3===s.rank&&(d=!0,c=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),"NCHW"===i)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");_(4===c.rank,(function(){return"Error in separableConv2d: input must be rank 4, but got rank "+c.rank+"."})),_(4===u.rank,(function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+u.rank+"."})),_(4===l.rank,(function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+u.rank+"."})),_(1===l.shape[0],(function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+l.shape[0]+"."})),_(1===l.shape[1],(function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+l.shape[1]+"."}));var p=u.shape[2],f=u.shape[3];_(l.shape[2]===p*f,(function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+p*f+", but got "+l.shape[2]+"."}));var h=Cl(c,u,r,o,i,a),v=yl(h,l,1,"valid",i);return d?v.as3D(v.shape[1],v.shape[2],v.shape[3]):v}}),El=cn({conv2dTranspose_:function(e,t,n,r,o,a){return hl(n,Zt(e,"x","conv2dTranspose"),Zt(t,"filter","conv2dTranspose"),r,o,"NHWC",a)}}),Il=cn({conv3dTranspose_:function(e,t,n,r,o){return ml(n,Zt(e,"x","conv3dTranspose"),Zt(t,"filter","conv3dTranspose"),r,o)}}),Al=cn({matMul_:function(e,t,n,r){var o;void 0===n&&(n=!1),void 0===r&&(r=!1);var a=Zt(e,"a","matMul"),i=Zt(t,"b","matMul");o=Re(a,i),a=o[0],i=o[1];var s=n?a.shape[a.rank-2]:a.shape[a.rank-1],u=r?i.shape[i.rank-1]:i.shape[i.rank-2],l=n?a.shape[a.rank-1]:a.shape[a.rank-2],c=r?i.shape[i.rank-2]:i.shape[i.rank-1],d=a.shape.slice(0,-2),p=i.shape.slice(0,-2),f=I(d),h=I(p);_(a.rank>=2&&i.rank>=2&&a.rank===i.rank,(function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+a.rank+" and "+i.rank+"."})),_(A(d,p),(function(){return"Error in matMul: outer dimensions ("+d+") and ("+p+") of Tensors with shapes "+a.shape+" and "+i.shape+" must match."})),_(s===u,(function(){return"Error in matMul: inner shapes ("+s+") and ("+u+") of Tensors with shapes "+a.shape+" and "+i.shape+" and transposeA="+n+" and transposeB="+r+" must match."}));var v=a.shape.slice(0,-2).concat([l,c]),m=n?a.as3D(f,s,l):a.as3D(f,l,s),g=r?i.as3D(h,c,u):i.as3D(h,u,c),y={transposeA:n,transposeB:r};return Ne.runKernelFunc((function(e,t){var o=e.batchMatMul(m,g,n,r);return t([m,g]),o}),{a:m,b:g},(function(e,t){var o=t,a=o[0],i=o[1];return n||r?!n&&r?{a:function(){return e.matMul(i,!1,!1)},b:function(){return e.matMul(a,!0,!1)}}:n&&!r?{a:function(){return i.matMul(e,!1,!0)},b:function(){return a.matMul(e,!1,!1)}}:{a:function(){return i.matMul(e,!0,!0)},b:function(){return e.matMul(a,!0,!0)}}:{a:function(){return e.matMul(i,!1,!0)},b:function(){return a.matMul(e,!0,!1)}}}),"BatchMatMul",y).reshape(v)}}),Fl=cn({dot_:function(e,t){var n=Zt(e,"t1","dot"),r=Zt(t,"t2","dot");_(!(1!==n.rank&&2!==n.rank||1!==r.rank&&2!==r.rank),(function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+n.rank+" and "+r.rank+"."}));var o=1===n.rank?n.size:n.shape[1],a=1===r.rank?r.size:r.shape[0];return _(o===a,(function(){return"Error in dot: inner dimensions of inputs must match, but got "+o+" and "+a+"."})),1===n.rank&&1===r.rank?n.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():1===n.rank&&2===r.rank?n.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():2===n.rank&&1===r.rank?n.matMul(r.as2D(-1,1)).as1D():n.matMul(r.as2D(r.shape[0],r.shape[1]))}}),Dl=cn({outerProduct_:function(e,t){var n=Zt(e,"v1","outerProduct"),r=Zt(t,"v2","outerProduct");return _(1===n.rank&&1===r.rank,(function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+n.rank+" and "+r.rank+"."})),n.as2D(-1,1).matMul(r.as2D(1,-1))}}),Rl=cn({reverse_:function(e,t){var n=Zt(e,"x","reverse");if(0===n.rank)return n.clone();var r=B(t,n.shape);return Ne.runKernelFunc((function(e){return e.reverse(n,r)}),{$x:n},(function(e){return{$x:function(){return e.reverse(r)}}})).reshapeAs(n)}}),Tl=cn({reverse1d_:function(e){var t=Zt(e,"x","reverse");return _(1===t.rank,(function(){return"Error in reverse1D: x must be rank 1 but got rank "+t.rank+"."})),Rl(t,0)}}),Ol=cn({reverse2d_:function(e,t){var n=Zt(e,"x","reverse");return _(2===n.rank,(function(){return"Error in reverse2D: x must be rank 2 but got rank "+n.rank+"."})),Rl(n,t)}}),Pl=cn({reverse3d_:function(e,t){var n=Zt(e,"x","reverse");return _(3===n.rank,(function(){return"Error in reverse3D: x must be rank 3 but got rank "+n.rank+"."})),Rl(n,t)}}),Bl=cn({reverse4d_:function(e,t){var n=Zt(e,"x","reverse");return _(4===n.rank,(function(){return"Error in reverse4D: x must be rank 4 but got rank "+n.rank+"."})),Rl(n,t)}});function Ml(e,t,n,r,o,a){var i=Zt(e,"x","maxPool"),s=i,u=!1;3===i.rank&&(u=!0,s=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),null==r&&(r=[1,1]),_(4===s.rank,(function(){return"Error in maxPool: input must be rank 4 but got rank "+s.rank+"."})),_(uo(n,r),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"})),null!=a&&_(F(o),(function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+o+"."}));var l=Jr(s.shape,t,n,r,o,a);if(1===l.filterWidth&&1===l.filterHeight&&A(l.inShape,l.outShape))return i.clone();var c=[s],d=Ne.runKernelFunc((function(e,t){var n=e.maxPool(s,l);return t([s,n]),n}),{x:s},(function(e,a){var i=a[0],s=a[1];return{x:function(){return function(e,t,n,r,o,a,i,s){var u=Zt(e,"dy","maxPoolBackprop"),l=Zt(t,"input","maxPoolBackprop"),c=Zt(n,"output","maxPoolBackprop");_(l.rank===u.rank,(function(){return"Rank of input ("+l.rank+") does not match rank of dy ("+u.rank+")"})),null==a&&(a=[1,1]),_(uo(o,a),(function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+o+" and dilations '"+a+"'"})),_(4===u.rank,(function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+u.rank+"."})),_(4===l.rank,(function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+l.rank+"."})),null!=s&&_(F(i),(function(){return"Error in maxPoolBackprop: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+i+"."}));var d=Jr(l.shape,r,o,a,i,s);return Ne.runKernelFunc((function(e){return e.maxPoolBackprop(u,l,c,d)}),{$dy:u,$input:l})}(e,i,s,t,n,r,o)}}}),"MaxPool",l,c);return u?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}function Nl(e,t,n,r,o,a){var i=Zt(e,"x","avgPool","float32");null==r&&(r=[1,1]),_(uo(n,r),(function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"}));var s=i,u=!1;3===i.rank&&(u=!0,s=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),_(4===s.rank,(function(){return"Error in avgPool: x must be rank 4 but got rank "+s.rank+"."})),null!=a&&_(F(o),(function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+o+"."}));var l=Jr(s.shape,t,n,r,o,a);if(1===l.filterWidth&&1===l.filterHeight&&A(l.inShape,l.outShape))return i.clone();var c=Ne.runKernelFunc((function(e){return e.avgPool(s,l)}),{x:s},(function(e){return{x:function(){return function(e,t,n,r,o,a){var i=Zt(e,"dy","avgPoolBackprop"),s=Zt(t,"input","avgPoolBackprop");_(s.rank===i.rank,(function(){return"Rank of input ("+s.rank+") does not match rank of dy ("+i.rank+")"})),null==o&&(o=[1,1]),_(uo(r,o),(function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+o+"'"}));var u=s,l=i,c=!1;3===s.rank&&(c=!0,u=s.as4D(1,s.shape[0],s.shape[1],s.shape[2]),l=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),_(4===l.rank,(function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+l.rank+"."})),_(4===u.rank,(function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+u.rank+"."}));var d=Jr(u.shape,n,r,o,a),p=Ne.runKernelFunc((function(e){return e.avgPoolBackprop(l,u,d)}),{dy4D:l,input4D:u});return c?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}(e,s,t,n,r,o)}}}),"AvgPool",l);return c=c.cast(i.dtype),u?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}var Ll=cn({maxPool_:function(e,t,n,r,o){return Ml(e,t,n,1,r,o)}}),Vl=cn({avgPool_:function(e,t,n,r,o){return Nl(e,t,n,1,r,o)}}),jl=cn({pool_:function(e,t,n,r,o,a){null==o&&(o=[1,1]),null==a&&(a=1),0===r&&(r="valid");var i=Zt(e,"x","maxPool"),s=i,u=!1;3===i.rank&&(u=!0,s=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),_(uo(a,o),(function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+a+" and dilations '"+o+"'"}));var l,c=Jr(s.shape,t,a,o,r),d=[c.dilationHeight,c.dilationWidth];l="same"===r?function(e,t){var n=e.map((function(e,n){return e+(e-1)*(t[n]-1)})).map((function(e){return e-1})),r=n.map((function(e){return Math.floor(e/2)})),o=n.map((function(e,t){return e-r[t]}));return n.map((function(e,t){return[r[t],o[t]]}))}([c.filterHeight,c.filterWidth],d):[[0,0],[0,0]];var p=1===d[0]&&1===d[1],f=function(e,t,n){var r=n.map((function(e){return e[0]})),o=n.map((function(e){return e[1]})),a=e.concat(r,o),i=t.map((function(e,t){return(e-a[t]%e)%e})),s=o.map((function(e,t){return e+i[t]})),u=t.map((function(e,t){return[r[t],s[t]]})),l=t.map((function(e,t){return[0,i[t]]}));return[u,l]}([c.inHeight,c.inWidth],d,l),h=f[0],v=f[1],m=p?r:"valid",g=p?s:gr(s,d,h),y=("avg"===n?function(){return Nl(g,t,a,1,m)}:function(){return Ml(g,t,a,1,m)})(),b=p?y:Zn(y,d,v);return u?b.as3D(b.shape[1],b.shape[2],b.shape[3]):b}}),Wl=cn({maxPool3d_:function(e,t,n,r,o,a,i){void 0===a&&(a="NDHWC");var s=Zt(e,"x","maxPool3d"),u=s,l=!1;4===s.rank&&(l=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),null==i&&(i=[1,1,1]),_(5===u.rank,(function(){return"Error in maxPool3d: x must be rank 5 but got rank "+u.rank+"."})),_("NDHWC"===a,(function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+a})),_(uo(n,i),(function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"})),null!=o&&_(F(r),(function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."}));var c=Qr(u.shape,t,n,i,r,o,a),d=Ne.runKernelFunc((function(e,t){var n=e.maxPool3d(u,c);return t([u,n]),n}),{x:u},(function(e,a){var s=a[0],u=a[1];return{x:function(){return function(e,t,n,r,o,a,i,s){var u=Zt(e,"dy","maxPool3dBackprop"),l=Zt(t,"input","maxPool3dBackprop"),c=Zt(n,"output","maxPool3dBackprop"),d=u,p=l,f=c,h=!1;4===l.rank&&(h=!0,d=u.as5D(1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]),p=l.as5D(1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]),f=c.as5D(1,c.shape[0],c.shape[1],c.shape[2],c.shape[3])),_(5===d.rank,(function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+d.rank+"."})),_(5===p.rank,(function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+p.rank+"."})),_(5===f.rank,(function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+f.rank+"."})),null==a&&(a=[1,1,1]),_(uo(o,a),(function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+o+" and dilations '"+a+"'"})),null!=s&&_(F(i),(function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+i+"."}));var v=Qr(p.shape,r,o,a,i,s),m=Ne.runKernelFunc((function(e){return e.maxPool3dBackprop(d,p,f,v)}),{dy5D:d,input5D:p});return h?m.as4D(m.shape[1],m.shape[2],m.shape[3],m.shape[4]):m}(e,s,u,t,n,i,r,o)}}}));return l?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}}),Hl=cn({avgPool3d_:function(e,t,n,r,o,a,i){void 0===a&&(a="NDHWC");var s=Zt(e,"x","avgPool3d","float32"),u=s,l=!1;4===s.rank&&(l=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),null==i&&(i=[1,1,1]),_(5===u.rank,(function(){return"Error in avgPool3d: x must be rank 5 but got rank "+u.rank+"."})),_("NDHWC"===a,(function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+a})),_(uo(n,i),(function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"})),null!=o&&_(F(r),(function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."}));var c=Qr(u.shape,t,n,i,r,o,a),d=Ne.runKernelFunc((function(e){return e.avgPool3d(u,c)}),{x:u},(function(e){return{x:function(){return function(e,t,n,r,o,a,i){var s=Zt(e,"dy","avgPool3dBackprop"),u=Zt(t,"input","avgPool3dBackprop"),l=s,c=u,d=!1;4===u.rank&&(d=!0,l=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]),c=u.as5D(1,u.shape[0],u.shape[1],u.shape[2],u.shape[3])),_(5===l.rank,(function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+l.rank+"."})),_(5===c.rank,(function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+c.rank+"."})),null==o&&(o=[1,1,1]),_(uo(r,o),(function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+o+"'"})),null!=i&&_(F(a),(function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+a+"."}));var p=Qr(c.shape,n,r,o,a,i),f=Ne.runKernelFunc((function(e){return e.avgPool3dBackprop(l,c,p)}),{dy5D:l,input5D:c});return d?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}(e,u,t,n,i,r,o)}}}));return d=d.cast(u.dtype),l?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}}),Ul=cn({slice_:function(e,t,n){var r,o,a=Zt(e,"x","slice");if(0===a.rank)throw new Error("Slicing scalar is not possible");(r="number"==typeof t?[t].concat(new Array(a.rank-1).fill(0)):t.length<a.rank?t.concat(new Array(a.rank-t.length).fill(0)):t.slice()).forEach((function(e){_(-1!==e,(function(){return"slice() does not support negative begin indexing."}))})),o=(o=null==n?new Array(a.rank).fill(-1):"number"==typeof n?[n].concat(new Array(a.rank-1).fill(-1)):n.length<a.rank?n.concat(new Array(a.rank-n.length).fill(-1)):n).map((function(e,t){return e>=0?e:(_(-1===e,(function(){return"Negative size values should be exactly -1 but got "+e+" for the slice() size at index "+t+"."})),a.shape[t]-r[t])})),Br(a,r,o);var i=a.shape,s={begin:r,size:o};return Ne.runKernelFunc((function(e){return e.slice(a,r,o)}),{x:a},(function(e){for(var t=[],n=0;n<e.rank;n++)t.push([r[n],i[n]-r[n]-o[n]]);return{x:function(){return e.pad(t)}}}),"Slice",s)}}),zl=cn({slice1d_:function(e,t,n){var r=Zt(e,"x","slice1d");return _(1===r.rank,(function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"})),Ul(r,[t],[n])}}),$l=cn({slice2d_:function(e,t,n){var r=Zt(e,"x","slice2d");return _(2===r.rank,(function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"})),Ul(r,t,n)}}),ql=cn({slice3d_:function(e,t,n){var r=Zt(e,"x","slice3d");return _(3===r.rank,(function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"})),Ul(r,t,n)}}),Gl=cn({slice4d_:function(e,t,n){var r=Zt(e,"x","slice4d");return _(4===r.rank,(function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"})),Ul(r,t,n)}});function Kl(e,t,n,r,o){return t.rank<n.rank&&(t=t.reshape(nn(t.shape,r))),e.rank<n.rank&&(e=e.reshape(nn(e.shape,r))),{x:function(){var r=e.mul(n.equal(t).cast(e.dtype));return null==o?r:r.transpose(o)}}}var Xl=cn({all_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Zt(e,"x","all","bool"),o=B(t,r.shape),a=o,i=on(a,r.rank);null!=i&&(r=r.transpose(i),a=sn(a.length,r.rank));var s=Ne.runKernelFunc((function(e){return e.all(r,a)}),{$x:r});if(n){var u=nn(s.shape,o);return s.reshape(u)}return s}}),Yl=cn({any_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Zt(e,"x","any","bool"),o=B(t,r.shape),a=o,i=on(a,r.rank);null!=i&&(r=r.transpose(i),a=sn(a.length,r.rank));var s=Ne.runKernelFunc((function(e){return e.any(r,a)}),{$x:r});if(n){var u=nn(s.shape,o);return s.reshape(u)}return s}}),Zl=cn({argMax_:function(e,t){void 0===t&&(t=0);var n=Zt(e,"x","argMax");null==t&&(t=0);var r=B(t,n.shape),o=on(r,n.rank);null!=o&&(n=n.transpose(o),r=sn(r.length,n.rank));var a={axis:r[0]},i=[n];return Ne.runKernelFunc((function(e,t){var o=e.argMax(n,r[0]);return t([n]),o}),{x:n},(function(e,t){var n=t[0];return{x:function(){return Dn(n)}}}),"ArgMax",a,i)}}),Jl=cn({argMin_:function(e,t){void 0===t&&(t=0);var n=Zt(e,"x","argMin");null==t&&(t=0);var r=B(t,n.shape),o=on(r,n.rank);return null!=o&&(n=n.transpose(o),r=sn(r.length,n.rank)),Ne.runKernelFunc((function(e,t){var o=e.argMin(n,r[0]);return t([n]),o}),{$x:n},(function(e,t){var n=t[0];return{$x:function(){return Dn(n)}}}))}}),Ql=cn({logSumExp_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Zt(e,"x","logSumExp"),o=B(t,r.shape),a=r.max(o,!0),i=r.sub(a).exp().sum(o).log(),s=a.reshape(i.shape).add(i);if(n){var u=nn(s.shape,o);return s.reshape(u)}return s}}),ec=cn({max_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Zt(e,"x","max"),o=r,a=B(t,r.shape),i=a,s=on(i,r.rank);null!=s&&(r=r.transpose(s),i=sn(i.length,r.rank));var u=[r],l=Ne.runKernelFunc((function(e,t){var n=e.max(r,i);return t([o,n]),n}),{x:r},(function(e,t){return Kl(e,t[1],t[0],a,s)}),"Max",{axes:i},u,[!0]);if(n){var c=nn(l.shape,a);l=l.reshape(c)}return l}}),tc=cn({mean_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Zt(e,"x","mean"),o=B(t,r.shape),a=I(tn(r.shape,o)[1]);return Ur((function(e){var r=mn(a);return{value:(r.dtype===e.dtype?e:e.cast(r.dtype)).div(r).sum(t,n),gradFunc:function(t){var n=e.shape.slice();return o.forEach((function(e){n[e]=1})),t.reshape(n).mul(kn(e.shape,"float32")).div(a)}}}))(r)}}),nc=cn({min_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Zt(e,"x","min"),o=r,a=B(t,r.shape),i=a,s=on(i,r.rank);null!=s&&(r=r.transpose(s),i=sn(i.length,r.rank));var u=[r],l=Ne.runKernelFunc((function(e,t){var n=e.min(r,i);return t([o,n]),n}),{x:r},(function(e,t){return Kl(e,t[1],t[0],a,s)}),"Min",{axes:i},u,[!0]);if(n){var c=nn(l.shape,a);l=l.reshape(c)}return l}}),rc=cn({moments_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=B(t,(e=Zt(e,"x","moments")).shape),o=e.mean(r,n),a=o.shape;n||(a=nn(o.shape,r));var i=e.toFloat().sub(o.reshape(a)).square();return{mean:o,variance:i.mean(r,n)}}}),oc=cn({sum_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Zt(e,"x","sum");"bool"===r.dtype&&(r=r.toInt());var o=B(t,r.shape);return Ur((function(e){var t=on(o,e.rank),r=o,a=e;null!=t&&(a=e.transpose(t),r=sn(r.length,e.rank));var i=function(t){var n=e.shape.slice();return o.forEach((function(e){n[e]=1})),t.reshape(n).mul(kn(e.shape,"float32"))},s={axes:r},u=Ne.runKernelFunc((function(e){return e.sum(a,r)}),{x:a},(function(e){return{x:function(){return i(e)}}}),"Sum",s);if(n){var l=nn(u.shape,o);u=u.reshape(l)}return{value:u,gradFunc:i}}))(r)}}),ac=cn({prod_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=Zt(e,"x","prod");"bool"===r.dtype&&(r=r.toInt());var o=B(t,r.shape),a=on(o,r.rank),i=o,s=r;null!=a&&(s=r.transpose(a),i=sn(i.length,r.rank));var u=Ne.runKernelFunc((function(e){return e.prod(s,i)}),{permutedX:s});if(n){var l=nn(u.shape,o);u=u.reshape(l)}return u}}),ic=cn({elu_:function(e){var t=Zt(e,"x","elu");return Ne.runKernelFunc((function(e,n){var r=e.elu(t);return n([r]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return Ne.runKernelFunc((function(t){return t.eluDer(e,n)}),{dy:e,y:n})}}}))}}),sc=cn({leakyRelu_:function(e,t){void 0===t&&(t=.2);var n=Zt(e,"x","leakyRelu");return Lu(mn(t).mul(n),n)}}),uc=cn({prelu_:function(e,t){var n=Zt(e,"x","prelu"),r=Zt(t,"alpha","prelu");return Ne.runKernelFunc((function(e,t){var o=e.prelu(n,r);return t([n,r]),o}),{x:n,alpha:r},(function(e,t){var n=t[0],r=t[1],o=n.greater(0);return{x:function(){return Au(o,e,e.mul(r))},alpha:function(){var t=Au(o,Dn(e),e.mul(n)),a=Yr(r.shape,e.shape);return a.length>0&&(t=t.sum(a)),t.reshape(r.shape)}}}),"Prelu")}}),lc=cn({relu_:function(e){var t=Zt(e,"x","relu");return"bool"===t.dtype?t.toInt():Ne.runKernelFunc((function(e,n){var r=e.relu(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0];return{x:function(){return e.mulStrict(n.step().toFloat())}}}),"Relu")}}),cc=cn({relu6_:function(e){var t=Zt(e,"x","relu6");return"bool"===t.dtype?t.toInt():Ne.runKernelFunc((function(e,n){var r=e.relu6(t);return n([t]),r}),{x:t},(function(e,t){var n=t[0],r=n.lessEqual(6).mul(n.step());return{x:function(){return e.mulStrict(r.toFloat())}}}),"Relu6")}}),dc=cn({selu_:function(e){var t=Zt(e,"x","selu");return Ne.runKernelFunc((function(e,n){var r=e.selu(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){var t=n.greater(mn(0)),r=mn(Gi),o=mn(Ki),a=e.mul(o),i=e.mul(r).mul(n.toFloat().exp());return Au(t,a,i)}}}))}}),pc=cn({transpose_:function(e,t){var n=Zt(e,"x","transpose");if(null==t&&(t=n.shape.map((function(e,t){return t})).reverse()),_(n.rank===t.length,(function(){return"Error in transpose: rank of input "+n.rank+" must match length of perm "+t+"."})),t.forEach((function(e){_(e>=0&&e<n.rank,(function(){return"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got "+t}))})),n.rank<=1)return n.clone();var r={perm:t};return Ne.runKernelFunc((function(e){return e.transpose(n,t)}),{x:n},(function(e){var n=an(t);return{x:function(){return e.transpose(n)}}}),"Transpose",r)}}),fc=cn({localResponseNormalization_:function(e,t,n,r,o){void 0===t&&(t=5),void 0===n&&(n=1),void 0===r&&(r=1),void 0===o&&(o=.5);var a=Zt(e,"x","localResponseNormalization");_(4===a.rank||3===a.rank,(function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank "+a.rank+"."})),_(F(t),(function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+t+"."}));var i=a,s=!1;3===a.rank&&(s=!0,i=a.as4D(1,a.shape[0],a.shape[1],a.shape[2]));var u=Ne.runKernelFunc((function(e,a){var s=e.localResponseNormalization4D(i,t,n,r,o);return a([i,s]),s}),{x4D:i},(function(e,a){var i=a[0],s=a[1];return{x4D:function(){return Ne.runKernelFunc((function(a){return a.LRNGrad(e,i,s,t,n,r,o)}),{})}}}));return s?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),hc=cn({norm_:function(e,t,n,r){void 0===t&&(t="euclidean"),void 0===n&&(n=null),void 0===r&&(r=!1);var o=function e(t,n,r){if(void 0===r&&(r=null),0===t.rank)return t.abs();if(1!==t.rank&&null===r)return e(t.reshape([-1]),n,r);if(1===t.rank||"number"==typeof r||Array.isArray(r)&&1===r.length){if(1===n)return t.abs().sum(r);if(n===1/0)return t.abs().max(r);if(n===-1/0)return t.abs().min(r);if("euclidean"===n||2===n)return t.abs().pow(mn(2,"int32")).sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}if(Array.isArray(r)&&2===r.length){if(1===n)return t.abs().sum(r[0]).max(r[1]-1);if(n===1/0)return t.abs().sum(r[1]).max(r[0]);if(n===-1/0)return t.abs().sum(r[1]).min(r[0]);if("fro"===n||"euclidean"===n)return t.square().sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}throw new Error("Error in norm: invalid axis: "+r)}(e=Zt(e,"x","norm"),t,n),a=o.shape;if(r){var i=B(n,e.shape);a=nn(o.shape,i)}return o.reshape(a)}}),vc=cn({basicLSTMCell_:function(e,t,n,r,o,a){var i=Zt(e,"forgetBias","basicLSTMCell"),s=Zt(t,"lstmKernel","basicLSTMCell"),u=Zt(n,"lstmBias","basicLSTMCell"),l=Zt(r,"data","basicLSTMCell"),c=Zt(o,"c","basicLSTMCell"),d=Zt(a,"h","basicLSTMCell"),p=l.concat(d,1).matMul(s).add(u),f=p.shape[0],h=p.shape[1]/4,v=[f,h],m=p.slice([0,0],v),g=p.slice([0,h],v),y=p.slice([0,2*h],v),b=p.slice([0,3*h],v),w=m.sigmoid().mulStrict(g.tanh()).addStrict(c.mulStrict(i.add(y).sigmoid())),x=w.tanh().mulStrict(b.sigmoid());return[w,x]}}),mc=cn({multiRNNCell_:function(e,t,n,r){for(var o=Zt(t,"data","multiRNNCell"),a=Jt(n,"c","multiRNNCell"),i=Jt(r,"h","multiRNNCell"),s=o,u=[],l=0;l<e.length;l++){var c=e[l](s,a[l],i[l]);u.push(c[0]),u.push(c[1]),s=c[1]}var d=[],p=[];for(l=0;l<u.length;l+=2)d.push(u[l]),p.push(u[l+1]);return[d,p]}}),gc=cn({movingAverage_:function(e,t,n,r,o){void 0===o&&(o=!0);var a=Zt(e,"v","movingAverage"),i=Zt(t,"x","movingAverage"),s=Zt(n,"decay","movingAverage");Te(a,i),_(A(a.shape,i.shape),(function(){return"Shape mismatch in v and x"}));var u=mn(1),l=u.sub(s),c=i.sub(a).mul(l);if(o){_(null!=r,(function(){return"When using zeroDebias: true, step is required."}));var d=Zt(r,"step","movingAverage");c=c.div(u.sub(qu(s,d)))}return a.add(c)}}),yc=cn({stridedSlice_:function(e,t,n,r,o,a,i,s,u){if(void 0===o&&(o=0),void 0===a&&(a=0),void 0===i&&(i=0),void 0===s&&(s=0),void 0===u&&(u=0),null==r&&(r=new Array(t.length)),0!==i)throw new Error("ellipsis mask is not yet supported");var l=Zt(e,"x","stridedSlice"),c=Mr(s),d=l.shape.slice();c.forEach((function(e){t[e]=0,n[e]=1,d.splice(e,0,1)})),l=l.reshape(d);for(var p=0;p<l.rank;p++)t[p]=Lr(o,t,r,l.shape,p),n[p]=Vr(a,n,r,l.shape,p),r[p]=r[p]||1;var f=Mr(u);f.forEach((function(e){n[e]=t[e]+1,r[e]=1}));var h=Nr(t,n,r),v=h.filter((function(e,t){return-1===f.indexOf(t)}));return r.every((function(e){return 1===e}))?Ul(l,t,h).reshape(v):Ne.runKernelFunc((function(e){return e.stridedSlice(l,t,n,r)}),{$x:l}).reshape(v)}}),bc=cn({topk_:function(e,t,n){void 0===t&&(t=1),void 0===n&&(n=!0);var r=Zt(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var o=r.shape[r.shape.length-1];if(t>o)throw new Error("'k' passed to topk() must be <= the last dimension ("+o+") but got "+t);var a=Ne.runKernelFunc((function(e){return e.topk(r,t,n)}),{$x:r});return{values:a[0],indices:a[1]}}}),wc=cn({scatterND_:function(e,t,n){var r=Zt(e,"indices","scatterND","int32"),o=Zt(t,"updates","scatterND");return Or(o,r,n),Ne.runKernelFunc((function(e){return e.scatterND(r,o,n)}),{indices:r,updates:o},null,"ScatterNd",{shape:n})}}),xc=cn({fft_:function(e){_("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+e.dtype+"."}));var t=e.shape[e.shape.length-1],n=e.size/t,r=e.as2D(n,t);return Ne.runKernelFunc((function(e){return e.fft(r)}),{input:e}).reshape(e.shape)}}),Cc=cn({ifft_:function(e){_("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+e.dtype+"."}));var t=e.shape[e.shape.length-1],n=e.size/t,r=e.as2D(n,t);return Ne.runKernelFunc((function(e){return e.ifft(r)}),{input:e}).reshape(e.shape)}}),_c=cn({rfft_:function(e,t){_("float32"===e.dtype,(function(){return"The dtype for rfft() must be real value but got "+e.dtype}));var n,r=e.shape[e.shape.length-1],o=e.size/r;if(null!=t&&t<r){var a=e.shape.map((function(e){return 0})),i=e.shape.map((function(e){return e}));i[e.shape.length-1]=t,n=e.slice(a,i),r=t}else if(null!=t&&t>r){var s=e.shape.map((function(e){return e}));s[e.shape.length-1]=t-r,n=e.concat(Sn(s),e.shape.length-1),r=t}else n=e;var u=n.zerosLike(),l=dn(n,u).as2D(o,r),c=xc(l),d=Math.floor(r/2)+1,p=pn(c),f=fn(c),h=p.split([d,r-d],p.shape.length-1),v=f.split([d,r-d],f.shape.length-1),m=n.shape.slice();return m[n.shape.length-1]=d,dn(h[0],v[0]).reshape(m)}}),kc=cn({irfft_:function(e){var t=e.shape[e.shape.length-1],n=e.size/t;if(t<=2){var r=e.as2D(n,t),o=Cc(r);return pn(o)}var a=[n,2*(t-1)],i=pn(e).as2D(n,t),s=fn(e).as2D(n,t),u=i.slice([0,1],[n,t-2]).reverse(1),l=s.slice([0,1],[n,t-2]).reverse(1).mul(mn(-1)),c=i.concat(u,1),d=s.concat(l,1);return r=dn(c,d).as2D(a[0],a[1]),o=Cc(r),pn(o)}}),Sc=Object.freeze({fft:xc,ifft:Cc,rfft:_c,irfft:kc}),Ec=cn({sparseToDense_:function(e,t,n,r){void 0===r&&(r=0);var o=Zt(e,"sparseIndices","sparseToDense","int32"),a=Zt(t,"sparseValues","sparseToDense"),i=Zt(r,"defaultValue","sparseToDense",a.dtype);return function(e,t,n,r){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+e.dtype+".");if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+e.shape+".");var o=e.rank>0?e.shape[0]:1,a=e.rank>1?e.shape[1]:1;if(n.length!==a)throw new Error("outputShape has incorrect number of elements:, "+n.length+", should be: "+a+".");var i=t.size;if(0!==t.rank&&(1!==t.rank||i!==o))throw new Error("sparseValues has incorrect shape "+t.shape+", should be [] or ["+o+"]");if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(o,a,n,i),Ne.runKernelFunc((function(e){return e.sparseToDense(o,a,n,i)}),{$sparseIndices:o,$sparseValues:a,$defaultValue:i})}}),Ic=cn({gatherND_:function(e,t){var n=Zt(t,"indices","gatherND","int32"),r=Zt(e,"x","gatherND");return Ne.runKernelFunc((function(e){return e.gatherND(r,n)}),{x:r,indices:n},null,"GatherNd")}}),Ac=cn({diag_:function(e){var t=Zt(e,"x","diag").flatten(),n=e.shape.concat(e.shape);return Ne.runKernelFunc((function(e){return e.diag(t)}),{$x:t}).reshape(n)}}),Fc=cn({dropout_:function(e,t,n,r){var o=Zt(e,"x","dropout");if(_("float32"===o.dtype,(function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+o.dtype+" tensor instead."})),_(t>=0&&t<1,(function(){return"rate must be a float in the range [0, 1), but got "+t+"."})),0===t)return e instanceof xe?o.clone():o;var a=function(e,t){if(null==t)return e.shape.slice();if(A(e.shape,t))return t;if(e.shape.length===t.length){for(var n=[],r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(o,n),i=1-t,s=vr(a,0,1,"float32",r).add(i).floor().div(i);return o.mul(s)}});function Dc(e,t,n){for(var r=1-e%2,o=new Float32Array(e),a=0;a<e;++a){var i=2*Math.PI*a/(e+r-1);o[a]=t-n*Math.cos(i)}return gn(o,"float32")}var Rc,Tc=cn({hannWindow_:function(e){return Dc(e,.5,.5)}}),Oc=cn({hammingWindow_:function(e){return Dc(e,.54,.46)}}),Pc=cn({frame_:function(e,t,n,r,o){void 0===r&&(r=!1),void 0===o&&(o=0);for(var a=0,i=[];a+t<=e.size;)i.push(Ul(e,a,t)),a+=n;if(r)for(;a<e.size;){var s=a+t-e.size,u=Rn([Ul(e,a,t-s),En([s],o)]);i.push(u),a+=n}return 0===i.length?yn([],[0,t]):Rn(i).as2D(i.length,t)}}),Bc=cn({stft_:function(e,t,n,r,o){var a;void 0===o&&(o=Tc),null==r&&(a=t,r=Math.floor(Math.pow(2,Math.ceil(Math.log(a)/Math.log(2)))));for(var i=Pc(e,t,n),s=zu(i,o(t)),u=[],l=0;l<i.shape[0];l++)u.push(_c(s.slice([l,0],[1,t]),r));return Rn(u)}}),Mc=Object.freeze({hannWindow:Tc,hammingWindow:Oc,frame:Pc,stft:Bc}),Nc=function(e,t,n){return void 0===n&&(n=1),a(this,void 0,void 0,(function(){var r,o,a,s,u,l,c,d,p,f,h,v,m,g;return i(this,(function(i){switch(i.label){case 0:return r=Zt(e,"predictions","inTopK"),o=Zt(t,"targets","inTopK"),_(r.rank>1,(function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank})),_(r.rank-1===o.rank,(function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+o.rank})),k(r.shape.slice(0,r.shape.length-1),o.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),a=r.shape[r.shape.length-1],_(n>0&&n<=a,(function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+a+"), but got "+n})),[4,r.data()];case 1:return s=i.sent(),[4,o.data()];case 2:for(u=i.sent(),l=[s.length/a,a],d=l[1],p=N("bool",c=l[0]),f=0;f<c;f++){for(h=f*d,v=s.subarray(h,h+d),m=[],g=0;g<v.length;g++)m.push({value:v[g],index:g});for(m.sort((function(e,t){return t.value-e.value})),p[f]=0,g=0;g<n;g++)if(m[g].index===u[f]){p[f]=1;break}}return e!==r&&r.dispose(),t!==o&&o.dispose(),[2,hn(p,o.shape,"bool")]}}))}))};!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(Rc||(Rc={}));var Lc=cn({absoluteDifference_:function(e,t,n,r){void 0===r&&(r=Rc.SUM_BY_NONZERO_WEIGHTS);var o=Zt(e,"labels","absoluteDifference"),a=Zt(t,"predictions","absoluteDifference"),i=null;null!=n&&(i=Zt(n,"weights","absoluteDifference")),k(o.shape,a.shape,"Error in absoluteDifference: ");var s=o.sub(a).abs();return Vc(s,i,r)}}),Vc=cn({computeWeightedLoss_:function(e,t,n){void 0===n&&(n=Rc.SUM_BY_NONZERO_WEIGHTS);var r=Zt(e,"losses","computeWeightedLoss"),o=null;null!=t&&(o=Zt(t,"weights","computeWeightedLoss"));var a=null==o?r:r.mul(o);if(n===Rc.NONE)return a;if(n===Rc.SUM)return a.sum();if(n===Rc.MEAN){if(null==o)return a.mean();var i=r.size/o.size,s=a.sum().div(o.sum());return i>1?s.div(mn(i)):s}if(n===Rc.SUM_BY_NONZERO_WEIGHTS){if(null==o)return a.sum().div(mn(r.size));var u=o.mul(kn(r.shape)).notEqual(mn(0)).sum().toFloat();return a.sum().div(u)}throw Error("Unknown reduction: "+n)}}),jc=cn({cosineDistance_:function(e,t,n,r,o){void 0===o&&(o=Rc.SUM_BY_NONZERO_WEIGHTS);var a=Zt(e,"labels","cosineDistance"),i=Zt(t,"predictions","cosineDistance"),s=null;null!=r&&(s=Zt(r,"weights","cosineDistance")),k(a.shape,i.shape,"Error in cosineDistance: ");var u=mn(1).sub(a.mul(i).sum(n,!0));return Vc(u,s,o)}}),Wc=cn({hingeLoss_:function(e,t,n,r){void 0===r&&(r=Rc.SUM_BY_NONZERO_WEIGHTS);var o=Zt(e,"labels","hingeLoss"),a=Zt(t,"predictions","hingeLoss"),i=null;null!=n&&(i=Zt(n,"weights","hingeLoss")),k(o.shape,a.shape,"Error in hingeLoss: ");var s=mn(1);o=mn(2).mul(o).sub(s);var u=s.sub(o.mul(a)).relu();return Vc(u,i,r)}}),Hc=cn({huberLoss_:function(e,t,n,r,o){void 0===r&&(r=1),void 0===o&&(o=Rc.SUM_BY_NONZERO_WEIGHTS);var a=Zt(e,"labels","huberLoss"),i=Zt(t,"predictions","huberLoss"),s=null;null!=n&&(s=Zt(n,"weights","huberLoss")),k(a.shape,i.shape,"Error in huberLoss: ");var u=mn(r),l=i.sub(a).abs(),c=ju(l,u),d=l.sub(c),p=mn(.5).mul(c.square()).add(u.mul(d));return Vc(p,s,o)}}),Uc=cn({logLoss_:function(e,t,n,r,o){void 0===r&&(r=1e-7),void 0===o&&(o=Rc.SUM_BY_NONZERO_WEIGHTS);var a=Zt(e,"labels","logLoss"),i=Zt(t,"predictions","logLoss"),s=null;null!=n&&(s=Zt(n,"weights","logLoss")),k(a.shape,i.shape,"Error in logLoss: ");var u=mn(1),l=mn(r),c=a.mul(i.add(l).log()).neg().sub(u.sub(a).mul(u.sub(i).add(l).log()));return Vc(c,s,o)}}),zc=cn({meanSquaredError_:function(e,t,n,r){void 0===r&&(r=Rc.SUM_BY_NONZERO_WEIGHTS);var o=Zt(e,"labels","meanSquaredError"),a=Zt(t,"predictions","meanSquaredError"),i=null;null!=n&&(i=Zt(n,"weights","meanSquaredError")),k(o.shape,a.shape,"Error in meanSquaredError: ");var s=o.squaredDifference(a);return Vc(s,i,r)}}),$c=cn({sigmoidCrossEntropy_:function(e,t,n,r,o){void 0===r&&(r=0),void 0===o&&(o=Rc.SUM_BY_NONZERO_WEIGHTS);var a=Zt(e,"multiClassLabels","sigmoidCrossEntropy"),i=Zt(t,"logits","sigmoidCrossEntropy"),s=null;if(null!=n&&(s=Zt(n,"weights","sigmoidCrossEntropy")),k(a.shape,i.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=mn(r),l=mn(1),c=mn(.5);a=a.mul(l.sub(u)).add(c.mul(u))}var d=function(e,t){var n=Zt(e,"labels","sigmoidCrossEntropyWithLogits"),r=Zt(t,"logits","sigmoidCrossEntropyWithLogits");k(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var o=r.relu(),a=r.mul(n),i=r.abs().neg().exp().log1p();return o.sub(a).add(i)}(a,i);return Vc(d,s,o)}}),qc=cn({softmaxCrossEntropy_:function(e,t,n,r,o){void 0===r&&(r=0),void 0===o&&(o=Rc.SUM_BY_NONZERO_WEIGHTS);var a=Zt(e,"onehotLabels","softmaxCrossEntropy"),i=Zt(t,"logits","softmaxCrossEntropy"),s=null;if(null!=n&&(s=Zt(n,"weights","softmaxCrossEntropy")),k(a.shape,i.shape,"Error in softmaxCrossEntropy: "),r>0){var u=mn(r),l=mn(1),c=mn(a.shape[1]);a=a.mul(l.sub(u)).add(u.div(c))}var d=function(e,t,n){if(void 0===n&&(n=-1),-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+t.rank+" and dim was "+n);return Ur((function(e,t,r){var o=t.logSumExp([n],!0),a=t.toFloat().sub(o);return r([e,a]),{value:a.mul(e).neg().sum([n]),gradFunc:function(e,t){var r=t[0],o=t[1],a=nn(e.shape,[n]);return[e.reshape(a).mul(r.toFloat().sub(o.exp())),e.reshape(a).mul(o.exp().sub(r.toFloat()))]}}}))(e,t)}(a,i);return Vc(d,s,o)}}),Gc=Object.freeze({get Reduction(){return Rc},absoluteDifference:Lc,computeWeightedLoss:Vc,cosineDistance:jc,hingeLoss:Wc,huberLoss:Hc,logLoss:Uc,meanSquaredError:zc,sigmoidCrossEntropy:$c,softmaxCrossEntropy:qc});function Kc(e,t){return void 0===t&&(t=!1),Ne.tidy((function(){if(2!==e.shape.length)throw new Error("qr2d() requires a 2D Tensor, but got a "+e.shape.length+"D Tensor.");for(var n=e.shape[0],r=e.shape[1],o=or(n),a=e.clone(),i=yn([[1]],[1,1]),s=i.clone(),u=n>=r?r:n,l=function(e){var t,u=a,l=s,c=o;t=Ne.tidy((function(){var t=a.slice([e,e],[n-e,1]),u=t.norm(),l=a.slice([e,e],[1,1]),c=yn([[-1]]).where(l.greater(0),yn([[1]])),d=l.sub(c.mul(u)),p=t.div(d);s=1===p.shape[0]?i.clone():i.concat(p.slice([1,0],[p.shape[0]-1,p.shape[1]]),0);var f=c.matMul(d).div(u).neg(),h=a.slice([e,0],[n-e,r]),v=f.mul(s);if(0===e)a=h.sub(v.matMul(s.transpose().matMul(h)));else{var m=h.sub(v.matMul(s.transpose().matMul(h)));a=a.slice([0,0],[e,r]).concat(m,0)}var g=o.slice([0,e],[n,o.shape[1]-e]);if(0===e)o=g.sub(g.matMul(s).matMul(v.transpose()));else{var y=g.sub(g.matMul(s).matMul(v.transpose()));o=o.slice([0,0],[n,e]).concat(y,1)}return[s,a,o]})),s=t[0],a=t[1],o=t[2],qt([u,l,c])},c=0;c<u;++c)l(c);return!t&&n>r&&(o=o.slice([0,0],[n,r]),a=a.slice([0,0],[r,r])),[o,a]}))}var Xc=cn({bandPart_:function(e,t,n){if(t%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+t+".");if(n%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+n+".");var r=Zt(e,"a","bandPart");if(r.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+r.rank+".");var o=r.shape,a=r.shape.slice(-2),i=a[0],s=a[1];if(!(t<=i))throw new Error("bandPart(): numLower ("+t+") must not be greater than the number of rows ("+i+").");if(!(n<=s))throw new Error("bandPart(): numUpper ("+n+") must not be greater than the number of columns ("+s+").");t<0&&(t=i),n<0&&(n=s);var u=An(0,i,1,"int32").reshape([-1,1]),l=An(0,s,1,"int32"),c=Xu(u,l),d=ku(c.lessEqual(mn(+t,"int32")),c.greaterEqual(mn(-n,"int32"))),p=Sn([i,s],r.dtype);return br(Cr(r.reshape([-1,i,s])).map((function(e){return Au(d,e,p)}))).reshape(o)}}),Yc=cn({gramSchmidt_:function(e){var t;if(Array.isArray(e)){t=!1,_(null!=e&&e.length>0,(function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"}));for(var n=e[0].shape[0],r=function(t){_(e[t].shape[0]===n,(function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+e[t].shape[0]+" vs. "+n+")"}))},o=1;o<e.length;++o)r(o)}else t=!0,e=Mn(e,e.shape[0],0).map((function(e){return yr(e,[0])}));_(e.length<=e[0].shape[0],(function(){return"Gram-Schmidt: Number of vectors ("+e.length+") exceeds number of dimensions ("+e[0].shape[0]+")."}));var a=[],i=e,s=function(e){a.push(Ne.tidy((function(){var t=i[e];if(e>0)for(var n=0;n<e;++n){var r=oc(a[n].mulStrict(t)).mul(a[n]);t=t.sub(r)}return t.div(hc(t,"euclidean"))})))};for(o=0;o<e.length;++o)s(o);return t?br(a,0):a}}),Zc=cn({qr_:function(e,t){if(void 0===t&&(t=!1),e.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+e.rank);if(2===e.rank)return Kc(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce((function(e,t){return e*t})),r=Cr(e.reshape([n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),o=[],a=[];return r.forEach((function(e){var n=Kc(e,t),r=n[0],i=n[1];o.push(r),a.push(i)})),[br(o,0).reshape(e.shape),br(a,0).reshape(e.shape)]}}),Jc=Object.freeze({bandPart:Xc,gramSchmidt:Yc,qr:Zc});function Qc(e,t,n,r,o,a){null==r&&(r=.5),null==o&&(o=Number.NEGATIVE_INFINITY),null==a&&(a=0);var i=e.shape[0];return n=Math.min(n,i),_(0<=r&&r<=1,(function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"})),_(2===e.rank,(function(){return"boxes must be a 2D tensor, but was of rank '"+e.rank+"'"})),_(4===e.shape[1],(function(){return"boxes must have 4 columns, but 2nd dimension was "+e.shape[1]})),_(1===t.rank,(function(){return"scores must be a 1D tensor"})),_(t.shape[0]===i,(function(){return"scores has incompatible shape with boxes. Expected "+i+", but was "+t.shape[0]})),_(0<=a&&a<=1,(function(){return"softNmsSigma must be in [0, 1], but was '"+a+"'"})),{maxOutputSize:n,iouThreshold:r,scoreThreshold:o,softNmsSigma:a}}var ed=cn({resizeBilinear_:function(e,t,n){void 0===n&&(n=!1);var r=Zt(e,"images","resizeBilinear");_(3===r.rank||4===r.rank,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."})),_(2===t.length,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+t+"."}));var o=r,a=!1;3===r.rank&&(a=!0,o=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var i=t[0],s=t[1],u=Ne.runKernelFunc((function(e,t){return t([o]),e.resizeBilinear(o,i,s,n)}),{x:o},(function(e,t){return{x:function(){return Ne.runKernelFunc((function(r){return r.resizeBilinearBackprop(e,t[0],n)}),{})}}}),"ResizeBilinear",{alignCorners:n,newHeight:i,newWidth:s});return a?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),td=cn({resizeNearestNeighbor_:function(e,t,n){void 0===n&&(n=!1);var r=Zt(e,"images","resizeNearestNeighbor");_(3===r.rank||4===r.rank,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."})),_(2===t.length,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+t+"."})),_("float32"===r.dtype||"int32"===r.dtype,(function(){return"`images` must have `int32` or `float32` as dtype"}));var o=r,a=!1;3===r.rank&&(a=!0,o=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var i=t[0],s=t[1],u=Ne.runKernelFunc((function(e,t){return t([o]),e.resizeNearestNeighbor(o,i,s,n)}),{batchImages:o},(function(e,t){return{batchImages:function(){return Ne.runKernelFunc((function(r){return r.resizeNearestNeighborBackprop(e,t[0],n)}),{})}}}));return a?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),nd=cn({nonMaxSuppression_:function(e,t,n,r,o){void 0===r&&(r=.5),void 0===o&&(o=Number.NEGATIVE_INFINITY);var a=Zt(e,"boxes","nonMaxSuppression"),i=Zt(t,"scores","nonMaxSuppression"),s=Qc(a,i,n,r,o);n=s.maxOutputSize,r=s.iouThreshold,o=s.scoreThreshold;var u={maxOutputSize:n,iouThreshold:r,scoreThreshold:o};return Ne.runKernelFunc((function(e){return e.nonMaxSuppression(a,i,n,r,o)}),{boxes:a,scores:i},null,"NonMaxSuppressionV3",u)}}),rd=function(e,t,n,r,o){return void 0===r&&(r=.5),void 0===o&&(o=Number.NEGATIVE_INFINITY),a(this,void 0,void 0,(function(){var a,s,u,l,c,d,p;return i(this,(function(i){switch(i.label){case 0:return a=Zt(e,"boxes","nonMaxSuppressionAsync"),s=Zt(t,"scores","nonMaxSuppressionAsync"),u=Qc(a,s,n,r,o),n=u.maxOutputSize,r=u.iouThreshold,o=u.scoreThreshold,[4,Promise.all([a.data(),s.data()])];case 1:return l=i.sent(),c=l[0],d=l[1],p=wo(c,d,n,r,o),a!==e&&a.dispose(),s!==t&&s.dispose(),[2,p]}}))}))},od=cn({nonMaxSuppressionWithScore_:function(e,t,n,r,o,a){void 0===r&&(r=.5),void 0===o&&(o=Number.NEGATIVE_INFINITY),void 0===a&&(a=0);var i=Zt(e,"boxes","nonMaxSuppression"),s=Zt(t,"scores","nonMaxSuppression"),u=Qc(i,s,n,r,o,a),l={maxOutputSize:n=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:o=u.scoreThreshold,softNmsSigma:a=u.softNmsSigma},c=Ne.runKernel("NonMaxSuppressionV5",{boxes:i,scores:s},l);return{selectedIndices:c[0],selectedScores:c[1]}}}),ad=function(e,t,n,r,o,s){return void 0===r&&(r=.5),void 0===o&&(o=Number.NEGATIVE_INFINITY),void 0===s&&(s=0),a(this,void 0,void 0,(function(){var a,u,l,c,d,p,f;return i(this,(function(i){switch(i.label){case 0:return a=Zt(e,"boxes","nonMaxSuppressionAsync"),u=Zt(t,"scores","nonMaxSuppressionAsync"),l=Qc(a,u,n,r,o,s),n=l.maxOutputSize,r=l.iouThreshold,o=l.scoreThreshold,s=l.softNmsSigma,[4,Promise.all([a.data(),u.data()])];case 1:return c=i.sent(),d=c[0],p=c[1],f=xo(d,p,n,r,o,s),a!==e&&a.dispose(),u!==t&&u.dispose(),[2,f]}}))}))},id=cn({cropAndResize_:function(e,t,n,r,o,a){var i=Zt(e,"image","cropAndResize"),s=Zt(t,"boxes","cropAndResize","float32"),u=Zt(n,"boxInd","cropAndResize","int32");o=o||"bilinear",a=a||0;var l=s.shape[0];return _(4===i.rank,(function(){return"Error in cropAndResize: image must be rank 4,but got rank "+i.rank+"."})),_(2===s.rank&&4===s.shape[1],(function(){return"Error in cropAndResize: boxes must be have size ["+l+",4] but had shape "+s.shape+"."})),_(1===u.rank&&u.shape[0]===l,(function(){return"Error in cropAndResize: boxInd must be have size ["+l+"] but had shape "+s.shape+"."})),_(2===r.length,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."})),_(r[0]>=1&&r[1]>=1,(function(){return"cropSize must be atleast [1,1], but was "+r})),_("bilinear"===o||"nearest"===o,(function(){return"method must be bilinear or nearest, but was "+o})),Ne.runKernelFunc((function(e,t){return e.cropAndResize(i,s,u,r,o,a)}),{images:i,boxes:s,boxInd:u},null,"CropAndResize",{method:o,extrapolationValue:a,cropSize:r})}}),sd=Object.freeze({resizeBilinear:ed,resizeNearestNeighbor:td,nonMaxSuppression:nd,nonMaxSuppressionAsync:rd,nonMaxSuppressionWithScore:od,nonMaxSuppressionWithScoreAsync:ad,cropAndResize:id}),ud=function(e,t){return!(e>0)||"linear"===t},ld=function(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return e.mul(t.step());throw new Error("Gradient for activation "+n+" has not been implemented yet.")},cd=function(e,t){var n=t,r=Yr(e.shape,t.shape);return r.length>0&&(n=n.sum(r)),n.reshape(e.shape)},dd=function(e,t,n){if("linear"===t)return e;if("relu"===t)return lc(e);if("elu"===t)return ic(e);if("relu6"===t)return cc(e);if("prelu"===t)return uc(e,n);throw new Error("Unknown fused activation "+t+".")},pd=cn({fusedMatMul_:function(e){var t,n=e.a,r=e.b,o=e.transposeA,a=void 0!==o&&o,i=e.transposeB,s=void 0!==i&&i,u=e.bias,l=e.activation,c=void 0===l?"linear":l,d=e.preluActivationWeights;if(!1===ud(Ne.state.gradientDepth,c)){var p=Al(n,r,a,s);return null!=u&&(p=Du(p,u)),dd(p,c,d)}var f=Zt(n,"a","fused matMul"),h=Zt(r,"b","fused matMul");t=Re(f,h),f=t[0],h=t[1];var v=a?f.shape[f.rank-2]:f.shape[f.rank-1],m=s?h.shape[h.rank-1]:h.shape[h.rank-2],g=a?f.shape[f.rank-1]:f.shape[f.rank-2],y=s?h.shape[h.rank-2]:h.shape[h.rank-1],b=f.shape.slice(0,-2),w=h.shape.slice(0,-2),x=I(b),C=I(w);_(f.rank>=2&&h.rank>=2&&f.rank===h.rank,(function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+f.rank+" and "+h.rank+"."})),_(A(b,w),(function(){return"Error in fused matMul: outer dimensions ("+b+") and ("+w+") of Tensors with shapes "+f.shape+" and "+h.shape+" must match."})),_(v===m,(function(){return"Error in fused matMul: inner shapes ("+v+") and ("+m+") of Tensors with shapes "+f.shape+" and "+h.shape+" and transposeA="+a+" and transposeB="+s+" must match."}));var k,S,E=f.shape.slice(0,-2).concat([g,y]),F=a?f.as3D(x,v,g):f.as3D(x,g,v),D=s?h.as3D(C,y,m):h.as3D(C,m,y);null!=u&&Zr(E,(k=Re(k=Zt(u,"bias","fused matMul"),f)[0]).shape),null!=d&&(S=Zt(d,"prelu weights","fused matMul"));var R={a:F,b:D};null!=u&&(R.bias=k),null!=d&&(R.preluActivationWeights=S);var T=[F,D];return Ne.runKernelFunc((function(e,t){var n=e.fusedBatchMatMul({a:F,b:D,transposeA:a,transposeB:s,bias:k,activation:c,preluActivationWeights:S});return t([F,D,n]),n}),R,(function(e,t){var n=t[0],r=t[1],o=t[2],i=ld(e,o,c),l={};return null!=u&&(l={bias:function(){return cd(k,i)}}),a||s?!a&&s?Object.assign({a:function(){return i.matMul(r,!1,!1)},b:function(){return i.matMul(n,!0,!1)}},l):a&&!s?Object.assign({a:function(){return r.matMul(i,!1,!0)},b:function(){return n.matMul(i,!1,!1)}},l):Object.assign({a:function(){return r.matMul(i,!0,!0)},b:function(){return i.matMul(n,!0,!0)}},l):Object.assign({a:function(){return i.matMul(r,!1,!0)},b:function(){return n.matMul(i,!0,!1)}},l)}),"_FusedMatMul",{transposeA:a,transposeB:s,activation:c},T,[!0]).reshape(E)}}),fd=cn({fusedConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,o=e.pad,a=e.dataFormat,i=void 0===a?"NHWC":a,s=e.dilations,u=void 0===s?[1,1]:s,l=e.dimRoundingMode,c=e.bias,d=e.activation,p=void 0===d?"linear":d,f=e.preluActivationWeights;if(p=p||"linear",!1===ud(Ne.state.gradientDepth,p)){var h=yl(t,n,r,o,i,u,l);return null!=c&&(h=Du(h,c)),dd(h,p,f)}var v=Zt(t,"x","conv2d"),m=Zt(n,"filter","conv2d"),g=v,y=!1;3===v.rank&&(y=!0,g=v.as4D(1,v.shape[0],v.shape[1],v.shape[2])),_(4===g.rank,(function(){return"Error in fused conv2d: input must be rank 4, but got rank "+g.rank+"."})),_(4===m.rank,(function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+m.rank+"."})),null!=l&&_(F(o),(function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+l+" but got pad "+o+"."})),_(g.shape[3]===m.shape[2],(function(){return"Error in conv2d: depth of input ("+g.shape[3]+") must match input depth for filter "+m.shape[2]+"."})),_(uo(r,u),(function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"})),_("NHWC"===i,(function(){return"Error in conv2d: got dataFormat of "+i+" but only NHWC is currently supported."}));var b,w,x=eo(g.shape,m.shape,r,u,o,l);null!=c&&(b=Re(b=Zt(c,"bias","fused conv2d"),v)[0],Zr(x.outShape,b.shape)),null!=f&&(w=Zt(f,"prelu weights","fused conv2d"));var C={x:g,filter:m};null!=c&&(C.bias=b),null!=f&&(C.preluActivationWeights=w);var k=[m,g],S=Ne.runKernelFunc((function(e,t){var n=e.fusedConv2d({input:g,filter:m,convInfo:x,bias:b,activation:p,preluActivationWeights:w});return t([m,g,n]),n}),C,(function(e,t){var n=t,a=n[0],i=n[1],s=n[2],l=ld(e,s,p);_(so(u),(function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+u+"'"}));var d={};return null!=c&&(d={bias:function(){return cd(b,l)}}),Object.assign({x:function(){return xl(i.shape,l,a,r,o)},filter:function(){return wl(i,l,a.shape,r,o)}},d)}),"FusedConv2D",{convInfo:x,activation:p},k,[!0]);return y?S.as3D(S.shape[1],S.shape[2],S.shape[3]):S}}),hd=cn({fusedDepthwiseConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,o=e.pad,a=e.dataFormat,i=void 0===a?"NHWC":a,s=e.dilations,u=void 0===s?[1,1]:s,l=e.dimRoundingMode,c=e.bias,d=e.activation,p=void 0===d?"linear":d,f=e.preluActivationWeights;if(!1===ud(Ne.state.gradientDepth,p)){var h=Cl(t,n,r,o,i,u,l);return null!=c&&(h=Du(h,c)),dd(h,p,f)}var v=Zt(t,"x","depthwiseConv2d"),m=Zt(n,"filter","depthwiseConv2d"),g=v,y=!1;3===v.rank&&(y=!0,g=v.as4D(1,v.shape[0],v.shape[1],v.shape[2])),_(4===g.rank,(function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+g.rank+"."})),_(4===m.rank,(function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+m.rank+"."})),_(g.shape[3]===m.shape[2],(function(){return"Error in fused depthwiseConv2d: number of input channels ("+g.shape[3]+") must match the inChannels dimension in filter "+m.shape[2]+"."})),null==u&&(u=[1,1]),_(uo(r,u),(function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"})),null!=l&&_(F(o),(function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+l+" but got pad "+o+"."}));var b,w,x=eo(g.shape,m.shape,r,u,o,l,!0);null!=c&&(b=Re(b=Zt(c,"bias","fused conv2d"),v)[0],Zr(x.outShape,b.shape)),null!=f&&(w=Zt(f,"prelu weights","fused depthwiseConv2d"));var C={x:g,filter:m};null!=c&&(C.bias=b),null!=f&&(C.preluActivationWeights=w);var k=[m,g],S=Ne.runKernelFunc((function(e,t){var n=e.fusedDepthwiseConv2D({input:g,filter:m,convInfo:x,bias:b,activation:p,preluActivationWeights:w});return t([m,g,n]),n}),C,(function(e,t){_(so(u),(function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+u+"'"}));var n=t[0],r=t[1],o=t[2],a=ld(e,o,p),i={};return null!=c&&(i={bias:function(){return cd(b,a)}}),Object.assign({x:function(){return _l(r.shape,a,n,x)},filter:function(){return kl(r,a,n.shape,x)}},i)}),"FusedDepthwiseConv2D",{convInfo:x,activation:p},k,[!0]);return y?S.as3D(S.shape[1],S.shape[2],S.shape[3]):S}}),vd=Object.freeze({matMul:pd,conv2d:fd,depthwiseConv2d:hd}),md=Object.freeze({image:sd,linalg:Jc,losses:Gc,spectral:Sc,fused:vd,signal:Mc,square:Is,squaredDifference:Fs,conv1d:gl,conv2d:yl,conv3d:bl,depthwiseConv2d:Cl,separableConv2d:Sl,conv2dTranspose:El,conv3dTranspose:Il,op:cn,batchNormalization2d:mu,batchNormalization3d:gu,batchNormalization4d:yu,batchNormalization:bu,batchNorm:wu,batchNorm2d:xu,batchNorm3d:Cu,batchNorm4d:_u,booleanMaskAsync:fl,complex:dn,real:pn,imag:fn,concat:Rn,concat1d:Tn,concat2d:On,concat3d:Pn,concat4d:Bn,split:Mn,matMul:Al,dot:Fl,outerProduct:Dl,reverse:Rl,reverse1d:Tl,reverse2d:Ol,reverse3d:Pl,reverse4d:Bl,maxPool:Ll,avgPool:Vl,pool:jl,maxPool3d:Wl,avgPool3d:Hl,slice:Ul,slice1d:zl,slice2d:$l,slice3d:ql,slice4d:Gl,abs:Ds,acos:Rs,acosh:Ts,asin:Os,asinh:Ps,atan:Bs,atanh:Ms,ceil:Ns,clipByValue:Ls,cos:Vs,cosh:js,erf:Ws,exp:Hs,expm1:Us,floor:zs,log:$s,log1p:qs,logSigmoid:Gs,neg:Ks,reciprocal:Xs,round:Ys,rsqrt:Zs,sigmoid:Js,sign:Qs,isNaN:eu,isInf:tu,isFinite:nu,sin:ru,sinh:ou,softplus:au,sqrt:iu,step:su,tan:uu,tanh:lu,all:Xl,any:Yl,argMax:Zl,argMin:Jl,logSumExp:Ql,max:ec,mean:tc,min:nc,moments:rc,sum:oc,prod:ac,equal:Zu,equalStrict:Ju,greater:Qu,greaterEqual:el,greaterEqualStrict:tl,greaterStrict:nl,less:rl,lessEqual:ol,lessEqualStrict:al,lessStrict:il,notEqual:sl,notEqualStrict:ul,add:Du,addN:Ru,addStrict:Tu,atan2:Ou,div:Pu,divNoNan:Bu,divStrict:Mu,floorDiv:Nu,maximum:Lu,maximumStrict:Vu,minimum:ju,minimumStrict:Wu,mod:Hu,modStrict:Uu,mul:zu,mulStrict:$u,pow:qu,powStrict:Gu,squaredDifferenceStrict:Ku,sub:Xu,subStrict:Yu,elu:ic,leakyRelu:sc,prelu:uc,relu:lc,relu6:cc,selu:dc,logicalAnd:ku,logicalNot:Su,logicalOr:Eu,logicalXor:Iu,where:Au,whereAsync:Fu,buffer:Xn,print:Yn,batchToSpaceND:Zn,broadcastTo:Jn,cast:Qn,clone:er,cumsum:tr,depthToSpace:nr,expandDims:rr,eye:or,multinomial:ar,oneHot:ir,pad:sr,pad1d:ur,pad2d:lr,pad3d:cr,pad4d:dr,rand:pr,randomNormal:fr,randomGamma:hr,randomUniform:vr,reshape:mr,spaceToBatchND:gr,squeeze:yr,stack:br,tile:wr,truncatedNormal:xr,unstack:Cr,setdiff1dAsync:_r,fill:En,linspace:In,ones:kn,range:An,scalar:mn,tensor:hn,tensor1d:gn,tensor2d:yn,tensor3d:bn,tensor4d:wn,tensor5d:xn,tensor6d:Cn,variable:_n,zeros:Sn,onesLike:Fn,zerosLike:Dn,transpose:pc,softmax:zr,logSoftmax:$r,localResponseNormalization:fc,norm:hc,gather:dl,unsortedSegmentSum:pl,basicLSTMCell:vc,multiRNNCell:mc,movingAverage:gc,stridedSlice:yc,topk:bc,scatterND:wc,fft:xc,ifft:Cc,rfft:_c,irfft:kc,sparseToDense:Ec,gatherND:Ic,diag:Ac,dropout:Fc,hannWindow:Tc,hammingWindow:Oc,frame:Pc,stft:Bc,inTopKAsync:Nc});function gd(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&_("complex64"!==e.dtype,(function(){return t+" does not support complex64 tensors."}))}))}function yd(e,t,n,r){if("linear"===n)return e.linear(t);if("relu"===n)return e.relu(t);if("elu"===n)return e.elu(t);if("relu6"===n)return e.relu6(t);if("prelu"===n)return e.prelu(t,r);throw new Error("Activation "+n+" has not been implemented for the CPU backend.")}var bd=function(e){function t(){var t=e.call(this)||this;return t.blockSize=48,t.firstUse=!0,t.data=new qr(t,Ne),t}return o(t,e),t.prototype.write=function(e,t,n){this.firstUse&&(this.firstUse=!1,l().get("IS_NODE")&&Kt("\n============================\nHi there 👋. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================"));var r={};return this.data.set(r,{values:e,dtype:n}),r},t.prototype.move=function(e,t,n,r){this.data.set(e,{values:t,dtype:r})},t.prototype.numDataIds=function(){return this.data.numDataIds()},t.prototype.read=function(e){return a(this,void 0,void 0,(function(){return i(this,(function(t){return[2,this.readSync(e)]}))}))},t.prototype.readSync=function(e){var t=this.data.get(e),n=t.dtype,r=t.complexTensors;return"complex64"===n?ho(this.readSync(r.real.dataId),this.readSync(r.imag.dataId)):this.data.get(e).values},t.prototype.bufferSync=function(e){var t=this.readSync(e.dataId),n=t;if("string"===e.dtype)try{n=t.map((function(e){return ae(e)}))}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8")}return Xn(e.shape,e.dtype,n)},t.prototype.makeOutput=function(e,t,n){var r=this.write(e,t,n);return Ne.makeTensorFromDataId(r,t,n,this)},t.prototype.disposeData=function(e){if(this.data.has(e)){var t=this.data.get(e).complexTensors;null!=t&&(t.real.dispose(),t.imag.dispose()),this.data.delete(e)}},t.prototype.time=function(e){return a(this,void 0,void 0,(function(){var t;return i(this,(function(n){return t=ne(),e(),[2,{kernelMs:ne()-t}]}))}))},t.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},t.prototype.complex=function(e,t){var n=this.makeOutput(null,e.shape,"complex64");return this.data.get(n.dataId).complexTensors={real:Ne.keep(e.clone()),imag:Ne.keep(t.clone())},n},t.prototype.real=function(e){return this.data.get(e.dataId).complexTensors.real.clone()},t.prototype.imag=function(e){return this.data.get(e.dataId).complexTensors.imag.clone()},t.prototype.slice=function(e,t,n){if(gd(e,"slice"),jr(e.shape,t,n)){var r=Wr(t,e.strides),o=I(n);return hn(this.readSync(e.dataId).subarray(r,r+o),n,e.dtype)}for(var a=Xn(n,e.dtype),i=this.bufferSync(e),s=0;s<a.size;++s){var u=a.indexToLoc(s).map((function(e,n){return e+t[n]}));a.values[s]=i.get.apply(i,u)}return a.toTensor()},t.prototype.stridedSlice=function(e,t,n,r){gd(e,"stridedSlice");var o=Nr(t,n,r);if(o.some((function(e){return 0===e})))return hn([],o);for(var a=Xn(o,e.dtype),i=this.bufferSync(e),s=0;s<a.size;s++){for(var u=a.indexToLoc(s),l=new Array(u.length),c=0;c<l.length;c++)l[c]=u[c]*r[c]+t[c];a.set.apply(a,[i.get.apply(i,l)].concat(u))}return a.toTensor()},t.prototype.diag=function(e){for(var t=this.readSync(e.dataId),n=Xn([e.size,e.size],e.dtype),r=n.values,o=0;o<t.length;o++)r[o*e.size+o]=t[o];return n.toTensor()},t.prototype.unstack=function(e,t){for(var n=e.shape[t],r=new Array(e.rank-1),o=0,a=0;a<e.rank;a++)a!==t&&(r[o++]=e.shape[a]);var i=new Array(e.rank).fill(0),s=e.shape.slice();s[t]=1;var u=new Array(n);for(a=0;a<u.length;a++)i[t]=a,u[a]=this.slice(e,i,s).reshape(r);return u},t.prototype.reverse=function(e,t){gd(e,"reverse");for(var n=Xn(e.shape,e.dtype),r=this.bufferSync(e),o=function(o){var a=n.indexToLoc(o),i=a.slice();t.forEach((function(t){return i[t]=e.shape[t]-1-i[t]})),n.set.apply(n,[r.get.apply(r,i)].concat(a))},a=0;a<n.size;a++)o(a);return n.toTensor()},t.prototype.concat=function(e,t){var n=this;if("complex64"===e[0].dtype){var r=e.map((function(e){return pn(e)})),o=e.map((function(e){return fn(e)}));return dn(this.concat(r,t),this.concat(o,t))}var a=e.map((function(e){var n=I(e.shape.slice(t));return e.as2D(-1,n)})),i=ln(a.map((function(e){return e.shape})),1),s=Xn(i,e[0].dtype).values;if(1===a[0].shape[0]){var u=0;a.forEach((function(e){s.set(n.readSync(e.dataId),u),u+=e.size}))}else{var l=0;a.forEach((function(e){for(var t=n.readSync(e.dataId),r=0,o=0;o<e.shape[0];++o)for(var a=o*i[1]+l,u=0;u<e.shape[1];++u)s[a+u]=t[r++];l+=e.shape[1]}))}var c=ln(e.map((function(e){return e.shape})),t);return hn(s,c,e[0].dtype)},t.prototype.neg=function(e){return gd(e,"neg"),this.multiply(mn(-1),e)},t.prototype.add=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),(function(e,t,n,r){return{real:e+n,imag:t+r}})):this.broadcastedBinaryOp(e,t,Fe(e.dtype,t.dtype),(function(e,t){return e+t}))},t.prototype.addN=function(e){var t=this;gd(e,"addN");for(var n=e.map((function(e){return t.readSync(e.dataId)})),r=Xn(e[0].shape,e[0].dtype),o=r.values,a=0;a<e.length;a++)for(var i=n[a],s=0;s<o.length;s++)o[s]+=i[s];return r.toTensor()},t.prototype.softmax=function(e,t){var n=B([t],e.shape),r=this.max(e,n),o=nn(r.shape,n),a=this.subtract(e,r.reshape(o)),i=this.exp(a),s=this.sum(i,n).reshape(o);return this.realDivide(i,s)},t.prototype.subtract=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),(function(e,t,n,r){return{real:e-n,imag:t-r}})):this.broadcastedBinaryOp(e,t,Fe(e.dtype,t.dtype),(function(e,t){return e-t}))},t.prototype.pow=function(e,t){return gd([e,t],"pow"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.pow(e,t)}))},t.prototype.batchMatMul=function(e,t,n,r){gd([e,t],"matMul");for(var o=n?e.shape[1]:e.shape[2],a=n?e.shape[2]:e.shape[1],i=r?t.shape[1]:t.shape[2],s=e.shape[0],u=this.readSync(e.dataId),l=this.readSync(t.dataId),c=n?[e.strides[0],1,e.strides[1]]:[e.strides[0],e.strides[1],1],d=c[0],p=c[1],f=c[2],h=r?[1,t.strides[1],t.strides[0]]:[t.strides[1],1,t.strides[0]],v=h[0],m=h[1],g=h[2],y=a*i,b=Xn([s,a,i],e.dtype),w=b.values,x=this.blockSize,C=0;C<s;C++)for(var _=0;_<a;_+=x)for(var k=0;k<i;k+=x)for(var S=0;S<o;S+=x)for(var E=Math.min(_+x,a),I=Math.min(k+x,i),A=Math.min(S+x,o),F=_;F<E;F++)for(var D=k;D<I;D++){for(var R=0,T=S;T<A;T++)R+=u[C*d+F*p+T*f]*l[T*v+D*m+C*g];w[C*y+(F*i+D)]+=R}return b.toTensor()},t.prototype.fusedBatchMatMul=function(e){var t=e.a,n=e.b,r=e.transposeA,o=e.transposeB,a=e.bias,i=e.activation,s=e.preluActivationWeights,u=this.batchMatMul(t,n,r,o);return a&&(u=this.add(u,a)),i&&(u=yd(this,u,i,s)),u},t.prototype.multiply=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),(function(e,t,n,r){return{real:e*n-t*r,imag:e*r+t*n}})):this.broadcastedBinaryOp(e,t,Fe(e.dtype,t.dtype),(function(e,t){return e*t}))},t.prototype.realDivide=function(e,t){return gd([e,t],"realDivide"),this.broadcastedBinaryOp(e,t,"float32",(function(e,t){return e/t}))},t.prototype.floorDiv=function(e,t){return gd([e,t],"floorDiv"),this.broadcastedBinaryOp(e,t,"int32",(function(e,t){return Math.floor(e/t)}))},t.prototype.sum=function(e,t){gd(e,"sum"),rn("sum",t,e.rank);for(var n=tn(e.shape,t),r=n[0],o=n[1],a=Sn(r,Fe(e.dtype,"int32")),i=I(o),s=this.readSync(a.dataId),u=this.readSync(e.dataId),l=0;l<s.length;++l){for(var c=l*i,d=0,p=0;p<i;++p)d+=u[c+p];s[l]=d}return a},t.prototype.prod=function(e,t){gd(e,"sum");for(var n=tn(e.shape,t),r=n[0],o=n[1],a=Sn(r,Fe(e.dtype,"int32")),i=I(o),s=this.readSync(a.dataId),u=this.readSync(e.dataId),l=0;l<s.length;++l){for(var c=l*i,d=1,p=0;p<i;++p)d*=u[c+p];s[l]=d}return a},t.prototype.unsortedSegmentSum=function(e,t,n){gd(e,"unsortedSegmentSum");for(var r=[],o=e.rank-t.rank,a=0;a<o;++a)t=t.expandDims(a+1);for(a=0;a<n;++a){var i=mn(a,"int32"),s=Zu(i,t).asType("float32").mul(e).sum(0);r.push(s)}return br(r)},t.prototype.argMin=function(e,t){gd(e,"argMin");var n=[t];rn("argMin",n,e.rank);for(var r=tn(e.shape,n),o=r[0],a=r[1],i=Sn(o,"int32"),s=I(a),u=this.readSync(i.dataId),l=this.readSync(e.dataId),c=0;c<u.length;++c){for(var d=c*s,p=l[d],f=0,h=0;h<s;++h){var v=l[d+h];v<p&&(p=v,f=h)}u[c]=f}return i},t.prototype.argMax=function(e,t){gd(e,"argMax");var n=[t];rn("argMax",n,e.rank);for(var r=tn(e.shape,n),o=r[0],a=r[1],i=Sn(o,"int32"),s=I(a),u=this.readSync(i.dataId),l=this.readSync(e.dataId),c=0;c<u.length;++c){for(var d=c*s,p=l[d],f=0,h=0;h<s;++h){var v=l[d+h];v>p&&(p=v,f=h)}u[c]=f}return i},t.prototype.cumsum=function(e,t,n,r){if(gd(e,"cumsum"),t!==e.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(e.rank-1)+" but got axis="+t);for(var o=Fe(e.dtype,"int32"),a=Sn(e.shape,o),i=this.readSync(a.dataId),s=this.readSync(e.dataId),u=e.shape[e.rank-1],l=r?function(e,t){return e+u-t-1}:function(e,t){return e+t},c=0;c<s.length;c+=u)for(var d=0;d<u;d++){var p=l(c,d);if(0===d)i[p]=n?0:s[p];else{var f=l(c,d-1);i[p]=n?s[f]+i[f]:s[p]+i[f]}}return a},t.prototype.equal=function(e,t){return gd([e,t],"equal"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e===t?1:0}))},t.prototype.notEqual=function(e,t){return gd([e,t],"notEqual"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e!==t?1:0}))},t.prototype.less=function(e,t){return gd([e,t],"less"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e<t?1:0}))},t.prototype.lessEqual=function(e,t){return gd([e,t],"lessEqual"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e<=t?1:0}))},t.prototype.greater=function(e,t){return gd([e,t],"greater"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e>t?1:0}))},t.prototype.greaterEqual=function(e,t){return gd([e,t],"greaterEqual"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e>=t?1:0}))},t.prototype.logicalNot=function(e){gd(e,"logicalNot");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t[r]?0:1;return this.makeOutput(n,e.shape,"bool")},t.prototype.logicalAnd=function(e,t){return gd([e,t],"logicalAnd"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e&&t}))},t.prototype.logicalOr=function(e,t){return gd([e,t],"logicalOr"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e||t}))},t.prototype.select=function(e,t,n){gd([e,t,n],"select");for(var r=this.readSync(e.dataId),o=this.readSync(t.dataId),a=this.readSync(n.dataId),i=Sn(t.shape,Fe(t.dtype,n.dtype)),s=this.readSync(i.dataId),u=0,l=0===e.rank||e.rank>1||1===t.rank?1:I(t.shape.slice(1)),c=0;c<r.length;c++)for(var d=0;d<l;d++)1===r[c]?s[u++]=o[c]:s[u++]=a[c];return i},t.prototype.where=function(e){gd([e],"where");var t=this.readSync(e.dataId);return Fo(e.shape,t)},t.prototype.topk=function(e,t,n){return gd(e,"topk"),Ao(this.readSync(e.dataId),e.shape,e.dtype,t)},t.prototype.min=function(e,t){gd(e,"min"),rn("min",t,e.rank);for(var n=tn(e.shape,t),r=n[0],o=n[1],a=Sn(r,e.dtype),i=I(o),s=this.readSync(a.dataId),u=this.readSync(e.dataId),l=0;l<s.length;++l){for(var c=l*i,d=u[c],p=0;p<i;++p){var f=u[c+p];f<d&&(d=f)}s[l]=d}return a},t.prototype.minimum=function(e,t){return gd([e,t],"minimum"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.min(e,t)}))},t.prototype.mod=function(e,t){return gd([e,t],"mod"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){var n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t}))},t.prototype.max=function(e,t){gd(e,"max"),rn("max",t,e.rank);for(var n=tn(e.shape,t),r=n[0],o=n[1],a=Sn(r,e.dtype),i=I(o),s=this.readSync(a.dataId),u=this.readSync(e.dataId),l=0;l<s.length;++l){for(var c=l*i,d=u[c],p=0;p<i;++p){var f=u[c+p];f>d&&(d=f)}s[l]=d}return a},t.prototype.maximum=function(e,t){return gd([e,t],"maximum"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.max(e,t)}))},t.prototype.all=function(e,t){gd(e,"all"),rn("all",t,e.rank);for(var n=tn(e.shape,t),r=n[0],o=n[1],a=Sn(r,e.dtype),i=I(o),s=this.readSync(a.dataId),u=this.readSync(e.dataId),l=0;l<s.length;++l){for(var c=l*i,d=u[c],p=0;p<i;++p){var f=u[c+p];d=d&&f}s[l]=d}return a},t.prototype.any=function(e,t){gd(e,"any"),rn("any",t,e.rank);for(var n=tn(e.shape,t),r=n[0],o=n[1],a=Sn(r,e.dtype),i=I(o),s=this.readSync(a.dataId),u=this.readSync(e.dataId),l=0;l<s.length;++l){for(var c=l*i,d=u[c],p=0;p<i;++p){var f=u[c+p];d=d||f}s[l]=d}return a},t.prototype.squaredDifference=function(e,t){return gd([e,t],"squaredDifference"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){var n=e-t;return n*n}))},t.prototype.ceil=function(e){gd(e,"ceil");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.ceil(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.floor=function(e){gd(e,"floor");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.floor(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.sign=function(e){gd(e,"x");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)t[r]<0?n[r]=-1:t[r]>0?n[r]=1:n[r]=0;return this.makeOutput(n,e.shape,"float32")},t.prototype.isNaN=function(e){gd(e,"x");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Number.isNaN(t[r])&&(n[r]=1);return this.makeOutput(n,e.shape,"bool")},t.prototype.isInf=function(e){gd(e,"x");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Math.abs(t[r])===1/0&&(n[r]=1);return this.makeOutput(n,e.shape,"bool")},t.prototype.isFinite=function(e){gd(e,"x");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Number.isFinite(t[r])&&(n[r]=1);return this.makeOutput(n,e.shape,"bool")},t.prototype.round=function(e){gd(e,"round");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var o=Math.floor(t[r]);t[r]-o<.5?n[r]=Math.floor(t[r]):t[r]-o>.5?n[r]=Math.ceil(t[r]):n[r]=o%2==0?o:o+1}return this.makeOutput(n,e.shape,"float32")},t.prototype.exp=function(e){gd(e,"exp");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.exp(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.expm1=function(e){gd(e,"expm1");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.expm1(t[r]);return this.makeOutput(n,e.shape,"float32")},t.prototype.log=function(e){gd(e,"log");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var o=t[r];n[r]=Math.log(o)}return this.makeOutput(n,e.shape,"float32")},t.prototype.log1p=function(e){gd(e,"log1p");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var o=t[r];n[r]=Math.log1p(o)}return this.makeOutput(n,e.shape,"float32")},t.prototype.sqrt=function(e){gd(e,"sqrt");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var o=t[r];n[r]=Math.sqrt(o)}return this.makeOutput(n,e.shape,"float32")},t.prototype.rsqrt=function(e){gd(e,"rsqrt");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var o=t[r];n[r]=1/Math.sqrt(o)}return this.makeOutput(n,e.shape,"float32")},t.prototype.reciprocal=function(e){gd(e,"reciprocal");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=1/t[r];return this.makeOutput(n,e.shape,"float32")},t.prototype.linear=function(e){return e},t.prototype.relu=function(e){gd(e,"relu");for(var t=Sn(e.shape,e.dtype),n=this.readSync(t.dataId),r=this.readSync(e.dataId),o=0;o<r.length;++o)n[o]=Math.max(0,r[o]);return t},t.prototype.relu6=function(e){gd(e,"relu");for(var t=Sn(e.shape,e.dtype),n=this.readSync(t.dataId),r=this.readSync(e.dataId),o=0;o<r.length;++o)n[o]=Math.min(Math.max(0,r[o]),6);return t},t.prototype.prelu=function(e,t){return gd([e,t],"prelu"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return e<0?t*e:e}))},t.prototype.elu=function(e){gd(e,"elu");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r){var o=n[r];t[r]=o>=0?o:Math.exp(o)-1}return this.makeOutput(t,e.shape,"float32")},t.prototype.eluDer=function(e,t){gd([e,t],"eluDer");for(var n=new Float32Array(t.size),r=this.readSync(t.dataId),o=this.readSync(e.dataId),a=0;a<r.length;++a){var i=r[a];n[a]=i>=1?o[a]:o[a]*(i+1)}return this.makeOutput(n,t.shape,"float32")},t.prototype.selu=function(e){gd(e,"selu");for(var t=Gi,n=Ki,r=new Float32Array(e.size),o=this.readSync(e.dataId),a=0;a<o.length;++a){var i=o[a];r[a]=i>=0?n*i:t*(Math.exp(i)-1)}return this.makeOutput(r,e.shape,"float32")},t.prototype.clip=function(e,t,n){gd(e,"clip");for(var r=new Float32Array(e.size),o=this.readSync(e.dataId),a=0;a<o.length;++a){var i=o[a];r[a]=i>n?n:i<t?t:i}return this.makeOutput(r,e.shape,"float32")},t.prototype.abs=function(e){for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.abs(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.complexAbs=function(e){for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<e.size;++r){var o=n[2*r],a=n[2*r+1];t[r]=Math.hypot(o,a)}return this.makeOutput(t,e.shape,"float32")},t.prototype.int=function(e){gd(e,"int");for(var t=new Int32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=n[r];return this.makeOutput(t,e.shape,"int32")},t.prototype.sigmoid=function(e){gd(e,"sigmoid");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=1/(1+Math.exp(-n[r]));return this.makeOutput(t,e.shape,"float32")},t.prototype.softplus=function(e){gd(e,"softplus");for(var t=Math.log(1.1920928955078125e-7)+2,n=new Float32Array(e.size),r=this.readSync(e.dataId),o=0;o<r.length;++o){var a=r[o]>-t,i=r[o]<t,s=Math.exp(r[o]),u=void 0;u=i?s:a?r[o]:Math.log(1+s),n[o]=u}return this.makeOutput(n,e.shape,"float32")},t.prototype.sin=function(e){gd(e,"sin");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.sin(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.cos=function(e){gd(e,"cos");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.cos(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.tan=function(e){gd(e,"tan");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.tan(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.asin=function(e){gd(e,"asin");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.asin(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.acos=function(e){gd(e,"acos");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.acos(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.atan=function(e){gd(e,"atan");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.atan(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.atan2=function(e,t){return gd([e,t],"atan2"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.atan2(e,t)}))},t.prototype.sinh=function(e){gd(e,"sinh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.sinh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.cosh=function(e){gd(e,"cosh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.cosh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.tanh=function(e){gd(e,"tanh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=D(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.asinh=function(e){gd(e,"asinh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.asinh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.acosh=function(e){gd(e,"acosh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.acosh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.atanh=function(e){gd(e,"atanh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.atanh(n[r]);return this.makeOutput(t,e.shape,"float32")},t.prototype.erf=function(e){gd(e,"erf");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r){var o=Math.sign(n[r]),a=Math.abs(n[r]),i=1/(1+.3275911*a);t[r]=o*(1-((((1.061405429*i-1.453152027)*i+1.421413741)*i-.284496736)*i+.254829592)*i*Math.exp(-a*a))}return this.makeOutput(t,e.shape,"float32")},t.prototype.step=function(e,t){void 0===t&&(t=0),gd(e,"step");for(var n=new Float32Array(e.size),r=this.readSync(e.dataId),o=0;o<r.length;++o){var a=r[o];isNaN(a)?n[o]=NaN:n[o]=a>0?1:t}return this.makeOutput(n,e.shape,"float32")},t.prototype.fusedConv2d=function(e){var t=e.input,n=e.filter,r=e.convInfo,o=e.bias,a=e.activation,i=e.preluActivationWeights,s=this.conv2d(t,n,r);return o&&(s=this.add(s,o)),a&&(s=yd(this,s,a,i)),s},t.prototype.conv2d=function(e,t,n){gd([e,t],"conv2d");for(var r=n.filterHeight,o=n.filterWidth,a=n.dilationHeight,i=n.dilationWidth,s=n.padInfo.left,u=n.padInfo.top,l="channelsLast"===n.dataFormat,c=Xn(n.outShape,e.dtype),d=e.strides[0],p=l?e.strides[1]:e.strides[2],f=l?e.strides[2]:1,h=l?1:e.strides[1],v=c.strides[0],m=l?c.strides[1]:c.strides[2],g=l?c.strides[2]:1,y=l?1:c.strides[1],b=this.readSync(e.dataId),w=this.readSync(t.dataId),x=c.values,C=0;C<n.batchSize;++C)for(var _=C*d,k=C*v,S=0;S<n.outHeight;++S)for(var E=k+S*m,I=S*n.strideHeight-u,A=0;A<r;A++){var F=I+A*a;if(!(F<0||F>=n.inHeight))for(var D=A*t.strides[0],R=_+F*p,T=0;T<n.outWidth;++T)for(var O=E+T*g,P=T*n.strideWidth-s,B=0;B<o;B++){var M=P+B*i;if(!(M<0||M>=n.inWidth))for(var N=R+M*f,L=D+B*t.strides[1],V=0;V<n.inChannels;++V){for(var j=b[N+V*h],W=0;W<n.outChannels;++W)x[O+W*y]+=j*w[L+W];L+=n.outChannels}}}return c.toTensor()},t.prototype.conv3d=function(e,t,n){for(var r=n.filterDepth,o=n.filterHeight,a=n.filterWidth,i=n.dilationDepth,s=n.dilationHeight,u=n.dilationWidth,l=n.padInfo.front,c=n.padInfo.left,d=n.padInfo.top,p=Xn(n.outShape,e.dtype),f=this.readSync(e.dataId),h=this.readSync(t.dataId),v=p.values,m=0;m<n.batchSize;++m)for(var g=m*e.strides[0],y=m*p.strides[0],b=0;b<n.outDepth;++b)for(var w=y+b*p.strides[1],x=b*n.strideDepth-l,C=0;C<r;C++){var _=x+C*i;if(!(_<0||_>=n.inDepth))for(var k=C*t.strides[0],S=g+_*e.strides[1],E=0;E<n.outHeight;++E)for(var I=w+E*p.strides[2],A=E*n.strideHeight-d,F=0;F<o;F++){var D=A+F*s;if(!(D<0||D>=n.inHeight))for(var R=k+F*t.strides[1],T=S+D*e.strides[2],O=0;O<n.outWidth;++O)for(var P=I+O*n.outChannels,B=O*n.strideWidth-c,M=0;M<a;M++){var N=B+M*u;if(!(N<0||N>=n.inWidth))for(var L=R+M*t.strides[2],V=T+N*n.inChannels,j=L,W=0;W<n.inChannels;++W){for(var H=f[V+W],U=0;U<n.outChannels;++U)v[P+U]+=H*h[j+U];j+=n.outChannels}}}}return p.toTensor()},t.prototype.conv2dDerInput=function(e,t,n){gd([e,t],"conv2dDerInput");for(var r=Xn(n.inShape,"float32"),o=r.values,a=this.readSync(e.dataId),i=this.readSync(t.dataId),s=t.strides,u=s[0],l=s[1],c=s[2],d=n.batchSize,p=n.filterHeight,f=n.filterWidth,h=n.inChannels,v=n.inHeight,m=n.inWidth,g=n.outChannels,y=n.outHeight,b=n.outWidth,w=n.strideHeight,x=n.strideWidth,C=n.dataFormat,_=p-1-n.padInfo.top,k=f-1-n.padInfo.left,S="channelsLast"===C,E=r.strides[0],I=S?r.strides[1]:r.strides[2],A=S?r.strides[2]:1,F=S?1:r.strides[1],D=e.strides[0],R=S?e.strides[1]:e.strides[2],T=S?e.strides[2]:1,O=S?1:e.strides[1],P=0;P<d;++P)for(var B=0;B<h;++B)for(var M=0;M<v;++M)for(var N=M-_,L=Math.max(0,Math.ceil(N/w)),V=Math.min(y,(p+N)/w),j=0;j<m;++j){for(var W=j-k,H=Math.max(0,Math.ceil(W/x)),U=Math.min(b,(f+W)/x),z=0,$=L;$<V;++$)for(var q=$*w-N,G=H;G<U;++G)for(var K=D*P+R*$+T*G,X=u*(p-1-q)+l*(f-1-(G*x-W))+c*B,Y=0;Y<g;++Y)z+=a[K+O*Y]*i[X+Y];o[E*P+I*M+A*j+F*B]=z}return r.toTensor()},t.prototype.conv3dDerInput=function(e,t,n){for(var r=Xn(n.inShape,"float32"),o=r.values,a=r.strides,i=a[0],s=a[1],u=a[2],l=a[3],c=this.readSync(e.dataId),d=e.strides,p=d[0],f=d[1],h=d[2],v=d[3],m=this.readSync(t.dataId),g=t.strides,y=g[0],b=g[1],w=g[2],x=g[3],C=n.batchSize,_=n.filterDepth,k=n.filterHeight,S=n.filterWidth,E=n.inChannels,I=n.inDepth,A=n.inHeight,F=n.inWidth,D=n.outChannels,R=n.outDepth,T=n.outHeight,O=n.outWidth,P=n.strideDepth,B=n.strideHeight,M=n.strideWidth,N=_-1-n.padInfo.front,L=k-1-n.padInfo.top,V=S-1-n.padInfo.left,j=0;j<C;++j)for(var W=0;W<E;++W)for(var H=0;H<I;++H)for(var U=H-N,z=Math.max(0,Math.ceil(U/P)),$=Math.min(R,(_+U)/P),q=0;q<A;++q)for(var G=q-L,K=Math.max(0,Math.ceil(G/B)),X=Math.min(T,(k+G)/B),Y=0;Y<F;++Y){for(var Z=Y-V,J=Math.max(0,Math.ceil(Z/M)),Q=Math.min(O,(S+Z)/M),ee=0,te=z;te<$;++te)for(var ne=te*P-U,re=K;re<X;++re)for(var oe=re*B-G,ae=J;ae<Q;++ae)for(var ie=p*j+f*te+h*re+v*ae,se=y*(_-1-ne)+b*(k-1-oe)+w*(S-1-(ae*M-Z))+x*W,ue=0;ue<D;++ue)ee+=c[ie+ue]*m[se+ue];o[i*j+s*H+u*q+l*Y+W]=ee}return r.toTensor()},t.prototype.conv2dDerFilter=function(e,t,n){gd([e,t],"conv2dDerFilter");for(var r=n.strideHeight,o=n.strideWidth,a=n.filterHeight,i=n.filterWidth,s="channelsLast"===n.dataFormat,u=Xn(n.filterShape,"float32"),l=n.padInfo.left,c=n.padInfo.top,d=this.bufferSync(e),p=this.bufferSync(t),f=0;f<a;++f)for(var h=Math.max(0,Math.ceil((c-f)/r)),v=Math.min(n.outHeight,(n.inHeight+c-f)/r),m=0;m<i;++m)for(var g=Math.max(0,Math.ceil((l-m)/o)),y=Math.min(n.outWidth,(n.inWidth+l-m)/o),b=0;b<n.inChannels;++b)for(var w=0;w<n.outChannels;++w){for(var x=0,C=0;C<n.batchSize;++C)for(var _=h;_<v;++_)for(var k=f+_*r-c,S=g;S<y;++S){var E=m+S*o-l;x+=s?d.get(C,k,E,b)*p.get(C,_,S,w):d.get(C,b,k,E)*p.get(C,w,_,S)}u.set(x,f,m,b,w)}return u.toTensor()},t.prototype.conv3dDerFilter=function(e,t,n){for(var r=n.strideDepth,o=n.strideHeight,a=n.strideWidth,i=n.filterDepth,s=n.filterHeight,u=n.filterWidth,l=Xn(n.filterShape,"float32"),c=l.values,d=l.strides,p=d[0],f=d[1],h=d[2],v=d[3],m=this.readSync(t.dataId),g=t.strides,y=g[0],b=g[1],w=g[2],x=g[3],C=this.readSync(e.dataId),_=e.strides,k=_[0],S=_[1],E=_[2],I=_[3],A=n.padInfo.front,F=n.padInfo.left,D=n.padInfo.top,R=0;R<i;++R)for(var T=Math.max(0,Math.ceil((A-R)/r)),O=Math.min(n.outDepth,(n.inDepth+A-R)/r),P=R*p,B=0;B<s;++B)for(var M=Math.max(0,Math.ceil((D-B)/o)),N=Math.min(n.outHeight,(n.inHeight+D-B)/o),L=B*f+P,V=0;V<u;++V)for(var j=Math.max(0,Math.ceil((F-V)/a)),W=Math.min(n.outWidth,(n.inWidth+F-V)/a),H=V*h+L,U=0;U<n.inChannels;++U)for(var z=U*v+H,$=0;$<n.outChannels;++$){for(var q=0,G=0;G<n.batchSize;++G)for(var K=G*k,X=G*y,Y=T;Y<O;++Y)for(var Z=(R+Y*r-A)*S+K,J=Y*b+X,Q=M;Q<N;++Q)for(var ee=(B+Q*o-D)*E+Z,te=Q*w+J,ne=j;ne<W;++ne){var re=ne*x+te;q+=C[(V+ne*a-F)*I+ee+U]*m[re+$]}c[z+$]=q}return l.toTensor()},t.prototype.fusedDepthwiseConv2D=function(e){var t=e.input,n=e.filter,r=e.convInfo,o=e.bias,a=e.activation,i=e.preluActivationWeights,s=this.depthwiseConv2D(t,n,r);return o&&(s=this.add(s,o)),a&&(s=yd(this,s,a,i)),s},t.prototype.depthwiseConv2D=function(e,t,n){gd([e,t],"depthwiseConv2D");for(var r=n.filterHeight,o=n.filterWidth,a=n.dilationHeight,i=n.dilationWidth,s=n.padInfo.left,u=n.padInfo.top,l=n.outChannels/n.inChannels,c=Xn(n.outShape,e.dtype),d=this.readSync(e.dataId),p=this.readSync(t.dataId),f=c.values,h=0;h<n.batchSize;++h)for(var v=h*e.strides[0],m=h*c.strides[0],g=0;g<n.outHeight;++g)for(var y=m+g*c.strides[1],b=g*n.strideHeight-s,w=0;w<r;++w){var x=b+w*a;if(!(x<0||x>=n.inHeight))for(var C=w*t.strides[0],_=v+x*e.strides[1],k=0;k<n.outWidth;++k)for(var S=y+k*c.strides[2],E=k*n.strideWidth-u,I=0;I<o;++I){var A=E+I*i;if(!(A<0||A>=n.inWidth))for(var F=C+I*t.strides[1],D=_+A*n.inChannels,R=S,T=F,O=0;O<n.inChannels;++O){for(var P=d[D+O],B=0;B<l;++B)f[R+B]+=P*p[T+B];R+=l,T+=l}}}return c.toTensor()},t.prototype.depthwiseConv2DDerInput=function(e,t,n){gd([e,t],"depthwiseConv2DDerInput");for(var r=Xn(n.inShape,"float32"),o=r.values,a=r.strides,i=a[0],s=a[1],u=a[2],l=this.readSync(e.dataId),c=e.strides,d=c[0],p=c[1],f=c[2],h=this.readSync(t.dataId),v=t.strides,m=v[0],g=v[1],y=v[2],b=n.batchSize,w=n.filterHeight,x=n.filterWidth,C=n.inChannels,_=n.inHeight,k=n.inWidth,S=n.outChannels,E=n.outHeight,I=n.outWidth,A=n.strideHeight,F=n.strideWidth,D=w-1-n.padInfo.top,R=x-1-n.padInfo.left,T=S/C,O=0;O<b;++O)for(var P=0;P<C;++P)for(var B=0;B<_;++B)for(var M=B-D,N=Math.max(0,Math.ceil(M/A)),L=Math.min(E,(w+M)/A),V=0;V<k;++V){for(var j=V-R,W=Math.max(0,Math.ceil(j/F)),H=Math.min(I,(x+j)/F),U=0,z=N;z<L;++z)for(var $=z*A-M,q=W;q<H;++q)for(var G=d*O+p*z+f*q,K=m*(w-1-$)+g*(x-1-(q*F-j))+y*P,X=0;X<T;++X)U+=l[G+(P*T+X)]*h[K+X];o[i*O+s*B+u*V+P]=U}return r.toTensor()},t.prototype.depthwiseConv2DDerFilter=function(e,t,n){gd([e,t],"depthwiseConv2DDerFilter");for(var r=n.strideHeight,o=n.strideWidth,a=n.filterHeight,i=n.filterWidth,s=Xn(n.filterShape,"float32"),u=n.padInfo.left,l=n.padInfo.top,c=n.outChannels/n.inChannels,d=this.bufferSync(e),p=this.bufferSync(t),f=0;f<a;++f)for(var h=Math.max(0,Math.ceil((l-f)/r)),v=Math.min(n.outHeight,(n.inHeight+l-f)/r),m=0;m<i;++m)for(var g=Math.max(0,Math.ceil((u-m)/o)),y=Math.min(n.outWidth,(n.inWidth+u-m)/o),b=0;b<n.outChannels;++b){for(var w=Math.trunc(b/c),x=b%c,C=0,_=0;_<n.batchSize;++_)for(var k=h;k<v;++k)for(var S=f+k*r-l,E=g;E<y;++E){var I=m+E*o-u;C+=d.get(_,S,I,w)*p.get(_,k,E,b)}s.set(C,f,m,w,x)}return s.toTensor()},t.prototype.tile=function(e,t){return gd(e,"tile"),Io(this.bufferSync(e),t)},t.prototype.pad=function(e,t,n){gd(e,"pad");var r=t.map((function(t,n){return t[0]+e.shape[n]+t[1]})),o=t.map((function(e){return e[0]})),a=this.bufferSync(e),i=Xn(r,e.dtype);0!==n&&i.values.fill(n);for(var s=0;s<e.size;s++){var u=a.indexToLoc(s),l=u.map((function(e,t){return e+o[t]}));i.set.apply(i,[a.get.apply(a,u)].concat(l))}return i.toTensor()},t.prototype.transpose=function(e,t){gd(e,"transpose");for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[t[r]];var o=this.readSync(e.dataId),a=Xn(n,e.dtype),i=this.bufferSync(e);for(r=0;r<e.size;++r){for(var s=i.indexToLoc(r),u=new Array(s.length),l=0;l<u.length;l++)u[l]=s[t[l]];var c=a.locToIndex(u);a.values[c]=o[r]}return a.toTensor()},t.prototype.gather=function(e,t,n){gd([e,t],"gather");var r=e.shape.slice(),o=this.readSync(t.dataId);r[n]=o.length;for(var a=Xn(r,e.dtype),i=this.bufferSync(e),s=0;s<a.size;++s){var u=a.indexToLoc(s),l=u.slice();l[n]=o[u[n]];var c=i.locToIndex(l);a.values[s]=i.values[c]}return a.toTensor()},t.prototype.batchToSpaceND=function(e,t,n){gd([e],"batchToSpaceND");var r=t.reduce((function(e,t){return e*t})),o=kr(e.shape,t,r),a=Sr(o.length,t.length),i=Er(e.shape,t,r),s=Ir(n,t.length),u=Ar(i,n,t.length);return e.reshape(o).transpose(a).reshape(i).slice(s,u)},t.prototype.spaceToBatchND=function(e,t,n){gd([e],"spaceToBatchND");var r=t.reduce((function(e,t){return e*t})),o=[[0,0]];o.push.apply(o,n);for(var a=1+t.length;a<e.shape.length;++a)o.push([0,0]);var i=e.pad(o),s=kr(i.shape,t,r,!1),u=Sr(s.length,t.length,!1),l=Er(i.shape,t,r,!1);return i.reshape(s).transpose(u).reshape(l)},t.prototype.pool=function(e,t,n){gd(e,"pool");for(var r=t.strideHeight,o=t.strideWidth,a=t.dilationHeight,i=t.dilationWidth,s=t.effectiveFilterHeight,u=t.effectiveFilterWidth,l=t.padInfo.top,c=t.padInfo.left,d="max"===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,p=this.readSync(e.dataId),f=Xn(t.outShape,e.dtype),h=f.values,v=t.outShape[1]*t.outShape[2]*t.outShape[3],m=t.outShape[2]*t.outShape[3],g=t.outShape[3],y=0;y<t.batchSize;++y)for(var b=y*v,w=y*e.strides[0],x=0;x<t.inChannels;++x)for(var C=0;C<t.outHeight;++C)for(var _=C*r-l,k=Math.max(0,_),S=Math.min(t.inHeight,s+_),E=b+C*m,I=0;I<t.outWidth;++I){for(var A=I*o-c,F=Math.max(0,A),D=Math.min(t.inWidth,u+A),R=d,T=0,O=0,P=k;P<S;P+=a){for(var B=w+P*e.strides[1],M=F;M<D;M+=i){var N=p[B+M*e.strides[2]+x];"max"===n&&N>R?R=N:"avg"===n&&(T+=N,O++)}if(isNaN(R))break}h[E+I*g+x]="avg"===n?T/O:R}return f.toTensor()},t.prototype.maxPool=function(e,t){return this.pool(e,t,"max")},t.prototype.maxPoolPositions=function(e,t){for(var n=Xn(t.outShape,"int32"),r=t.strideHeight,o=t.strideWidth,a=t.dilationHeight,i=t.dilationWidth,s=t.effectiveFilterHeight,u=t.effectiveFilterWidth,l=t.padInfo.top,c=t.padInfo.left,d=this.bufferSync(e),p=0;p<t.batchSize;++p)for(var f=0;f<t.inChannels;++f)for(var h=0;h<t.outHeight;++h){for(var v=h*r-l,m=v;m<0;)m+=a;for(var g=Math.min(t.inHeight,s+v),y=0;y<t.outWidth;++y){for(var b=y*o-c,w=b;w<0;)w+=i;for(var x=Math.min(t.inWidth,u+b),C=Number.NEGATIVE_INFINITY,_=-1,k=m;k<g;k+=a)for(var S=k-v,E=w;E<x;E+=i){var I=E-b,A=d.get(p,k,E,f);A>C&&(C=A,_=S*u+I)}n.set(_,p,h,y,f)}}return n.toTensor()},t.prototype.maxPoolBackprop=function(e,t,n,r){gd([t,n],"maxPoolBackprop");for(var o=this.maxPoolPositions(t,r),a=r.strideHeight,i=r.strideWidth,s=r.dilationHeight,u=r.dilationWidth,l=r.effectiveFilterHeight,c=r.effectiveFilterWidth,d=c-1-r.padInfo.left,p=l-1-r.padInfo.top,f=Xn(t.shape,"float32"),h=this.bufferSync(o),v=this.bufferSync(e),m=0;m<r.batchSize;++m)for(var g=0;g<r.inChannels;++g)for(var y=0;y<r.inHeight;++y)for(var b=0;b<r.inWidth;++b){for(var w=y-p,x=b-d,C=0,_=0;_<l;_+=s){var k=(w+_)/a;if(!(k<0||k>=r.outHeight||Math.floor(k)!==k))for(var S=0;S<c;S+=u){var E=(x+S)/i;if(!(E<0||E>=r.outWidth||Math.floor(E)!==E)){var I=l*c-1-h.get(m,k,E,g)===_*c+S?1:0;0!==I&&(C+=v.get(m,k,E,g)*I)}}}f.set(C,m,y,b,g)}return f.toTensor()},t.prototype.avgPoolBackprop=function(e,t,n){gd([e,t],"avgPoolBackprop");for(var r=n.strideHeight,o=n.strideWidth,a=n.filterHeight,i=n.filterWidth,s=n.dilationHeight,u=n.dilationWidth,l=n.effectiveFilterHeight,c=n.effectiveFilterWidth,d=c-1-n.padInfo.left,p=l-1-n.padInfo.top,f=Xn(t.shape,"float32"),h=1/(a*i),v=this.bufferSync(e),m=0;m<n.batchSize;++m)for(var g=0;g<n.inChannels;++g)for(var y=0;y<n.inHeight;++y)for(var b=0;b<n.inWidth;++b){for(var w=y-p,x=b-d,C=0,_=0;_<l;_+=s){var k=(w+_)/r;if(!(k<0||k>=n.outHeight||Math.floor(k)!==k))for(var S=0;S<c;S+=u){var E=(x+S)/o;E<0||E>=n.outWidth||Math.floor(E)!==E||(C+=v.get(m,k,E,g))}}f.set(C*h,m,y,b,g)}return f.toTensor()},t.prototype.pool3d=function(e,t,n){gd(e,"pool3d");for(var r=t.strideDepth,o=t.strideHeight,a=t.strideWidth,i=t.dilationDepth,s=t.dilationHeight,u=t.dilationWidth,l=t.effectiveFilterDepth,c=t.effectiveFilterHeight,d=t.effectiveFilterWidth,p=t.padInfo.front,f=t.padInfo.top,h=t.padInfo.left,v="max"===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=this.readSync(e.dataId),g=Xn(t.outShape,e.dtype),y=g.values,b=t.outShape[1]*t.outShape[2]*t.outShape[3]*t.outShape[4],w=t.outShape[2]*t.outShape[3]*t.outShape[4],x=t.outShape[3]*t.outShape[4],C=t.outShape[4],_=0;_<t.batchSize;++_)for(var k=_*b,S=_*e.strides[0],E=0;E<t.inChannels;++E)for(var I=0;I<t.outDepth;++I){for(var A=I*r-p,F=A;F<0;)F+=i;for(var D=Math.min(t.inDepth,l+A),R=k+I*w,T=0;T<t.outHeight;++T){for(var O=T*o-f,P=O;P<0;)P+=s;for(var B=Math.min(t.inHeight,c+O),M=R+T*x,N=0;N<t.outWidth;++N){for(var L=N*a-h,V=L;V<0;)V+=u;for(var j=Math.min(t.inWidth,d+L),W=M+N*C,H=v,U=0,z=0,$=F;$<D;$+=i){for(var q=S+$*e.strides[1],G=P;G<B;G+=s){for(var K=q+G*e.strides[2],X=V;X<j;X+=u){var Y=m[K+X*e.strides[3]+E];if("max"===n&&Y>H?H=Y:"avg"===n&&(U+=Y,z++),isNaN(H))break}if(isNaN(H))break}if(isNaN(H))break}y[W+E]="avg"===n?U/z:H}}}return g.toTensor()},t.prototype.avgPool3d=function(e,t){return gd(e,"avgPool3d"),this.pool3d(e,t,"avg").toFloat()},t.prototype.avgPool3dBackprop=function(e,t,n){gd([e,t],"avgPool3dBackprop");for(var r=n.strideDepth,o=n.strideHeight,a=n.strideWidth,i=n.filterDepth,s=n.filterHeight,u=n.filterWidth,l=n.dilationDepth,c=n.dilationHeight,d=n.dilationWidth,p=n.effectiveFilterDepth,f=n.effectiveFilterHeight,h=n.effectiveFilterWidth,v=p-1-n.padInfo.front,m=h-1-n.padInfo.left,g=f-1-n.padInfo.top,y=Xn(t.shape,"float32"),b=1/(i*s*u),w=this.bufferSync(e),x=0;x<n.batchSize;++x)for(var C=0;C<n.inChannels;++C)for(var _=0;_<n.inDepth;++_)for(var k=0;k<n.inHeight;++k)for(var S=0;S<n.inWidth;++S){for(var E=_-v,I=k-g,A=S-m,F=0,D=0;D<p;D+=l){var R=(E+D)/r;if(!(R<0||R>=n.outDepth||Math.floor(R)!==R))for(var T=0;T<f;T+=c){var O=(I+T)/o;if(!(O<0||O>=n.outHeight||Math.floor(O)!==O))for(var P=0;P<h;P+=d){var B=(A+P)/a;B<0||B>=n.outWidth||Math.floor(B)!==B||(F+=w.get(x,R,O,B,C))}}}y.set(F*b,x,_,k,S,C)}return y.toTensor()},t.prototype.maxPool3d=function(e,t){return gd(e,"maxPool3d"),this.pool3d(e,t,"max").toFloat()},t.prototype.maxPool3dPositions=function(e,t){for(var n=Xn(t.outShape,"int32"),r=t.strideDepth,o=t.strideHeight,a=t.strideWidth,i=t.dilationDepth,s=t.dilationHeight,u=t.dilationWidth,l=t.effectiveFilterDepth,c=t.effectiveFilterHeight,d=t.effectiveFilterWidth,p=t.padInfo.front,f=t.padInfo.top,h=t.padInfo.left,v=this.bufferSync(e),m=0;m<t.batchSize;++m)for(var g=0;g<t.inChannels;++g)for(var y=0;y<t.outDepth;++y){for(var b=y*r-p,w=b;w<0;)w+=i;for(var x=Math.min(t.inDepth,l+b),C=0;C<t.outHeight;++C){for(var _=C*o-f,k=_;k<0;)k+=s;for(var S=Math.min(t.inHeight,c+_),E=0;E<t.outWidth;++E){for(var I=E*a-h,A=I;A<0;)A+=u;for(var F=Math.min(t.inWidth,d+I),D=Number.NEGATIVE_INFINITY,R=-1,T=w;T<x;T+=i)for(var O=T-b,P=k;P<S;P+=s)for(var B=P-_,M=A;M<F;M+=u){var N=M-I,L=v.get(m,T,P,M,g);L>=D&&(D=L,R=O*c*d+B*c+N)}n.set(R,m,y,C,E,g)}}}return n.toTensor()},t.prototype.maxPool3dBackprop=function(e,t,n,r){gd([t,n],"maxPool3dBackprop");for(var o=this.maxPool3dPositions(t,r),a=r.strideDepth,i=r.strideHeight,s=r.strideWidth,u=r.dilationDepth,l=r.dilationHeight,c=r.dilationWidth,d=r.effectiveFilterDepth,p=r.effectiveFilterHeight,f=r.effectiveFilterWidth,h=d-1-r.padInfo.front,v=f-1-r.padInfo.left,m=p-1-r.padInfo.top,g=Xn(t.shape,"float32"),y=this.bufferSync(o),b=this.bufferSync(e),w=0;w<r.batchSize;++w)for(var x=0;x<r.inChannels;++x)for(var C=0;C<r.inDepth;++C)for(var _=0;_<r.inHeight;++_)for(var k=0;k<r.inWidth;++k){for(var S=C-h,E=_-m,I=k-v,A=0,F=0;F<d;F+=u){var D=(S+F)/a;if(!(D<0||D>=r.outDepth||Math.floor(D)!==D))for(var R=0;R<p;R+=l){var T=(E+R)/i;if(!(T<0||T>=r.outHeight||Math.floor(T)!==T))for(var O=0;O<f;O+=c){var P=(I+O)/s;if(!(P<0||P>=r.outWidth||Math.floor(P)!==P)){var B=d*p*f-1-y.get(w,D,T,P,x)===F*p*f+R*f+O?1:0;0!==B&&(A+=b.get(w,D,T,P,x)*B)}}}}g.set(A,w,C,_,k,x)}return g.toTensor()},t.prototype.cast=function(e,t){return co(e,t,this)},t.prototype.reshape=function(e,t){return po(e,t)},t.prototype.avgPool=function(e,t){return gd(e,"avgPool"),this.pool(e,t,"avg").toFloat()},t.prototype.resizeBilinear=function(e,t,n,r){gd(e,"resizeBilinear");for(var o=e.shape,a=o[0],i=o[1],s=o[2],u=o[3],l=this.readSync(e.dataId),c=new Float32Array(I([a,t,n,u])),d=[r&&t>1?i-1:i,r&&n>1?s-1:s],p=[r&&t>1?t-1:t,r&&n>1?n-1:n],f=0,h=d[0]/p[0],v=d[1]/p[1],m=0;m<a;m++)for(var g=0;g<t;g++)for(var y=h*g,b=Math.floor(y),w=y-b,x=Math.min(i-1,Math.ceil(y)),C=m*e.strides[0]+b*e.strides[1],_=m*e.strides[0]+x*e.strides[1],k=0;k<n;k++)for(var S=v*k,E=Math.floor(S),A=S-E,F=Math.min(s-1,Math.ceil(S)),D=C+E*e.strides[2],R=_+E*e.strides[2],T=C+F*e.strides[2],O=_+F*e.strides[2],P=0;P<u;P++){var B=l[D+P],M=l[R+P],N=B+(l[T+P]-B)*A,L=N+(M+(l[O+P]-M)*A-N)*w;c[f++]=L}return hn(c,[a,t,n,u])},t.prototype.resizeBilinearBackprop=function(e,t,n){gd([e,t],"resizeBilinearBackprop");for(var r=t.shape,o=r[0],a=r[1],i=r[2],s=r[3],u=e.shape,l=u[1],c=u[2],d=new Float32Array(o*a*i*s),p=[n&&l>1?a-1:a,n&&c>1?i-1:i],f=[n&&l>1?l-1:l,n&&c>1?c-1:c],h=p[0]/f[0],v=p[1]/f[1],m=this.readSync(e.dataId),g=0,y=0;y<o;y++)for(var b=y*t.strides[0],w=0;w<l;w++)for(var x=w*h,C=Math.floor(x),_=Math.min(Math.ceil(x),a-1),k=b+C*t.strides[1],S=b+_*t.strides[1],E=x-C,I=1-E,A=0;A<c;A++)for(var F=A*v,D=Math.floor(F),R=Math.min(Math.ceil(F),i-1),T=F-D,O=1-T,P=k+D*t.strides[2],B=k+R*t.strides[2],M=S+D*t.strides[2],N=S+R*t.strides[2],L=I*O,V=I*T,j=E*O,W=E*T,H=0;H<s;H++){var U=m[g++];d[P+H]+=U*L,d[B+H]+=U*V,d[M+H]+=U*j,d[N+H]+=U*W}return wn(d,[o,i,a,s],t.dtype)},t.prototype.resizeNearestNeighbor=function(e,t,n,r){gd(e,"resizeNearestNeighbor");for(var o=e.shape,a=o[0],i=o[1],s=o[2],u=o[3],l=this.readSync(e.dataId),c=new Float32Array(a*t*n*u),d=[r&&t>1?i-1:i,r&&n>1?s-1:s],p=[r&&t>1?t-1:t,r&&n>1?n-1:n],f=d[0]/p[0],h=d[1]/p[1],v=0,m=0;m<a;m++)for(var g=m*e.strides[0],y=0;y<t;y++)for(var b=f*y,w=g+Math.min(i-1,r?Math.round(b):Math.floor(b))*e.strides[1],x=0;x<n;x++)for(var C=h*x,_=w+Math.min(s-1,r?Math.round(C):Math.floor(C))*e.strides[2],k=0;k<u;k++){var S=l[_+k];c[v++]=S}return hn(c,[a,t,n,u],e.dtype)},t.prototype.resizeNearestNeighborBackprop=function(e,t,n){gd([e,t],"resizeNearestNeighborBackprop");for(var r=t.shape,o=r[0],a=r[1],i=r[2],s=r[3],u=e.shape,l=u[1],c=u[2],d=new Float32Array(o*a*i*s),p=this.readSync(e.dataId),f=[n&&l>1?a-1:a,n&&c>1?i-1:i],h=[n&&l>1?l-1:l,n&&c>1?c-1:c],v=f[0]/h[0],m=f[1]/h[1],g=1/v,y=1/m,b=2*Math.ceil(g)+2,w=2*Math.ceil(y)+2,x=0;x<o;x++)for(var C=x*t.strides[0],_=0;_<a;_++)for(var k=C+_*t.strides[1],S=Math.floor(_*g),E=Math.floor(S-b/2),I=0;I<i;I++)for(var A=k+I*t.strides[2],F=Math.floor(I*y),D=Math.floor(F-w/2),R=0;R<s;R++){for(var T=0,O=0;O<b;O++){var P=O+E;if(!(P<0||P>=l)){var B=C+P*e.strides[1],M=P*v;if(_===Math.min(a-1,n?Math.round(M):Math.floor(M)))for(var N=0;N<w;N++){var L=N+D;if(!(L<0||L>=c)){var V=B+L*e.strides[2],j=L*m;I===Math.min(i-1,n?Math.round(j):Math.floor(j))&&(T+=p[V+R])}}}}d[A+R]=T}return wn(d,t.shape,t.dtype)},t.prototype.batchNormalization=function(e,t,n,r,o,a){gd([e,t,n,o,a],"batchNorm");for(var i=this.readSync(e.dataId),s=this.readSync(t.dataId),u=this.readSync(n.dataId),l=o?this.readSync(o.dataId):new Float32Array([1]),c=a?this.readSync(a.dataId):new Float32Array([0]),d=new Float32Array(i.length),p=c.length,f=l.length,h=u.length,v=s.length,m=0,g=0,y=0,b=0,w=0;w<i.length;++w)d[w]=c[m++]+(i[w]-s[g++])*l[y++]/Math.sqrt(u[b++]+r),m>=p&&(m=0),g>=v&&(g=0),y>=f&&(y=0),b>=h&&(b=0);return wn(d,e.shape)},t.prototype.localResponseNormalization4D=function(e,t,n,r,o){gd(e,"localResponseNormalization4D");var a=e.shape[3],i=a-1,s=this.readSync(e.dataId),u=e.size,l=new Float32Array(u);function c(e){for(var n=e%a,r=e-n+Math.max(0,n-t),o=e-n+Math.min(n+t,i),u=0;r<=o;r++){var l=s[r];u+=l*l}return u}for(var d=0;d<u;d++){var p=c(d),f=s[d]*Math.pow(n+r*p,-o);l[d]=f}return wn(l,e.shape)},t.prototype.LRNGrad=function(e,t,n,r,o,a,i){gd(e,"LRNGrad");for(var s=e.shape[3],u=this.readSync(e.dataId),l=this.readSync(t.dataId),c=this.readSync(n.dataId),d=new Float32Array(e.size),p=e.size,f=0;f<p;f++){for(var h=f%s,v=f-h+Math.max(0,h-r),m=f-h+Math.min(s,h+r+1),g=0,y=v;y<m;y++)g+=Math.pow(l[y],2);for(g=a*g+o,y=v;y<m;y++){var b=-2*a*i*l[y]*c[f]/g;f===y&&(b+=Math.pow(g,-i)),b*=u[f],d[y]+=b}}return wn(d,e.shape)},t.prototype.multinomial=function(e,t,n,r){gd(e,"multinomial");for(var o=t?e:zr(e),a=o.shape[0],i=o.shape[1],s=Sn([a,n],"int32"),u=this.readSync(s.dataId),l=this.readSync(o.dataId),c=0;c<a;++c){var d=c*i,p=new Float32Array(i-1);p[0]=l[d];for(var f=1;f<p.length;++f)p[f]=p[f-1]+l[d+f];for(var h=$n(r.toString()),v=c*n,m=0;m<n;++m){var g=h();u[v+m]=p.length;for(var y=0;y<p.length;y++)if(g<p[y]){u[v+m]=y;break}}}return s},t.prototype.oneHot=function(e,t,n,r){gd(e,"oneHot");var o=new Float32Array(e.size*t);o.fill(r);for(var a=this.readSync(e.dataId),i=0;i<e.size;++i)a[i]>=0&&a[i]<t&&(o[i*t+a[i]]=n);return yn(o,[e.size,t],"int32")},t.prototype.nonMaxSuppression=function(e,t,n,r,o){return gd(e,"nonMaxSuppression"),wo(this.readSync(e.dataId),this.readSync(t.dataId),n,r,o)},t.prototype.fft=function(e){return this.fftBatch(e,!1)},t.prototype.ifft=function(e){return this.fftBatch(e,!0)},t.prototype.fftBatch=function(e,t){for(var n=e.shape[0],r=e.shape[1],o=Xn(e.shape,"float32"),a=Xn(e.shape,"float32"),i=pn(e).as2D(n,r),s=fn(e).as2D(n,r),u=0;u<n;u++)for(var l=i.slice([u,0],[1,r]),c=s.slice([u,0],[1,r]),d=dn(l,c),p=this.readSync(this.fftImpl(d,t).dataId),f=0;f<r;f++){var h=vo(p,f);o.values[u*r+f]=h.real,a.values[u*r+f]=h.imag}return dn(o.toTensor(),a.toTensor()).as2D(n,r)},t.prototype.fftImpl=function(e,t){var n=e.as1D(),r=n.size;if(this.isExponentOf2(r)){var o=this.fftRadix2(n,r,t).as2D(e.shape[0],e.shape[1]);return t&&(o=dn(pn(o).div(mn(r)),fn(o).div(mn(r)))),o}var a=this.readSync(e.dataId),i=function(e){for(var t=new Float32Array(e.length/2),n=new Float32Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}(this.fourierTransformByMatmul(a,r,t));return dn(i.real,i.imag).as2D(e.shape[0],e.shape[1])},t.prototype.isExponentOf2=function(e){return 0==(e&e-1)},t.prototype.fftRadix2=function(e,t,n){if(1===t)return e;var r=this.readSync(e.dataId),o=t/2,a=function(e){for(var t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t),o=0;o<e.length;o+=4)n[Math.floor(o/4)]=e[o],r[Math.floor(o/4)]=e[o+1];return{real:n,imag:r}}(r),i=dn(a.real,a.imag).as1D(),s=function(e){for(var t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t),o=2;o<e.length;o+=4)n[Math.floor(o/4)]=e[o],r[Math.floor(o/4)]=e[o+1];return{real:n,imag:r}}(r),u=dn(s.real,s.imag).as1D();i=this.fftRadix2(i,o,n),u=this.fftRadix2(u,o,n);var l=function(e,t){for(var n=new Float32Array(e/2),r=new Float32Array(e/2),o=0;o<Math.ceil(e/2);o++){var a=(t?2:-2)*Math.PI*(o/e);n[o]=Math.cos(a),r[o]=Math.sin(a)}return{real:n,imag:r}}(t,n),c=dn(l.real,l.imag).mul(u),d=i.add(c),p=i.sub(c),f=pn(d).concat(pn(p)),h=fn(d).concat(fn(p));return dn(f,h).as1D()},t.prototype.fourierTransformByMatmul=function(e,t,n){for(var r=new Float32Array(2*t),o=0;o<t;o++){for(var a=0,i=0,s=0;s<t;s++){var u=go(o*s,t,n),l=vo(e,s);a+=l.real*u.real-l.imag*u.imag,i+=l.real*u.imag+l.imag*u.real}n&&(a/=t,i/=t),mo(r,a,i,o)}return r},t.prototype.depthToSpace=function(e,t,n){_("NHWC"===n,(function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+n})),_(t>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: "+t}));for(var r=e.shape[0],o=e.shape[1],a=e.shape[2],i=e.shape[3],s=o*t,u=a*t,l=i/(t*t),c=this.readSync(e.dataId),d=new Float32Array(r*s*u*l),p=0,f=0;f<r;++f)for(var h=0;h<s;++h)for(var v=Math.floor(h/t),m=h%t,g=0;g<u;++g)for(var y=Math.floor(g/t),b=(m*t+g%t)*l,w=0;w<l;++w){var x=w+b+i*(y+a*(v+o*f));d[p++]=c[x]}return wn(d,[r,s,u,l])},t.prototype.broadcastedBinaryOp=function(e,t,n,r){var o=Zr(e.shape,t.shape),a=Xn(o,n),i=this.readSync(e.dataId),s=this.readSync(t.dataId),u=Xr(e.shape,o),l=Xr(t.shape,o),c=a.values;if(u.length+l.length===0)for(var d=0;d<c.length;++d)c[d]=r(i[d%i.length],s[d%s.length]);else{var p=this.bufferSync(e),f=this.bufferSync(t),h=function(n){var o=a.indexToLoc(n),d=o.slice(-e.rank);u.forEach((function(e){return d[e]=0}));var h=p.locToIndex(d),v=o.slice(-t.rank);l.forEach((function(e){return v[e]=0}));var m=f.locToIndex(v);c[n]=r(i[h],s[m])};for(d=0;d<c.length;++d)h(d)}return a.toTensor()},t.prototype.broadcastedBinaryComplexOp=function(e,t,n){var r=Zr(e.shape,t.shape),o=Xn(r,"float32"),a=Xn(r,"float32"),i=this.readSync(e.dataId),s=this.readSync(t.dataId),u=Xr(e.shape,r),l=Xr(t.shape,r),c=o.values,d=a.values;if(u.length+l.length===0)for(var p=0;p<c.length;p++){var f=p%i.length,h=p%s.length,v=n(i[2*f],i[2*f+1],s[2*h],s[2*h+1]);c[p]=v.real,d[p]=v.imag}else{var m=this.bufferSync(this.data.get(e.dataId).complexTensors.real),g=this.bufferSync(this.data.get(t.dataId).complexTensors.real),y=function(r){var a=o.indexToLoc(r),p=a.slice(-e.rank);u.forEach((function(e){return p[e]=0}));var f=m.locToIndex(p),h=a.slice(-t.rank);l.forEach((function(e){return h[e]=0}));var v=g.locToIndex(h),y=n(i[2*f],i[2*f+1],s[2*v],s[2*v+1]);c[r]=y.real,d[r]=y.imag};for(p=0;p<c.length;p++)y(p)}return this.complex(o.toTensor(),a.toTensor())},t.prototype.split=function(e,t,n){return Eo(e,t,n)},t.prototype.dispose=function(){},t.prototype.floatPrecision=function(){return 32},t.prototype.epsilon=function(){return 1e-7},t.prototype.cropAndResize=function(e,t,n,r,o,a){for(var i=e.shape,s=i[0],u=i[1],l=i[2],c=i[3],d=t.shape[0],p=r[0],f=r[1],h=Xn([d,p,f,c],"float32"),v=this.readSync(t.dataId),m=this.readSync(n.dataId),g=this.readSync(e.dataId),y=e.strides,b=h.strides,w=0;w<d;w++){var x=4*w,C=v[x],_=v[x+1],k=v[x+2],S=v[x+3],E=m[w];if(!(E>=s))for(var I=p>1?(k-C)*(u-1)/(p-1):0,A=f>1?(S-_)*(l-1)/(f-1):0,F=0;F<p;F++){var D=p>1?C*(u-1)+F*I:.5*(C+k)*(u-1);if(D<0||D>u-1)for(var R=0;R<f;R++)for(var T=0;T<c;T++){var O=T+R*b[2]+F*b[1]+w*b[0];h.values[O]=a}else if("bilinear"===o){var P=Math.floor(D),B=Math.ceil(D),M=D-P;for(R=0;R<f;R++)if(($=f>1?_*(l-1)+R*A:.5*(_+S)*(l-1))<0||$>l-1)for(T=0;T<c;T++)O=T+R*b[2]+F*b[1]+w*b[0],h.values[O]=a;else{var N=Math.floor($),L=Math.ceil($),V=$-N;for(T=0;T<c;T++){var j=g[O=T+N*y[2]+P*y[1]+E*y[0]],W=g[O=T+L*y[2]+P*y[1]+E*y[0]],H=g[O=T+N*y[2]+B*y[1]+E*y[0]],U=j+(W-j)*V,z=H+(g[O=T+L*y[2]+B*y[1]+E*y[0]]-H)*V;O=T+R*b[2]+F*b[1]+w*b[0],h.values[O]=U+(z-U)*M}}}else for(R=0;R<f;++R){var $;if(($=f>1?_*(l-1)+R*A:.5*(_+S)*(l-1))<0||$>l-1)for(T=0;T<c;T++)O=T+R*b[2]+F*b[1]+w*b[0],h.values[O]=a;else{var q=Math.round($),G=Math.round(D);for(T=0;T<c;T++){var K=T+q*y[2]+G*y[1]+E*y[0],X=T+R*b[2]+F*b[1]+w*b[0];h.values[X]=g[K]}}}}}return h.toTensor()},t.prototype.sparseToDense=function(e,t,n,r){var o=Pr(0,e,n),a=o.sliceRank,i=o.numUpdates,s=o.sliceSize,u=o.strides,l=o.outputSize;return this.scatter(e,t,n,l,s,i,a,u,r,!1)},t.prototype.gatherND=function(e,t){var n=t.shape,r=n[n.length-1],o=Fr(e,t),a=o[0],i=o[1],s=o[2],u=o[3];if(0===i)return hn([],a,e.dtype);for(var l=new ge([i,s],e.dtype),c=this.readSync(t.dataId),d=this.readSync(e.dataId),p=0;p<i;p++){for(var f=[],h=0,v=0;v<r;v++){var m=c[p*r+v];h+=m*u[v],f.push(m)}if(h<0||h>=e.size/s)throw new Error("Invalid indices: "+f+" does not index into "+e.shape);for(var g=0;g<s;g++)l.values[p*s+g]=d[h*s+g]}return l.toTensor().reshape(a)},t.prototype.scatterND=function(e,t,n){var r=Pr(0,e,n),o=r.sliceRank,a=r.numUpdates,i=r.sliceSize,s=r.strides,u=r.outputSize,l=mn(0);return this.scatter(e,t,n,u,i,a,o,s,l,!0)},t.prototype.fill=function(e,t,n){var r=L(n=n||K(t),I(e));return r.fill(t),Ne.makeTensor(r,e,n,this)},t.prototype.onesLike=function(e){if("string"===e.dtype)throw new Error("onesLike is not supported for string tensors");return this.fill(e.shape,1,e.dtype)},t.prototype.zerosLike=function(e){var t=L(e.dtype,I(e.shape));return this.makeOutput(t,e.shape,e.dtype)},t.prototype.linspace=function(e,t,n){return fo(e,t,n)},t.prototype.scatter=function(e,t,n,r,o,a,i,s,u,l){var c=[r/o,o],d=this.readSync(e.dataId),p=this.readSync(t.dataId);if(0===r)return hn([],n,t.dtype);var f=new ge(c,t.dtype);f.values.fill(this.readSync(u.dataId)[0]);for(var h=0;h<a;h++){for(var v=[],m=0,g=0;g<i;g++){var y=d[h*i+g];v.push(y),m+=y*s[g]}if(m<0||m>=r/o)throw new Error("Invalid indices: "+v+" does not index into "+n);for(var b=0;b<o;b++)l?f.values[m*o+b]+=p[h*o+b]:f.values[m*o+b]=0===t.rank?p[0]:p[h*o+b]}return f.toTensor().reshape(n)},t}(Gr);Ne.registerBackend("cpu",(function(){return new bd}),1);for(var wd=0,xd=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t,a=o.boxes,i=o.scores,s=r,u=s.maxOutputSize,l=s.iouThreshold,c=s.scoreThreshold,d=s.softNmsSigma,p=n;gd(a,"NonMaxSuppressionWithScore");var f=xo(p.data.get(a.dataId).values,p.data.get(i.dataId).values,u,l,c,d);return[f.selectedIndices,f.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,o=n;gd(r,"square");for(var a=o.data.get(r.dataId).values,i=new Float32Array(a.length),s=0;s<a.length;++s){var u=a[s];i[s]=u*u}return{dataId:o.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},{kernelName:As,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,o=r.a,a=r.b,i=n;gd([o,a],As);var s=i.data.get(o.dataId).values,u=i.data.get(a.dataId).values,l=function(e,t,n,r,o,a){var i=Zr(e,t),s=i.length,u=Z(i),l=N(o,I(i)),c=e.length,d=t.length,p=Z(e),f=Z(t),h=Xr(e,i),v=Xr(t,i);if(h.length+v.length===0)for(var m=0;m<l.length;++m)l[m]=a(n[m%n.length],r[m%r.length]);else{var g=function(e){var t=se(e,s,u),o=t.slice(-c);h.forEach((function(e){return o[e]=0}));var i=ie(o,c,p),m=t.slice(-d);v.forEach((function(e){return m[e]=0}));var g=ie(m,d,f);l[e]=a(n[i],r[g])};for(m=0;m<l.length;++m)g(m)}return[l,i]}(o.shape,a.shape,s,u,o.dtype,(function(e,t){var n=e-t;return n*n})),c=l[0],d=l[1];return{dataId:i.write(c,d,o.dtype),shape:d,dtype:o.dtype}}}];wd<xd.length;wd++)m(xd[wd]);for(var Cd,_d=function(e){this.variableNames=["A"];var t=Bo(),n=e[0],r=e[1];this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+r+".0, "+n+".0);\n\n        vec4 values = "+t.texture2D+"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    "},kd=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var t=Bo(),n=e[0],r=e[1];this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2("+r+".0, "+n+".0);\n            vec4 values = "+t.texture2D+"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        "+t.output+" = result;\n      }\n    "},Sd=0,Ed=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.pixels,a=r.numChannels,i="undefined"!=typeof HTMLVideoElement&&o instanceof HTMLVideoElement,s="undefined"!=typeof HTMLImageElement&&o instanceof HTMLImageElement,u=i?[o.videoWidth,o.videoHeight]:[o.width,o.height],c=u[0],d=u[1],p=[d,c],f=[d,c,a];(s||i)&&(null==Cd&&(Cd=document.createElement("canvas").getContext("2d")),Cd.canvas.width=c,Cd.canvas.height=d,Cd.drawImage(o,0,0,c,d),o=Cd.canvas);var h=n.makeTensorInfo(p,"int32");n.texData.get(h.dataId).usage=We.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(h.dataId),o);var v=l().getBool("WEBGL_PACK")?new kd(f):new _d(f),m=n.runWebGLProgram(v,[h],"int32");return n.disposeData(h.dataId),m}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;Kt("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var o=t,a=o.boxes,i=o.scores,s=r,u=s.maxOutputSize,l=s.iouThreshold,c=s.scoreThreshold,d=s.softNmsSigma,p=n,f=xo(p.readSync(a.dataId),p.readSync(i.dataId),u,l,c,d);return[f.selectedIndices,f.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,o=n,a=new Xi(r.shape,"return x * x;");return o.runWebGLProgram(a,[r],r.dtype)}},{kernelName:As,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,o=r.a,a=r.b,i=n,s=l().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new da("return (a - b) * (a - b);",o.shape,a.shape):new la("return (a - b) * (a - b);",o.shape,a.shape);return i.compileAndRun(s,[o,a])}}];Sd<Ed.length;Sd++)m(Ed[Sd]);for(var Id=0,Ad=[{kernelName:"Square",gradFunc:function(e,t){var n=t[0];return{x:function(){return e.mul(n.toFloat().mul(2))}}}},{kernelName:As,gradFunc:function(e,t){var n=t[0],r=t[1],o=mn(2);return{a:function(){return zu(e,zu(o,Xu(n,r)))},b:function(){return zu(e,zu(o,Xu(r,n)))}}}}];Id<Ad.length;Id++)g(Ad[Id]);var Fd=function(){function e(){}return e.prototype.fetch=function(e,t){return fetch(e,t)},e.prototype.now=function(){return performance.now()},e.prototype.encode=function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got "+t);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)},e.prototype.decode=function(e,t){return new TextDecoder(t).decode(e)},e}();l().get("IS_BROWSER")&&l().setPlatform("browser",new Fd);var Dd,Rd=function(){return n(522)},Td=function(){function e(){this.util=n(753),this.textEncoder=new this.util.TextEncoder}return e.prototype.fetch=function(e,t){return null!=l().global.fetch?l().global.fetch(e,t):(null==Dd&&(Dd=Rd()),Dd(e,t))},e.prototype.now=function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6},e.prototype.encode=function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got "+t);return this.textEncoder.encode(e)},e.prototype.decode=function(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)},e}();l().get("IS_NODE")&&l().setPlatform("node",new Td);var Od={float32:4,int32:4,uint16:2,uint8:1,bool:1},Pd=4;function Bd(e,t){for(var n={},r=0,o=function(t){var o=t.name,a=t.dtype,i=t.shape,s=I(i),u=void 0;if("quantization"in t){var l=t.quantization;if("uint8"!==l.dtype&&"uint16"!==l.dtype)throw new Error("Weight "+t.name+" has unknown quantization dtype "+l.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var c=Od[l.dtype],d=e.slice(r,r+s*c),p="uint8"===l.dtype?new Uint8Array(d):new Uint16Array(d);if("float32"===a)u=Float32Array.from(p,(function(e){return e*l.scale+l.min}));else{if("int32"!==a)throw new Error("Unsupported dtype in weight '"+o+"': "+a);u=Int32Array.from(p,(function(e){return Math.round(e*l.scale+l.min)}))}r+=s*c}else if("string"===a){var f=I(t.shape);u=[];for(var h=0;h<f;h++){var v=new Uint32Array(e.slice(r,r+Pd))[0];r+=Pd;var m=new Uint8Array(e.slice(r,r+v));u.push(m),r+=v}}else{var g=Od[a];if(d=e.slice(r,r+s*g),"float32"===a)u=new Float32Array(d);else if("int32"===a)u=new Int32Array(d);else{if("bool"!==a)throw new Error("Unsupported dtype in weight '"+o+"': "+a);u=new Uint8Array(d)}r+=s*g}n[o]=hn(u,i,a)},a=0,i=t;a<i.length;a++)o(i[a]);return n}function Md(e){if(null===e)throw new Error("Invalid input value: "+JSON.stringify(e));var t=0,n=[];e.forEach((function(e){if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+e.constructor.name)}));var r=new Uint8Array(t),o=0;return n.forEach((function(e){r.set(new Uint8Array(e.buffer),o),o+=e.byteLength})),r.buffer}var Nd="undefined"!=typeof Buffer&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function Ld(e){return Nd?Buffer.byteLength(e):new Blob([e]).size}function Vd(e){var t=0;e.forEach((function(e){t+=e.byteLength}));var n=new Uint8Array(t),r=0;return e.forEach((function(e){n.set(new Uint8Array(e),r),r+=e.byteLength})),n.buffer}function jd(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function Wd(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:Ld(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:Ld(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}var Hd=function(){function e(){this.saveRouters=[],this.loadRouters=[]}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.registerSaveRouter=function(t){e.getInstance().saveRouters.push(t)},e.registerLoadRouter=function(t){e.getInstance().loadRouters.push(t)},e.getSaveHandlers=function(t){return e.getHandlers(t,"save")},e.getLoadHandlers=function(t,n){return e.getHandlers(t,"load",n)},e.getHandlers=function(t,n,r){var o=[];return("load"===n?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach((function(e){var n=e(t,r);null!==n&&o.push(n)})),o},e}(),Ud="://",zd=function(){function e(){this.managers={}}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.registerManager=function(t,n){_(null!=t,(function(){return"scheme must not be undefined or null."})),t.endsWith(Ud)&&(t=t.slice(0,t.indexOf(Ud))),_(t.length>0,(function(){return"scheme must not be an empty string."}));var r=e.getInstance();_(null==r.managers[t],(function(){return"A model store manager is already registered for scheme '"+t+"'."})),r.managers[t]=n},e.getManager=function(e){var t=this.getInstance().managers[e];if(null==t)throw new Error("Cannot find model manager for scheme '"+e+"'");return t},e.getSchemes=function(){return Object.keys(this.getInstance().managers)},e}();function $d(e){if(-1===e.indexOf(Ud))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+zd.getSchemes().join(","));return{scheme:e.split(Ud)[0],path:e.split(Ud)[1]}}function qd(e,t,n){return void 0===n&&(n=!1),a(this,void 0,void 0,(function(){var r,o,a,s,u,l,c,d,p;return i(this,(function(i){switch(i.label){case 0:return _(e!==t,(function(){return"Old path and new path are the same: '"+e+"'"})),_((r=Hd.getLoadHandlers(e)).length>0,(function(){return"Copying failed because no load handler is found for source URL "+e+"."})),_(r.length<2,(function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+e+"."})),o=r[0],_((a=Hd.getSaveHandlers(t)).length>0,(function(){return"Copying failed because no save handler is found for destination URL "+t+"."})),_(a.length<2,(function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+t+"."})),s=a[0],u=$d(e).scheme,l=$d(e).path,c=u===$d(e).scheme,[4,o.load()];case 1:return d=i.sent(),n&&c?[4,zd.getManager(u).removeModel(l)]:[3,3];case 2:i.sent(),i.label=3;case 3:return[4,s.save(d)];case 4:return p=i.sent(),!n||c?[3,6]:[4,zd.getManager(u).removeModel(l)];case 5:i.sent(),i.label=6;case 6:return[2,p.modelArtifactsInfo]}}))}))}var Gd="models_store",Kd="model_info_store";function Xd(){if(!l().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e=window||self,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function Yd(e){var t=e.result;t.createObjectStore(Gd,{keyPath:"modelPath"}),t.createObjectStore(Kd,{keyPath:"modelPath"})}var Zd=function(){function e(e){if(this.indexedDB=Xd(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}return e.prototype.save=function(e){return a(this,void 0,void 0,(function(){return i(this,(function(t){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,e)]}))}))},e.prototype.load=function(){return a(this,void 0,void 0,(function(){return i(this,(function(e){return[2,this.databaseAction(this.modelPath)]}))}))},e.prototype.databaseAction=function(e,t){var n=this;return new Promise((function(e,r){var o=n.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return Yd(o)},o.onsuccess=function(){var a=o.result;if(null==t){var i=a.transaction(Gd,"readonly"),s=i.objectStore(Gd).get(n.modelPath);s.onsuccess=function(){if(null==s.result)return a.close(),r(new Error("Cannot find model with path '"+n.modelPath+"' in IndexedDB."));e(s.result.modelArtifacts)},s.onerror=function(e){return a.close(),r(s.error)},i.oncomplete=function(){return a.close()}}else{var u,l=Wd(t),c=a.transaction(Kd,"readwrite"),d=c.objectStore(Kd),p=d.put({modelPath:n.modelPath,modelArtifactsInfo:l});p.onsuccess=function(){var o=(u=a.transaction(Gd,"readwrite")).objectStore(Gd).put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:l});o.onsuccess=function(){return e({modelArtifactsInfo:l})},o.onerror=function(e){var t=(d=c.objectStore(Kd)).delete(n.modelPath);t.onsuccess=function(){return a.close(),r(o.error)},t.onerror=function(e){return a.close(),r(o.error)}}},p.onerror=function(e){return a.close(),r(p.error)},c.oncomplete=function(){null==u?a.close():u.oncomplete=function(){return a.close()}}}},o.onerror=function(e){return r(o.error)}}))},e.URL_SCHEME="indexeddb://",e}(),Jd=function(e){return l().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Zd.URL_SCHEME)?(t=e.slice(Zd.URL_SCHEME.length),new Zd(t)):null;var t};Hd.registerSaveRouter(Jd),Hd.registerLoadRouter(Jd);var Qd=function(){function e(){this.indexedDB=Xd()}return e.prototype.listModels=function(){return a(this,void 0,void 0,(function(){var e=this;return i(this,(function(t){return[2,new Promise((function(t,n){var r=e.indexedDB.open("tensorflowjs",1);r.onupgradeneeded=function(){return Yd(r)},r.onsuccess=function(){var e=r.result,o=e.transaction(Kd,"readonly"),a=o.objectStore(Kd).getAll();a.onsuccess=function(){for(var e={},n=0,r=a.result;n<r.length;n++){var o=r[n];e[o.modelPath]=o.modelArtifactsInfo}t(e)},a.onerror=function(t){return e.close(),n(a.error)},o.oncomplete=function(){return e.close()}},r.onerror=function(e){return n(r.error)}}))]}))}))},e.prototype.removeModel=function(e){return a(this,void 0,void 0,(function(){var t=this;return i(this,(function(n){var r;return e=(r=e).startsWith(Zd.URL_SCHEME)?r.slice(Zd.URL_SCHEME.length):r,[2,new Promise((function(n,r){var o=t.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return Yd(o)},o.onsuccess=function(){var t,a=o.result,i=a.transaction(Kd,"readwrite"),s=i.objectStore(Kd),u=s.get(e);u.onsuccess=function(){if(null==u.result)return a.close(),r(new Error("Cannot find model with path '"+e+"' in IndexedDB."));var o=s.delete(e),i=function(){var o=(t=a.transaction(Gd,"readwrite")).objectStore(Gd).delete(e);o.onsuccess=function(){return n(u.result.modelArtifactsInfo)},o.onerror=function(e){return r(u.error)}};o.onsuccess=i,o.onerror=function(e){return i(),a.close(),r(u.error)}},u.onerror=function(e){return a.close(),r(u.error)},i.oncomplete=function(){null==t?a.close():t.oncomplete=function(){return a.close()}}},o.onerror=function(e){return r(o.error)}}))]}))}))},e}();if(l().getBool("IS_BROWSER"))try{zd.registerManager(Zd.URL_SCHEME,new Qd)}catch(r){}var ep="/",tp="tensorflowjs_models",np="info",rp="model_topology",op="weight_specs",ap="weight_data",ip="model_metadata";function sp(e){return{info:[tp,e,np].join(ep),topology:[tp,e,rp].join(ep),weightSpecs:[tp,e,op].join(ep),weightData:[tp,e,ap].join(ep),modelMetadata:[tp,e,ip].join(ep)}}function up(e){var t=e.split(ep);if(t.length<3)throw new Error("Invalid key format: "+e);return t.slice(1,t.length-1).join(ep)}var lp=function(){function e(e){if(!l().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=sp(this.modelPath)}return e.prototype.save=function(e){return a(this,void 0,void 0,(function(){var t,n,r;return i(this,(function(o){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");t=JSON.stringify(e.modelTopology),n=JSON.stringify(e.weightSpecs),r=Wd(e);try{return this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,function(e){if(Nd)return Buffer.from(e).toString("base64");for(var t=new Uint8Array(e),n="",r=0,o=t.length;r<o;r++)n+=String.fromCharCode(t[r]);return btoa(n)}(e.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata})),[2,{modelArtifactsInfo:r}]}catch(e){throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+r.modelTopologyBytes+", weightSpecsBytes="+r.weightSpecsBytes+", weightDataBytes="+r.weightDataBytes+".")}return[2]}))}))},e.prototype.load=function(){return a(this,void 0,void 0,(function(){var e,t,n,r,o,a,s;return i(this,(function(i){if(null==(e=JSON.parse(this.LS.getItem(this.keys.info))))throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(t={},null==(n=JSON.parse(this.LS.getItem(this.keys.topology))))throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(t.modelTopology=n,null==(r=JSON.parse(this.LS.getItem(this.keys.weightSpecs))))throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(t.weightSpecs=r,null!=(o=this.LS.getItem(this.keys.modelMetadata))&&(a=JSON.parse(o),t.format=a.format,t.generatedBy=a.generatedBy,t.convertedBy=a.convertedBy,t.userDefinedMetadata=a.userDefinedMetadata),null==(s=this.LS.getItem(this.keys.weightData)))throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return t.weightData=function(e){if(Nd){var t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}for(var n=atob(e),r=new Uint8Array(n.length),o=0;o<n.length;++o)r.set([n.charCodeAt(o)],o);return r.buffer}(s),[2,t]}))}))},e.URL_SCHEME="localstorage://",e}(),cp=function(e){return l().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(lp.URL_SCHEME)?(t=e.slice(lp.URL_SCHEME.length),new lp(t)):null;var t};Hd.registerSaveRouter(cp),Hd.registerLoadRouter(cp);var dp=function(){function e(){_(l().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),_("undefined"==typeof window||void 0!==window.localStorage,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}return e.prototype.listModels=function(){return a(this,void 0,void 0,(function(){var e,t,n,r,o,a;return i(this,(function(i){for(e={},t=tp+ep,n=ep+np,r=0;r<this.LS.length;++r)(o=this.LS.key(r)).startsWith(t)&&o.endsWith(n)&&(a=up(o),e[a]=JSON.parse(this.LS.getItem(o)));return[2,e]}))}))},e.prototype.removeModel=function(e){return a(this,void 0,void 0,(function(){var t,n;return i(this,(function(r){var o;if(e=(o=e).startsWith(lp.URL_SCHEME)?o.slice(lp.URL_SCHEME.length):o,t=sp(e),null==this.LS.getItem(t.info))throw new Error("Cannot find model at path '"+e+"'");return n=JSON.parse(this.LS.getItem(t.info)),this.LS.removeItem(t.info),this.LS.removeItem(t.topology),this.LS.removeItem(t.weightSpecs),this.LS.removeItem(t.weightData),[2,n]}))}))},e}();if(l().getBool("IS_BROWSER"))try{zd.registerManager(lp.URL_SCHEME,new dp)}catch(r){}var pp="model",fp=".json",hp=".weights.bin";function vp(e){return new Promise((function(e){return setTimeout(e)})).then(e)}var mp=function(){function e(t){if(!l().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),null!=t&&0!==t.length||(t=pp),this.modelTopologyFileName=t+fp,this.weightDataFileName=t+hp}return e.prototype.save=function(e){return a(this,void 0,void 0,(function(){var t,n,r,o,a,s;return i(this,(function(i){switch(i.label){case 0:if("undefined"==typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(t=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"})),!(e.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return n=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:n},o=window.URL.createObjectURL(new Blob([JSON.stringify(r)],{type:"application/json"})),(a=null==this.jsonAnchor?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,a.href=o,[4,vp((function(){return a.dispatchEvent(new MouseEvent("click"))}))];case 2:return i.sent(),null==e.weightData?[3,4]:((s=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=t,[4,vp((function(){return s.dispatchEvent(new MouseEvent("click"))}))]);case 3:i.sent(),i.label=4;case 4:return[2,{modelArtifactsInfo:Wd(e)}]}}))}))},e.URL_SCHEME="downloads://",e}(),gp=function(){function e(e){if(null==e||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+e);this.files=e}return e.prototype.load=function(){return a(this,void 0,void 0,(function(){var e,t,n=this;return i(this,(function(r){return e=this.files[0],t=this.files.slice(1),[2,new Promise((function(r,o){var a=new FileReader;a.onload=function(a){var i=JSON.parse(a.target.result),s=i.modelTopology;if(null!=s){0===t.length&&r({modelTopology:s});var u=i.weightsManifest;if(null!=u){var l;try{l=n.checkManifestAndWeightFiles(u,t)}catch(e){return void o(e)}var c=[],d=[],p=[];u.forEach((function(e){e.paths.forEach((function(e){d.push(e),p.push(null)})),c.push.apply(c,e.weights)})),u.forEach((function(e){e.paths.forEach((function(e){var t=new FileReader;t.onload=function(t){var n=t.target.result,o=d.indexOf(e);p[o]=n,-1===p.indexOf(null)&&r({modelTopology:s,weightSpecs:c,weightData:Vd(p),format:i.format,generatedBy:i.generatedBy,convertedBy:i.convertedBy,userDefinedMetadata:i.userDefinedMetadata})},t.onerror=function(t){return o("Failed to weights data from file of path '"+e+"'.")},t.readAsArrayBuffer(l[e])}))}))}else o(new Error("weightManifest field is missing from file "+e.name))}else o(new Error("modelTopology field is missing from file "+e.name))},a.onerror=function(t){return o("Failed to read model topology and weights manifest JSON from file '"+e.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},a.readAsText(e)}))]}))}))},e.prototype.checkManifestAndWeightFiles=function(e,t){for(var n=[],r=t.map((function(e){return jd(e.name)})),o={},a=0,i=e;a<i.length;a++)i[a].paths.forEach((function(e){var a=jd(e);if(-1!==n.indexOf(a))throw new Error("Duplicate file basename found in weights manifest: '"+a+"'");if(n.push(a),-1===r.indexOf(a))throw new Error("Weight file with basename '"+a+"' is not provided.");o[e]=t[r.indexOf(a)]}));if(n.length!==t.length)throw new Error("Mismatch in the number of files in weights manifest ("+n.length+") and the number of weight files provided ("+t.length+").");return o},e}();function yp(e,t,n,r){!function(e){_(null!=e&&Array.isArray(e)&&e.length>0,(function(){return"promises must be a none empty array"}))}(e),function(e,t){_(e>=0&&e<=1,(function(){return"Progress fraction must be in range [0, 1], but got startFraction "+e})),_(t>=0&&t<=1,(function(){return"Progress fraction must be in range [0, 1], but got endFraction "+t})),_(t>=e,(function(){return"startFraction must be no more than endFraction, but got startFraction "+e+" and endFraction "+t}))}(n=null==n?0:n,r=null==r?1:r);var o=0;return Promise.all(e.map((function(a){return a.then((function(a){var i=n+ ++o/e.length*(r-n);return t(i),a})),a})))}function bp(e,t){return a(this,void 0,void 0,(function(){var n,r,o,a,s,u,c,d,p;return i(this,(function(i){switch(i.label){case 0:return null==t&&(t={}),n=null==t.fetchFunc?l().platform.fetch:t.fetchFunc,r=e.map((function(e){return n(e,t.requestInit,{isBinary:!0})})),o=0,a=.5,null!=t.onProgress?[3,2]:[4,Promise.all(r)];case 1:return s=i.sent(),[3,4];case 2:return[4,yp(r,t.onProgress,o,a)];case 3:s=i.sent(),i.label=4;case 4:return u=s.map((function(e){return e.arrayBuffer()})),c=.5,d=1,null!=t.onProgress?[3,6]:[4,Promise.all(u)];case 5:return p=i.sent(),[3,8];case 6:return[4,yp(u,t.onProgress,c,d)];case 7:p=i.sent(),i.label=8;case 8:return[2,p]}}))}))}function wp(e){var t=this;return function(n,r,o){return void 0===r&&(r=""),a(t,void 0,void 0,(function(){var t,a,s,u,l,c,d,p,f,h;return i(this,(function(i){switch(i.label){case 0:if(t=n.map((function(){return!1})),a={},s=null!=o?o.map((function(){return!1})):[],u=[],n.forEach((function(e,n){var r=0;e.weights.forEach((function(e){var i="quantization"in e?e.quantization.dtype:e.dtype,l=Od[i]*I(e.shape),c=function(){t[n]=!0,null==a[n]&&(a[n]=[]),a[n].push({manifestEntry:e,groupOffset:r,sizeBytes:l})};null!=o?o.forEach((function(t,n){t===e.name&&(c(),s[n]=!0)})):c(),u.push(e.name),r+=l}))})),!s.every((function(e){return e})))throw l=o.filter((function(e,t){return!s[t]})),new Error("Could not find weights in manifest with names: "+l.join(", ")+". \nManifest JSON has weights with names: "+u.join(", ")+".");return c=t.reduce((function(e,t,n){return t&&e.push(n),e}),[]),d=[],c.forEach((function(e){n[e].paths.forEach((function(e){var t=r+(r.endsWith("/")?"":"/")+e;d.push(t)}))})),[4,e(d)];case 1:return p=i.sent(),f={},h=0,c.forEach((function(e){for(var t=n[e].paths.length,r=0,o=0;o<t;o++)r+=p[h+o].byteLength;for(var i=new ArrayBuffer(r),s=new Uint8Array(i),u=0,l=0;l<t;l++){var c=new Uint8Array(p[h+l]);s.set(c,u),u+=c.byteLength}a[e].forEach((function(e){var t=Bd(i.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(var n in t)f[n]=t[n]})),h+=t})),[2,f]}}))}))}}Hd.registerSaveRouter((function(e){return l().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(mp.URL_SCHEME)?function(e){return void 0===e&&(e="model"),new mp(e)}(e.slice(mp.URL_SCHEME.length)):null}));var xp=function(){function e(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.onProgress=t.onProgress,null!=t.fetchFunc?(_("function"==typeof t.fetchFunc,(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=t.fetchFunc):this.fetch=l().platform.fetch,_(null!=e&&e.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(e)&&_(2===e.length,(function(){return"URL paths for http must have a length of 2, (actual length is "+e.length+")."})),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{}}return e.prototype.save=function(e){return a(this,void 0,void 0,(function(){var t,n,r,o;return i(this,(function(a){switch(a.label){case 0:if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,n=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata,weightsManifest:n},t.body.append("model.json",new Blob([JSON.stringify(r)],{type:"application/json"}),"model.json"),null!=e.weightData&&t.body.append("model.weights.bin",new Blob([e.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,t)];case 1:if((o=a.sent()).ok)return[2,{modelArtifactsInfo:Wd(e),responses:[o]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+o.status+".")}}))}))},e.prototype.load=function(){return a(this,void 0,void 0,(function(){var e,t,n,r,o,a,s,u,l,c,d,p;return i(this,(function(i){switch(i.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(e=i.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+e.status+". Please verify this URL points to the model JSON of the model to load.");i.label=2;case 2:return i.trys.push([2,4,,5]),[4,e.json()];case 3:return t=i.sent(),[3,5];case 4:throw i.sent(),n="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?n+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":n+=" Please make sure the server is serving valid JSON for this request.",new Error(n);case 5:if(r=t.modelTopology,o=t.weightsManifest,a=t.generatedBy,s=t.convertedBy,u=t.format,l=t.userDefinedMetadata,null==r&&null==o)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return null==o?[3,7]:[4,this.loadWeights(o)];case 6:p=i.sent(),c=p[0],d=p[1],i.label=7;case 7:return[2,{modelTopology:r,weightSpecs:c,weightData:d,userDefinedMetadata:l,generatedBy:a,convertedBy:s,format:u}]}}))}))},e.prototype.loadWeights=function(e){return a(this,void 0,void 0,(function(){var t,n,r,o,a,s,u,l,c,d,p;return i(this,(function(i){switch(i.label){case 0:for(t=Array.isArray(this.path)?this.path[1]:this.path,n=function(e){var t=e.lastIndexOf("/"),n=e.lastIndexOf("?"),r=e.substring(0,t),o=n>t?e.substring(n):"";return[r+"/",o]}(t),r=n[0],o=n[1],a=this.weightPathPrefix||r,s=[],u=0,l=e;u<l.length;u++)c=l[u],s.push.apply(s,c.weights);return d=[],e.forEach((function(e){e.paths.forEach((function(e){d.push(a+e+o)}))})),[4,bp(d,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return p=i.sent(),[2,[s,Vd(p)]]}}))}))},e.URL_SCHEME_REGEX=/^https?:\/\//,e}();function Cp(e){return null!=e.match(xp.URL_SCHEME_REGEX)}var _p=function(e,t){return"undefined"==typeof fetch?null:(Array.isArray(e)?e.every((function(e){return Cp(e)})):Cp(e))?kp(e,{onProgress:t}):null};function kp(e,t){return new xp(e,t)}Hd.registerSaveRouter(_p),Hd.registerLoadRouter(_p);var Sp,Ep=function(){function e(e){this.modelArtifacts=e}return e.prototype.load=function(){return a(this,void 0,void 0,(function(){return i(this,(function(e){return[2,this.modelArtifacts]}))}))},e}(),Ip=function(){function e(e){this.saveHandler=e}return e.prototype.save=function(e){return a(this,void 0,void 0,(function(){return i(this,(function(t){return[2,this.saveHandler(e)]}))}))},e}(),Ap=Object.freeze({browserFiles:function(e){return new gp(e)},browserHTTPRequest:function(e,t){return kp(e,t)},concatenateArrayBuffers:Vd,decodeWeights:Bd,encodeWeights:function(e,t){return a(this,void 0,void 0,(function(){var n,r,o,s,u,l=this;return i(this,(function(c){switch(c.label){case 0:for(n=[],r=[],o=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e),s=function(s){var u=o[s],c=Array.isArray(e)?e[s].tensor:e[u];if("float32"!==c.dtype&&"int32"!==c.dtype&&"bool"!==c.dtype&&"string"!==c.dtype)throw new Error("Unsupported dtype in weight '"+u+"': "+c.dtype);var d={name:u,shape:c.shape,dtype:c.dtype};if("string"===c.dtype){var p=new Promise((function(e){return a(l,void 0,void 0,(function(){var t,n,r,o,a,s,u;return i(this,(function(i){switch(i.label){case 0:return[4,c.bytes()];case 1:for(t=i.sent(),n=t.reduce((function(e,t){return e+t.length}),0)+Pd*t.length,r=new Uint8Array(n),o=0,a=0;a<t.length;a++)s=t[a],u=new Uint8Array(new Uint32Array([s.length]).buffer),r.set(u,o),o+=Pd,r.set(s,o),o+=s.length;return e(r),[2]}}))}))}));r.push(p)}else r.push(c.data());null!=t&&(d.group=t),n.push(d)},u=0;u<o.length;++u)s(u);return[4,Promise.all(r)];case 1:return[2,{data:Md(c.sent()),specs:n}]}}))}))},fromMemory:function(e,t,n,r){return 1===arguments.length?null!=e.modelTopology||null!=e.weightSpecs?new Ep(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Ep({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new Ep({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r}))},getLoadHandlers:function(e,t){return Hd.getLoadHandlers(e,t)},getModelArtifactsInfoForJSON:Wd,getSaveHandlers:function(e){return Hd.getSaveHandlers(e)},http:kp,isHTTPScheme:Cp,loadWeights:function(e,t,n,r){return void 0===t&&(t=""),a(this,void 0,void 0,(function(){return i(this,(function(o){return[2,wp((function(e){return bp(e,{requestInit:r})}))(e,t,n)]}))}))},registerLoadRouter:function(e){return Hd.registerLoadRouter(e)},registerSaveRouter:function(e){return Hd.registerSaveRouter(e)},weightsLoaderFactory:wp,withSaveHandler:function(e){return new Ip(e)},copyModel:function(e,t){return a(this,void 0,void 0,(function(){return i(this,(function(n){return[2,qd(e,t,!1)]}))}))},listModels:function(){return a(this,void 0,void 0,(function(){var e,t,n,r,o,a,s;return i(this,(function(i){switch(i.label){case 0:e=zd.getSchemes(),t={},n=0,r=e,i.label=1;case 1:return n<r.length?(o=r[n],[4,zd.getManager(o).listModels()]):[3,4];case 2:for(s in a=i.sent())t[o+Ud+s]=a[s];i.label=3;case 3:return n++,[3,1];case 4:return[2,t]}}))}))},moveModel:function(e,t){return a(this,void 0,void 0,(function(){return i(this,(function(n){return[2,qd(e,t,!0)]}))}))},removeModel:function(e){return a(this,void 0,void 0,(function(){var t;return i(this,(function(n){return t=$d(e),[2,zd.getManager(t.scheme).removeModel(t.path)]}))}))}}),Fp=cn({confusionMatrix_:function(e,t,n){var r=Zt(e,"labels","confusionMatrix"),o=Zt(t,"predictions","confusionMatrix");_(null==n||n>0&&Number.isInteger(n),(function(){return"If provided, numClasses must be a positive integer, but got "+n})),_(1===r.rank,(function(){return"Expected the rank of labels to be 1, but got "+r.rank})),_(1===o.rank,(function(){return"Expected the rank of predictions to be 1, but got "+o.rank})),_(r.shape[0]===o.shape[0],(function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+o.shape[0]+". Labels and predictions should have the same number of elements."})),_(n>0&&Number.isInteger(n),(function(){return"numClasses is required to be a positive integer, but got "+n}));var a=ir(r.asType("int32"),n),i=ir(o.asType("int32"),n);return a.transpose().matMul(i).asType("int32")}}),Dp=(Object.freeze({confusionMatrix:Fp}),cn({fromPixels_:function(e,t){if(void 0===t&&(t=3),t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,o=!1,a=!1,i=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!=typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement)o=!0;else if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement)a=!0;else{if(null==e.getContext)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+e.constructor.name);i=!0}if(o&&o&&e.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(null!=f("FromPixels",Ne.backendName))return Ne.runKernel("FromPixels",{pixels:e},{numChannels:t});var s,u,l=o?[e.videoWidth,e.videoHeight]:[e.width,e.height],c=l[0],d=l[1];if(i?s=e.getContext("2d").getImageData(0,0,c,d).data:r||n?s=e.data:(a||o)&&(null==Sp&&(Sp=document.createElement("canvas").getContext("2d")),Sp.canvas.width=c,Sp.canvas.height=d,Sp.drawImage(e,0,0,c,d),s=Sp.getImageData(0,0,c,d).data),4===t)u=new Int32Array(s);else{var p=c*d;u=new Int32Array(p*t);for(var h=0;h<p;h++)for(var v=0;v<t;++v)u[h*t+v]=s[4*h+v]}return bn(u,[d,c,t],"int32")}})),Rp=Object.freeze({toPixels:function(e,t){return a(this,void 0,void 0,(function(){var n,r,o,a,s,u,l,c,d,p,f,h,v,m,g,y,b,w,x,C,_,k,S;return i(this,(function(i){switch(i.label){case 0:if(n=Zt(e,"img","toPixels"),e instanceof xe||(n=n.toInt()),2!==n.rank&&3!==n.rank)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+n.rank+".");if(r=n.shape.slice(0,2),o=r[0],a=r[1],(s=2===n.rank?1:n.shape[2])>4||2===s)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+s);return[4,n.data()];case 1:return u=i.sent(),l=n.min(),c=n.max(),[4,Promise.all([l.data(),c.data()])];case 2:if(d=i.sent(),p=d[0],f=d[1],h=p[0],v=f[0],l.dispose(),c.dispose(),"float32"===n.dtype){if(h<0||v>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+h+" - "+v+"].")}else{if("int32"!==n.dtype)throw new Error("Unsupported type for toPixels: "+n.dtype+". Please use float32 or int32 tensors.");if(h<0||v>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+h+" - "+v+"].")}for(m="float32"===n.dtype?255:1,g=new Uint8ClampedArray(a*o*4),y=0;y<o*a;++y)b=void 0,w=void 0,x=void 0,C=void 0,1===s?(b=u[y]*m,w=u[y]*m,x=u[y]*m,C=255):3===s?(b=u[3*y]*m,w=u[3*y+1]*m,x=u[3*y+2]*m,C=255):4===s&&(b=u[4*y]*m,w=u[4*y+1]*m,x=u[4*y+2]*m,C=u[4*y+3]*m),g[0+(_=4*y)]=Math.round(b),g[_+1]=Math.round(w),g[_+2]=Math.round(x),g[_+3]=Math.round(C);return null!=t&&(t.width=a,t.height=o,k=t.getContext("2d"),S=new ImageData(g,a,o),k.putImageData(S,0,0)),n!==e&&n.dispose(),[2,g]}}))}))},fromPixels:Dp}),Tp=function(){function e(){}return e.prototype.getClassName=function(){return this.constructor.className},e.fromConfig=function(e,t){return new e(t)},e}(),Op=function(){function e(){this.classNameMap={}}return e.getMap=function(){return null==e.instance&&(e.instance=new e),e.instance},e.register=function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]},e}();function Pp(e){_(null!=e.className,(function(){return"Class being registered does not have the static className property defined."})),_("string"==typeof e.className,(function(){return"className is required to be a string, but got type "+typeof e.className})),_(e.className.length>0,(function(){return"Class being registered has an empty-string as its className, which is disallowed."})),Op.register(e)}Object.freeze({Serializable:Tp,SerializationMap:Op,registerClass:Pp});var Bp=.001,Mp=.1;function Np(){return 32===Ne.backend.floatPrecision()?Bp:Mp}function Lp(e,t,n){var r=!0;if((H(e)||H(t))&&(r=!1),H(e)&&H(t)&&(r=!0),r){var o=e.constructor.name,a=t.constructor.name;if(o!==a)throw new Error("Arrays are of different type. Actual: "+o+". Expected: "+a)}if(Array.isArray(e)&&Array.isArray(t)){var i=Xt(e),s=Xt(t);if(!A(i,s))throw new Error("Arrays have different shapes. Actual: ["+i+"]. Expected: ["+s+"]")}var u=H(e)?e:E(e),l=H(t)?t:E(t);if(u.length!==l.length)throw new Error("Arrays have different lengths actual: "+u.length+" vs expected: "+l.length+".\nActual:   "+u+".\nExpected: "+l+".");for(var c=0;c<l.length;++c){var d=u[c],p=l[c];if(!n(d,p))throw new Error("Arrays differ: actual["+c+"] = "+d+", expected["+c+"] = "+p+".\nActual:   "+u+".\nExpected: "+l+".")}}function Vp(e,t,n){return!isFinite(e)&&!isFinite(t)||!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}Object.freeze({TEST_EPSILON_FLOAT16:Mp,expectArraysClose:function(e,t,n){return null==n&&(n=Np()),Lp(e,t,(function(e,t){return Vp(e,t,n)}))},testEpsilon:Np,expectPromiseToFail:function(e,t){e().then((function(){return t.fail()}),(function(){return t()}))},expectArraysEqual:function(e,t){var n="string"==typeof t||"number"==typeof t||"boolean"==typeof t?[t]:t;return $(e)||$(e[0])||$(t)||$(t[0])?Lp(e,n,(function(e,t){return e==t})):Lp(e,t,(function(e,t){return Vp(e,t,0)}))},expectNumbersClose:function(e,t,n){if(null==n&&(n=Np()),!Vp(e,t,n))throw new Error("Numbers differ: actual === "+e+", expected === "+t)},expectValuesInRange:function(e,t,n){for(var r=0;r<e.length;r++)if(e[r]<t||e[r]>n)throw new Error("Value out of range:"+e[r]+" low: "+t+", high: "+n)},expectArrayBuffersEqual:function(e,t){expect(new Float32Array(e)).toEqual(new Float32Array(t))}}),Object.freeze({gpgpu_util:ui,webgl_util:Ht,forceHalfFloat:function(){l().set("WEBGL_FORCE_F16_TEXTURES",!0)},MathBackendWebGL:Es,setWebGLContext:$e,GPGPUContext:li});var jp=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.minimize=function(e,t,n){void 0===t&&(t=!1);var r=this.computeGradients(e,n),o=r.value,a=r.grads;if(null!=n){var i=n.map((function(e){return{name:e.name,tensor:a[e.name]}}));this.applyGradients(i)}else this.applyGradients(a);return qt(a),t?o:(o.dispose(),null)},Object.defineProperty(t.prototype,"iterations",{get:function(){return null==this.iterations_&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),t.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},t.prototype.computeGradients=function(e,t){return Hr(e,t)},t.prototype.dispose=function(){null!=this.iterations_&&qt(this.iterations_)},t.prototype.saveIterations=function(){return a(this,void 0,void 0,(function(){return i(this,(function(e){return null==this.iterations_&&(this.iterations_=0),[2,{name:"iter",tensor:mn(this.iterations_,"int32")}]}))}))},t.prototype.getWeights=function(){return a(this,void 0,void 0,(function(){return i(this,(function(e){throw new Error("getWeights() is not implemented for this optimizer yet.")}))}))},t.prototype.setWeights=function(e){return a(this,void 0,void 0,(function(){return i(this,(function(e){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())}))}))},t.prototype.extractIterations=function(e){return a(this,void 0,void 0,(function(){var t;return i(this,(function(n){switch(n.label){case 0:return t=this,[4,e[0].tensor.data()];case 1:return t.iterations_=n.sent()[0],[2,e.slice(1)]}}))}))},t}(Tp);Object.defineProperty(jp,Symbol.hasInstance,{value:function(e){return null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients}});var Wp=function(e){function t(t,n,r){void 0===r&&(r=null);var o=e.call(this)||this;return o.learningRate=t,o.rho=n,o.epsilon=r,o.accumulatedGrads=[],o.accumulatedUpdates=[],null==r&&(o.epsilon=Ne.backend.epsilon()),o}return o(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var o=Ne.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:n+"/accum_grad",variable:$t((function(){return Dn(o).variable(!1)}))}),null==t.accumulatedUpdates[r]&&(t.accumulatedUpdates[r]={originalName:n+"/accum_var",variable:$t((function(){return Dn(o).variable(!1)}))});var a=Array.isArray(e)?e[r].tensor:e[n];if(null!=a){var i=t.accumulatedGrads[r].variable,s=t.accumulatedUpdates[r].variable;$t((function(){var e=i.mul(t.rho).add(a.square().mul(1-t.rho)),n=s.add(t.epsilon).sqrt().div(i.add(t.epsilon).sqrt()).mul(a),r=s.mul(t.rho).add(n.square().mul(1-t.rho));i.assign(e),s.assign(r);var u=n.mul(-t.learningRate).add(o);o.assign(u)}))}})),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedUpdates&&(qt(this.accumulatedGrads.map((function(e){return e.variable}))),qt(this.accumulatedUpdates.map((function(e){return e.variable}))))},t.prototype.getWeights=function(){return a(this,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return e=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return a(this,void 0,void 0,(function(){var t;return i(this,(function(n){switch(n.label){case 0:return[4,this.extractIterations(e)];case 1:return e=n.sent(),t=e.length/2,this.accumulatedGrads=e.slice(0,t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.accumulatedUpdates=e.slice(t,2*t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},t.fromConfig=function(e,t){return new e(t.learningRate,t.rho,t.epsilon)},t.className="Adadelta",t}(jp);Pp(Wp);var Hp=function(e){function t(t,n){void 0===n&&(n=.1);var r=e.call(this)||this;return r.learningRate=t,r.initialAccumulatorValue=n,r.accumulatedGrads=[],r}return o(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var o=Ne.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:n+"/accumulator",variable:$t((function(){return En(o.shape,t.initialAccumulatorValue).variable(!1)}))});var a=Array.isArray(e)?e[r].tensor:e[n];if(null!=a){var i=t.accumulatedGrads[r].variable;$t((function(){var e=i.add(a.square());i.assign(e);var n=a.div(e.add(Ne.backend.epsilon()).sqrt()).mul(-t.learningRate).add(o);o.assign(n)}))}})),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedGrads&&qt(this.accumulatedGrads.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return a(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulatedGrads.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return a(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:return e=t.sent(),this.accumulatedGrads=e.map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},t.fromConfig=function(e,t){return new e(t.learningRate,t.initialAccumulatorValue)},t.className="Adagrad",t}(jp);Pp(Hp);var Up=function(e){function t(t,n,r,o){void 0===o&&(o=null);var a=e.call(this)||this;return a.learningRate=t,a.beta1=n,a.beta2=r,a.epsilon=o,a.accumulatedFirstMoment=[],a.accumulatedSecondMoment=[],$t((function(){a.accBeta1=mn(n).variable(),a.accBeta2=mn(r).variable()})),null==o&&(a.epsilon=Ne.backend.epsilon()),a}return o(t,e),t.prototype.applyGradients=function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);$t((function(){var r=Xu(1,t.accBeta1),o=Xu(1,t.accBeta2);n.forEach((function(n,a){var i=Ne.registeredVariables[n];null==t.accumulatedFirstMoment[a]&&(t.accumulatedFirstMoment[a]={originalName:n+"/m",variable:$t((function(){return Dn(i).variable(!1)}))}),null==t.accumulatedSecondMoment[a]&&(t.accumulatedSecondMoment[a]={originalName:n+"/v",variable:$t((function(){return Dn(i).variable(!1)}))});var s=Array.isArray(e)?e[a].tensor:e[n];if(null!=s){var u=t.accumulatedFirstMoment[a].variable,l=t.accumulatedSecondMoment[a].variable,c=u.mul(t.beta1).add(s.mul(1-t.beta1)),d=l.mul(t.beta2).add(s.square().mul(1-t.beta2)),p=c.div(r),f=d.div(o);u.assign(c),l.assign(d);var h=p.div(f.sqrt().add(t.epsilon)).mul(-t.learningRate).add(i);i.assign(h)}})),t.accBeta1.assign(t.accBeta1.mul(t.beta1)),t.accBeta2.assign(t.accBeta2.mul(t.beta2))})),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&qt(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedSecondMoment&&qt(this.accumulatedSecondMoment.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return a(this,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return e=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return a(this,void 0,void 0,(function(){var t,n=this;return i(this,(function(r){switch(r.label){case 0:return[4,this.extractIterations(e)];case 1:return e=r.sent(),$t((function(){n.accBeta1.assign(qu(n.beta1,n.iterations_+1)),n.accBeta2.assign(qu(n.beta2,n.iterations_+1))})),t=e.length/2,this.accumulatedFirstMoment=e.slice(0,t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.accumulatedSecondMoment=e.slice(t,2*t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},t.fromConfig=function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)},t.className="Adam",t}(jp);Pp(Up);var zp=function(e){function t(t,n,r,o,a){void 0===o&&(o=null),void 0===a&&(a=0);var i=e.call(this)||this;return i.learningRate=t,i.beta1=n,i.beta2=r,i.epsilon=o,i.decay=a,i.accumulatedFirstMoment=[],i.accumulatedWeightedInfNorm=[],$t((function(){i.iteration=mn(0).variable(),i.accBeta1=mn(n).variable()})),null==o&&(i.epsilon=Ne.backend.epsilon()),i}return o(t,e),t.prototype.applyGradients=function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);$t((function(){var r=Xu(1,t.accBeta1),o=Pu(-t.learningRate,t.iteration.mul(t.decay).add(1));n.forEach((function(n,a){var i=Ne.registeredVariables[n];null==t.accumulatedFirstMoment[a]&&(t.accumulatedFirstMoment[a]={originalName:n+"/m",variable:Dn(i).variable(!1)}),null==t.accumulatedWeightedInfNorm[a]&&(t.accumulatedWeightedInfNorm[a]={originalName:n+"/v",variable:Dn(i).variable(!1)});var s=Array.isArray(e)?e[a].tensor:e[n];if(null!=s){var u=t.accumulatedFirstMoment[a].variable,l=t.accumulatedWeightedInfNorm[a].variable,c=u.mul(t.beta1).add(s.mul(1-t.beta1)),d=l.mul(t.beta2),p=s.abs(),f=d.maximum(p);u.assign(c),l.assign(f);var h=o.div(r).mul(c.div(f.add(t.epsilon))).add(i);i.assign(h)}})),t.iteration.assign(t.iteration.add(1)),t.accBeta1.assign(t.accBeta1.mul(t.beta1))})),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&qt(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedWeightedInfNorm&&qt(this.accumulatedWeightedInfNorm.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return a(this,void 0,void 0,(function(){return i(this,(function(e){throw new Error("getWeights() is not implemented for Adamax yet.")}))}))},t.prototype.setWeights=function(e){return a(this,void 0,void 0,(function(){return i(this,(function(e){throw new Error("setWeights() is not implemented for Adamax yet.")}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},t.fromConfig=function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)},t.className="Adamax",t}(jp);Pp(zp);var $p=function(e){function t(t){var n=e.call(this)||this;return n.learningRate=t,n.setLearningRate(t),n}return o(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var o=Array.isArray(e)?e[r].tensor:e[n];if(null!=o){var a=Ne.registeredVariables[n];$t((function(){var e=t.c.mul(o).add(a);a.assign(e)}))}})),this.incrementIterations()},t.prototype.setLearningRate=function(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=Gt(mn(-e))},t.prototype.dispose=function(){this.c.dispose()},t.prototype.getWeights=function(){return a(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()]]}}))}))},t.prototype.setWeights=function(e){return a(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:if(0!==(e=t.sent()).length)throw new Error("SGD optimizer does not have settable weights.");return[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate}},t.fromConfig=function(e,t){return new e(t.learningRate)},t.className="SGD",t}(jp);Pp($p);var qp=function(e){function t(t,n,r){void 0===r&&(r=!1);var o=e.call(this,t)||this;return o.learningRate=t,o.momentum=n,o.useNesterov=r,o.accumulations=[],o.m=mn(o.momentum),o}return o(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var o=Ne.registeredVariables[n];null==t.accumulations[r]&&(t.accumulations[r]={originalName:n+"/momentum",variable:$t((function(){return Dn(o).variable(!1)}))});var a=t.accumulations[r].variable,i=Array.isArray(e)?e[r].tensor:e[n];null!=i&&$t((function(){var e,n=t.m.mul(a).add(i);e=t.useNesterov?t.c.mul(i.add(n.mul(t.m))).add(o):t.c.mul(n).add(o),a.assign(n),o.assign(e)}))})),this.incrementIterations()},t.prototype.dispose=function(){this.m.dispose(),null!=this.accumulations&&qt(this.accumulations.map((function(e){return e.variable})))},t.prototype.setMomentum=function(e){this.momentum=e},t.prototype.getWeights=function(){return a(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulations.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return a(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:return e=t.sent(),this.accumulations=e.map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},t.fromConfig=function(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)},t.className="Momentum",t}($p);Pp(qp);var Gp=function(e){function t(t,n,r,o,a){void 0===n&&(n=.9),void 0===r&&(r=0),void 0===o&&(o=null),void 0===a&&(a=!1);var i=e.call(this)||this;if(i.learningRate=t,i.decay=n,i.momentum=r,i.epsilon=o,i.accumulatedMeanSquares=[],i.accumulatedMoments=[],i.accumulatedMeanGrads=[],i.centered=a,null==o&&(i.epsilon=Ne.backend.epsilon()),null==t)throw new Error("learningRate for RMSPropOptimizer must be defined.");return i}return o(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var o=Ne.registeredVariables[n];null==t.accumulatedMeanSquares[r]&&(t.accumulatedMeanSquares[r]={originalName:n+"/rms",variable:$t((function(){return Dn(o).variable(!1)}))}),null==t.accumulatedMoments[r]&&(t.accumulatedMoments[r]={originalName:n+"/momentum",variable:$t((function(){return Dn(o).variable(!1)}))}),null==t.accumulatedMeanGrads[r]&&t.centered&&(t.accumulatedMeanGrads[r]={originalName:n+"/mg",variable:$t((function(){return Dn(o).variable(!1)}))});var a=Array.isArray(e)?e[r].tensor:e[n];if(null!=a){var i=t.accumulatedMeanSquares[r].variable,s=t.accumulatedMoments[r].variable;$t((function(){var e=i.mul(t.decay).add(a.square().mul(1-t.decay));if(t.centered){var n=t.accumulatedMeanGrads[r].variable,u=n.mul(t.decay).add(a.mul(1-t.decay)),l=s.mul(t.momentum).add(a.mul(t.learningRate).div(e.sub(u.square().add(t.epsilon)).sqrt()));i.assign(e),n.assign(u),s.assign(l);var c=o.sub(l);o.assign(c)}else{var d=i.mul(t.decay).add(a.square().mul(1-t.decay));l=s.mul(t.momentum).add(a.mul(t.learningRate).div(d.add(t.epsilon).sqrt())),i.assign(d),s.assign(l),c=o.sub(l),o.assign(c)}}))}})),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedMeanSquares&&qt(this.accumulatedMeanSquares.map((function(e){return e.variable}))),null!=this.accumulatedMeanGrads&&this.centered&&qt(this.accumulatedMeanGrads.map((function(e){return e.variable}))),null!=this.accumulatedMoments&&qt(this.accumulatedMoments.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return a(this,void 0,void 0,(function(){var e;return i(this,(function(t){switch(t.label){case 0:return e=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&e.push.apply(e,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return a(this,void 0,void 0,(function(){var t;return i(this,(function(n){switch(n.label){case 0:return[4,this.extractIterations(e)];case 1:return e=n.sent(),t=this.centered?e.length/3:e.length/2,this.accumulatedMeanSquares=e.slice(0,t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.accumulatedMoments=e.slice(t,2*t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.centered&&(this.accumulatedMeanGrads=e.slice(2*t,3*t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}))),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},t.fromConfig=function(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)},t.className="RMSProp",t}(jp);Pp(Gp);var Kp=function(){function e(){}return e.sgd=function(e){return new $p(e)},e.momentum=function(e,t,n){return void 0===n&&(n=!1),new qp(e,t,n)},e.rmsprop=function(e,t,n,r,o){return void 0===t&&(t=.9),void 0===n&&(n=0),void 0===r&&(r=null),void 0===o&&(o=!1),new Gp(e,t,n,r,o)},e.adam=function(e,t,n,r){return void 0===e&&(e=.001),void 0===t&&(t=.9),void 0===n&&(n=.999),void 0===r&&(r=null),new Up(e,t,n,r)},e.adadelta=function(e,t,n){return void 0===e&&(e=.001),void 0===t&&(t=.95),void 0===n&&(n=null),new Wp(e,t,n)},e.adamax=function(e,t,n,r,o){return void 0===e&&(e=.002),void 0===t&&(t=.9),void 0===n&&(n=.999),void 0===r&&(r=null),void 0===o&&(o=0),new zp(e,t,n,r,o)},e.adagrad=function(e,t){return void 0===t&&(t=.1),new Hp(e,t)},e}();Kp.sgd,Kp.momentum,Kp.adadelta,Kp.adagrad,Kp.rmsprop,Kp.adamax,Kp.adam,"undefined"!=typeof requestAnimationFrame?requestAnimationFrame:"undefined"!=typeof setImmediate&&setImmediate;xe.prototype.squaredDifference=function(e){return Fs(this,e)},be=md;
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var Xp=function(e,t){return Xp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},Xp(e,t)};function Yp(e,t){function n(){this.constructor=e}Xp(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Zp=function(){return Zp=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Zp.apply(this,arguments)};function Jp(e,t,n,r){function a(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function s(e){try{l(r.next(e))}catch(o){i(o)}}function u(e){try{l(r["throw"](e))}catch(o){i(o)}}function l(e){e.done?n(e.value):a(e.value).then(s,u)}l((r=r.apply(e,t||[])).next())}))}function Qp(e,t){var n,r,a,i,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(e){return function(t){return l([e,t])}}function l(i){if(n)throw new TypeError("Generator is already executing.");while(s)try{if(n=1,r&&(a=2&i[0]?r["return"]:i[0]?r["throw"]||((a=r["return"])&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(a=s.trys,!(a=a.length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){s.label=i[1];break}if(6===i[0]&&s.label<a[1]){s.label=a[1],a=i;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(i);break}a[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(o){i=[6,o],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}}function ef(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var a=arguments[t],i=0,s=a.length;i<s;i++,o++)r[o]=a[i];return r}var tf=function(){function e(e,t){if(!hf(e)||!hf(t))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:e,height:t}));this._width=e,this._height=t}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),e.prototype.reverse=function(){return new e(1/this.width,1/this.height)},e}();function nf(e,t){return e instanceof xe&&e.shape.length===t}function rf(e){return nf(e,2)}function of(e){return nf(e,3)}function af(e){return nf(e,4)}function sf(e){return e%1!==0}function uf(e){return e%2===0}function lf(e,t){void 0===t&&(t=2);var n=Math.pow(10,t);return Math.floor(e*n)/n}function cf(e){return e&&e.width&&e.height}function df(e,t){var n=e.width,r=e.height,o=t/Math.max(r,n);return new tf(Math.round(n*o),Math.round(r*o))}function pf(e){return e.reduce((function(e,t){return e.add(t)}),new mf(0,0)).div(new mf(e.length,e.length))}function ff(e,t,n){return Array(e).fill(0).map((function(e,r){return t+r*n}))}function hf(e){return!!e&&e!==1/0&&e!==-1/0&&!isNaN(e)||0===e}function vf(e){return hf(e)&&0<=e&&e<=1}var mf=function(){function e(e,t){this._x=e,this._y=t}return Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y)},e.prototype.sub=function(t){return new e(this.x-t.x,this.y-t.y)},e.prototype.mul=function(t){return new e(this.x*t.x,this.y*t.y)},e.prototype.div=function(t){return new e(this.x/t.x,this.y/t.y)},e.prototype.abs=function(){return new e(Math.abs(this.x),Math.abs(this.y))},e.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},e.prototype.floor=function(){return new e(Math.floor(this.x),Math.floor(this.y))},e}(),gf=function(){function e(t,n){void 0===n&&(n=!0);var r=t||{},o=[r.left,r.top,r.right,r.bottom].every(hf),a=[r.x,r.y,r.width,r.height].every(hf);if(!a&&!o)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(r));var i=a?[r.x,r.y,r.width,r.height]:[r.left,r.top,r.right-r.left,r.bottom-r.top],s=i[0],u=i[1],l=i[2],c=i[3];e.assertIsValidBox({x:s,y:u,width:l,height:c},"Box.constructor",n),this._x=s,this._y=u,this._width=l,this._height=c}return e.isRect=function(e){return!!e&&[e.x,e.y,e.width,e.height].every(hf)},e.assertIsValidBox=function(t,n,r){if(void 0===r&&(r=!1),!e.isRect(t))throw new Error(n+" - invalid box: "+JSON.stringify(t)+", expected object with properties x, y, width, height");if(!r&&(t.width<0||t.height<0))throw new Error(n+" - width ("+t.width+") and height ("+t.height+") must be positive numbers")},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topLeft",{get:function(){return new mf(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topRight",{get:function(){return new mf(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomLeft",{get:function(){return new mf(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomRight",{get:function(){return new mf(this.right,this.bottom)},enumerable:!0,configurable:!0}),e.prototype.round=function(){var t=[this.x,this.y,this.width,this.height].map((function(e){return Math.round(e)})),n=t[0],r=t[1],o=t[2],a=t[3];return new e({x:n,y:r,width:o,height:a})},e.prototype.floor=function(){var t=[this.x,this.y,this.width,this.height].map((function(e){return Math.floor(e)})),n=t[0],r=t[1],o=t[2],a=t[3];return new e({x:n,y:r,width:o,height:a})},e.prototype.toSquare=function(){var t=this,n=t.x,r=t.y,o=t.width,a=t.height,i=Math.abs(o-a);return o<a&&(n-=i/2,o+=i),a<o&&(r-=i/2,a+=i),new e({x:n,y:r,width:o,height:a})},e.prototype.rescale=function(t){var n=cf(t)?t.width:t,r=cf(t)?t.height:t;return new e({x:this.x*n,y:this.y*r,width:this.width*n,height:this.height*r})},e.prototype.pad=function(t,n){var r=[this.x-t/2,this.y-n/2,this.width+t,this.height+n],o=r[0],a=r[1],i=r[2],s=r[3];return new e({x:o,y:a,width:i,height:s})},e.prototype.clipAtImageBorders=function(t,n){var r=this,o=r.x,a=r.y,i=r.right,s=r.bottom,u=Math.max(o,0),l=Math.max(a,0),c=i-u,d=s-l,p=Math.min(c,t-u),f=Math.min(d,n-l);return new e({x:u,y:l,width:p,height:f}).floor()},e.prototype.shift=function(t,n){var r=this,o=r.width,a=r.height,i=this.x+t,s=this.y+n;return new e({x:i,y:s,width:o,height:a})},e.prototype.padAtBorders=function(e,t){var n=this.width+1,r=this.height+1,o=1,a=1,i=n,s=r,u=this.left,l=this.top,c=this.right,d=this.bottom;return c>t&&(i=-c+t+n,c=t),d>e&&(s=-d+e+r,d=e),u<1&&(s=2-u,u=1),l<1&&(s=2-l,l=1),{dy:a,edy:s,dx:o,edx:i,y:l,ey:d,x:u,ex:c,w:n,h:r}},e.prototype.calibrate=function(t){return new e({left:this.left+t.left*this.width,top:this.top+t.top*this.height,right:this.right+t.right*this.width,bottom:this.bottom+t.bottom*this.height}).toSquare().round()},e}(),yf=function(e){function t(t,n,r,o,a){return void 0===a&&(a=!1),e.call(this,{left:t,top:n,right:r,bottom:o},a)||this}return Yp(t,e),t}(gf),bf=function(){function e(e,t,n,r,o){this._imageDims=new tf(o.width,o.height),this._score=e,this._classScore=t,this._className=n,this._box=new gf(r).rescale(this._imageDims)}return Object.defineProperty(e.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeBox",{get:function(){return new gf(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),e.prototype.forSize=function(t,n){return new e(this.score,this.classScore,this.className,this.relativeBox,{width:t,height:n})},e}(),wf=function(e){function t(t,n,r){return e.call(this,t,t,"",n,r)||this}return Yp(t,e),t.prototype.forSize=function(n,r){var o=e.prototype.forSize.call(this,n,r),a=o.score,i=o.relativeBox,s=o.imageDims;return new t(a,i,s)},t}(bf);function xf(e){var t=e.map((function(e){return e.x})),n=e.map((function(e){return e.y})),r=t.reduce((function(e,t){return t<e?t:e}),1/0),o=n.reduce((function(e,t){return t<e?t:e}),1/0),a=t.reduce((function(e,t){return e<t?t:e}),0),i=n.reduce((function(e,t){return e<t?t:e}),0);return new yf(r,o,a,i)}function Cf(e,t,n){void 0===n&&(n=!0);var r=Math.max(0,Math.min(e.right,t.right)-Math.max(e.left,t.left)),o=Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top)),a=r*o;return n?a/(e.area+t.area-a):a/Math.min(e.area,t.area)}function _f(e,t,n,r){void 0===r&&(r=!0);var o=t.map((function(e,t){return{score:e,boxIndex:t}})).sort((function(e,t){return e.score-t.score})).map((function(e){return e.boxIndex})),a=[],i=function(){var t=o.pop();a.push(t);for(var i=o,s=[],u=0;u<i.length;u++){var l=i[u],c=e[t],d=e[l];s.push(Cf(c,d,r))}o=o.filter((function(e,t){return s[t]<=n}))};while(o.length>0)i();return a}function kf(e,t){return $t((function(){var n=t[0],r=t[1],o=t[2],a=En(ef(e.shape.slice(0,3),[1]),n),i=En(ef(e.shape.slice(0,3),[1]),r),s=En(ef(e.shape.slice(0,3),[1]),o),u=Rn([a,i,s],3);return Xu(e,u)}))}function Sf(e,t){return void 0===t&&(t=!1),$t((function(){var n=e.shape.slice(1),r=n[0],o=n[1];if(r===o)return e;var a=Math.abs(r-o),i=Math.round(a*(t?.5:1)),s=r>o?2:1,u=function(t){var n=e.shape.slice();return n[s]=t,En(n,0)},l=u(i),c=a-l.shape[s],d=t&&c?u(c):null,p=[d,e,l].filter((function(e){return!!e})).map((function(e){return e.toFloat()}));return Rn(p,s)}))}function Ef(e){return 1/(1+Math.exp(-e))}var If,Af=function(e){function t(t,n,r,o,a){return void 0===a&&(a=!1),e.call(this,{x:t,y:n,width:r,height:o},a)||this}return Yp(t,e),t}(gf),Ff=.5,Df=.43,Rf=.45,Tf=function(){function e(e,t,n){void 0===n&&(n=new mf(0,0));var r=t.width,o=t.height;this._imgDims=new tf(r,o),this._shift=n,this._positions=e.map((function(e){return e.mul(new mf(r,o)).add(n)}))}return Object.defineProperty(e.prototype,"shift",{get:function(){return new mf(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativePositions",{get:function(){var e=this;return this._positions.map((function(t){return t.sub(e._shift).div(new mf(e.imageWidth,e.imageHeight))}))},enumerable:!0,configurable:!0}),e.prototype.forSize=function(e,t){return new this.constructor(this.relativePositions,{width:e,height:t})},e.prototype.shiftBy=function(e,t){return new this.constructor(this.relativePositions,this._imgDims,new mf(e,t))},e.prototype.shiftByPoint=function(e){return this.shiftBy(e.x,e.y)},e.prototype.align=function(e,t){if(void 0===t&&(t={}),e){var n=e instanceof wf?e.box.floor():new gf(e);return this.shiftBy(n.x,n.y).align(null,t)}var r=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},t),o=r.useDlibAlignment,a=r.minBoxPadding;return o?this.alignDlib():this.alignMinBbox(a)},e.prototype.alignDlib=function(){var e=this.getRefPointsForAlignment(),t=e[0],n=e[1],r=e[2],o=function(e){return r.sub(e).magnitude()},a=(o(t)+o(n))/2,i=Math.floor(a/Rf),s=pf(e),u=Math.floor(Math.max(0,s.x-Ff*i)),l=Math.floor(Math.max(0,s.y-Df*i));return new Af(u,l,Math.min(i,this.imageWidth+u),Math.min(i,this.imageHeight+l))},e.prototype.alignMinBbox=function(e){var t=xf(this.positions);return t.pad(t.width*e,t.height*e)},e.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},e}(),Of=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yp(t,e),t.prototype.getRefPointsForAlignment=function(){var e=this.positions;return[e[0],e[1],pf([e[3],e[4]])]},t}(Tf),Pf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yp(t,e),t.prototype.getJawOutline=function(){return this.positions.slice(0,17)},t.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},t.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},t.prototype.getNose=function(){return this.positions.slice(27,36)},t.prototype.getLeftEye=function(){return this.positions.slice(36,42)},t.prototype.getRightEye=function(){return this.positions.slice(42,48)},t.prototype.getMouth=function(){return this.positions.slice(48,68)},t.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(pf)},t}(Tf),Bf=function(){function e(e,t){this._label=e,this._distance=t}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),e.prototype.toString=function(e){return void 0===e&&(e=!0),this.label+(e?" ("+lf(this.distance)+")":"")},e}(),Mf=function(e){function t(t,n){var r=e.call(this,t)||this;return r._label=n,r}return Yp(t,e),t.assertIsValidLabeledBox=function(e,t){if(gf.assertIsValidBox(e,t),!hf(e.label))throw new Error(t+" - expected property label ("+e.label+") to be a number")},Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),t}(gf),Nf=function(){function e(e,t){if("string"!==typeof e)throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(t)||t.some((function(e){return!(e instanceof Float32Array)})))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=e,this._descriptors=t}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),e.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map((function(e){return Array.from(e)}))}},e.fromJSON=function(t){var n=t.descriptors.map((function(e){return new Float32Array(e)}));return new e(t.label,n)},e}();(function(e){function t(t,n,r,o){var a=e.call(this,t,n)||this;return a._score=r,a._classScore=o,a}Yp(t,e),t.assertIsValidPredictedBox=function(e,t){if(Mf.assertIsValidLabeledBox(e,t),!vf(e.score)||!vf(e.classScore))throw new Error(t+" - expected properties score ("+e.score+") and ("+e.classScore+") to be a number between [0, 1]")},Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0})})(Mf);function Lf(e){return e["detection"]instanceof wf}function Vf(e,t){var n={detection:t};return Object.assign({},e,n)}function jf(){var e=window["fetch"]||function(){throw new Error("fetch - missing fetch implementation for browser environment")},t=function(){throw new Error("readFile - filesystem not available for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D:CanvasRenderingContext2D,Image:HTMLImageElement,ImageData:ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:e,readFile:t}}function Wf(e){var t="";if(!e)try{e=n(Object(function(){var e=new Error("Cannot find module 'fs'");throw e.code="MODULE_NOT_FOUND",e}()))}catch(o){t=o.toString()}var r=e?function(t){return new Promise((function(n,r){e.readFile(t,(function(e,t){return e?r(e):n(t)}))}))}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+t)};return{readFile:r}}function Hf(){var e=n.g["Canvas"]||n.g["HTMLCanvasElement"],t=n.g["Image"]||n.g["HTMLImageElement"],r=function(){if(e)return new e;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},o=function(){if(t)return new t;throw new Error("createImageElement - missing Image implementation for nodejs environment")},a=n.g["fetch"]||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},i=Wf();return Zp({Canvas:e||function(){function e(){}return e}(),CanvasRenderingContext2D:n.g["CanvasRenderingContext2D"]||function(){function e(){}return e}(),Image:t||function(){function e(){}return e}(),ImageData:n.g["ImageData"]||function(){function e(){}return e}(),Video:n.g["HTMLVideoElement"]||function(){function e(){}return e}(),createCanvasElement:r,createImageElement:o,fetch:a},i)}function Uf(){return"object"===typeof window&&"undefined"!==typeof document&&"undefined"!==typeof HTMLImageElement&&"undefined"!==typeof HTMLCanvasElement&&"undefined"!==typeof HTMLVideoElement&&"undefined"!==typeof ImageData&&"undefined"!==typeof CanvasRenderingContext2D}function zf(){return"object"===typeof n.g&&"undefined"!==typeof process&&!!process.version}function $f(){if(!If)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return If}function qf(e){If=e}function Gf(){Uf()&&qf(jf()),zf()&&qf(Hf())}function Kf(e){if(If||Gf(),!If)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var t=e.Canvas,n=void 0===t?If.Canvas:t,r=e.Image,o=void 0===r?If.Image:r;If.Canvas=n,If.Image=o,If.createCanvasElement=e.createCanvasElement||function(){return new n},If.createImageElement=e.createImageElement||function(){return new o},If.ImageData=e.ImageData||If.ImageData,If.Video=e.Video||If.Video,If.fetch=e.fetch||If.fetch,If.readFile=e.readFile||If.readFile}var Xf,Yf={getEnv:$f,setEnv:qf,initialize:Gf,createBrowserEnv:jf,createFileSystem:Wf,createNodejsEnv:Hf,monkeyPatch:Kf,isBrowser:Uf,isNodejs:zf};function Zf(e){return Yf.isNodejs()||"string"!==typeof e?e:document.getElementById(e)}function Jf(e){var t=Yf.getEnv(),n=t.Canvas,r=t.CanvasRenderingContext2D;if(e instanceof r)return e;var o=Zf(e);if(!(o instanceof n))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var a=o.getContext("2d");if(!a)throw new Error("resolveContext2d - canvas 2d context is null");return a}Gf(),function(e){e["TOP_LEFT"]="TOP_LEFT",e["TOP_RIGHT"]="TOP_RIGHT",e["BOTTOM_LEFT"]="BOTTOM_LEFT",e["BOTTOM_RIGHT"]="BOTTOM_RIGHT"}(Xf||(Xf={}));var Qf=function(){function e(e){void 0===e&&(e={});var t=e.anchorPosition,n=e.backgroundColor,r=e.fontColor,o=e.fontSize,a=e.fontStyle,i=e.padding;this.anchorPosition=t||Xf.TOP_LEFT,this.backgroundColor=n||"rgba(0, 0, 0, 0.5)",this.fontColor=r||"rgba(255, 255, 255, 1)",this.fontSize=o||14,this.fontStyle=a||"Georgia",this.padding=i||4}return e}(),eh=function(){function e(t,n,r){void 0===r&&(r={}),this.text="string"===typeof t?[t]:t instanceof e?t.text:t,this.anchor=n,this.options=new Qf(r)}return e.prototype.measureWidth=function(e){var t=this.options.padding;return this.text.map((function(t){return e.measureText(t).width})).reduce((function(e,t){return e<t?t:e}),0)+2*t},e.prototype.measureHeight=function(){var e=this.options,t=e.fontSize,n=e.padding;return this.text.length*t+2*n},e.prototype.getUpperLeft=function(e,t){var n=this.options.anchorPosition,r=n===Xf.BOTTOM_RIGHT||n===Xf.TOP_RIGHT,o=n===Xf.BOTTOM_LEFT||n===Xf.BOTTOM_RIGHT,a=this.measureWidth(e),i=this.measureHeight(),s=r?this.anchor.x-a:this.anchor.x,u=o?this.anchor.y-i:this.anchor.y;if(t){var l=t.width,c=t.height,d=Math.max(Math.min(s,l-a),0),p=Math.max(Math.min(u,c-i),0);return{x:d,y:p}}return{x:s,y:u}},e.prototype.draw=function(e){var t=Zf(e),n=Jf(t),r=this.options,o=r.backgroundColor,a=r.fontColor,i=r.fontSize,s=r.fontStyle,u=r.padding;n.font=i+"px "+s;var l=this.measureWidth(n),c=this.measureHeight();n.fillStyle=o;var d=this.getUpperLeft(n,t);n.fillRect(d.x,d.y,l,c),n.fillStyle=a,this.text.forEach((function(e,t){var r=u+d.x,o=u+d.y+(t+1)*i;n.fillText(e,r,o)}))},e}(),th=function(){function e(e){void 0===e&&(e={});var t=e.boxColor,n=e.lineWidth,r=e.label,o=e.drawLabelOptions;this.boxColor=t||"rgba(0, 0, 255, 1)",this.lineWidth=n||2,this.label=r;var a={anchorPosition:Xf.BOTTOM_LEFT,backgroundColor:this.boxColor};this.drawLabelOptions=new Qf(Object.assign({},a,o))}return e}();(function(){function e(e,t){void 0===t&&(t={}),this.box=new gf(e),this.options=new th(t)}e.prototype.draw=function(e){var t=Jf(e),n=this.options,r=n.boxColor,o=n.lineWidth,a=this.box,i=a.x,s=a.y,u=a.width,l=a.height;t.strokeStyle=r,t.lineWidth=o,t.strokeRect(i,s,u,l);var c=this.options.label;c&&new eh([c],{x:i-o/2,y:s},this.options.drawLabelOptions).draw(e)}})();function nh(e){var t=Yf.getEnv(),n=t.Image,r=t.Video;return e instanceof n&&e.complete||e instanceof r&&e.readyState>=3}function rh(e){return new Promise((function(t,n){if(e instanceof Yf.getEnv().Canvas||nh(e))return t();function r(e){e.currentTarget&&(e.currentTarget.removeEventListener("load",r),e.currentTarget.removeEventListener("error",o),t(e))}function o(e){e.currentTarget&&(e.currentTarget.removeEventListener("load",r),e.currentTarget.removeEventListener("error",o),n(e))}e.addEventListener("load",r),e.addEventListener("error",o)}))}function oh(e){return new Promise((function(t,n){if(!(e instanceof Blob))return n("bufferToImage - expected buf to be of type: Blob");var r=new FileReader;r.onload=function(){if("string"!==typeof r.result)return n("bufferToImage - expected reader.result to be a string, in onload");var e=Yf.getEnv().createImageElement();e.onload=function(){return t(e)},e.onerror=n,e.src=r.result},r.onerror=n,r.readAsDataURL(e)}))}function ah(e){var t=Yf.getEnv(),n=t.Image,r=t.Video;return e instanceof n?new tf(e.naturalWidth,e.naturalHeight):e instanceof r?new tf(e.videoWidth,e.videoHeight):new tf(e.width,e.height)}function ih(e){var t=e.width,n=e.height,r=Yf.getEnv().createCanvasElement,o=r();return o.width=t,o.height=n,o}function sh(e,t){var n=Yf.getEnv().ImageData;if(!(e instanceof n)&&!nh(e))throw new Error("createCanvasFromMedia - media has not finished loading yet");var r=t||ah(e),o=r.width,a=r.height,i=ih({width:o,height:a});return e instanceof n?Jf(i).putImageData(e,0,0):Jf(i).drawImage(e,0,0,o,a),i}function uh(e,t){return Jp(this,void 0,void 0,(function(){var n,r,o,a,i,s;return Qp(this,(function(u){switch(u.label){case 0:return n=t||Yf.getEnv().createCanvasElement(),r=e.shape.slice(af(e)?1:0),o=r[0],a=r[1],i=r[2],s=$t((function(){return e.as3D(o,a,i).toInt()})),[4,Rp.toPixels(s,n)];case 1:return u.sent(),s.dispose(),[2,n]}}))}))}function lh(e){var t=Yf.getEnv(),n=t.Image,r=t.Canvas,o=t.Video;return e instanceof n||e instanceof r||e instanceof o}function ch(e,t,n){void 0===n&&(n=!1);var r=Yf.getEnv(),o=r.Image,a=r.Canvas;if(!(e instanceof o||e instanceof a))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var i=ah(e),s=t/Math.max(i.height,i.width),u=s*i.width,l=s*i.height,c=ih({width:t,height:t}),d=e instanceof a?e:sh(e),p=Math.abs(u-l)/2,f=n&&u<l?p:0,h=n&&l<u?p:0;return Jf(c).drawImage(d,f,h,u,l),c}var dh=function(){function e(e,t){var n=this;if(void 0===t&&(t=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(e))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+e);this._treatAsBatchInput=t,this._batchSize=e.length,e.forEach((function(e,t){if(of(e))return n._imageTensors[t]=e,void(n._inputDimensions[t]=e.shape);if(af(e)){var r=e.shape[0];if(1!==r)throw new Error("NetInput - tf.Tensor4D with batchSize "+r+" passed, but not supported in input array");return n._imageTensors[t]=e,void(n._inputDimensions[t]=e.shape.slice(1))}var o=e instanceof Yf.getEnv().Canvas?e:sh(e);n._canvases[t]=o,n._inputDimensions[t]=[o.height,o.width,3]}))}return Object.defineProperty(e.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reshapedInputDimensions",{get:function(){var e=this;return ff(this.batchSize,0,1).map((function(t,n){return e.getReshapedInputDimensions(n)}))},enumerable:!0,configurable:!0}),e.prototype.getInput=function(e){return this.canvases[e]||this.imageTensors[e]},e.prototype.getInputDimensions=function(e){return this._inputDimensions[e]},e.prototype.getInputHeight=function(e){return this._inputDimensions[e][0]},e.prototype.getInputWidth=function(e){return this._inputDimensions[e][1]},e.prototype.getReshapedInputDimensions=function(e){if("number"!==typeof this.inputSize)throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");var t=this.getInputWidth(e),n=this.getInputHeight(e);return df({width:t,height:n},this.inputSize)},e.prototype.toBatchTensor=function(e,t){var n=this;return void 0===t&&(t=!0),this._inputSize=e,$t((function(){var r=ff(n.batchSize,0,1).map((function(r){var o=n.getInput(r);if(o instanceof xe){var a=af(o)?o:o.expandDims();return a=Sf(a,t),a.shape[1]===e&&a.shape[2]===e||(a=sd.resizeBilinear(a,[e,e])),a.as3D(e,e,3)}if(o instanceof Yf.getEnv().Canvas)return Rp.fromPixels(ch(o,e,t));throw new Error("toBatchTensor - at batchIdx "+r+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+o)})),o=br(r.map((function(e){return e.toFloat()}))).as4D(n.batchSize,e,e,3);return o}))},e}();function ph(e){return Jp(this,void 0,void 0,(function(){var t,n,r;return Qp(this,(function(o){switch(o.label){case 0:if(e instanceof dh)return[2,e];if(t=Array.isArray(e)?e:[e],!t.length)throw new Error("toNetInput - empty array passed as input");return n=function(t){return Array.isArray(e)?" at input index "+t+":":""},r=t.map(Zf),r.forEach((function(e,r){if(!lh(e)&&!of(e)&&!af(e)){if("string"===typeof t[r])throw new Error("toNetInput -"+n(r)+" string passed, but could not resolve HTMLElement for element id "+t[r]);throw new Error("toNetInput -"+n(r)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id")}if(af(e)){var o=e.shape[0];if(1!==o)throw new Error("toNetInput -"+n(r)+" tf.Tensor4D with batchSize "+o+" passed, but not supported in input array")}})),[4,Promise.all(r.map((function(e){return lh(e)&&rh(e)})))];case 1:return o.sent(),[2,new dh(r,Array.isArray(e))]}}))}))}function fh(e,t){return Jp(this,void 0,void 0,(function(){var n,r,o,a,i,s,u;return Qp(this,(function(l){switch(l.label){case 0:return n=Yf.getEnv().Canvas,r=e,e instanceof n?[3,5]:[4,ph(e)];case 1:if(o=l.sent(),o.batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return a=o.getInput(0),a instanceof n?(i=a,[3,4]):[3,2];case 2:return[4,uh(a)];case 3:i=l.sent(),l.label=4;case 4:r=i,l.label=5;case 5:return s=Jf(r),u=t.map((function(e){return e instanceof wf?e.forSize(r.width,r.height).box.floor():e})).map((function(e){return e.clipAtImageBorders(r.width,r.height)})),[2,u.map((function(e){var t=e.x,n=e.y,r=e.width,o=e.height,a=ih({width:r,height:o});return Jf(a).putImageData(s.getImageData(t,n,r,o),0,0),a}))]}}))}))}function hh(e,t){return Jp(this,void 0,void 0,(function(){return Qp(this,(function(n){if(!of(e)&&!af(e))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(af(e)&&e.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,$t((function(){var n=e.shape.slice(af(e)?1:0),r=n[0],o=n[1],a=n[2],i=t.map((function(e){return e instanceof wf?e.forSize(o,r).box:e})).map((function(e){return e.clipAtImageBorders(o,r)})),s=i.map((function(t){var n=t.x,i=t.y,s=t.width,u=t.height;return ql(e.as3D(r,o,a),[i,n,0],[u,s,a])}));return s}))]}))}))}function vh(e,t){return Jp(this,void 0,void 0,(function(){var n,r;return Qp(this,(function(o){switch(o.label){case 0:return n=Yf.getEnv().fetch,[4,n(e,t)];case 1:if(r=o.sent(),!(r.status<400))throw new Error("failed to fetch: ("+r.status+") "+r.statusText+", from url: "+r.url);return[2,r]}}))}))}function mh(e){return Jp(this,void 0,void 0,(function(){return Qp(this,(function(t){switch(t.label){case 0:return[4,vh(e)];case 1:return[2,t.sent().json()]}}))}))}function gh(e,t){var n=t+"-weights_manifest.json";if(!e)return{modelBaseUri:"",manifestUri:n};if("/"===e)return{modelBaseUri:"/",manifestUri:"/"+n};var r=e.startsWith("http://")?"http://":e.startsWith("https://")?"https://":"";e=e.replace(r,"");var o=e.split("/").filter((function(e){return e})),a=e.endsWith(".json")?o[o.length-1]:n,i=r+(e.endsWith(".json")?o.slice(0,o.length-1):o).join("/");return i=e.startsWith("/")?"/"+i:i,{modelBaseUri:i,manifestUri:"/"===i?"/"+a:i+"/"+a}}function yh(e,t){return Jp(this,void 0,void 0,(function(){var n,r,o,a;return Qp(this,(function(i){switch(i.label){case 0:return n=gh(e,t),r=n.manifestUri,o=n.modelBaseUri,[4,mh(r)];case 1:return a=i.sent(),[2,Ap.loadWeights(a,o)]}}))}))}var bh=function(){function e(e){this._name=e,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(e.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),e.prototype.getParamFromPath=function(e){var t=this.traversePropertyPath(e),n=t.obj,r=t.objProp;return n[r]},e.prototype.reassignParamFromPath=function(e,t){var n=this.traversePropertyPath(e),r=n.obj,o=n.objProp;r[o].dispose(),r[o]=t},e.prototype.getParamList=function(){var e=this;return this._paramMappings.map((function(t){var n=t.paramPath;return{path:n,tensor:e.getParamFromPath(n)}}))},e.prototype.getTrainableParams=function(){return this.getParamList().filter((function(e){return e.tensor instanceof Ie}))},e.prototype.getFrozenParams=function(){return this.getParamList().filter((function(e){return!(e.tensor instanceof Ie)}))},e.prototype.variable=function(){var e=this;this.getFrozenParams().forEach((function(t){var n=t.path,r=t.tensor;e.reassignParamFromPath(n,r.variable())}))},e.prototype.freeze=function(){var e=this;this.getTrainableParams().forEach((function(t){var n=t.path,r=t.tensor,o=hn(r.dataSync());r.dispose(),e.reassignParamFromPath(n,o)}))},e.prototype.dispose=function(e){void 0===e&&(e=!0),this.getParamList().forEach((function(t){if(e&&t.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+t.path);t.tensor.dispose()})),this._params=void 0},e.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map((function(e){var t=e.tensor;return Array.from(t.dataSync())})).reduce((function(e,t){return e.concat(t)})))},e.prototype.load=function(e){return Jp(this,void 0,void 0,(function(){return Qp(this,(function(t){switch(t.label){case 0:return e instanceof Float32Array?(this.extractWeights(e),[2]):[4,this.loadFromUri(e)];case 1:return t.sent(),[2]}}))}))},e.prototype.loadFromUri=function(e){return Jp(this,void 0,void 0,(function(){var t;return Qp(this,(function(n){switch(n.label){case 0:if(e&&"string"!==typeof e)throw new Error(this._name+".loadFromUri - expected model uri");return[4,yh(e,this.getDefaultModelName())];case 1:return t=n.sent(),this.loadFromWeightMap(t),[2]}}))}))},e.prototype.loadFromDisk=function(e){return Jp(this,void 0,void 0,(function(){var t,n,r,o,a,i,s,u,l,c;return Qp(this,(function(d){switch(d.label){case 0:if(e&&"string"!==typeof e)throw new Error(this._name+".loadFromDisk - expected model file path");return t=Yf.getEnv().readFile,n=gh(e,this.getDefaultModelName()),r=n.manifestUri,o=n.modelBaseUri,a=function(e){return Promise.all(e.map((function(e){return t(e).then((function(e){return e.buffer}))})))},i=Ap.weightsLoaderFactory(a),l=(u=JSON).parse,[4,t(r)];case 1:return s=l.apply(u,[d.sent().toString()]),[4,i(s,o)];case 2:return c=d.sent(),this.loadFromWeightMap(c),[2]}}))}))},e.prototype.loadFromWeightMap=function(e){var t=this.extractParamsFromWeigthMap(e),n=t.paramMappings,r=t.params;this._paramMappings=n,this._params=r},e.prototype.extractWeights=function(e){var t=this.extractParams(e),n=t.paramMappings,r=t.params;this._paramMappings=n,this._params=r},e.prototype.traversePropertyPath=function(e){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var t=e.split("/").reduce((function(t,n){if(!t.nextObj.hasOwnProperty(n))throw new Error("traversePropertyPath - object does not have property "+n+", for path "+e);return{obj:t.nextObj,objProp:n,nextObj:t.nextObj[n]}}),{nextObj:this.params}),n=t.obj,r=t.objProp;if(!n||!r||!(n[r]instanceof xe))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+e);return{obj:n,objProp:r}},e}();function wh(e,t,n){return $t((function(){var r=Sl(e,t.depthwise_filter,t.pointwise_filter,n,"same");return r=Du(r,t.bias),r}))}function xh(e,t,n){return void 0===n&&(n=!1),$t((function(){var r=lc(n?Du(yl(e,t.conv0.filters,[2,2],"same"),t.conv0.bias):wh(e,t.conv0,[2,2])),o=wh(r,t.conv1,[1,1]),a=lc(Du(r,o)),i=wh(a,t.conv2,[1,1]);return lc(Du(r,Du(o,i)))}))}function Ch(e,t,n,r){return void 0===n&&(n=!1),void 0===r&&(r=!0),$t((function(){var o=lc(n?Du(yl(e,t.conv0.filters,r?[2,2]:[1,1],"same"),t.conv0.bias):wh(e,t.conv0,r?[2,2]:[1,1])),a=wh(o,t.conv1,[1,1]),i=lc(Du(o,a)),s=wh(i,t.conv2,[1,1]),u=lc(Du(o,Du(a,s))),l=wh(u,t.conv3,[1,1]);return lc(Du(o,Du(a,Du(s,l))))}))}function _h(e,t,n,r){return void 0===n&&(n="same"),void 0===r&&(r=!1),$t((function(){var o=Du(yl(e,t.filters,[1,1],n),t.bias);return r?lc(o):o}))}function kh(e,t){Object.keys(e).forEach((function(n){t.some((function(e){return e.originalPath===n}))||e[n].dispose()}))}function Sh(e,t){return function(n,r,o,a){var i=wn(e(n*r*o*o),[o,o,n,r]),s=gn(e(r));return t.push({paramPath:a+"/filters"},{paramPath:a+"/bias"}),{filters:i,bias:s}}}function Eh(e,t){return function(n,r,o){var a=yn(e(n*r),[n,r]),i=gn(e(r));return t.push({paramPath:o+"/weights"},{paramPath:o+"/bias"}),{weights:a,bias:i}}}var Ih=function(){function e(e,t,n){this.depthwise_filter=e,this.pointwise_filter=t,this.bias=n}return e}();function Ah(e,t){return function(n,r,o){var a=wn(e(9*n),[3,3,n,1]),i=wn(e(n*r),[1,1,n,r]),s=gn(e(r));return t.push({paramPath:o+"/depthwise_filter"},{paramPath:o+"/pointwise_filter"},{paramPath:o+"/bias"}),new Ih(a,i,s)}}function Fh(e){return function(t){var n=e(t+"/depthwise_filter",4),r=e(t+"/pointwise_filter",4),o=e(t+"/bias",1);return new Ih(n,r,o)}}function Dh(e,t){return function(n,r,o){var a=e[n];if(!nf(a,r))throw new Error("expected weightMap["+n+"] to be a Tensor"+r+"D, instead have "+a);return t.push({originalPath:n,paramPath:o||n}),a}}function Rh(e){var t=e;function n(e){var n=t.slice(0,e);return t=t.slice(e),n}function r(){return t}return{extractWeights:n,getRemainingWeights:r}}function Th(e,t){var n=Sh(e,t),r=Ah(e,t);function o(e,t,o,a){void 0===a&&(a=!1);var i=a?n(e,t,3,o+"/conv0"):r(e,t,o+"/conv0"),s=r(t,t,o+"/conv1"),u=r(t,t,o+"/conv2");return{conv0:i,conv1:s,conv2:u}}function a(e,t,n,a){void 0===a&&(a=!1);var i=o(e,t,n,a),s=i.conv0,u=i.conv1,l=i.conv2,c=r(t,t,n+"/conv3");return{conv0:s,conv1:u,conv2:l,conv3:c}}return{extractDenseBlock3Params:o,extractDenseBlock4Params:a}}function Oh(e){var t=[],n=Rh(e),r=n.extractWeights,o=n.getRemainingWeights,a=Th(r,t).extractDenseBlock4Params,i=a(3,32,"dense0",!0),s=a(32,64,"dense1"),u=a(64,128,"dense2"),l=a(128,256,"dense3");if(0!==o().length)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:t,params:{dense0:i,dense1:s,dense2:u,dense3:l}}}function Ph(e){return function(t){var n=e(t+"/filters",4),r=e(t+"/bias",1);return{filters:n,bias:r}}}function Bh(e,t){var n=Dh(e,t),r=Ph(n),o=Fh(n);function a(e,t){void 0===t&&(t=!1);var n=t?r(e+"/conv0"):o(e+"/conv0"),a=o(e+"/conv1"),i=o(e+"/conv2");return{conv0:n,conv1:a,conv2:i}}function i(e,t){void 0===t&&(t=!1);var n=t?r(e+"/conv0"):o(e+"/conv0"),a=o(e+"/conv1"),i=o(e+"/conv2"),s=o(e+"/conv3");return{conv0:n,conv1:a,conv2:i,conv3:s}}return{extractDenseBlock3Params:a,extractDenseBlock4Params:i}}function Mh(e){var t=[],n=Bh(e,t).extractDenseBlock4Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2"),dense3:n("dense3")};return kh(e,t),{params:r,paramMappings:t}}var Nh=function(e){function t(){return e.call(this,"FaceFeatureExtractor")||this}return Yp(t,e),t.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("FaceFeatureExtractor - load model before inference");return $t((function(){var n=e.toBatchTensor(112,!0),r=[122.782,117.001,104.298],o=kf(n,r).div(mn(255)),a=Ch(o,t.dense0,!0);return a=Ch(a,t.dense1),a=Ch(a,t.dense2),a=Ch(a,t.dense3),a=Vl(a,[7,7],[2,2],"valid"),a}))},t.prototype.forward=function(e){return Jp(this,void 0,void 0,(function(){var t;return Qp(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,ph(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},t.prototype.extractParamsFromWeigthMap=function(e){return Mh(e)},t.prototype.extractParams=function(e){return Oh(e)},t}(bh);function Lh(e,t){return $t((function(){return Du(Al(e,t.weights),t.bias)}))}function Vh(e,t,n){var r=[],o=Rh(e),a=o.extractWeights,i=o.getRemainingWeights,s=Eh(a,r),u=s(t,n,"fc");if(0!==i().length)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:r,params:{fc:u}}}function jh(e){var t=[],n=Dh(e,t);function r(e){var t=n(e+"/weights",2),r=n(e+"/bias",1);return{weights:t,bias:r}}var o={fc:r("fc")};return kh(e,t),{params:o,paramMappings:t}}function Wh(e){var t={},n={};return Object.keys(e).forEach((function(r){var o=r.startsWith("fc")?n:t;o[r]=e[r]})),{featureExtractorMap:t,classifierMap:n}}var Hh=function(e){function t(t,n){var r=e.call(this,t)||this;return r._faceFeatureExtractor=n,r}return Yp(t,e),Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(e){var t=this,n=this.params;if(!n)throw new Error(this._name+" - load model before inference");return $t((function(){var r=e instanceof dh?t.faceFeatureExtractor.forwardInput(e):e;return Lh(r.as2D(r.shape[0],-1),n.fc)}))},t.prototype.dispose=function(t){void 0===t&&(t=!0),this.faceFeatureExtractor.dispose(t),e.prototype.dispose.call(this,t)},t.prototype.loadClassifierParams=function(e){var t=this.extractClassifierParams(e),n=t.params,r=t.paramMappings;this._params=n,this._paramMappings=r},t.prototype.extractClassifierParams=function(e){return Vh(e,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},t.prototype.extractParamsFromWeigthMap=function(e){var t=Wh(e),n=t.featureExtractorMap,r=t.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(n),jh(r)},t.prototype.extractParams=function(e){var t=this.getClassifierChannelsIn(),n=this.getClassifierChannelsOut(),r=n*t+n,o=e.slice(0,e.length-r),a=e.slice(e.length-r);return this.faceFeatureExtractor.extractWeights(o),this.extractClassifierParams(a)},t}(bh),Uh=["neutral","happy","sad","angry","fearful","disgusted","surprised"],zh=function(){function e(e){var t=this;if(7!==e.length)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+e.length);Uh.forEach((function(n,r){t[n]=e[r]}))}return e.prototype.asSortedArray=function(){var e=this;return Uh.map((function(t){return{expression:t,probability:e[t]}})).sort((function(e,t){return t.probability-e.probability}))},e}(),$h=function(e){function t(t){return void 0===t&&(t=new Nh),e.call(this,"FaceExpressionNet",t)||this}return Yp(t,e),t.prototype.forwardInput=function(e){var t=this;return $t((function(){return zr(t.runNet(e))}))},t.prototype.forward=function(e){return Jp(this,void 0,void 0,(function(){var t;return Qp(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,ph(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.predictExpressions=function(e){return Jp(this,void 0,void 0,(function(){var t,n,r,o,a=this;return Qp(this,(function(i){switch(i.label){case 0:return[4,ph(e)];case 1:return t=i.sent(),[4,this.forwardInput(t)];case 2:return n=i.sent(),[4,Promise.all(Cr(n).map((function(e){return Jp(a,void 0,void 0,(function(){var t;return Qp(this,(function(n){switch(n.label){case 0:return[4,e.data()];case 1:return t=n.sent(),e.dispose(),[2,t]}}))}))})))];case 3:return r=i.sent(),n.dispose(),o=r.map((function(e){return new zh(e)})),[2,t.isBatchInput?o:o[0]]}}))}))},t.prototype.getDefaultModelName=function(){return"face_expression_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t.prototype.getClassifierChannelsOut=function(){return 7},t}(Hh);function qh(e,t){var n={expressions:t};return Object.assign({},e,n)}function Gh(e){return Lf(e)&&e["landmarks"]instanceof Tf&&e["unshiftedLandmarks"]instanceof Tf&&e["alignedRect"]instanceof wf}function Kh(e,t){var n=e.detection.box,r=t.shiftBy(n.x,n.y),o=r.align(),a=e.detection.imageDims,i=new wf(e.detection.score,o.rescale(a.reverse()),a),s={landmarks:r,unshiftedLandmarks:t,alignedRect:i};return Object.assign({},e,s)}function Xh(e,t,n){if(void 0===n&&(n=!1),e.beginPath(),t.slice(1).forEach((function(n,r){var o=n.x,a=n.y,i=t[r];e.moveTo(i.x,i.y),e.lineTo(o,a)})),n){var r=t[t.length-1],o=t[0];if(!r||!o)return;e.moveTo(r.x,r.y),e.lineTo(o.x,o.y)}e.stroke()}var Yh=function(){function e(e){void 0===e&&(e={});var t=e.drawLines,n=void 0===t||t,r=e.drawPoints,o=void 0===r||r,a=e.lineWidth,i=e.lineColor,s=e.pointSize,u=e.pointColor;this.drawLines=n,this.drawPoints=o,this.lineWidth=a||1,this.pointSize=s||2,this.lineColor=i||"rgba(0, 255, 255, 1)",this.pointColor=u||"rgba(255, 0, 255, 1)"}return e}();(function(){function e(e,t){void 0===t&&(t={}),this.faceLandmarks=e,this.options=new Yh(t)}e.prototype.draw=function(e){var t=Jf(e),n=this.options,r=n.drawLines,o=n.drawPoints,a=n.lineWidth,i=n.lineColor,s=n.pointSize,u=n.pointColor;if(r&&this.faceLandmarks instanceof Pf&&(t.strokeStyle=i,t.lineWidth=a,Xh(t,this.faceLandmarks.getJawOutline()),Xh(t,this.faceLandmarks.getLeftEyeBrow()),Xh(t,this.faceLandmarks.getRightEyeBrow()),Xh(t,this.faceLandmarks.getNose()),Xh(t,this.faceLandmarks.getLeftEye(),!0),Xh(t,this.faceLandmarks.getRightEye(),!0),Xh(t,this.faceLandmarks.getMouth(),!0)),o){t.strokeStyle=u,t.fillStyle=u;var l=function(e){t.beginPath(),t.arc(e.x,e.y,s,0,2*Math.PI),t.fill()};this.faceLandmarks.positions.forEach(l)}}})();function Zh(e,t){var n=Sh(e,t),r=Ah(e,t);function o(e,t,o){var a=r(e,t,o+"/separable_conv0"),i=r(t,t,o+"/separable_conv1"),s=n(e,t,1,o+"/expansion_conv");return{separable_conv0:a,separable_conv1:i,expansion_conv:s}}function a(e,t){var n=r(e,e,t+"/separable_conv0"),o=r(e,e,t+"/separable_conv1"),a=r(e,e,t+"/separable_conv2");return{separable_conv0:n,separable_conv1:o,separable_conv2:a}}return{extractConvParams:n,extractSeparableConvParams:r,extractReductionBlockParams:o,extractMainBlockParams:a}}function Jh(e,t){var n=[],r=Rh(e),o=r.extractWeights,a=r.getRemainingWeights,i=Zh(o,n),s=i.extractConvParams,u=i.extractSeparableConvParams,l=i.extractReductionBlockParams,c=i.extractMainBlockParams,d=s(3,32,3,"entry_flow/conv_in"),p=l(32,64,"entry_flow/reduction_block_0"),f=l(64,128,"entry_flow/reduction_block_1"),h={conv_in:d,reduction_block_0:p,reduction_block_1:f},v={};ff(t,0,1).forEach((function(e){v["main_block_"+e]=c(128,"middle_flow/main_block_"+e)}));var m=l(128,256,"exit_flow/reduction_block"),g=u(256,512,"exit_flow/separable_conv"),y={reduction_block:m,separable_conv:g};if(0!==a().length)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:n,params:{entry_flow:h,middle_flow:v,exit_flow:y}}}function Qh(e,t){var n=Dh(e,t),r=Ph(n),o=Fh(n);function a(e){var t=o(e+"/separable_conv0"),n=o(e+"/separable_conv1"),a=r(e+"/expansion_conv");return{separable_conv0:t,separable_conv1:n,expansion_conv:a}}function i(e){var t=o(e+"/separable_conv0"),n=o(e+"/separable_conv1"),r=o(e+"/separable_conv2");return{separable_conv0:t,separable_conv1:n,separable_conv2:r}}return{extractConvParams:r,extractSeparableConvParams:o,extractReductionBlockParams:a,extractMainBlockParams:i}}function ev(e,t){var n=[],r=Qh(e,n),o=r.extractConvParams,a=r.extractSeparableConvParams,i=r.extractReductionBlockParams,s=r.extractMainBlockParams,u=o("entry_flow/conv_in"),l=i("entry_flow/reduction_block_0"),c=i("entry_flow/reduction_block_1"),d={conv_in:u,reduction_block_0:l,reduction_block_1:c},p={};ff(t,0,1).forEach((function(e){p["main_block_"+e]=s("middle_flow/main_block_"+e)}));var f=i("exit_flow/reduction_block"),h=a("exit_flow/separable_conv"),v={reduction_block:f,separable_conv:h};return kh(e,n),{params:{entry_flow:d,middle_flow:p,exit_flow:v},paramMappings:n}}function tv(e,t,n){return Du(yl(e,t.filters,n,"same"),t.bias)}function nv(e,t,n){void 0===n&&(n=!0);var r=n?lc(e):e;return r=wh(r,t.separable_conv0,[1,1]),r=wh(lc(r),t.separable_conv1,[1,1]),r=Ll(r,[3,3],[2,2],"same"),r=Du(r,tv(e,t.expansion_conv,[2,2])),r}function rv(e,t){var n=wh(lc(e),t.separable_conv0,[1,1]);return n=wh(lc(n),t.separable_conv1,[1,1]),n=wh(lc(n),t.separable_conv2,[1,1]),n=Du(n,e),n}var ov,av=function(e){function t(t){var n=e.call(this,"TinyXception")||this;return n._numMainBlocks=t,n}return Yp(t,e),t.prototype.forwardInput=function(e){var t=this,n=this.params;if(!n)throw new Error("TinyXception - load model before inference");return $t((function(){var r=e.toBatchTensor(112,!0),o=[122.782,117.001,104.298],a=kf(r,o).div(mn(256)),i=lc(tv(a,n.entry_flow.conv_in,[2,2]));return i=nv(i,n.entry_flow.reduction_block_0,!1),i=nv(i,n.entry_flow.reduction_block_1),ff(t._numMainBlocks,0,1).forEach((function(e){i=rv(i,n.middle_flow["main_block_"+e])})),i=nv(i,n.exit_flow.reduction_block),i=lc(wh(i,n.exit_flow.separable_conv,[1,1])),i}))},t.prototype.forward=function(e){return Jp(this,void 0,void 0,(function(){var t;return Qp(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,ph(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.getDefaultModelName=function(){return"tiny_xception_model"},t.prototype.extractParamsFromWeigthMap=function(e){return ev(e,this._numMainBlocks)},t.prototype.extractParams=function(e){return Jh(e,this._numMainBlocks)},t}(bh);function iv(e){var t=[],n=Rh(e),r=n.extractWeights,o=n.getRemainingWeights,a=Eh(r,t),i=a(512,1,"fc/age"),s=a(512,2,"fc/gender");if(0!==o().length)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:t,params:{fc:{age:i,gender:s}}}}function sv(e){var t=[],n=Dh(e,t);function r(e){var t=n(e+"/weights",2),r=n(e+"/bias",1);return{weights:t,bias:r}}var o={fc:{age:r("fc/age"),gender:r("fc/gender")}};return kh(e,t),{params:o,paramMappings:t}}(function(e){e["FEMALE"]="female",e["MALE"]="male"})(ov||(ov={}));var uv=function(e){function t(t){void 0===t&&(t=new av(2));var n=e.call(this,"AgeGenderNet")||this;return n._faceFeatureExtractor=t,n}return Yp(t,e),Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(e){var t=this,n=this.params;if(!n)throw new Error(this._name+" - load model before inference");return $t((function(){var r=e instanceof dh?t.faceFeatureExtractor.forwardInput(e):e,o=Vl(r,[7,7],[2,2],"valid").as2D(r.shape[0],-1),a=Lh(o,n.fc.age).as1D(),i=Lh(o,n.fc.gender);return{age:a,gender:i}}))},t.prototype.forwardInput=function(e){var t=this;return $t((function(){var n=t.runNet(e),r=n.age,o=n.gender;return{age:r,gender:zr(o)}}))},t.prototype.forward=function(e){return Jp(this,void 0,void 0,(function(){var t;return Qp(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,ph(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.predictAgeAndGender=function(e){return Jp(this,void 0,void 0,(function(){var t,n,r,o,a,i,s=this;return Qp(this,(function(u){switch(u.label){case 0:return[4,ph(e)];case 1:return t=u.sent(),[4,this.forwardInput(t)];case 2:return n=u.sent(),r=Cr(n.age),o=Cr(n.gender),a=r.map((function(e,t){return{ageTensor:e,genderTensor:o[t]}})),[4,Promise.all(a.map((function(e){var t=e.ageTensor,n=e.genderTensor;return Jp(s,void 0,void 0,(function(){var e,r,o,a,i;return Qp(this,(function(s){switch(s.label){case 0:return[4,t.data()];case 1:return e=s.sent()[0],[4,n.data()];case 2:return r=s.sent()[0],o=r>.5,a=o?ov.MALE:ov.FEMALE,i=o?r:1-r,t.dispose(),n.dispose(),[2,{age:e,gender:a,genderProbability:i}]}}))}))})))];case 3:return i=u.sent(),n.age.dispose(),n.gender.dispose(),[2,t.isBatchInput?i:i[0]]}}))}))},t.prototype.getDefaultModelName=function(){return"age_gender_model"},t.prototype.dispose=function(t){void 0===t&&(t=!0),this.faceFeatureExtractor.dispose(t),e.prototype.dispose.call(this,t)},t.prototype.loadClassifierParams=function(e){var t=this.extractClassifierParams(e),n=t.params,r=t.paramMappings;this._params=n,this._paramMappings=r},t.prototype.extractClassifierParams=function(e){return iv(e)},t.prototype.extractParamsFromWeigthMap=function(e){var t=Wh(e),n=t.featureExtractorMap,r=t.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(n),sv(r)},t.prototype.extractParams=function(e){var t=1539,n=e.slice(0,e.length-t),r=e.slice(e.length-t);return this.faceFeatureExtractor.extractWeights(n),this.extractClassifierParams(r)},t}(bh),lv=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yp(t,e),t.prototype.postProcess=function(e,t,n){var r=n.map((function(e){var n=e.width,r=e.height,o=t/Math.max(r,n);return{width:n*o,height:r*o}})),o=r.length;return $t((function(){var n=function(e,t){return br([En([68],e),En([68],t)],1).as2D(1,136).as1D()},a=function(e,t){var n=r[e],o=n.width,a=n.height;return t(o,a)?Math.abs(o-a)/2:0},i=function(e){return a(e,(function(e,t){return e<t}))},s=function(e){return a(e,(function(e,t){return t<e}))},u=e.mul(En([o,136],t)).sub(br(Array.from(Array(o),(function(e,t){return n(i(t),s(t))})))).div(br(Array.from(Array(o),(function(e,t){return n(r[t].width,r[t].height)}))));return u}))},t.prototype.forwardInput=function(e){var t=this;return $t((function(){var n=t.runNet(e);return t.postProcess(n,e.inputSize,e.inputDimensions.map((function(e){var t=e[0],n=e[1];return{height:t,width:n}})))}))},t.prototype.forward=function(e){return Jp(this,void 0,void 0,(function(){var t;return Qp(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,ph(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.detectLandmarks=function(e){return Jp(this,void 0,void 0,(function(){var t,n,r,o=this;return Qp(this,(function(a){switch(a.label){case 0:return[4,ph(e)];case 1:return t=a.sent(),n=$t((function(){return Cr(o.forwardInput(t))})),[4,Promise.all(n.map((function(e,n){return Jp(o,void 0,void 0,(function(){var r,o,a,i,s;return Qp(this,(function(u){switch(u.label){case 0:return a=(o=Array).from,[4,e.data()];case 1:return r=a.apply(o,[u.sent()]),i=r.filter((function(e,t){return uf(t)})),s=r.filter((function(e,t){return!uf(t)})),[2,new Pf(Array(68).fill(0).map((function(e,t){return new mf(i[t],s[t])})),{height:t.getInputHeight(n),width:t.getInputWidth(n)})]}}))}))})))];case 2:return r=a.sent(),n.forEach((function(e){return e.dispose()})),[2,t.isBatchInput?r:r[0]]}}))}))},t.prototype.getClassifierChannelsOut=function(){return 136},t}(Hh),cv=function(e){function t(t){return void 0===t&&(t=new Nh),e.call(this,"FaceLandmark68Net",t)||this}return Yp(t,e),t.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t}(lv);function dv(e){var t=[],n=Bh(e,t).extractDenseBlock3Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2")};return kh(e,t),{params:r,paramMappings:t}}function pv(e){var t=[],n=Rh(e),r=n.extractWeights,o=n.getRemainingWeights,a=Th(r,t).extractDenseBlock3Params,i=a(3,32,"dense0",!0),s=a(32,64,"dense1"),u=a(64,128,"dense2");if(0!==o().length)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:t,params:{dense0:i,dense1:s,dense2:u}}}var fv=function(e){function t(){return e.call(this,"TinyFaceFeatureExtractor")||this}return Yp(t,e),t.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("TinyFaceFeatureExtractor - load model before inference");return $t((function(){var n=e.toBatchTensor(112,!0),r=[122.782,117.001,104.298],o=kf(n,r).div(mn(255)),a=xh(o,t.dense0,!0);return a=xh(a,t.dense1),a=xh(a,t.dense2),a=Vl(a,[14,14],[2,2],"valid"),a}))},t.prototype.forward=function(e){return Jp(this,void 0,void 0,(function(){var t;return Qp(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,ph(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},t.prototype.extractParamsFromWeigthMap=function(e){return dv(e)},t.prototype.extractParams=function(e){return pv(e)},t}(bh),hv=function(e){function t(t){return void 0===t&&(t=new fv),e.call(this,"FaceLandmark68TinyNet",t)||this}return Yp(t,e),t.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},t.prototype.getClassifierChannelsIn=function(){return 128},t}(lv);(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Yp(t,e)})(cv);function vv(e,t){return Du(zu(e,t.weights),t.biases)}function mv(e,t,n,r,o){void 0===o&&(o="same");var a=t.conv,i=a.filters,s=a.bias,u=yl(e,i,n,o);return u=Du(u,s),u=vv(u,t.scale),r?lc(u):u}function gv(e,t){return mv(e,t,[1,1],!0)}function yv(e,t){return mv(e,t,[1,1],!1)}function bv(e,t){return mv(e,t,[2,2],!0,"valid")}function wv(e,t){function n(t,n,r){var o=e(t),a=o.length/(n*r*r);if(sf(a))throw new Error("depth has to be an integer: "+a+", weights.length: "+o.length+", numFilters: "+n+", filterSize: "+r);return $t((function(){return pc(wn(o,[n,a,r,r]),[2,3,1,0])}))}function r(r,o,a,i){var s=n(r,o,a),u=gn(e(o));return t.push({paramPath:i+"/filters"},{paramPath:i+"/bias"}),{filters:s,bias:u}}function o(n,r){var o=gn(e(n)),a=gn(e(n));return t.push({paramPath:r+"/weights"},{paramPath:r+"/biases"}),{weights:o,biases:a}}function a(e,t,n,a){var i=r(e,t,n,a+"/conv"),s=o(t,a+"/scale");return{conv:i,scale:s}}function i(e,t,n,r,o){void 0===o&&(o=!1);var i=a((o?.5:1)*e,t,n,r+"/conv1"),s=a(e,t,n,r+"/conv2");return{conv1:i,conv2:s}}return{extractConvLayerParams:a,extractResidualLayerParams:i}}function xv(e){var t=Rh(e),n=t.extractWeights,r=t.getRemainingWeights,o=[],a=wv(n,o),i=a.extractConvLayerParams,s=a.extractResidualLayerParams,u=i(4704,32,7,"conv32_down"),l=s(9216,32,3,"conv32_1"),c=s(9216,32,3,"conv32_2"),d=s(9216,32,3,"conv32_3"),p=s(36864,64,3,"conv64_down",!0),f=s(36864,64,3,"conv64_1"),h=s(36864,64,3,"conv64_2"),v=s(36864,64,3,"conv64_3"),m=s(147456,128,3,"conv128_down",!0),g=s(147456,128,3,"conv128_1"),y=s(147456,128,3,"conv128_2"),b=s(589824,256,3,"conv256_down",!0),w=s(589824,256,3,"conv256_1"),x=s(589824,256,3,"conv256_2"),C=s(589824,256,3,"conv256_down_out"),_=$t((function(){return pc(yn(n(32768),[128,256]),[1,0])}));if(o.push({paramPath:"fc"}),0!==r().length)throw new Error("weights remaing after extract: "+r().length);var k={conv32_down:u,conv32_1:l,conv32_2:c,conv32_3:d,conv64_down:p,conv64_1:f,conv64_2:h,conv64_3:v,conv128_down:m,conv128_1:g,conv128_2:y,conv256_down:b,conv256_1:w,conv256_2:x,conv256_down_out:C,fc:_};return{params:k,paramMappings:o}}function Cv(e,t){var n=Dh(e,t);function r(e){var t=n(e+"/scale/weights",1),r=n(e+"/scale/biases",1);return{weights:t,biases:r}}function o(e){var t=n(e+"/conv/filters",4),o=n(e+"/conv/bias",1),a=r(e);return{conv:{filters:t,bias:o},scale:a}}function a(e){return{conv1:o(e+"/conv1"),conv2:o(e+"/conv2")}}return{extractConvLayerParams:o,extractResidualLayerParams:a}}function _v(e){var t=[],n=Cv(e,t),r=n.extractConvLayerParams,o=n.extractResidualLayerParams,a=r("conv32_down"),i=o("conv32_1"),s=o("conv32_2"),u=o("conv32_3"),l=o("conv64_down"),c=o("conv64_1"),d=o("conv64_2"),p=o("conv64_3"),f=o("conv128_down"),h=o("conv128_1"),v=o("conv128_2"),m=o("conv256_down"),g=o("conv256_1"),y=o("conv256_2"),b=o("conv256_down_out"),w=e["fc"];if(t.push({originalPath:"fc",paramPath:"fc"}),!rf(w))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+w);var x={conv32_down:a,conv32_1:i,conv32_2:s,conv32_3:u,conv64_down:l,conv64_1:c,conv64_2:d,conv64_3:p,conv128_down:f,conv128_1:h,conv128_2:v,conv256_down:m,conv256_1:g,conv256_2:y,conv256_down_out:b,fc:w};return kh(e,t),{params:x,paramMappings:t}}function kv(e,t){var n=gv(e,t.conv1);return n=yv(n,t.conv2),n=Du(n,e),n=lc(n),n}function Sv(e,t){var n=bv(e,t.conv1);n=yv(n,t.conv2);var r=Vl(e,2,2,"valid"),o=Sn(r.shape),a=r.shape[3]!==n.shape[3],i=r.shape[1]!==n.shape[1]||r.shape[2]!==n.shape[2];if(i){var s=ef(n.shape);s[1]=1;var u=Sn(s);n=Rn([n,u],1);var l=ef(n.shape);l[2]=1;var c=Sn(l);n=Rn([n,c],2)}return r=a?Rn([r,o],3):r,n=Du(r,n),n=lc(n),n}var Ev=function(e){function t(){return e.call(this,"FaceRecognitionNet")||this}return Yp(t,e),t.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("FaceRecognitionNet - load model before inference");return $t((function(){var n=e.toBatchTensor(150,!0).toFloat(),r=[122.782,117.001,104.298],o=kf(n,r).div(mn(256)),a=bv(o,t.conv32_down);a=Ll(a,3,2,"valid"),a=kv(a,t.conv32_1),a=kv(a,t.conv32_2),a=kv(a,t.conv32_3),a=Sv(a,t.conv64_down),a=kv(a,t.conv64_1),a=kv(a,t.conv64_2),a=kv(a,t.conv64_3),a=Sv(a,t.conv128_down),a=kv(a,t.conv128_1),a=kv(a,t.conv128_2),a=Sv(a,t.conv256_down),a=kv(a,t.conv256_1),a=kv(a,t.conv256_2),a=Sv(a,t.conv256_down_out);var i=a.mean([1,2]),s=Al(i,t.fc);return s}))},t.prototype.forward=function(e){return Jp(this,void 0,void 0,(function(){var t;return Qp(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,ph(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.computeFaceDescriptor=function(e){return Jp(this,void 0,void 0,(function(){var t,n,r,o=this;return Qp(this,(function(a){switch(a.label){case 0:return[4,ph(e)];case 1:return t=a.sent(),n=$t((function(){return Cr(o.forwardInput(t))})),[4,Promise.all(n.map((function(e){return e.data()})))];case 2:return r=a.sent(),n.forEach((function(e){return e.dispose()})),[2,t.isBatchInput?r:r[0]]}}))}))},t.prototype.getDefaultModelName=function(){return"face_recognition_model"},t.prototype.extractParamsFromWeigthMap=function(e){return _v(e)},t.prototype.extractParams=function(e){return xv(e)},t}(bh);function Iv(e,t,n){var r={gender:t,genderProbability:n};return Object.assign({},e,r)}var Av=function(){function e(e){var t=void 0===e?{}:e,n=t.minFaceSize,r=t.scaleFactor,o=t.maxNumScales,a=t.scoreThresholds,i=t.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=n||20,this._scaleFactor=r||.709,this._maxNumScales=o||10,this._scoreThresholds=a||[.6,.7,.7],this._scaleSteps=i,"number"!==typeof this._minFaceSize||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if("number"!==typeof this._scaleFactor||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if("number"!==typeof this._maxNumScales||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||3!==this._scoreThresholds.length||this._scoreThresholds.some((function(e){return"number"!==typeof e})))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some((function(e){return"number"!==typeof e}))))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(e.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),e}();function Fv(e,t){function n(n,r){var o=wn(e(9*n),[3,3,n,1]),a=gn(e(n)),i=gn(e(n)),s=gn(e(n)),u=gn(e(n));return t.push({paramPath:r+"/filters"},{paramPath:r+"/batch_norm_scale"},{paramPath:r+"/batch_norm_offset"},{paramPath:r+"/batch_norm_mean"},{paramPath:r+"/batch_norm_variance"}),{filters:o,batch_norm_scale:a,batch_norm_offset:i,batch_norm_mean:s,batch_norm_variance:u}}function r(n,r,o,a,i){var s=wn(e(n*r*o*o),[o,o,n,r]),u=gn(e(r));return t.push({paramPath:a+"/filters"},{paramPath:a+"/"+(i?"batch_norm_offset":"bias")}),{filters:s,bias:u}}function o(e,t,n,o){var a=r(e,t,n,o,!0),i=a.filters,s=a.bias;return{filters:i,batch_norm_offset:s}}function a(e,t,r){var a=n(e,r+"/depthwise_conv"),i=o(e,t,1,r+"/pointwise_conv");return{depthwise_conv:a,pointwise_conv:i}}function i(){var e=o(3,32,3,"mobilenetv1/conv_0"),t=a(32,64,"mobilenetv1/conv_1"),n=a(64,128,"mobilenetv1/conv_2"),r=a(128,128,"mobilenetv1/conv_3"),i=a(128,256,"mobilenetv1/conv_4"),s=a(256,256,"mobilenetv1/conv_5"),u=a(256,512,"mobilenetv1/conv_6"),l=a(512,512,"mobilenetv1/conv_7"),c=a(512,512,"mobilenetv1/conv_8"),d=a(512,512,"mobilenetv1/conv_9"),p=a(512,512,"mobilenetv1/conv_10"),f=a(512,512,"mobilenetv1/conv_11"),h=a(512,1024,"mobilenetv1/conv_12"),v=a(1024,1024,"mobilenetv1/conv_13");return{conv_0:e,conv_1:t,conv_2:n,conv_3:r,conv_4:i,conv_5:s,conv_6:u,conv_7:l,conv_8:c,conv_9:d,conv_10:p,conv_11:f,conv_12:h,conv_13:v}}function s(){var e=o(1024,256,1,"prediction_layer/conv_0"),t=o(256,512,3,"prediction_layer/conv_1"),n=o(512,128,1,"prediction_layer/conv_2"),a=o(128,256,3,"prediction_layer/conv_3"),i=o(256,128,1,"prediction_layer/conv_4"),s=o(128,256,3,"prediction_layer/conv_5"),u=o(256,64,1,"prediction_layer/conv_6"),l=o(64,128,3,"prediction_layer/conv_7"),c=r(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),d=r(512,9,1,"prediction_layer/box_predictor_0/class_predictor"),p=r(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),f=r(1024,18,1,"prediction_layer/box_predictor_1/class_predictor"),h=r(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),v=r(512,18,1,"prediction_layer/box_predictor_2/class_predictor"),m=r(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),g=r(256,18,1,"prediction_layer/box_predictor_3/class_predictor"),y=r(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),b=r(256,18,1,"prediction_layer/box_predictor_4/class_predictor"),w=r(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),x=r(128,18,1,"prediction_layer/box_predictor_5/class_predictor"),C={box_encoding_predictor:c,class_predictor:d},_={box_encoding_predictor:p,class_predictor:f},k={box_encoding_predictor:h,class_predictor:v},S={box_encoding_predictor:m,class_predictor:g},E={box_encoding_predictor:y,class_predictor:b},I={box_encoding_predictor:w,class_predictor:x};return{conv_0:e,conv_1:t,conv_2:n,conv_3:a,conv_4:i,conv_5:s,conv_6:u,conv_7:l,box_predictor_0:C,box_predictor_1:_,box_predictor_2:k,box_predictor_3:S,box_predictor_4:E,box_predictor_5:I}}return{extractMobilenetV1Params:i,extractPredictionLayerParams:s}}function Dv(e){var t=[],n=Rh(e),r=n.extractWeights,o=n.getRemainingWeights,a=Fv(r,t),i=a.extractMobilenetV1Params,s=a.extractPredictionLayerParams,u=i(),l=s(),c=bn(r(20472),[1,5118,4]),d={extra_dim:c};if(t.push({paramPath:"output_layer/extra_dim"}),0!==o().length)throw new Error("weights remaing after extract: "+o().length);return{params:{mobilenetv1:u,prediction_layer:l,output_layer:d},paramMappings:t}}function Rv(e,t){var n=Dh(e,t);function r(e,t,r){var o=n(e+"/Conv2d_"+t+"_pointwise/weights",4,r+"/filters"),a=n(e+"/Conv2d_"+t+"_pointwise/convolution_bn_offset",1,r+"/batch_norm_offset");return{filters:o,batch_norm_offset:a}}function o(e){var t="mobilenetv1/conv_"+e,o="MobilenetV1/Conv2d_"+e+"_depthwise",a=t+"/depthwise_conv",i=t+"/pointwise_conv",s=n(o+"/depthwise_weights",4,a+"/filters"),u=n(o+"/BatchNorm/gamma",1,a+"/batch_norm_scale"),l=n(o+"/BatchNorm/beta",1,a+"/batch_norm_offset"),c=n(o+"/BatchNorm/moving_mean",1,a+"/batch_norm_mean"),d=n(o+"/BatchNorm/moving_variance",1,a+"/batch_norm_variance");return{depthwise_conv:{filters:s,batch_norm_scale:u,batch_norm_offset:l,batch_norm_mean:c,batch_norm_variance:d},pointwise_conv:r("MobilenetV1",e,i)}}function a(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:o(1),conv_2:o(2),conv_3:o(3),conv_4:o(4),conv_5:o(5),conv_6:o(6),conv_7:o(7),conv_8:o(8),conv_9:o(9),conv_10:o(10),conv_11:o(11),conv_12:o(12),conv_13:o(13)}}function i(e,t){var r=n(e+"/weights",4,t+"/filters"),o=n(e+"/biases",1,t+"/bias");return{filters:r,bias:o}}function s(e){var t=i("Prediction/BoxPredictor_"+e+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+e+"/box_encoding_predictor"),n=i("Prediction/BoxPredictor_"+e+"/ClassPredictor","prediction_layer/box_predictor_"+e+"/class_predictor");return{box_encoding_predictor:t,class_predictor:n}}function u(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:s(0),box_predictor_1:s(1),box_predictor_2:s(2),box_predictor_3:s(3),box_predictor_4:s(4),box_predictor_5:s(5)}}return{extractMobilenetV1Params:a,extractPredictionLayerParams:u}}function Tv(e){var t=[],n=Rv(e,t),r=n.extractMobilenetV1Params,o=n.extractPredictionLayerParams,a=e["Output/extra_dim"];if(t.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!of(a))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+a);var i={mobilenetv1:r(),prediction_layer:o(),output_layer:{extra_dim:a}};return kh(e,t),{params:i,paramMappings:t}}function Ov(e,t,n){return $t((function(){var r=yl(e,t.filters,n,"same");return r=Du(r,t.batch_norm_offset),Ls(r,0,6)}))}var Pv=.0010000000474974513;function Bv(e,t,n){return $t((function(){var r=Cl(e,t.filters,n,"same");return r=wu(r,t.batch_norm_mean,t.batch_norm_variance,t.batch_norm_offset,t.batch_norm_scale,Pv),Ls(r,0,6)}))}function Mv(e){return[2,4,6,12].some((function(t){return t===e}))?[2,2]:[1,1]}function Nv(e,t){return $t((function(){var n=null,r=Ov(e,t.conv_0,[2,2]),o=[t.conv_1,t.conv_2,t.conv_3,t.conv_4,t.conv_5,t.conv_6,t.conv_7,t.conv_8,t.conv_9,t.conv_10,t.conv_11,t.conv_12,t.conv_13];if(o.forEach((function(e,t){var o=t+1,a=Mv(o);r=Bv(r,e.depthwise_conv,a),r=Ov(r,e.pointwise_conv,[1,1]),11===o&&(n=r)})),null===n)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:r,conv11:n}}))}function Lv(e,t,n,r,o){var a=e.shape[0],i=Math.min(n,a),s=t.map((function(e,t){return{score:e,boxIndex:t}})).filter((function(e){return e.score>o})).sort((function(e,t){return t.score-e.score})),u=function(e){return e<=r?1:0},l=[];return s.forEach((function(t){if(!(l.length>=i)){for(var n=t.score,r=l.length-1;r>=0;--r){var a=Vv(e,t.boxIndex,l[r]);if(0!==a&&(t.score*=u(a),t.score<=o))break}n===t.score&&l.push(t.boxIndex)}})),l}function Vv(e,t,n){var r=e.arraySync(),o=Math.min(r[t][0],r[t][2]),a=Math.min(r[t][1],r[t][3]),i=Math.max(r[t][0],r[t][2]),s=Math.max(r[t][1],r[t][3]),u=Math.min(r[n][0],r[n][2]),l=Math.min(r[n][1],r[n][3]),c=Math.max(r[n][0],r[n][2]),d=Math.max(r[n][1],r[n][3]),p=(i-o)*(s-a),f=(c-u)*(d-l);if(p<=0||f<=0)return 0;var h=Math.max(o,u),v=Math.max(a,l),m=Math.min(i,c),g=Math.min(s,d),y=Math.max(m-h,0)*Math.max(g-v,0);return y/(p+f-y)}function jv(e){var t=Cr(pc(e,[1,0])),n=[Xu(t[2],t[0]),Xu(t[3],t[1])],r=[Du(t[0],Pu(n[0],mn(2))),Du(t[1],Pu(n[1],mn(2)))];return{sizes:n,centers:r}}function Wv(e,t){var n=jv(e),r=n.sizes,o=n.centers,a=Cr(pc(t,[1,0])),i=Pu(zu(Hs(Pu(a[2],mn(5))),r[0]),mn(2)),s=Du(zu(Pu(a[0],mn(10)),r[0]),o[0]),u=Pu(zu(Hs(Pu(a[3],mn(5))),r[1]),mn(2)),l=Du(zu(Pu(a[1],mn(10)),r[1]),o[1]);return pc(br([Xu(s,i),Xu(l,u),Du(s,i),Du(l,u)]),[1,0])}function Hv(e,t,n){return $t((function(){var r=e.shape[0],o=Wv(mr(wr(n.extra_dim,[r,1,1]),[-1,4]),mr(e,[-1,4]));o=mr(o,[r,o.shape[0]/r,4]);var a=Js(Ul(t,[0,0,1],[-1,-1,-1])),i=Ul(a,[0,0,0],[-1,-1,1]);i=mr(i,[r,i.shape[1]]);var s=Cr(o),u=Cr(i);return{boxes:s,scores:u}}))}function Uv(e,t){return $t((function(){var n=e.shape[0],r=mr(_h(e,t.box_encoding_predictor),[n,-1,1,4]),o=mr(_h(e,t.class_predictor),[n,-1,3]);return{boxPredictionEncoding:r,classPrediction:o}}))}function zv(e,t,n){return $t((function(){var r=Ov(e,n.conv_0,[1,1]),o=Ov(r,n.conv_1,[2,2]),a=Ov(o,n.conv_2,[1,1]),i=Ov(a,n.conv_3,[2,2]),s=Ov(i,n.conv_4,[1,1]),u=Ov(s,n.conv_5,[2,2]),l=Ov(u,n.conv_6,[1,1]),c=Ov(l,n.conv_7,[2,2]),d=Uv(t,n.box_predictor_0),p=Uv(e,n.box_predictor_1),f=Uv(o,n.box_predictor_2),h=Uv(i,n.box_predictor_3),v=Uv(u,n.box_predictor_4),m=Uv(c,n.box_predictor_5),g=Rn([d.boxPredictionEncoding,p.boxPredictionEncoding,f.boxPredictionEncoding,h.boxPredictionEncoding,v.boxPredictionEncoding,m.boxPredictionEncoding],1),y=Rn([d.classPrediction,p.classPrediction,f.classPrediction,h.classPrediction,v.classPrediction,m.classPrediction],1);return{boxPredictions:g,classPredictions:y}}))}var $v=function(){function e(e){var t=void 0===e?{}:e,n=t.minConfidence,r=t.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=n||.5,this._maxResults=r||100,"number"!==typeof this._minConfidence||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if("number"!==typeof this._maxResults)throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(e.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),e}(),qv=function(e){function t(){return e.call(this,"SsdMobilenetv1")||this}return Yp(t,e),t.prototype.forwardInput=function(e){var t=this.params;if(!t)throw new Error("SsdMobilenetv1 - load model before inference");return $t((function(){var n=e.toBatchTensor(512,!1).toFloat(),r=Xu(zu(n,mn(.007843137718737125)),mn(1)),o=Nv(r,t.mobilenetv1),a=zv(o.out,o.conv11,t.prediction_layer),i=a.boxPredictions,s=a.classPredictions;return Hv(i,s,t.output_layer)}))},t.prototype.forward=function(e){return Jp(this,void 0,void 0,(function(){var t;return Qp(this,(function(n){switch(n.label){case 0:return t=this.forwardInput,[4,ph(e)];case 1:return[2,t.apply(this,[n.sent()])]}}))}))},t.prototype.locateFaces=function(e,t){return void 0===t&&(t={}),Jp(this,void 0,void 0,(function(){var n,r,o,a,i,s,u,l,c,d,p,f,h,v,m,g,y,b,w,x,C;return Qp(this,(function(_){switch(_.label){case 0:return n=new $v(t),r=n.maxResults,o=n.minConfidence,[4,ph(e)];case 1:for(a=_.sent(),i=this.forwardInput(a),s=i.boxes,u=i.scores,l=s[0],c=u[0],d=1;d<s.length;d++)s[d].dispose(),u[d].dispose();return h=(f=Array).from,[4,c.data()];case 2:return p=h.apply(f,[_.sent()]),v=.5,m=Lv(l,p,r,v,o),g=a.getReshapedInputDimensions(0),y=a.inputSize,b=y/g.width,w=y/g.height,x=l.arraySync(),C=m.map((function(e){var t=[Math.max(0,x[e][0]),Math.min(1,x[e][2])].map((function(e){return e*w})),n=t[0],r=t[1],o=[Math.max(0,x[e][1]),Math.min(1,x[e][3])].map((function(e){return e*b})),i=o[0],s=o[1];return new wf(p[e],new Af(i,n,s-i,r-n),{height:a.getInputHeight(0),width:a.getInputWidth(0)})})),l.dispose(),c.dispose(),[2,C]}}))}))},t.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},t.prototype.extractParamsFromWeigthMap=function(e){return Tv(e)},t.prototype.extractParams=function(e){return Dv(e)},t}(bh);(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Yp(t,e)})(qv);var Gv,Kv=.4,Xv=[new mf(.738768,.874946),new mf(2.42204,2.65704),new mf(4.30971,7.04493),new mf(10.246,4.59428),new mf(12.6868,11.8741)],Yv=[new mf(1.603231,2.094468),new mf(6.041143,7.080126),new mf(2.882459,3.518061),new mf(4.266906,5.178857),new mf(9.041765,10.66308)],Zv=[117.001,114.697,97.404],Jv="tiny_yolov2_model",Qv="tiny_yolov2_separable_conv_model",em=function(e){return"number"===typeof e};function tm(e){if(!e)throw new Error("invalid config: "+e);if("boolean"!==typeof e.withSeparableConvs)throw new Error("config.withSeparableConvs has to be a boolean, have: "+e.withSeparableConvs);if(!em(e.iouThreshold)||e.iouThreshold<0||e.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+e.iouThreshold);if(!Array.isArray(e.classes)||!e.classes.length||!e.classes.every((function(e){return"string"===typeof e})))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(e.classes));if(!Array.isArray(e.anchors)||!e.anchors.length||!e.anchors.map((function(e){return e||{}})).every((function(e){return em(e.x)&&em(e.y)})))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(e.anchors));if(e.meanRgb&&(!Array.isArray(e.meanRgb)||3!==e.meanRgb.length||!e.meanRgb.every(em)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(e.meanRgb))}function nm(e){return $t((function(){var t=zu(e,mn(.10000000149011612));return Du(lc(Xu(e,t)),t)}))}function rm(e,t){return $t((function(){var n=sr(e,[[0,0],[1,1],[1,1],[0,0]]);return n=yl(n,t.conv.filters,[1,1],"valid"),n=Xu(n,t.bn.sub),n=zu(n,t.bn.truediv),n=Du(n,t.conv.bias),nm(n)}))}function om(e,t){return $t((function(){var n=sr(e,[[0,0],[1,1],[1,1],[0,0]]);return n=Sl(n,t.depthwise_filter,t.pointwise_filter,[1,1],"valid"),n=Du(n,t.bias),nm(n)}))}function am(e,t){var n=Sh(e,t);function r(n,r){var o=gn(e(n)),a=gn(e(n));return t.push({paramPath:r+"/sub"},{paramPath:r+"/truediv"}),{sub:o,truediv:a}}function o(e,t,o){var a=n(e,t,3,o+"/conv"),i=r(t,o+"/bn");return{conv:a,bn:i}}var a=Ah(e,t);return{extractConvParams:n,extractConvWithBatchNormParams:o,extractSeparableConvParams:a}}function im(e,t,n,r){var o,a=Rh(e),i=a.extractWeights,s=a.getRemainingWeights,u=[],l=am(i,u),c=l.extractConvParams,d=l.extractConvWithBatchNormParams,p=l.extractSeparableConvParams;if(t.withSeparableConvs){var f=r[0],h=r[1],v=r[2],m=r[3],g=r[4],y=r[5],b=r[6],w=r[7],x=r[8],C=t.isFirstLayerConv2d?c(f,h,3,"conv0"):p(f,h,"conv0"),_=p(h,v,"conv1"),k=p(v,m,"conv2"),S=p(m,g,"conv3"),E=p(g,y,"conv4"),I=p(y,b,"conv5"),A=w?p(b,w,"conv6"):void 0,F=x?p(w,x,"conv7"):void 0,D=c(x||w||b,5*n,1,"conv8");o={conv0:C,conv1:_,conv2:k,conv3:S,conv4:E,conv5:I,conv6:A,conv7:F,conv8:D}}else{f=r[0],h=r[1],v=r[2],m=r[3],g=r[4],y=r[5],b=r[6],w=r[7],x=r[8],C=d(f,h,"conv0"),_=d(h,v,"conv1"),k=d(v,m,"conv2"),S=d(m,g,"conv3"),E=d(g,y,"conv4"),I=d(y,b,"conv5"),A=d(b,w,"conv6"),F=d(w,x,"conv7"),D=c(x,5*n,1,"conv8");o={conv0:C,conv1:_,conv2:k,conv3:S,conv4:E,conv5:I,conv6:A,conv7:F,conv8:D}}if(0!==s().length)throw new Error("weights remaing after extract: "+s().length);return{params:o,paramMappings:u}}function sm(e,t){var n=Dh(e,t);function r(e){var t=n(e+"/sub",1),r=n(e+"/truediv",1);return{sub:t,truediv:r}}function o(e){var t=n(e+"/filters",4),r=n(e+"/bias",1);return{filters:t,bias:r}}function a(e){var t=o(e+"/conv"),n=r(e+"/bn");return{conv:t,bn:n}}var i=Fh(n);return{extractConvParams:o,extractConvWithBatchNormParams:a,extractSeparableConvParams:i}}function um(e,t){var n,r=[],o=sm(e,r),a=o.extractConvParams,i=o.extractConvWithBatchNormParams,s=o.extractSeparableConvParams;if(t.withSeparableConvs){var u=t.filterSizes&&t.filterSizes.length||9;n={conv0:t.isFirstLayerConv2d?a("conv0"):s("conv0"),conv1:s("conv1"),conv2:s("conv2"),conv3:s("conv3"),conv4:s("conv4"),conv5:s("conv5"),conv6:u>7?s("conv6"):void 0,conv7:u>8?s("conv7"):void 0,conv8:a("conv8")}}else n={conv0:i("conv0"),conv1:i("conv1"),conv2:i("conv2"),conv3:i("conv3"),conv4:i("conv4"),conv5:i("conv5"),conv6:i("conv6"),conv7:i("conv7"),conv8:a("conv8")};return kh(e,r),{params:n,paramMappings:r}}(function(e){e[e["XS"]=224]="XS",e[e["SM"]=320]="SM",e[e["MD"]=416]="MD",e[e["LG"]=608]="LG"})(Gv||(Gv={}));var lm=function(){function e(e){var t=void 0===e?{}:e,n=t.inputSize,r=t.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=n||416,this._scoreThreshold=r||.5,"number"!==typeof this._inputSize||this._inputSize%32!==0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if("number"!==typeof this._scoreThreshold||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),e}(),cm=function(e){function t(t){var n=e.call(this,"TinyYolov2")||this;return tm(t),n._config=t,n}return Yp(t,e),Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),t.prototype.runTinyYolov2=function(e,t){var n=rm(e,t.conv0);return n=Ll(n,[2,2],[2,2],"same"),n=rm(n,t.conv1),n=Ll(n,[2,2],[2,2],"same"),n=rm(n,t.conv2),n=Ll(n,[2,2],[2,2],"same"),n=rm(n,t.conv3),n=Ll(n,[2,2],[2,2],"same"),n=rm(n,t.conv4),n=Ll(n,[2,2],[2,2],"same"),n=rm(n,t.conv5),n=Ll(n,[2,2],[1,1],"same"),n=rm(n,t.conv6),n=rm(n,t.conv7),_h(n,t.conv8,"valid",!1)},t.prototype.runMobilenet=function(e,t){var n=this.config.isFirstLayerConv2d?nm(_h(e,t.conv0,"valid",!1)):om(e,t.conv0);return n=Ll(n,[2,2],[2,2],"same"),n=om(n,t.conv1),n=Ll(n,[2,2],[2,2],"same"),n=om(n,t.conv2),n=Ll(n,[2,2],[2,2],"same"),n=om(n,t.conv3),n=Ll(n,[2,2],[2,2],"same"),n=om(n,t.conv4),n=Ll(n,[2,2],[2,2],"same"),n=om(n,t.conv5),n=Ll(n,[2,2],[1,1],"same"),n=t.conv6?om(n,t.conv6):n,n=t.conv7?om(n,t.conv7):n,_h(n,t.conv8,"valid",!1)},t.prototype.forwardInput=function(e,t){var n=this,r=this.params;if(!r)throw new Error("TinyYolov2 - load model before inference");return $t((function(){var o=e.toBatchTensor(t,!1).toFloat();return o=n.config.meanRgb?kf(o,n.config.meanRgb):o,o=o.div(mn(256)),n.config.withSeparableConvs?n.runMobilenet(o,r):n.runTinyYolov2(o,r)}))},t.prototype.forward=function(e,t){return Jp(this,void 0,void 0,(function(){var n;return Qp(this,(function(r){switch(r.label){case 0:return n=this.forwardInput,[4,ph(e)];case 1:return[4,n.apply(this,[r.sent(),t])];case 2:return[2,r.sent()]}}))}))},t.prototype.detect=function(e,t){return void 0===t&&(t={}),Jp(this,void 0,void 0,(function(){var n,r,o,a,i,s,u,l,c,d,p,f,h,v,m=this;return Qp(this,(function(g){switch(g.label){case 0:return n=new lm(t),r=n.inputSize,o=n.scoreThreshold,[4,ph(e)];case 1:return a=g.sent(),[4,this.forwardInput(a,r)];case 2:return i=g.sent(),s=$t((function(){return Cr(i)[0].expandDims()})),u={width:a.getInputWidth(0),height:a.getInputHeight(0)},[4,this.extractBoxes(s,a.getReshapedInputDimensions(0),o)];case 3:return l=g.sent(),i.dispose(),s.dispose(),c=l.map((function(e){return e.box})),d=l.map((function(e){return e.score})),p=l.map((function(e){return e.classScore})),f=l.map((function(e){return m.config.classes[e.label]})),h=_f(c.map((function(e){return e.rescale(r)})),d,this.config.iouThreshold,!0),v=h.map((function(e){return new bf(d[e],p[e],f[e],c[e],u)})),[2,v]}}))}))},t.prototype.getDefaultModelName=function(){return""},t.prototype.extractParamsFromWeigthMap=function(e){return um(e,this.config)},t.prototype.extractParams=function(e){var n=this.config.filterSizes||t.DEFAULT_FILTER_SIZES,r=n?n.length:void 0;if(7!==r&&8!==r&&9!==r)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+r+" filterSizes in config");return im(e,this.config,this.boxEncodingSize,n)},t.prototype.extractBoxes=function(e,t,n){return Jp(this,void 0,void 0,(function(){var r,o,a,i,s,u,l,c,d,p,f,h,v,m,g,y,b,w,x,C,_,k,S,E,I,A,F,D,R,T=this;return Qp(this,(function(O){switch(O.label){case 0:return r=t.width,o=t.height,a=Math.max(r,o),i=a/r,s=a/o,u=e.shape[1],l=this.config.anchors.length,c=$t((function(){var t=e.reshape([u,u,l,T.boxEncodingSize]),n=t.slice([0,0,0,0],[u,u,l,4]),r=t.slice([0,0,0,4],[u,u,l,1]),o=T.withClassScores?zr(t.slice([0,0,0,5],[u,u,l,T.config.classes.length]),3):mn(0);return[n,r,o]})),d=c[0],p=c[1],f=c[2],h=[],[4,p.array()];case 1:return v=O.sent(),[4,d.array()];case 2:m=O.sent(),g=0,O.label=3;case 3:if(!(g<u))return[3,12];y=0,O.label=4;case 4:if(!(y<u))return[3,11];b=0,O.label=5;case 5:return b<l?(w=Ef(v[g][y][b][0]),!n||w>n?(x=(y+Ef(m[g][y][b][0]))/u*i,C=(g+Ef(m[g][y][b][1]))/u*s,_=Math.exp(m[g][y][b][2])*this.config.anchors[b].x/u*i,k=Math.exp(m[g][y][b][3])*this.config.anchors[b].y/u*s,S=x-_/2,E=C-k/2,I={row:g,col:y,anchor:b},this.withClassScores?[4,this.extractPredictedClass(f,I)]:[3,7]):[3,9]):[3,10];case 6:return R=O.sent(),[3,8];case 7:R={classScore:1,label:0},O.label=8;case 8:A=R,F=A.classScore,D=A.label,h.push(Zp({box:new yf(S,E,S+_,E+k),score:w,classScore:w*F,label:D},I)),O.label=9;case 9:return b++,[3,5];case 10:return y++,[3,4];case 11:return g++,[3,3];case 12:return d.dispose(),p.dispose(),f.dispose(),[2,h]}}))}))},t.prototype.extractPredictedClass=function(e,t){return Jp(this,void 0,void 0,(function(){var n,r,o,a;return Qp(this,(function(i){switch(i.label){case 0:return n=t.row,r=t.col,o=t.anchor,[4,e.array()];case 1:return a=i.sent(),[2,Array(this.config.classes.length).fill(0).map((function(e,t){return a[n][r][o][t]})).map((function(e,t){return{classScore:e,label:t}})).reduce((function(e,t){return e.classScore>t.classScore?e:t}))]}}))}))},t.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],t}(bh),dm=function(e){function t(t){void 0===t&&(t=!0);var n=this,r=Object.assign({},{withSeparableConvs:t,iouThreshold:Kv,classes:["face"]},t?{anchors:Yv,meanRgb:Zv}:{anchors:Xv,withClassScores:!0});return n=e.call(this,r)||this,n}return Yp(t,e),Object.defineProperty(t.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(e,t){return Jp(this,void 0,void 0,(function(){var n;return Qp(this,(function(r){switch(r.label){case 0:return[4,this.detect(e,t)];case 1:return n=r.sent(),[2,n.map((function(e){return new wf(e.score,e.relativeBox,{width:e.imageWidth,height:e.imageHeight})}))]}}))}))},t.prototype.getDefaultModelName=function(){return this.withSeparableConvs?Qv:Jv},t.prototype.extractParamsFromWeigthMap=function(t){return e.prototype.extractParamsFromWeigthMap.call(this,t)},t}(cm);var pm=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._name="TinyFaceDetectorOptions",t}return Yp(t,e),t}(lm),fm=function(){function e(){}return e.prototype.then=function(e){return Jp(this,void 0,void 0,(function(){var t;return Qp(this,(function(n){switch(n.label){case 0:return t=e,[4,this.run()];case 1:return[2,t.apply(void 0,[n.sent()])]}}))}))},e.prototype.run=function(){return Jp(this,void 0,void 0,(function(){return Qp(this,(function(e){throw new Error("ComposableTask - run is not implemented")}))}))},e}();function hm(e,t){var n={descriptor:t};return Object.assign({},e,n)}function vm(e,t,n,r,o){return void 0===o&&(o=function(e){var t=e.alignedRect;return t}),Jp(this,void 0,void 0,(function(){var a,i,s,u,l;return Qp(this,(function(c){switch(c.label){case 0:return a=e.map((function(e){return Gh(e)?o(e):e.detection})),s=r,s?[3,5]:t instanceof xe?[4,hh(t,a)]:[3,2];case 1:return u=c.sent(),[3,4];case 2:return[4,fh(t,a)];case 3:u=c.sent(),c.label=4;case 4:s=u,c.label=5;case 5:return i=s,[4,n(i)];case 6:return l=c.sent(),i.forEach((function(e){return e instanceof xe&&e.dispose()})),[2,l]}}))}))}function mm(e,t,n,r,o){return Jp(this,void 0,void 0,(function(){var a=this;return Qp(this,(function(i){return[2,vm([e],t,(function(e){return Jp(a,void 0,void 0,(function(){return Qp(this,(function(t){return[2,n(e[0])]}))}))}),r,o)]}))}))}function gm(e){return $t((function(){return br(Cr(e,3).reverse(),3)}))}var ym=2,bm=12;function wm(e,t){var n=Sh(e,t),r=Eh(e,t);function o(n,r){var o=gn(e(n));return t.push({paramPath:r}),o}function a(e,t,r){void 0===r&&(r=!1);var a=n(e[0],e[1],3,t+"/conv1"),i=o(e[1],t+"/prelu1_alpha"),s=n(e[1],e[2],3,t+"/conv2"),u=o(e[2],t+"/prelu2_alpha"),l=n(e[2],e[3],r?2:3,t+"/conv3"),c=o(e[3],t+"/prelu3_alpha");return{conv1:a,prelu1_alpha:i,conv2:s,prelu2_alpha:u,conv3:l,prelu3_alpha:c}}function i(){var e=a([3,10,16,32],"pnet"),t=n(32,2,1,"pnet/conv4_1"),r=n(32,4,1,"pnet/conv4_2");return Zp(Zp({},e),{conv4_1:t,conv4_2:r})}function s(){var e=a([3,28,48,64],"rnet",!0),t=r(576,128,"rnet/fc1"),n=o(128,"rnet/prelu4_alpha"),i=r(128,2,"rnet/fc2_1"),s=r(128,4,"rnet/fc2_2");return Zp(Zp({},e),{fc1:t,prelu4_alpha:n,fc2_1:i,fc2_2:s})}function u(){var e=a([3,32,64,64],"onet"),t=n(64,128,2,"onet/conv4"),i=o(128,"onet/prelu4_alpha"),s=r(1152,256,"onet/fc1"),u=o(256,"onet/prelu5_alpha"),l=r(256,2,"onet/fc2_1"),c=r(256,4,"onet/fc2_2"),d=r(256,10,"onet/fc2_3");return Zp(Zp({},e),{conv4:t,prelu4_alpha:i,fc1:s,prelu5_alpha:u,fc2_1:l,fc2_2:c,fc2_3:d})}return{extractPNetParams:i,extractRNetParams:s,extractONetParams:u}}function xm(e){var t=Rh(e),n=t.extractWeights,r=t.getRemainingWeights,o=[],a=wm(n,o),i=a.extractPNetParams,s=a.extractRNetParams,u=a.extractONetParams,l=i(),c=s(),d=u();if(0!==r().length)throw new Error("weights remaing after extract: "+r().length);return{params:{pnet:l,rnet:c,onet:d},paramMappings:o}}function Cm(e,t){var n=Dh(e,t);function r(e){var t=n(e+"/weights",4,e+"/filters"),r=n(e+"/bias",1);return{filters:t,bias:r}}function o(e){var t=n(e+"/weights",2),r=n(e+"/bias",1);return{weights:t,bias:r}}function a(e){return n(e,1)}function i(e){var t=r(e+"/conv1"),n=a(e+"/prelu1_alpha"),o=r(e+"/conv2"),i=a(e+"/prelu2_alpha"),s=r(e+"/conv3"),u=a(e+"/prelu3_alpha");return{conv1:t,prelu1_alpha:n,conv2:o,prelu2_alpha:i,conv3:s,prelu3_alpha:u}}function s(){var e=i("pnet"),t=r("pnet/conv4_1"),n=r("pnet/conv4_2");return Zp(Zp({},e),{conv4_1:t,conv4_2:n})}function u(){var e=i("rnet"),t=o("rnet/fc1"),n=a("rnet/prelu4_alpha"),r=o("rnet/fc2_1"),s=o("rnet/fc2_2");return Zp(Zp({},e),{fc1:t,prelu4_alpha:n,fc2_1:r,fc2_2:s})}function l(){var e=i("onet"),t=r("onet/conv4"),n=a("onet/prelu4_alpha"),s=o("onet/fc1"),u=a("onet/prelu5_alpha"),l=o("onet/fc2_1"),c=o("onet/fc2_2"),d=o("onet/fc2_3");return Zp(Zp({},e),{conv4:t,prelu4_alpha:n,fc1:s,prelu5_alpha:u,fc2_1:l,fc2_2:c,fc2_3:d})}return{extractPNetParams:s,extractRNetParams:u,extractONetParams:l}}function _m(e){var t=[],n=Cm(e,t),r=n.extractPNetParams,o=n.extractRNetParams,a=n.extractONetParams,i=r(),s=o(),u=a();return kh(e,t),{params:{pnet:i,rnet:s,onet:u},paramMappings:t}}function km(e,t){var n=t[0],r=t[1];return{height:Math.floor(n*e),width:Math.floor(r*e)}}function Sm(e,t,n){var r=n[0],o=n[1],a=bm/e,i=[],s=Math.min(r,o)*a,u=0;while(s>=12)i.push(a*Math.pow(t,u)),s*=t,u+=1;return i}var Em=function(e){function t(t,n,r,o){return e.call(this,{left:t,top:n,right:r,bottom:o},!0)||this}return Yp(t,e),t}(gf);function Im(e){return $t((function(){return zu(Xu(e,mn(127.5)),mn(.0078125))}))}function Am(e,t){return $t((function(){return Du(lc(e),zu(t,Ks(lc(Ks(e)))))}))}function Fm(e,t,n){return void 0===n&&(n=!1),$t((function(){var r=_h(e,t.conv1,"valid");return r=Am(r,t.prelu1_alpha),r=Ll(r,n?[2,2]:[3,3],[2,2],"same"),r=_h(r,t.conv2,"valid"),r=Am(r,t.prelu2_alpha),r=n?r:Ll(r,[3,3],[2,2],"valid"),r=_h(r,t.conv3,"valid"),r=Am(r,t.prelu3_alpha),r}))}function Dm(e,t){return $t((function(){var n=Fm(e,t,!0),r=_h(n,t.conv4_1,"valid"),o=rr(ec(r,3),3),a=zr(Xu(r,o),3),i=_h(n,t.conv4_2,"valid");return{prob:a,regions:i}}))}function Rm(e,t){return $t((function(){var n=km(t,e.shape.slice(1)),r=n.height,o=n.width,a=sd.resizeBilinear(e,[r,o]),i=Im(a);return pc(i,[0,2,1,3])}))}function Tm(e,t,n,r){for(var o=[],a=e.arraySync(),i=0;i<e.shape[0];i++)for(var s=0;s<e.shape[1];s++)a[i][s]>=r&&o.push(new mf(s,i));var u=o.map((function(e){var r=new yf(Math.round((e.y*ym+1)/n),Math.round((e.x*ym+1)/n),Math.round((e.y*ym+bm)/n),Math.round((e.x*ym+bm)/n)),o=a[e.y][e.x],i=t.arraySync(),s=new Em(i[e.y][e.x][0],i[e.y][e.x][1],i[e.y][e.x][2],i[e.y][e.x][3]);return{cell:r,score:o,region:s}}));return u}function Om(e,t,n,r,o){o.stage1=[];var a=t.map((function(t){return $t((function(){var n={scale:t},o=Rm(e,t),a=Date.now(),i=Dm(o,r),s=i.prob,u=i.regions;n.pnet=Date.now()-a;var l=Cr(Cr(s,3)[1])[0],c=Cr(u)[0];return{scoresTensor:l,regionsTensor:c,scale:t,statsForScale:n}}))})),i=a.map((function(e){var t=e.scoresTensor,r=e.regionsTensor,a=e.scale,i=e.statsForScale,s=Tm(t,r,a,n);if(t.dispose(),r.dispose(),!s.length)return o.stage1.push(i),[];var u=Date.now(),l=_f(s.map((function(e){return e.cell})),s.map((function(e){return e.score})),.5);return i.nms=Date.now()-u,i.numBoxes=l.length,o.stage1.push(i),l.map((function(e){return s[e]}))})),s=i.reduce((function(e,t){return e.concat(t)}),[]),u=[],l=[];if(s.length>0){var c=Date.now(),d=_f(s.map((function(e){return e.cell})),s.map((function(e){return e.score})),.7);o.stage1_nms=Date.now()-c,l=d.map((function(e){return s[e].score})),u=d.map((function(e){return s[e]})).map((function(e){var t=e.cell,n=e.region;return new yf(t.left+n.left*t.width,t.top+n.top*t.height,t.right+n.right*t.width,t.bottom+n.bottom*t.height).toSquare().round()}))}return{boxes:u,scores:l}}function Pm(e,t,n){var r=n.width,o=n.height;return Jp(this,void 0,void 0,(function(){var n,a,i,s=this;return Qp(this,(function(u){switch(u.label){case 0:return n=Jf(e),[4,Promise.all(t.map((function(t){return Jp(s,void 0,void 0,(function(){var r,o,a,i,s,u,l,c;return Qp(this,(function(d){return r=t.padAtBorders(e.height,e.width),o=r.y,a=r.ey,i=r.x,s=r.ex,u=i-1,l=o-1,c=n.getImageData(u,l,s-u,a-l),[2,Yf.isNodejs()?sh(c):createImageBitmap(c)]}))}))})))];case 1:return a=u.sent(),i=[],a.forEach((function(e){var t=ih({width:r,height:o}),n=Jf(t);n.drawImage(e,0,0,r,o);for(var a=n.getImageData(0,0,r,o).data,s=[],u=0;u<a.length;u+=4)s.push(a[u+2]),s.push(a[u+1]),s.push(a[u]);i.push(s)})),[2,i.map((function(e){var t=$t((function(){var t=pc(wn(e,[1,r,o,3]),[0,2,1,3]).toFloat();return Im(t)}));return t}))]}}))}))}function Bm(e,t){return $t((function(){var n=Fm(e,t),r=mr(n,[n.shape[0],t.fc1.weights.shape[0]]),o=Lh(r,t.fc1),a=Am(o,t.prelu4_alpha),i=Lh(a,t.fc2_1),s=rr(ec(i,1),1),u=zr(Xu(i,s),1),l=Lh(a,t.fc2_2),c=Cr(u,1)[1];return{scores:c,regions:l}}))}function Mm(e,t,n,r,o){return Jp(this,void 0,void 0,(function(){var a,i,s,u,l,c,d,p,f,h,v,m,g,y;return Qp(this,(function(b){switch(b.label){case 0:return a=Date.now(),[4,Pm(e,t,{width:24,height:24})];case 1:return i=b.sent(),o.stage2_extractImagePatches=Date.now()-a,a=Date.now(),s=i.map((function(e){var t=Bm(e,r);return e.dispose(),t})),o.stage2_rnet=Date.now()-a,u=s.length>1?Rn(s.map((function(e){return e.scores}))):s[0].scores,d=(c=Array).from,[4,u.data()];case 2:return l=d.apply(c,[b.sent()]),u.dispose(),p=l.map((function(e,t){return{score:e,idx:t}})).filter((function(e){return e.score>n})).map((function(e){var t=e.idx;return t})),f=p.map((function(e){return t[e]})),h=p.map((function(e){return l[e]})),v=[],m=[],f.length>0&&(a=Date.now(),g=_f(f,h,.7),o.stage2_nms=Date.now()-a,y=g.map((function(e){var t=s[p[e]].regions.arraySync();return new Em(t[0][0],t[0][1],t[0][2],t[0][3])})),m=g.map((function(e){return h[e]})),v=g.map((function(e,t){return f[e].calibrate(y[t])}))),s.forEach((function(e){e.regions.dispose(),e.scores.dispose()})),[2,{boxes:v,scores:m}]}}))}))}function Nm(e,t){return $t((function(){var n=Fm(e,t);n=Ll(n,[2,2],[2,2],"same"),n=_h(n,t.conv4,"valid"),n=Am(n,t.prelu4_alpha);var r=mr(n,[n.shape[0],t.fc1.weights.shape[0]]),o=Lh(r,t.fc1),a=Am(o,t.prelu5_alpha),i=Lh(a,t.fc2_1),s=rr(ec(i,1),1),u=zr(Xu(i,s),1),l=Lh(a,t.fc2_2),c=Lh(a,t.fc2_3),d=Cr(u,1)[1];return{scores:d,regions:l,points:c}}))}function Lm(e,t,n,r,o){return Jp(this,void 0,void 0,(function(){var a,i,s,u,l,c,d,p,f,h,v,m,g,y,b;return Qp(this,(function(w){switch(w.label){case 0:return a=Date.now(),[4,Pm(e,t,{width:48,height:48})];case 1:return i=w.sent(),o.stage3_extractImagePatches=Date.now()-a,a=Date.now(),s=i.map((function(e){var t=Nm(e,r);return e.dispose(),t})),o.stage3_onet=Date.now()-a,u=s.length>1?Rn(s.map((function(e){return e.scores}))):s[0].scores,d=(c=Array).from,[4,u.data()];case 2:return l=d.apply(c,[w.sent()]),u.dispose(),p=l.map((function(e,t){return{score:e,idx:t}})).filter((function(e){return e.score>n})).map((function(e){var t=e.idx;return t})),f=p.map((function(e){var t=s[e].regions.arraySync();return new Em(t[0][0],t[0][1],t[0][2],t[0][3])})),h=p.map((function(e,n){return t[e].calibrate(f[n])})),v=p.map((function(e){return l[e]})),m=[],g=[],y=[],h.length>0&&(a=Date.now(),b=_f(h,v,.7,!1),o.stage3_nms=Date.now()-a,m=b.map((function(e){return h[e]})),g=b.map((function(e){return v[e]})),y=b.map((function(e,t){return Array(5).fill(0).map((function(n,r){var o=s[e].points.arraySync();return new mf(o[0][r]*(m[t].width+1)+m[t].left,o[0][r+5]*(m[t].height+1)+m[t].top)}))}))),s.forEach((function(e){e.regions.dispose(),e.scores.dispose(),e.points.dispose()})),[2,{boxes:m,scores:g,points:y}]}}))}))}var Vm=function(e){function t(){return e.call(this,"Mtcnn")||this}return Yp(t,e),t.prototype.load=function(t){return Jp(this,void 0,void 0,(function(){return Qp(this,(function(n){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.load.call(this,t)]}))}))},t.prototype.loadFromDisk=function(t){return Jp(this,void 0,void 0,(function(){return Qp(this,(function(n){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.loadFromDisk.call(this,t)]}))}))},t.prototype.forwardInput=function(e,t){return void 0===t&&(t={}),Jp(this,void 0,void 0,(function(){var n,r,o,a,i,s,u,l,c,d,p,f,h,v,m,g,y,b,w,x,C;return Qp(this,(function(_){switch(_.label){case 0:if(n=this.params,!n)throw new Error("Mtcnn - load model before inference");if(r=e.canvases[0],!r)throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return o={},a=Date.now(),i=$t((function(){return gm(rr(Rp.fromPixels(r)).toFloat())})),s=function(e){return i.dispose(),o.total=Date.now()-a,e},u=i.shape.slice(1),l=u[0],c=u[1],d=new Av(t),p=d.minFaceSize,f=d.scaleFactor,h=d.maxNumScales,v=d.scoreThresholds,m=d.scaleSteps,g=(m||Sm(p,f,[l,c])).filter((function(e){var t=km(e,[l,c]);return Math.min(t.width,t.height)>bm})).slice(0,h),o.scales=g,o.pyramid=g.map((function(e){return km(e,[l,c])})),y=Date.now(),[4,Om(i,g,v[0],n.pnet,o)];case 1:return b=_.sent(),o.total_stage1=Date.now()-y,b.boxes.length?(o.stage2_numInputBoxes=b.boxes.length,y=Date.now(),[4,Mm(r,b.boxes,v[1],n.rnet,o)]):[2,s({results:[],stats:o})];case 2:return w=_.sent(),o.total_stage2=Date.now()-y,w.boxes.length?(o.stage3_numInputBoxes=w.boxes.length,y=Date.now(),[4,Lm(r,w.boxes,v[2],n.onet,o)]):[2,s({results:[],stats:o})];case 3:return x=_.sent(),o.total_stage3=Date.now()-y,C=x.boxes.map((function(e,t){return Kh(Vf({},new wf(x.scores[t],new Af(e.left/c,e.top/l,e.width/c,e.height/l),{height:l,width:c})),new Of(x.points[t].map((function(t){return t.sub(new mf(e.left,e.top)).div(new mf(e.width,e.height))})),{width:e.width,height:e.height}))})),[2,s({results:C,stats:o})]}}))}))},t.prototype.forward=function(e,t){return void 0===t&&(t={}),Jp(this,void 0,void 0,(function(){var n;return Qp(this,(function(r){switch(r.label){case 0:return n=this.forwardInput,[4,ph(e)];case 1:return[4,n.apply(this,[r.sent(),t])];case 2:return[2,r.sent().results]}}))}))},t.prototype.forwardWithStats=function(e,t){return void 0===t&&(t={}),Jp(this,void 0,void 0,(function(){var n;return Qp(this,(function(r){switch(r.label){case 0:return n=this.forwardInput,[4,ph(e)];case 1:return[2,n.apply(this,[r.sent(),t])]}}))}))},t.prototype.getDefaultModelName=function(){return"mtcnn_model"},t.prototype.extractParamsFromWeigthMap=function(e){return _m(e)},t.prototype.extractParams=function(e){return xm(e)},t}(bh),jm=.4,Wm=[new mf(1.603231,2.094468),new mf(6.041143,7.080126),new mf(2.882459,3.518061),new mf(4.266906,5.178857),new mf(9.041765,10.66308)],Hm=[117.001,114.697,97.404],Um=function(e){function t(){var t=this,n={withSeparableConvs:!0,iouThreshold:jm,classes:["face"],anchors:Wm,meanRgb:Hm,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return t=e.call(this,n)||this,t}return Yp(t,e),Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(e,t){return Jp(this,void 0,void 0,(function(){var n;return Qp(this,(function(r){switch(r.label){case 0:return[4,this.detect(e,t)];case 1:return n=r.sent(),[2,n.map((function(e){return new wf(e.score,e.relativeBox,{width:e.imageWidth,height:e.imageHeight})}))]}}))}))},t.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},t.prototype.extractParamsFromWeigthMap=function(t){return e.prototype.extractParamsFromWeigthMap.call(this,t)},t}(cm),zm={ssdMobilenetv1:new qv,tinyFaceDetector:new Um,tinyYolov2:new dm,mtcnn:new Vm,faceLandmark68Net:new cv,faceLandmark68TinyNet:new hv,faceRecognitionNet:new Ev,faceExpressionNet:new $h,ageGenderNet:new uv},$m=function(e){return zm.ssdMobilenetv1.load(e)},qm=function(e){return zm.faceLandmark68Net.load(e)},Gm=function(e){return zm.faceRecognitionNet.load(e)};function Km(e,t){var n={age:t};return Object.assign({},e,n)}var Xm=function(e){function t(t,n,r){var o=e.call(this)||this;return o.parentTask=t,o.input=n,o.extractedFaces=r,o}return Yp(t,e),t}(fm),Ym=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yp(t,e),t.prototype.run=function(){return Jp(this,void 0,void 0,(function(){var e,t,n=this;return Qp(this,(function(r){switch(r.label){case 0:return[4,this.parentTask];case 1:return e=r.sent(),[4,vm(e,this.input,(function(e){return Jp(n,void 0,void 0,(function(){return Qp(this,(function(t){switch(t.label){case 0:return[4,Promise.all(e.map((function(e){return zm.faceExpressionNet.predictExpressions(e)})))];case 1:return[2,t.sent()]}}))}))}),this.extractedFaces)];case 2:return t=r.sent(),[2,e.map((function(e,n){return qh(e,t[n])}))]}}))}))},t.prototype.withAgeAndGender=function(){return new tg(this,this.input)},t}(Xm),Zm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yp(t,e),t.prototype.run=function(){return Jp(this,void 0,void 0,(function(){var e,t;return Qp(this,(function(n){switch(n.label){case 0:return[4,this.parentTask];case 1:return e=n.sent(),e?[4,mm(e,this.input,(function(e){return zm.faceExpressionNet.predictExpressions(e)}),this.extractedFaces)]:[2];case 2:return t=n.sent(),[2,qh(e,t)]}}))}))},t.prototype.withAgeAndGender=function(){return new ng(this,this.input)},t}(Xm),Jm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yp(t,e),t.prototype.withAgeAndGender=function(){return new rg(this,this.input)},t.prototype.withFaceDescriptors=function(){return new ig(this,this.input)},t}(Ym),Qm=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yp(t,e),t.prototype.withAgeAndGender=function(){return new og(this,this.input)},t.prototype.withFaceDescriptor=function(){return new sg(this,this.input)},t}(Zm),eg=function(e){function t(t,n,r){var o=e.call(this)||this;return o.parentTask=t,o.input=n,o.extractedFaces=r,o}return Yp(t,e),t}(fm),tg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yp(t,e),t.prototype.run=function(){return Jp(this,void 0,void 0,(function(){var e,t,n=this;return Qp(this,(function(r){switch(r.label){case 0:return[4,this.parentTask];case 1:return e=r.sent(),[4,vm(e,this.input,(function(e){return Jp(n,void 0,void 0,(function(){return Qp(this,(function(t){switch(t.label){case 0:return[4,Promise.all(e.map((function(e){return zm.ageGenderNet.predictAgeAndGender(e)})))];case 1:return[2,t.sent()]}}))}))}),this.extractedFaces)];case 2:return t=r.sent(),[2,e.map((function(e,n){var r=t[n],o=r.age,a=r.gender,i=r.genderProbability;return Km(Iv(e,a,i),o)}))]}}))}))},t.prototype.withFaceExpressions=function(){return new Ym(this,this.input)},t}(eg),ng=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yp(t,e),t.prototype.run=function(){return Jp(this,void 0,void 0,(function(){var e,t,n,r,o;return Qp(this,(function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return e=a.sent(),e?[4,mm(e,this.input,(function(e){return zm.ageGenderNet.predictAgeAndGender(e)}),this.extractedFaces)]:[2];case 2:return t=a.sent(),n=t.age,r=t.gender,o=t.genderProbability,[2,Km(Iv(e,r,o),n)]}}))}))},t.prototype.withFaceExpressions=function(){return new Zm(this,this.input)},t}(eg),rg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yp(t,e),t.prototype.withFaceExpressions=function(){return new Jm(this,this.input)},t.prototype.withFaceDescriptors=function(){return new ig(this,this.input)},t}(tg),og=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yp(t,e),t.prototype.withFaceExpressions=function(){return new Qm(this,this.input)},t.prototype.withFaceDescriptor=function(){return new sg(this,this.input)},t}(ng),ag=function(e){function t(t,n){var r=e.call(this)||this;return r.parentTask=t,r.input=n,r}return Yp(t,e),t}(fm),ig=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yp(t,e),t.prototype.run=function(){return Jp(this,void 0,void 0,(function(){var e,t;return Qp(this,(function(n){switch(n.label){case 0:return[4,this.parentTask];case 1:return e=n.sent(),[4,vm(e,this.input,(function(e){return Promise.all(e.map((function(e){return zm.faceRecognitionNet.computeFaceDescriptor(e)})))}),null,(function(e){return e.landmarks.align(null,{useDlibAlignment:!0})}))];case 2:return t=n.sent(),[2,t.map((function(t,n){return hm(e[n],t)}))]}}))}))},t.prototype.withFaceExpressions=function(){return new Jm(this,this.input)},t.prototype.withAgeAndGender=function(){return new rg(this,this.input)},t}(ag),sg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yp(t,e),t.prototype.run=function(){return Jp(this,void 0,void 0,(function(){var e,t;return Qp(this,(function(n){switch(n.label){case 0:return[4,this.parentTask];case 1:return e=n.sent(),e?[4,mm(e,this.input,(function(e){return zm.faceRecognitionNet.computeFaceDescriptor(e)}),null,(function(e){return e.landmarks.align(null,{useDlibAlignment:!0})}))]:[2];case 2:return t=n.sent(),[2,hm(e,t)]}}))}))},t.prototype.withFaceExpressions=function(){return new Qm(this,this.input)},t.prototype.withAgeAndGender=function(){return new og(this,this.input)},t}(ag),ug=function(e){function t(t,n,r){var o=e.call(this)||this;return o.parentTask=t,o.input=n,o.useTinyLandmarkNet=r,o}return Yp(t,e),Object.defineProperty(t.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?zm.faceLandmark68TinyNet:zm.faceLandmark68Net},enumerable:!0,configurable:!0}),t}(fm),lg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yp(t,e),t.prototype.run=function(){return Jp(this,void 0,void 0,(function(){var e,t,n,r,o,a=this;return Qp(this,(function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return e=i.sent(),t=e.map((function(e){return e.detection})),this.input instanceof xe?[4,hh(this.input,t)]:[3,3];case 2:return r=i.sent(),[3,5];case 3:return[4,fh(this.input,t)];case 4:r=i.sent(),i.label=5;case 5:return n=r,[4,Promise.all(n.map((function(e){return a.landmarkNet.detectLandmarks(e)})))];case 6:return o=i.sent(),n.forEach((function(e){return e instanceof xe&&e.dispose()})),[2,e.map((function(e,t){return Kh(e,o[t])}))]}}))}))},t.prototype.withFaceExpressions=function(){return new Jm(this,this.input)},t.prototype.withAgeAndGender=function(){return new rg(this,this.input)},t.prototype.withFaceDescriptors=function(){return new ig(this,this.input)},t}(ug),cg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yp(t,e),t.prototype.run=function(){return Jp(this,void 0,void 0,(function(){var e,t,n,r,o;return Qp(this,(function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return e=a.sent(),e?(t=e.detection,this.input instanceof xe?[4,hh(this.input,[t])]:[3,3]):[2];case 2:return r=a.sent(),[3,5];case 3:return[4,fh(this.input,[t])];case 4:r=a.sent(),a.label=5;case 5:return n=r,[4,this.landmarkNet.detectLandmarks(n[0])];case 6:return o=a.sent(),n.forEach((function(e){return e instanceof xe&&e.dispose()})),[2,Kh(e,o)]}}))}))},t.prototype.withFaceExpressions=function(){return new Qm(this,this.input)},t.prototype.withAgeAndGender=function(){return new og(this,this.input)},t.prototype.withFaceDescriptor=function(){return new sg(this,this.input)},t}(ug),dg=function(e){function t(t,n){void 0===n&&(n=new $v);var r=e.call(this)||this;return r.input=t,r.options=n,r}return Yp(t,e),t}(fm),pg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yp(t,e),t.prototype.run=function(){return Jp(this,void 0,void 0,(function(){var e,t,n,r;return Qp(this,(function(o){switch(o.label){case 0:return e=this,t=e.input,n=e.options,n instanceof Av?[4,zm.mtcnn.forward(t,n)]:[3,2];case 1:return[2,o.sent().map((function(e){return e.detection}))];case 2:if(r=n instanceof pm?function(e){return zm.tinyFaceDetector.locateFaces(e,n)}:n instanceof $v?function(e){return zm.ssdMobilenetv1.locateFaces(e,n)}:n instanceof lm?function(e){return zm.tinyYolov2.locateFaces(e,n)}:null,!r)throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,r(t)]}}))}))},t.prototype.runAndExtendWithFaceDetections=function(){var e=this;return new Promise((function(t){return Jp(e,void 0,void 0,(function(){var e;return Qp(this,(function(n){switch(n.label){case 0:return[4,this.run()];case 1:return e=n.sent(),[2,t(e.map((function(e){return Vf({},e)})))]}}))}))}))},t.prototype.withFaceLandmarks=function(e){return void 0===e&&(e=!1),new lg(this.runAndExtendWithFaceDetections(),this.input,e)},t.prototype.withFaceExpressions=function(){return new Ym(this.runAndExtendWithFaceDetections(),this.input)},t.prototype.withAgeAndGender=function(){return new tg(this.runAndExtendWithFaceDetections(),this.input)},t}(dg),fg=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yp(t,e),t.prototype.run=function(){return Jp(this,void 0,void 0,(function(){var e,t;return Qp(this,(function(n){switch(n.label){case 0:return[4,new pg(this.input,this.options)];case 1:return e=n.sent(),t=e[0],e.forEach((function(e){e.score>t.score&&(t=e)})),[2,t]}}))}))},t.prototype.runAndExtendWithFaceDetection=function(){var e=this;return new Promise((function(t){return Jp(e,void 0,void 0,(function(){var e;return Qp(this,(function(n){switch(n.label){case 0:return[4,this.run()];case 1:return e=n.sent(),[2,t(e?Vf({},e):void 0)]}}))}))}))},t.prototype.withFaceLandmarks=function(e){return void 0===e&&(e=!1),new cg(this.runAndExtendWithFaceDetection(),this.input,e)},t.prototype.withFaceExpressions=function(){return new Zm(this.runAndExtendWithFaceDetection(),this.input)},t.prototype.withAgeAndGender=function(){return new ng(this.runAndExtendWithFaceDetection(),this.input)},t}(dg);function hg(e,t){return void 0===t&&(t=new $v),new fg(e,t)}function vg(e,t){if(e.length!==t.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var n=Array.from(e),r=Array.from(t);return Math.sqrt(n.map((function(e,t){return e-r[t]})).reduce((function(e,t){return e+Math.pow(t,2)}),0))}(function(){function e(e,t){void 0===t&&(t=.6),this._distanceThreshold=t;var n=Array.isArray(e)?e:[e];if(!n.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var r=1,o=function(){return"person "+r++};this._labeledDescriptors=n.map((function(e){if(e instanceof Nf)return e;if(e instanceof Float32Array)return new Nf(o(),[e]);if(e.descriptor&&e.descriptor instanceof Float32Array)return new Nf(o(),[e.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")}))}Object.defineProperty(e.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),e.prototype.computeMeanDistance=function(e,t){return t.map((function(t){return vg(t,e)})).reduce((function(e,t){return e+t}),0)/(t.length||1)},e.prototype.matchDescriptor=function(e){var t=this;return this.labeledDescriptors.map((function(n){var r=n.descriptors,o=n.label;return new Bf(o,t.computeMeanDistance(e,r))})).reduce((function(e,t){return e.distance<t.distance?e:t}))},e.prototype.findBestMatch=function(e){var t=this.matchDescriptor(e);return t.distance<this.distanceThreshold?t:new Bf("unknown",t.distance)},e.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map((function(e){return e.toJSON()}))}},e.fromJSON=function(t){var n=t.labeledDescriptors.map((function(e){return Nf.fromJSON(e)}));return new e(n,t.distanceThreshold)}})()},2979:function(e,t,n){"use strict";n(1703);var r=n(5037),o=Object.prototype.toString,a=Object.prototype.hasOwnProperty,i=function(e,t,n){for(var r=0,o=e.length;r<o;r++)a.call(e,r)&&(null==n?t(e[r],r,e):t.call(n,e[r],r,e))},s=function(e,t,n){for(var r=0,o=e.length;r<o;r++)null==n?t(e.charAt(r),r,e):t.call(n,e.charAt(r),r,e)},u=function(e,t,n){for(var r in e)a.call(e,r)&&(null==n?t(e[r],r,e):t.call(n,e[r],r,e))},l=function(e,t,n){if(!r(t))throw new TypeError("iterator must be a function");var a;arguments.length>=3&&(a=n),"[object Array]"===o.call(e)?i(e,t,a):"string"===typeof e?s(e,t,a):u(e,t,a)};e.exports=l},5847:function(e,t,n){"use strict";n(1703);var r="Function.prototype.bind called on incompatible ",o=Array.prototype.slice,a=Object.prototype.toString,i="[object Function]";e.exports=function(e){var t=this;if("function"!==typeof t||a.call(t)!==i)throw new TypeError(r+t);for(var n,s=o.call(arguments,1),u=function(){if(this instanceof n){var r=t.apply(this,s.concat(o.call(arguments)));return Object(r)===r?r:this}return t.apply(e,s.concat(o.call(arguments)))},l=Math.max(0,t.length-s.length),c=[],d=0;d<l;d++)c.push("$"+d);if(n=Function("binder","return function ("+c.join(",")+"){ return binder.apply(this,arguments); }")(u),t.prototype){var p=function(){};p.prototype=t.prototype,n.prototype=new p,p.prototype=null}return n}},9148:function(e,t,n){"use strict";var r=n(5847);e.exports=Function.prototype.bind||r},8692:function(e,t,n){"use strict";var r;n(1703),n(8675),n(3462),n(7380),n(1118),n(2120);var o=SyntaxError,a=Function,i=TypeError,s=function(e){try{return a('"use strict"; return ('+e+").constructor;")()}catch(t){}},u=Object.getOwnPropertyDescriptor;if(u)try{u({},"")}catch(F){u=null}var l=function(){throw new i},c=u?function(){try{return l}catch(e){try{return u(arguments,"callee").get}catch(t){return l}}}():l,d=n(2763)(),p=Object.getPrototypeOf||function(e){return e.__proto__},f={},h="undefined"===typeof Uint8Array?r:p(Uint8Array),v={"%AggregateError%":"undefined"===typeof AggregateError?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"===typeof ArrayBuffer?r:ArrayBuffer,"%ArrayIteratorPrototype%":d?p([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":f,"%AsyncGenerator%":f,"%AsyncGeneratorFunction%":f,"%AsyncIteratorPrototype%":f,"%Atomics%":"undefined"===typeof Atomics?r:Atomics,"%BigInt%":"undefined"===typeof BigInt?r:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"===typeof DataView?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"===typeof Float32Array?r:Float32Array,"%Float64Array%":"undefined"===typeof Float64Array?r:Float64Array,"%FinalizationRegistry%":"undefined"===typeof FinalizationRegistry?r:FinalizationRegistry,"%Function%":a,"%GeneratorFunction%":f,"%Int8Array%":"undefined"===typeof Int8Array?r:Int8Array,"%Int16Array%":"undefined"===typeof Int16Array?r:Int16Array,"%Int32Array%":"undefined"===typeof Int32Array?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":d?p(p([][Symbol.iterator]())):r,"%JSON%":"object"===typeof JSON?JSON:r,"%Map%":"undefined"===typeof Map?r:Map,"%MapIteratorPrototype%":"undefined"!==typeof Map&&d?p((new Map)[Symbol.iterator]()):r,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"===typeof Promise?r:Promise,"%Proxy%":"undefined"===typeof Proxy?r:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"===typeof Reflect?r:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"===typeof Set?r:Set,"%SetIteratorPrototype%":"undefined"!==typeof Set&&d?p((new Set)[Symbol.iterator]()):r,"%SharedArrayBuffer%":"undefined"===typeof SharedArrayBuffer?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":d?p(""[Symbol.iterator]()):r,"%Symbol%":d?Symbol:r,"%SyntaxError%":o,"%ThrowTypeError%":c,"%TypedArray%":h,"%TypeError%":i,"%Uint8Array%":"undefined"===typeof Uint8Array?r:Uint8Array,"%Uint8ClampedArray%":"undefined"===typeof Uint8ClampedArray?r:Uint8ClampedArray,"%Uint16Array%":"undefined"===typeof Uint16Array?r:Uint16Array,"%Uint32Array%":"undefined"===typeof Uint32Array?r:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"===typeof WeakMap?r:WeakMap,"%WeakRef%":"undefined"===typeof WeakRef?r:WeakRef,"%WeakSet%":"undefined"===typeof WeakSet?r:WeakSet},m=function e(t){var n;if("%AsyncFunction%"===t)n=s("async function () {}");else if("%GeneratorFunction%"===t)n=s("function* () {}");else if("%AsyncGeneratorFunction%"===t)n=s("async function* () {}");else if("%AsyncGenerator%"===t){var r=e("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===t){var o=e("%AsyncGenerator%");o&&(n=p(o.prototype))}return v[t]=n,n},g={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},y=n(9148),b=n(5769),w=y.call(Function.call,Array.prototype.concat),x=y.call(Function.apply,Array.prototype.splice),C=y.call(Function.call,String.prototype.replace),_=y.call(Function.call,String.prototype.slice),k=y.call(Function.call,RegExp.prototype.exec),S=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,E=/\\(\\)?/g,I=function(e){var t=_(e,0,1),n=_(e,-1);if("%"===t&&"%"!==n)throw new o("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==t)throw new o("invalid intrinsic syntax, expected opening `%`");var r=[];return C(e,S,(function(e,t,n,o){r[r.length]=n?C(o,E,"$1"):t||e})),r},A=function(e,t){var n,r=e;if(b(g,r)&&(n=g[r],r="%"+n[0]+"%"),b(v,r)){var a=v[r];if(a===f&&(a=m(r)),"undefined"===typeof a&&!t)throw new i("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:a}}throw new o("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!==typeof e||0===e.length)throw new i("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!==typeof t)throw new i('"allowMissing" argument must be a boolean');if(null===k(/^%?[^%]*%?$/g,e))throw new o("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=I(e),r=n.length>0?n[0]:"",a=A("%"+r+"%",t),s=a.name,l=a.value,c=!1,d=a.alias;d&&(r=d[0],x(n,w([0,1],d)));for(var p=1,f=!0;p<n.length;p+=1){var h=n[p],m=_(h,0,1),g=_(h,-1);if(('"'===m||"'"===m||"`"===m||'"'===g||"'"===g||"`"===g)&&m!==g)throw new o("property names with quotes must have matching quotes");if("constructor"!==h&&f||(c=!0),r+="."+h,s="%"+r+"%",b(v,s))l=v[s];else if(null!=l){if(!(h in l)){if(!t)throw new i("base intrinsic for "+e+" exists, but the property is not available.");return}if(u&&p+1>=n.length){var y=u(l,h);f=!!y,l=f&&"get"in y&&!("originalValue"in y.get)?y.get:l[h]}else f=b(l,h),l=l[h];f&&!c&&(v[s]=l)}}return l}},2763:function(e,t,n){"use strict";var r="undefined"!==typeof Symbol&&Symbol,o=n(3994);e.exports=function(){return"function"===typeof r&&("function"===typeof Symbol&&("symbol"===typeof r("foo")&&("symbol"===typeof Symbol("bar")&&o())))}},3994:function(e){"use strict";e.exports=function(){if("function"!==typeof Symbol||"function"!==typeof Object.getOwnPropertySymbols)return!1;if("symbol"===typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),n=Object(t);if("string"===typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;var r=42;for(t in e[t]=r,e)return!1;if("function"===typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"===typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var o=Object.getOwnPropertySymbols(e);if(1!==o.length||o[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"===typeof Object.getOwnPropertyDescriptor){var a=Object.getOwnPropertyDescriptor(e,t);if(a.value!==r||!0!==a.enumerable)return!1}return!0}},2582:function(e,t,n){"use strict";var r=n(3994);e.exports=function(){return r()&&!!Symbol.toStringTag}},5769:function(e,t,n){"use strict";var r=n(9148);e.exports=r.call(Function.call,Object.prototype.hasOwnProperty)},1923:function(e){"function"===typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},2773:function(e,t,n){"use strict";var r=n(2582)(),o=n(5477),a=o("Object.prototype.toString"),i=function(e){return!(r&&e&&"object"===typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===a(e)},s=function(e){return!!i(e)||null!==e&&"object"===typeof e&&"number"===typeof e.length&&e.length>=0&&"[object Array]"!==a(e)&&"[object Function]"===a(e.callee)},u=function(){return i(arguments)}();i.isLegacyArguments=s,e.exports=u?i:s},5037:function(e){"use strict";var t,n,r=Function.prototype.toString,o="object"===typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"===typeof o&&"function"===typeof Object.defineProperty)try{t=Object.defineProperty({},"length",{get:function(){throw n}}),n={},o((function(){throw 42}),null,t)}catch(f){f!==n&&(o=null)}else o=null;var a=/^\s*class\b/,i=function(e){try{var t=r.call(e);return a.test(t)}catch(n){return!1}},s=function(e){try{return!i(e)&&(r.call(e),!0)}catch(t){return!1}},u=Object.prototype.toString,l="[object Function]",c="[object GeneratorFunction]",d="function"===typeof Symbol&&!!Symbol.toStringTag,p="object"===typeof document&&"undefined"===typeof document.all&&void 0!==document.all?document.all:{};e.exports=o?function(e){if(e===p)return!0;if(!e)return!1;if("function"!==typeof e&&"object"!==typeof e)return!1;if("function"===typeof e&&!e.prototype)return!0;try{o(e,null,t)}catch(r){if(r!==n)return!1}return!i(e)}:function(e){if(e===p)return!0;if(!e)return!1;if("function"!==typeof e&&"object"!==typeof e)return!1;if("function"===typeof e&&!e.prototype)return!0;if(d)return s(e);if(i(e))return!1;var t=u.call(e);return t===l||t===c}},4784:function(e,t,n){"use strict";var r,o=Object.prototype.toString,a=Function.prototype.toString,i=/^\s*(?:function)?\*/,s=n(2582)(),u=Object.getPrototypeOf,l=function(){if(!s)return!1;try{return Function("return function*() {}")()}catch(e){}};e.exports=function(e){if("function"!==typeof e)return!1;if(i.test(a.call(e)))return!0;if(!s){var t=o.call(e);return"[object GeneratorFunction]"===t}if(!u)return!1;if("undefined"===typeof r){var n=l();r=!!n&&u(n)}return u(e)===r}},8300:function(e,t,n){"use strict";var r=n(2979),o=n(4647),a=n(5477),i=a("Object.prototype.toString"),s=n(2582)(),u="undefined"===typeof globalThis?n.g:globalThis,l=o(),c=a("Array.prototype.indexOf",!0)||function(e,t){for(var n=0;n<e.length;n+=1)if(e[n]===t)return n;return-1},d=a("String.prototype.slice"),p={},f=n(2762),h=Object.getPrototypeOf;s&&f&&h&&r(l,(function(e){var t=new u[e];if(Symbol.toStringTag in t){var n=h(t),r=f(n,Symbol.toStringTag);if(!r){var o=h(n);r=f(o,Symbol.toStringTag)}p[e]=r.get}}));var v=function(e){var t=!1;return r(p,(function(n,r){if(!t)try{t=n.call(e)===r}catch(o){}})),t};e.exports=function(e){if(!e||"object"!==typeof e)return!1;if(!s||!(Symbol.toStringTag in e)){var t=d(i(e),8,-1);return c(l,t)>-1}return!!f&&v(e)}},7387:function(e,t,n){var r,o;n(1703),
/*!
 * jQuery JavaScript Library v3.6.0
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2021-03-02T17:08Z
 */
function(t,n){"use strict";"object"===typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!==typeof window?window:this,(function(n,a){"use strict";var i=[],s=Object.getPrototypeOf,u=i.slice,l=i.flat?function(e){return i.flat.call(e)}:function(e){return i.concat.apply([],e)},c=i.push,d=i.indexOf,p={},f=p.toString,h=p.hasOwnProperty,v=h.toString,m=v.call(Object),g={},y=function(e){return"function"===typeof e&&"number"!==typeof e.nodeType&&"function"!==typeof e.item},b=function(e){return null!=e&&e===e.window},w=n.document,x={type:!0,src:!0,nonce:!0,noModule:!0};function C(e,t,n){n=n||w;var r,o,a=n.createElement("script");if(a.text=e,t)for(r in x)o=t[r]||t.getAttribute&&t.getAttribute(r),o&&a.setAttribute(r,o);n.head.appendChild(a).parentNode.removeChild(a)}function _(e){return null==e?e+"":"object"===typeof e||"function"===typeof e?p[f.call(e)]||"object":typeof e}var k="3.6.0",S=function(e,t){return new S.fn.init(e,t)};function E(e){var t=!!e&&"length"in e&&e.length,n=_(e);return!y(e)&&!b(e)&&("array"===n||0===t||"number"===typeof t&&t>0&&t-1 in e)}S.fn=S.prototype={jquery:k,constructor:S,length:0,toArray:function(){return u.call(this)},get:function(e){return null==e?u.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=S.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return S.each(this,e)},map:function(e){return this.pushStack(S.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return this.pushStack(u.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(S.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(S.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:c,sort:i.sort,splice:i.splice},S.extend=S.fn.extend=function(){var e,t,n,r,o,a,i=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"===typeof i&&(l=i,i=arguments[s]||{},s++),"object"===typeof i||y(i)||(i={}),s===u&&(i=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&i!==r&&(l&&r&&(S.isPlainObject(r)||(o=Array.isArray(r)))?(n=i[t],a=o&&!Array.isArray(n)?[]:o||S.isPlainObject(n)?n:{},o=!1,i[t]=S.extend(l,a,r)):void 0!==r&&(i[t]=r));return i},S.extend({expando:"jQuery"+(k+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==f.call(e))&&(t=s(e),!t||(n=h.call(t,"constructor")&&t.constructor,"function"===typeof n&&v.call(n)===m))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){C(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(E(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(E(Object(e))?S.merge(n,"string"===typeof e?[e]:e):c.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:d.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,o=e.length;r<n;r++)e[o++]=t[r];return e.length=o,e},grep:function(e,t,n){for(var r,o=[],a=0,i=e.length,s=!n;a<i;a++)r=!t(e[a],a),r!==s&&o.push(e[a]);return o},map:function(e,t,n){var r,o,a=0,i=[];if(E(e))for(r=e.length;a<r;a++)o=t(e[a],a,n),null!=o&&i.push(o);else for(a in e)o=t(e[a],a,n),null!=o&&i.push(o);return l(i)},guid:1,support:g}),"function"===typeof Symbol&&(S.fn[Symbol.iterator]=i[Symbol.iterator]),S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){p["[object "+t+"]"]=t.toLowerCase()}));var I=
/*!
   * Sizzle CSS Selector Engine v2.3.6
   * https://sizzlejs.com/
   *
   * Copyright JS Foundation and other contributors
   * Released under the MIT license
   * https://js.foundation/
   *
   * Date: 2021-02-16
   */
function(e){var t,n,r,o,a,i,s,u,l,c,d,p,f,h,v,m,g,y,b,w="sizzle"+1*new Date,x=e.document,C=0,_=0,k=ue(),S=ue(),E=ue(),I=ue(),A=function(e,t){return e===t&&(d=!0),0},F={}.hasOwnProperty,D=[],R=D.pop,T=D.push,O=D.push,P=D.slice,B=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},M="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",N="[\\x20\\t\\r\\n\\f]",L="(?:\\\\[\\da-fA-F]{1,6}"+N+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",V="\\["+N+"*("+L+")(?:"+N+"*([*^$|!~]?=)"+N+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+L+"))|)"+N+"*\\]",j=":("+L+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+V+")*)|.*)\\)|)",W=new RegExp(N+"+","g"),H=new RegExp("^"+N+"+|((?:^|[^\\\\])(?:\\\\.)*)"+N+"+$","g"),U=new RegExp("^"+N+"*,"+N+"*"),z=new RegExp("^"+N+"*([>+~]|"+N+")"+N+"*"),$=new RegExp(N+"|>"),q=new RegExp(j),G=new RegExp("^"+L+"$"),K={ID:new RegExp("^#("+L+")"),CLASS:new RegExp("^\\.("+L+")"),TAG:new RegExp("^("+L+"|[*])"),ATTR:new RegExp("^"+V),PSEUDO:new RegExp("^"+j),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+N+"*(even|odd|(([+-]|)(\\d*)n|)"+N+"*(?:([+-]|)"+N+"*(\\d+)|))"+N+"*\\)|)","i"),bool:new RegExp("^(?:"+M+")$","i"),needsContext:new RegExp("^"+N+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+N+"*((?:-\\d)?\\d*)"+N+"*\\)|)(?=[^-]|$)","i")},X=/HTML$/i,Y=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,J=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}"+N+"?|\\\\([^\\r\\n\\f])","g"),ne=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,oe=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},ae=function(){p()},ie=we((function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{O.apply(D=P.call(x.childNodes),x.childNodes),D[x.childNodes.length].nodeType}catch(Ie){O={apply:D.length?function(e,t){T.apply(e,P.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}function se(e,t,r,o){var a,s,l,c,d,h,g,y=t&&t.ownerDocument,x=t?t.nodeType:9;if(r=r||[],"string"!==typeof e||!e||1!==x&&9!==x&&11!==x)return r;if(!o&&(p(t),t=t||f,v)){if(11!==x&&(d=Q.exec(e)))if(a=d[1]){if(9===x){if(!(l=t.getElementById(a)))return r;if(l.id===a)return r.push(l),r}else if(y&&(l=y.getElementById(a))&&b(t,l)&&l.id===a)return r.push(l),r}else{if(d[2])return O.apply(r,t.getElementsByTagName(e)),r;if((a=d[3])&&n.getElementsByClassName&&t.getElementsByClassName)return O.apply(r,t.getElementsByClassName(a)),r}if(n.qsa&&!I[e+" "]&&(!m||!m.test(e))&&(1!==x||"object"!==t.nodeName.toLowerCase())){if(g=e,y=t,1===x&&($.test(e)||z.test(e))){y=ee.test(e)&&ge(t.parentNode)||t,y===t&&n.scope||((c=t.getAttribute("id"))?c=c.replace(re,oe):t.setAttribute("id",c=w)),h=i(e),s=h.length;while(s--)h[s]=(c?"#"+c:":scope")+" "+be(h[s]);g=h.join(",")}try{return O.apply(r,y.querySelectorAll(g)),r}catch(C){I(e,!0)}finally{c===w&&t.removeAttribute("id")}}}return u(e.replace(H,"$1"),t,r,o)}function ue(){var e=[];function t(n,o){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=o}return t}function le(e){return e[w]=!0,e}function ce(e){var t=f.createElement("fieldset");try{return!!e(t)}catch(Ie){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function de(e,t){var n=e.split("|"),o=n.length;while(o--)r.attrHandle[n[o]]=t}function pe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function fe(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function he(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function ve(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ie(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function me(e){return le((function(t){return t=+t,le((function(n,r){var o,a=e([],n.length,t),i=a.length;while(i--)n[o=a[i]]&&(n[o]=!(r[o]=n[o]))}))}))}function ge(e){return e&&"undefined"!==typeof e.getElementsByTagName&&e}for(t in n=se.support={},a=se.isXML=function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!X.test(t||n&&n.nodeName||"HTML")},p=se.setDocument=function(e){var t,o,i=e?e.ownerDocument||e:x;return i!=f&&9===i.nodeType&&i.documentElement?(f=i,h=f.documentElement,v=!a(f),x!=f&&(o=f.defaultView)&&o.top!==o&&(o.addEventListener?o.addEventListener("unload",ae,!1):o.attachEvent&&o.attachEvent("onunload",ae)),n.scope=ce((function(e){return h.appendChild(e).appendChild(f.createElement("div")),"undefined"!==typeof e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length})),n.attributes=ce((function(e){return e.className="i",!e.getAttribute("className")})),n.getElementsByTagName=ce((function(e){return e.appendChild(f.createComment("")),!e.getElementsByTagName("*").length})),n.getElementsByClassName=J.test(f.getElementsByClassName),n.getById=ce((function(e){return h.appendChild(e).id=w,!f.getElementsByName||!f.getElementsByName(w).length})),n.getById?(r.filter["ID"]=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},r.find["ID"]=function(e,t){if("undefined"!==typeof t.getElementById&&v){var n=t.getElementById(e);return n?[n]:[]}}):(r.filter["ID"]=function(e){var t=e.replace(te,ne);return function(e){var n="undefined"!==typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},r.find["ID"]=function(e,t){if("undefined"!==typeof t.getElementById&&v){var n,r,o,a=t.getElementById(e);if(a){if(n=a.getAttributeNode("id"),n&&n.value===e)return[a];o=t.getElementsByName(e),r=0;while(a=o[r++])if(n=a.getAttributeNode("id"),n&&n.value===e)return[a]}return[]}}),r.find["TAG"]=n.getElementsByTagName?function(e,t){return"undefined"!==typeof t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],o=0,a=t.getElementsByTagName(e);if("*"===e){while(n=a[o++])1===n.nodeType&&r.push(n);return r}return a},r.find["CLASS"]=n.getElementsByClassName&&function(e,t){if("undefined"!==typeof t.getElementsByClassName&&v)return t.getElementsByClassName(e)},g=[],m=[],(n.qsa=J.test(f.querySelectorAll))&&(ce((function(e){var t;h.appendChild(e).innerHTML="<a id='"+w+"'></a><select id='"+w+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+N+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+N+"*(?:value|"+M+")"),e.querySelectorAll("[id~="+w+"-]").length||m.push("~="),t=f.createElement("input"),t.setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||m.push("\\["+N+"*name"+N+"*="+N+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+w+"+*").length||m.push(".#.+[+~]"),e.querySelectorAll("\\\f"),m.push("[\\r\\n\\f]")})),ce((function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=f.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+N+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),h.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")}))),(n.matchesSelector=J.test(y=h.matches||h.webkitMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&ce((function(e){n.disconnectedMatch=y.call(e,"*"),y.call(e,"[s!='']:x"),g.push("!=",j)})),m=m.length&&new RegExp(m.join("|")),g=g.length&&new RegExp(g.join("|")),t=J.test(h.compareDocumentPosition),b=t||J.test(h.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},A=t?function(e,t){if(e===t)return d=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(r=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&r||!n.sortDetached&&t.compareDocumentPosition(e)===r?e==f||e.ownerDocument==x&&b(x,e)?-1:t==f||t.ownerDocument==x&&b(x,t)?1:c?B(c,e)-B(c,t):0:4&r?-1:1)}:function(e,t){if(e===t)return d=!0,0;var n,r=0,o=e.parentNode,a=t.parentNode,i=[e],s=[t];if(!o||!a)return e==f?-1:t==f?1:o?-1:a?1:c?B(c,e)-B(c,t):0;if(o===a)return pe(e,t);n=e;while(n=n.parentNode)i.unshift(n);n=t;while(n=n.parentNode)s.unshift(n);while(i[r]===s[r])r++;return r?pe(i[r],s[r]):i[r]==x?-1:s[r]==x?1:0},f):f},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(p(e),n.matchesSelector&&v&&!I[t+" "]&&(!g||!g.test(t))&&(!m||!m.test(t)))try{var r=y.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(Ie){I(t,!0)}return se(t,f,null,[e]).length>0},se.contains=function(e,t){return(e.ownerDocument||e)!=f&&p(e),b(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=f&&p(e);var o=r.attrHandle[t.toLowerCase()],a=o&&F.call(r.attrHandle,t.toLowerCase())?o(e,t,!v):void 0;return void 0!==a?a:n.attributes||!v?e.getAttribute(t):(a=e.getAttributeNode(t))&&a.specified?a.value:null},se.escape=function(e){return(e+"").replace(re,oe)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,r=[],o=0,a=0;if(d=!n.detectDuplicates,c=!n.sortStable&&e.slice(0),e.sort(A),d){while(t=e[a++])t===e[a]&&(o=r.push(a));while(o--)e.splice(r[o],1)}return c=null,e},o=se.getText=function(e){var t,n="",r=0,a=e.nodeType;if(a){if(1===a||9===a||11===a){if("string"===typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===a||4===a)return e.nodeValue}else while(t=e[r++])n+=o(t);return n},r=se.selectors={cacheLength:50,createPseudo:le,match:K,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return K["CHILD"].test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&q.test(n)&&(t=i(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=k[e+" "];return t||(t=new RegExp("(^|"+N+")"+e+"("+N+"|$)"))&&k(e,(function(e){return t.test("string"===typeof e.className&&e.className||"undefined"!==typeof e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(r){var o=se.attr(r,e);return null==o?"!="===t:!t||(o+="","="===t?o===n:"!="===t?o!==n:"^="===t?n&&0===o.indexOf(n):"*="===t?n&&o.indexOf(n)>-1:"$="===t?n&&o.slice(-n.length)===n:"~="===t?(" "+o.replace(W," ")+" ").indexOf(n)>-1:"|="===t&&(o===n||o.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,o){var a="nth"!==e.slice(0,3),i="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===o?function(e){return!!e.parentNode}:function(t,n,u){var l,c,d,p,f,h,v=a!==i?"nextSibling":"previousSibling",m=t.parentNode,g=s&&t.nodeName.toLowerCase(),y=!u&&!s,b=!1;if(m){if(a){while(v){p=t;while(p=p[v])if(s?p.nodeName.toLowerCase()===g:1===p.nodeType)return!1;h=v="only"===e&&!h&&"nextSibling"}return!0}if(h=[i?m.firstChild:m.lastChild],i&&y){p=m,d=p[w]||(p[w]={}),c=d[p.uniqueID]||(d[p.uniqueID]={}),l=c[e]||[],f=l[0]===C&&l[1],b=f&&l[2],p=f&&m.childNodes[f];while(p=++f&&p&&p[v]||(b=f=0)||h.pop())if(1===p.nodeType&&++b&&p===t){c[e]=[C,f,b];break}}else if(y&&(p=t,d=p[w]||(p[w]={}),c=d[p.uniqueID]||(d[p.uniqueID]={}),l=c[e]||[],f=l[0]===C&&l[1],b=f),!1===b)while(p=++f&&p&&p[v]||(b=f=0)||h.pop())if((s?p.nodeName.toLowerCase()===g:1===p.nodeType)&&++b&&(y&&(d=p[w]||(p[w]={}),c=d[p.uniqueID]||(d[p.uniqueID]={}),c[e]=[C,b]),p===t))break;return b-=o,b===r||b%r===0&&b/r>=0}}},PSEUDO:function(e,t){var n,o=r.pseudos[e]||r.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return o[w]?o(t):o.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?le((function(e,n){var r,a=o(e,t),i=a.length;while(i--)r=B(e,a[i]),e[r]=!(n[r]=a[i])})):function(e){return o(e,0,n)}):o}},pseudos:{not:le((function(e){var t=[],n=[],r=s(e.replace(H,"$1"));return r[w]?le((function(e,t,n,o){var a,i=r(e,null,o,[]),s=e.length;while(s--)(a=i[s])&&(e[s]=!(t[s]=a))})):function(e,o,a){return t[0]=e,r(t,null,a,n),t[0]=null,!n.pop()}})),has:le((function(e){return function(t){return se(e,t).length>0}})),contains:le((function(e){return e=e.replace(te,ne),function(t){return(t.textContent||o(t)).indexOf(e)>-1}})),lang:le((function(e){return G.test(e||"")||se.error("unsupported lang: "+e),e=e.replace(te,ne).toLowerCase(),function(t){var n;do{if(n=v?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===f.activeElement&&(!f.hasFocus||f.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ve(!1),disabled:ve(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos["empty"](e)},header:function(e){return Z.test(e.nodeName)},input:function(e){return Y.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:me((function(){return[0]})),last:me((function(e,t){return[t-1]})),eq:me((function(e,t,n){return[n<0?n+t:n]})),even:me((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:me((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:me((function(e,t,n){for(var r=n<0?n+t:n>t?t:n;--r>=0;)e.push(r);return e})),gt:me((function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e}))}},r.pseudos["nth"]=r.pseudos["eq"],{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=fe(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=he(t);function ye(){}function be(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function we(e,t,n){var r=t.dir,o=t.next,a=o||r,i=n&&"parentNode"===a,s=_++;return t.first?function(t,n,o){while(t=t[r])if(1===t.nodeType||i)return e(t,n,o);return!1}:function(t,n,u){var l,c,d,p=[C,s];if(u){while(t=t[r])if((1===t.nodeType||i)&&e(t,n,u))return!0}else while(t=t[r])if(1===t.nodeType||i)if(d=t[w]||(t[w]={}),c=d[t.uniqueID]||(d[t.uniqueID]={}),o&&o===t.nodeName.toLowerCase())t=t[r]||t;else{if((l=c[a])&&l[0]===C&&l[1]===s)return p[2]=l[2];if(c[a]=p,p[2]=e(t,n,u))return!0}return!1}}function xe(e){return e.length>1?function(t,n,r){var o=e.length;while(o--)if(!e[o](t,n,r))return!1;return!0}:e[0]}function Ce(e,t,n){for(var r=0,o=t.length;r<o;r++)se(e,t[r],n);return n}function _e(e,t,n,r,o){for(var a,i=[],s=0,u=e.length,l=null!=t;s<u;s++)(a=e[s])&&(n&&!n(a,r,o)||(i.push(a),l&&t.push(s)));return i}function ke(e,t,n,r,o,a){return r&&!r[w]&&(r=ke(r)),o&&!o[w]&&(o=ke(o,a)),le((function(a,i,s,u){var l,c,d,p=[],f=[],h=i.length,v=a||Ce(t||"*",s.nodeType?[s]:s,[]),m=!e||!a&&t?v:_e(v,p,e,s,u),g=n?o||(a?e:h||r)?[]:i:m;if(n&&n(m,g,s,u),r){l=_e(g,f),r(l,[],s,u),c=l.length;while(c--)(d=l[c])&&(g[f[c]]=!(m[f[c]]=d))}if(a){if(o||e){if(o){l=[],c=g.length;while(c--)(d=g[c])&&l.push(m[c]=d);o(null,g=[],l,u)}c=g.length;while(c--)(d=g[c])&&(l=o?B(a,d):p[c])>-1&&(a[l]=!(i[l]=d))}}else g=_e(g===i?g.splice(h,g.length):g),o?o(null,i,g,u):O.apply(i,g)}))}function Se(e){for(var t,n,o,a=e.length,i=r.relative[e[0].type],s=i||r.relative[" "],u=i?1:0,c=we((function(e){return e===t}),s,!0),d=we((function(e){return B(t,e)>-1}),s,!0),p=[function(e,n,r){var o=!i&&(r||n!==l)||((t=n).nodeType?c(e,n,r):d(e,n,r));return t=null,o}];u<a;u++)if(n=r.relative[e[u].type])p=[we(xe(p),n)];else{if(n=r.filter[e[u].type].apply(null,e[u].matches),n[w]){for(o=++u;o<a;o++)if(r.relative[e[o].type])break;return ke(u>1&&xe(p),u>1&&be(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(H,"$1"),n,u<o&&Se(e.slice(u,o)),o<a&&Se(e=e.slice(o)),o<a&&be(e))}p.push(n)}return xe(p)}function Ee(e,t){var n=t.length>0,o=e.length>0,a=function(a,i,s,u,c){var d,h,m,g=0,y="0",b=a&&[],w=[],x=l,_=a||o&&r.find["TAG"]("*",c),k=C+=null==x?1:Math.random()||.1,S=_.length;for(c&&(l=i==f||i||c);y!==S&&null!=(d=_[y]);y++){if(o&&d){h=0,i||d.ownerDocument==f||(p(d),s=!v);while(m=e[h++])if(m(d,i||f,s)){u.push(d);break}c&&(C=k)}n&&((d=!m&&d)&&g--,a&&b.push(d))}if(g+=y,n&&y!==g){h=0;while(m=t[h++])m(b,w,i,s);if(a){if(g>0)while(y--)b[y]||w[y]||(w[y]=R.call(u));w=_e(w)}O.apply(u,w),c&&!a&&w.length>0&&g+t.length>1&&se.uniqueSort(u)}return c&&(C=k,l=x),b};return n?le(a):a}return ye.prototype=r.filters=r.pseudos,r.setFilters=new ye,i=se.tokenize=function(e,t){var n,o,a,i,s,u,l,c=S[e+" "];if(c)return t?0:c.slice(0);s=e,u=[],l=r.preFilter;while(s){for(i in n&&!(o=U.exec(s))||(o&&(s=s.slice(o[0].length)||s),u.push(a=[])),n=!1,(o=z.exec(s))&&(n=o.shift(),a.push({value:n,type:o[0].replace(H," ")}),s=s.slice(n.length)),r.filter)!(o=K[i].exec(s))||l[i]&&!(o=l[i](o))||(n=o.shift(),a.push({value:n,type:i,matches:o}),s=s.slice(n.length));if(!n)break}return t?s.length:s?se.error(e):S(e,u).slice(0)},s=se.compile=function(e,t){var n,r=[],o=[],a=E[e+" "];if(!a){t||(t=i(e)),n=t.length;while(n--)a=Se(t[n]),a[w]?r.push(a):o.push(a);a=E(e,Ee(o,r)),a.selector=e}return a},u=se.select=function(e,t,n,o){var a,u,l,c,d,p="function"===typeof e&&e,f=!o&&i(e=p.selector||e);if(n=n||[],1===f.length){if(u=f[0]=f[0].slice(0),u.length>2&&"ID"===(l=u[0]).type&&9===t.nodeType&&v&&r.relative[u[1].type]){if(t=(r.find["ID"](l.matches[0].replace(te,ne),t)||[])[0],!t)return n;p&&(t=t.parentNode),e=e.slice(u.shift().value.length)}a=K["needsContext"].test(e)?0:u.length;while(a--){if(l=u[a],r.relative[c=l.type])break;if((d=r.find[c])&&(o=d(l.matches[0].replace(te,ne),ee.test(u[0].type)&&ge(t.parentNode)||t))){if(u.splice(a,1),e=o.length&&be(u),!e)return O.apply(n,o),n;break}}}return(p||s(e,f))(o,t,!v,n,!t||ee.test(e)&&ge(t.parentNode)||t),n},n.sortStable=w.split("").sort(A).join("")===w,n.detectDuplicates=!!d,p(),n.sortDetached=ce((function(e){return 1&e.compareDocumentPosition(f.createElement("fieldset"))})),ce((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||de("type|href|height|width",(function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),n.attributes&&ce((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||de("value",(function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),ce((function(e){return null==e.getAttribute("disabled")}))||de(M,(function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null})),se}(n);S.find=I,S.expr=I.selectors,S.expr[":"]=S.expr.pseudos,S.uniqueSort=S.unique=I.uniqueSort,S.text=I.getText,S.isXMLDoc=I.isXML,S.contains=I.contains,S.escapeSelector=I.escape;var A=function(e,t,n){var r=[],o=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(o&&S(e).is(n))break;r.push(e)}return r},F=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},D=S.expr.match.needsContext;function R(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var T=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function O(e,t,n){return y(t)?S.grep(e,(function(e,r){return!!t.call(e,r,e)!==n})):t.nodeType?S.grep(e,(function(e){return e===t!==n})):"string"!==typeof t?S.grep(e,(function(e){return d.call(t,e)>-1!==n})):S.filter(t,e,n)}S.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?S.find.matchesSelector(r,e)?[r]:[]:S.find.matches(e,S.grep(t,(function(e){return 1===e.nodeType})))},S.fn.extend({find:function(e){var t,n,r=this.length,o=this;if("string"!==typeof e)return this.pushStack(S(e).filter((function(){for(t=0;t<r;t++)if(S.contains(o[t],this))return!0})));for(n=this.pushStack([]),t=0;t<r;t++)S.find(e,o[t],n);return r>1?S.uniqueSort(n):n},filter:function(e){return this.pushStack(O(this,e||[],!1))},not:function(e){return this.pushStack(O(this,e||[],!0))},is:function(e){return!!O(this,"string"===typeof e&&D.test(e)?S(e):e||[],!1).length}});var P,B=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,M=S.fn.init=function(e,t,n){var r,o;if(!e)return this;if(n=n||P,"string"===typeof e){if(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:B.exec(e),!r||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof S?t[0]:t,S.merge(this,S.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:w,!0)),T.test(r[1])&&S.isPlainObject(t))for(r in t)y(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return o=w.getElementById(r[2]),o&&(this[0]=o,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):y(e)?void 0!==n.ready?n.ready(e):e(S):S.makeArray(e,this)};M.prototype=S.fn,P=S(w);var N=/^(?:parents|prev(?:Until|All))/,L={children:!0,contents:!0,next:!0,prev:!0};function V(e,t){while((e=e[t])&&1!==e.nodeType);return e}S.fn.extend({has:function(e){var t=S(e,this),n=t.length;return this.filter((function(){for(var e=0;e<n;e++)if(S.contains(this,t[e]))return!0}))},closest:function(e,t){var n,r=0,o=this.length,a=[],i="string"!==typeof e&&S(e);if(!D.test(e))for(;r<o;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(i?i.index(n)>-1:1===n.nodeType&&S.find.matchesSelector(n,e))){a.push(n);break}return this.pushStack(a.length>1?S.uniqueSort(a):a)},index:function(e){return e?"string"===typeof e?d.call(S(e),this[0]):d.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),S.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return A(e,"parentNode")},parentsUntil:function(e,t,n){return A(e,"parentNode",n)},next:function(e){return V(e,"nextSibling")},prev:function(e){return V(e,"previousSibling")},nextAll:function(e){return A(e,"nextSibling")},prevAll:function(e){return A(e,"previousSibling")},nextUntil:function(e,t,n){return A(e,"nextSibling",n)},prevUntil:function(e,t,n){return A(e,"previousSibling",n)},siblings:function(e){return F((e.parentNode||{}).firstChild,e)},children:function(e){return F(e.firstChild)},contents:function(e){return null!=e.contentDocument&&s(e.contentDocument)?e.contentDocument:(R(e,"template")&&(e=e.content||e),S.merge([],e.childNodes))}},(function(e,t){S.fn[e]=function(n,r){var o=S.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"===typeof r&&(o=S.filter(r,o)),this.length>1&&(L[e]||S.uniqueSort(o),N.test(e)&&o.reverse()),this.pushStack(o)}}));var j=/[^\x20\t\r\n\f]+/g;function W(e){var t={};return S.each(e.match(j)||[],(function(e,n){t[n]=!0})),t}function H(e){return e}function U(e){throw e}function z(e,t,n,r){var o;try{e&&y(o=e.promise)?o.call(e).done(t).fail(n):e&&y(o=e.then)?o.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}S.Callbacks=function(e){e="string"===typeof e?W(e):S.extend({},e);var t,n,r,o,a=[],i=[],s=-1,u=function(){for(o=o||e.once,r=t=!0;i.length;s=-1){n=i.shift();while(++s<a.length)!1===a[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=a.length,n=!1)}e.memory||(n=!1),t=!1,o&&(a=n?[]:"")},l={add:function(){return a&&(n&&!t&&(s=a.length-1,i.push(n)),function t(n){S.each(n,(function(n,r){y(r)?e.unique&&l.has(r)||a.push(r):r&&r.length&&"string"!==_(r)&&t(r)}))}(arguments),n&&!t&&u()),this},remove:function(){return S.each(arguments,(function(e,t){var n;while((n=S.inArray(t,a,n))>-1)a.splice(n,1),n<=s&&s--})),this},has:function(e){return e?S.inArray(e,a)>-1:a.length>0},empty:function(){return a&&(a=[]),this},disable:function(){return o=i=[],a=n="",this},disabled:function(){return!a},lock:function(){return o=i=[],n||t||(a=n=""),this},locked:function(){return!!o},fireWith:function(e,n){return o||(n=n||[],n=[e,n.slice?n.slice():n],i.push(n),t||u()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!r}};return l},S.extend({Deferred:function(e){var t=[["notify","progress",S.Callbacks("memory"),S.Callbacks("memory"),2],["resolve","done",S.Callbacks("once memory"),S.Callbacks("once memory"),0,"resolved"],["reject","fail",S.Callbacks("once memory"),S.Callbacks("once memory"),1,"rejected"]],r="pending",o={state:function(){return r},always:function(){return a.done(arguments).fail(arguments),this},catch:function(e){return o.then(null,e)},pipe:function(){var e=arguments;return S.Deferred((function(n){S.each(t,(function(t,r){var o=y(e[r[4]])&&e[r[4]];a[r[1]]((function(){var e=o&&o.apply(this,arguments);e&&y(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,o?[e]:arguments)}))})),e=null})).promise()},then:function(e,r,o){var a=0;function i(e,t,r,o){return function(){var s=this,u=arguments,l=function(){var n,l;if(!(e<a)){if(n=r.apply(s,u),n===t.promise())throw new TypeError("Thenable self-resolution");l=n&&("object"===typeof n||"function"===typeof n)&&n.then,y(l)?o?l.call(n,i(a,t,H,o),i(a,t,U,o)):(a++,l.call(n,i(a,t,H,o),i(a,t,U,o),i(a,t,H,t.notifyWith))):(r!==H&&(s=void 0,u=[n]),(o||t.resolveWith)(s,u))}},c=o?l:function(){try{l()}catch(n){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(n,c.stackTrace),e+1>=a&&(r!==U&&(s=void 0,u=[n]),t.rejectWith(s,u))}};e?c():(S.Deferred.getStackHook&&(c.stackTrace=S.Deferred.getStackHook()),n.setTimeout(c))}}return S.Deferred((function(n){t[0][3].add(i(0,n,y(o)?o:H,n.notifyWith)),t[1][3].add(i(0,n,y(e)?e:H)),t[2][3].add(i(0,n,y(r)?r:U))})).promise()},promise:function(e){return null!=e?S.extend(e,o):o}},a={};return S.each(t,(function(e,n){var i=n[2],s=n[5];o[n[1]]=i.add,s&&i.add((function(){r=s}),t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),i.add(n[3].fire),a[n[0]]=function(){return a[n[0]+"With"](this===a?void 0:this,arguments),this},a[n[0]+"With"]=i.fireWith})),o.promise(a),e&&e.call(a,a),a},when:function(e){var t=arguments.length,n=t,r=Array(n),o=u.call(arguments),a=S.Deferred(),i=function(e){return function(n){r[e]=this,o[e]=arguments.length>1?u.call(arguments):n,--t||a.resolveWith(r,o)}};if(t<=1&&(z(e,a.done(i(n)).resolve,a.reject,!t),"pending"===a.state()||y(o[n]&&o[n].then)))return a.then();while(n--)z(o[n],i(n),a.reject);return a.promise()}});var $=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(e,t){n.console&&n.console.warn&&e&&$.test(e.name)&&n.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},S.readyException=function(e){n.setTimeout((function(){throw e}))};var q=S.Deferred();function G(){w.removeEventListener("DOMContentLoaded",G),n.removeEventListener("load",G),S.ready()}S.fn.ready=function(e){return q.then(e).catch((function(e){S.readyException(e)})),this},S.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--S.readyWait:S.isReady)||(S.isReady=!0,!0!==e&&--S.readyWait>0||q.resolveWith(w,[S]))}}),S.ready.then=q.then,"complete"===w.readyState||"loading"!==w.readyState&&!w.documentElement.doScroll?n.setTimeout(S.ready):(w.addEventListener("DOMContentLoaded",G),n.addEventListener("load",G));var K=function(e,t,n,r,o,a,i){var s=0,u=e.length,l=null==n;if("object"===_(n))for(s in o=!0,n)K(e,t,s,n[s],!0,a,i);else if(void 0!==r&&(o=!0,y(r)||(i=!0),l&&(i?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(S(e),n)})),t))for(;s<u;s++)t(e[s],n,i?r:r.call(e[s],s,t(e[s],n)));return o?e:l?t.call(e):u?t(e[0],n):a},X=/^-ms-/,Y=/-([a-z])/g;function Z(e,t){return t.toUpperCase()}function J(e){return e.replace(X,"ms-").replace(Y,Z)}var Q=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function ee(){this.expando=S.expando+ee.uid++}ee.uid=1,ee.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Q(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,o=this.cache(e);if("string"===typeof t)o[J(t)]=n;else for(r in t)o[J(r)]=t[r];return o},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][J(t)]},access:function(e,t,n){return void 0===t||t&&"string"===typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){Array.isArray(t)?t=t.map(J):(t=J(t),t=t in r?[t]:t.match(j)||[]),n=t.length;while(n--)delete r[t[n]]}(void 0===t||S.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!S.isEmptyObject(t)}};var te=new ee,ne=new ee,re=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,oe=/[A-Z]/g;function ae(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:re.test(e)?JSON.parse(e):e)}function ie(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(oe,"-$&").toLowerCase(),n=e.getAttribute(r),"string"===typeof n){try{n=ae(n)}catch(o){}ne.set(e,t,n)}else n=void 0;return n}S.extend({hasData:function(e){return ne.hasData(e)||te.hasData(e)},data:function(e,t,n){return ne.access(e,t,n)},removeData:function(e,t){ne.remove(e,t)},_data:function(e,t,n){return te.access(e,t,n)},_removeData:function(e,t){te.remove(e,t)}}),S.fn.extend({data:function(e,t){var n,r,o,a=this[0],i=a&&a.attributes;if(void 0===e){if(this.length&&(o=ne.get(a),1===a.nodeType&&!te.get(a,"hasDataAttrs"))){n=i.length;while(n--)i[n]&&(r=i[n].name,0===r.indexOf("data-")&&(r=J(r.slice(5)),ie(a,r,o[r])));te.set(a,"hasDataAttrs",!0)}return o}return"object"===typeof e?this.each((function(){ne.set(this,e)})):K(this,(function(t){var n;if(a&&void 0===t)return n=ne.get(a,e),void 0!==n?n:(n=ie(a,e),void 0!==n?n:void 0);this.each((function(){ne.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){ne.remove(this,e)}))}}),S.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=te.get(e,t),n&&(!r||Array.isArray(n)?r=te.access(e,t,S.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=S.queue(e,t),r=n.length,o=n.shift(),a=S._queueHooks(e,t),i=function(){S.dequeue(e,t)};"inprogress"===o&&(o=n.shift(),r--),o&&("fx"===t&&n.unshift("inprogress"),delete a.stop,o.call(e,i,a)),!r&&a&&a.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return te.get(e,n)||te.access(e,n,{empty:S.Callbacks("once memory").add((function(){te.remove(e,[t+"queue",n])}))})}}),S.fn.extend({queue:function(e,t){var n=2;return"string"!==typeof e&&(t=e,e="fx",n--),arguments.length<n?S.queue(this[0],e):void 0===t?this:this.each((function(){var n=S.queue(this,e,t);S._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&S.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){S.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,o=S.Deferred(),a=this,i=this.length,s=function(){--r||o.resolveWith(a,[a])};"string"!==typeof e&&(t=e,e=void 0),e=e||"fx";while(i--)n=te.get(a[i],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(s));return s(),o.promise(t)}});var se=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ue=new RegExp("^(?:([+-])=|)("+se+")([a-z%]*)$","i"),le=["Top","Right","Bottom","Left"],ce=w.documentElement,de=function(e){return S.contains(e.ownerDocument,e)},pe={composed:!0};ce.getRootNode&&(de=function(e){return S.contains(e.ownerDocument,e)||e.getRootNode(pe)===e.ownerDocument});var fe=function(e,t){return e=t||e,"none"===e.style.display||""===e.style.display&&de(e)&&"none"===S.css(e,"display")};function he(e,t,n,r){var o,a,i=20,s=r?function(){return r.cur()}:function(){return S.css(e,t,"")},u=s(),l=n&&n[3]||(S.cssNumber[t]?"":"px"),c=e.nodeType&&(S.cssNumber[t]||"px"!==l&&+u)&&ue.exec(S.css(e,t));if(c&&c[3]!==l){u/=2,l=l||c[3],c=+u||1;while(i--)S.style(e,t,c+l),(1-a)*(1-(a=s()/u||.5))<=0&&(i=0),c/=a;c*=2,S.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,o=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=o)),o}var ve={};function me(e){var t,n=e.ownerDocument,r=e.nodeName,o=ve[r];return o||(t=n.body.appendChild(n.createElement(r)),o=S.css(t,"display"),t.parentNode.removeChild(t),"none"===o&&(o="block"),ve[r]=o,o)}function ge(e,t){for(var n,r,o=[],a=0,i=e.length;a<i;a++)r=e[a],r.style&&(n=r.style.display,t?("none"===n&&(o[a]=te.get(r,"display")||null,o[a]||(r.style.display="")),""===r.style.display&&fe(r)&&(o[a]=me(r))):"none"!==n&&(o[a]="none",te.set(r,"display",n)));for(a=0;a<i;a++)null!=o[a]&&(e[a].style.display=o[a]);return e}S.fn.extend({show:function(){return ge(this,!0)},hide:function(){return ge(this)},toggle:function(e){return"boolean"===typeof e?e?this.show():this.hide():this.each((function(){fe(this)?S(this).show():S(this).hide()}))}});var ye=/^(?:checkbox|radio)$/i,be=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,we=/^$|^module$|\/(?:java|ecma)script/i;(function(){var e=w.createDocumentFragment(),t=e.appendChild(w.createElement("div")),n=w.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),g.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",g.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,t.innerHTML="<option></option>",g.option=!!t.lastChild})();var xe={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Ce(e,t){var n;return n="undefined"!==typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!==typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&R(e,t)?S.merge([e],n):n}function _e(e,t){for(var n=0,r=e.length;n<r;n++)te.set(e[n],"globalEval",!t||te.get(t[n],"globalEval"))}xe.tbody=xe.tfoot=xe.colgroup=xe.caption=xe.thead,xe.th=xe.td,g.option||(xe.optgroup=xe.option=[1,"<select multiple='multiple'>","</select>"]);var ke=/<|&#?\w+;/;function Se(e,t,n,r,o){for(var a,i,s,u,l,c,d=t.createDocumentFragment(),p=[],f=0,h=e.length;f<h;f++)if(a=e[f],a||0===a)if("object"===_(a))S.merge(p,a.nodeType?[a]:a);else if(ke.test(a)){i=i||d.appendChild(t.createElement("div")),s=(be.exec(a)||["",""])[1].toLowerCase(),u=xe[s]||xe._default,i.innerHTML=u[1]+S.htmlPrefilter(a)+u[2],c=u[0];while(c--)i=i.lastChild;S.merge(p,i.childNodes),i=d.firstChild,i.textContent=""}else p.push(t.createTextNode(a));d.textContent="",f=0;while(a=p[f++])if(r&&S.inArray(a,r)>-1)o&&o.push(a);else if(l=de(a),i=Ce(d.appendChild(a),"script"),l&&_e(i),n){c=0;while(a=i[c++])we.test(a.type||"")&&n.push(a)}return d}var Ee=/^([^.]*)(?:\.(.+)|)/;function Ie(){return!0}function Ae(){return!1}function Fe(e,t){return e===De()===("focus"===t)}function De(){try{return w.activeElement}catch(e){}}function Re(e,t,n,r,o,a){var i,s;if("object"===typeof t){for(s in"string"!==typeof n&&(r=r||n,n=void 0),t)Re(e,s,n,r,t[s],a);return e}if(null==r&&null==o?(o=n,r=n=void 0):null==o&&("string"===typeof n?(o=r,r=void 0):(o=r,r=n,n=void 0)),!1===o)o=Ae;else if(!o)return e;return 1===a&&(i=o,o=function(e){return S().off(e),i.apply(this,arguments)},o.guid=i.guid||(i.guid=S.guid++)),e.each((function(){S.event.add(this,t,o,r,n)}))}function Te(e,t,n){n?(te.set(e,t,!1),S.event.add(e,t,{namespace:!1,handler:function(e){var r,o,a=te.get(this,t);if(1&e.isTrigger&&this[t]){if(a.length)(S.event.special[t]||{}).delegateType&&e.stopPropagation();else if(a=u.call(arguments),te.set(this,t,a),r=n(this,t),this[t](),o=te.get(this,t),a!==o||r?te.set(this,t,!1):o={},a!==o)return e.stopImmediatePropagation(),e.preventDefault(),o&&o.value}else a.length&&(te.set(this,t,{value:S.event.trigger(S.extend(a[0],S.Event.prototype),a.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===te.get(e,t)&&S.event.add(e,t,Ie)}S.event={global:{},add:function(e,t,n,r,o){var a,i,s,u,l,c,d,p,f,h,v,m=te.get(e);if(Q(e)){n.handler&&(a=n,n=a.handler,o=a.selector),o&&S.find.matchesSelector(ce,o),n.guid||(n.guid=S.guid++),(u=m.events)||(u=m.events=Object.create(null)),(i=m.handle)||(i=m.handle=function(t){return"undefined"!==typeof S&&S.event.triggered!==t.type?S.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(j)||[""],l=t.length;while(l--)s=Ee.exec(t[l])||[],f=v=s[1],h=(s[2]||"").split(".").sort(),f&&(d=S.event.special[f]||{},f=(o?d.delegateType:d.bindType)||f,d=S.event.special[f]||{},c=S.extend({type:f,origType:v,data:r,handler:n,guid:n.guid,selector:o,needsContext:o&&S.expr.match.needsContext.test(o),namespace:h.join(".")},a),(p=u[f])||(p=u[f]=[],p.delegateCount=0,d.setup&&!1!==d.setup.call(e,r,h,i)||e.addEventListener&&e.addEventListener(f,i)),d.add&&(d.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),o?p.splice(p.delegateCount++,0,c):p.push(c),S.event.global[f]=!0)}},remove:function(e,t,n,r,o){var a,i,s,u,l,c,d,p,f,h,v,m=te.hasData(e)&&te.get(e);if(m&&(u=m.events)){t=(t||"").match(j)||[""],l=t.length;while(l--)if(s=Ee.exec(t[l])||[],f=v=s[1],h=(s[2]||"").split(".").sort(),f){d=S.event.special[f]||{},f=(r?d.delegateType:d.bindType)||f,p=u[f]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=a=p.length;while(a--)c=p[a],!o&&v!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(a,1),c.selector&&p.delegateCount--,d.remove&&d.remove.call(e,c));i&&!p.length&&(d.teardown&&!1!==d.teardown.call(e,h,m.handle)||S.removeEvent(e,f,m.handle),delete u[f])}else for(f in u)S.event.remove(e,f+t[l],n,r,!0);S.isEmptyObject(u)&&te.remove(e,"handle events")}},dispatch:function(e){var t,n,r,o,a,i,s=new Array(arguments.length),u=S.event.fix(e),l=(te.get(this,"events")||Object.create(null))[u.type]||[],c=S.event.special[u.type]||{};for(s[0]=u,t=1;t<arguments.length;t++)s[t]=arguments[t];if(u.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,u)){i=S.event.handlers.call(this,u,l),t=0;while((o=i[t++])&&!u.isPropagationStopped()){u.currentTarget=o.elem,n=0;while((a=o.handlers[n++])&&!u.isImmediatePropagationStopped())u.rnamespace&&!1!==a.namespace&&!u.rnamespace.test(a.namespace)||(u.handleObj=a,u.data=a.data,r=((S.event.special[a.origType]||{}).handle||a.handler).apply(o.elem,s),void 0!==r&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,u),u.result}},handlers:function(e,t){var n,r,o,a,i,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&e.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(a=[],i={},n=0;n<u;n++)r=t[n],o=r.selector+" ",void 0===i[o]&&(i[o]=r.needsContext?S(o,this).index(l)>-1:S.find(o,this,null,[l]).length),i[o]&&a.push(r);a.length&&s.push({elem:l,handlers:a})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(e,t){Object.defineProperty(S.Event.prototype,e,{enumerable:!0,configurable:!0,get:y(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[S.expando]?e:new S.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return ye.test(t.type)&&t.click&&R(t,"input")&&Te(t,"click",Ie),!1},trigger:function(e){var t=this||e;return ye.test(t.type)&&t.click&&R(t,"input")&&Te(t,"click"),!0},_default:function(e){var t=e.target;return ye.test(t.type)&&t.click&&R(t,"input")&&te.get(t,"click")||R(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},S.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},S.Event=function(e,t){if(!(this instanceof S.Event))return new S.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Ie:Ae,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:Ae,isPropagationStopped:Ae,isImmediatePropagationStopped:Ae,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Ie,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Ie,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Ie,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},S.event.addProp),S.each({focus:"focusin",blur:"focusout"},(function(e,t){S.event.special[e]={setup:function(){return Te(this,e,Fe),!1},trigger:function(){return Te(this,e),!0},_default:function(){return!0},delegateType:t}})),S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){S.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,o=e.relatedTarget,a=e.handleObj;return o&&(o===r||S.contains(r,o))||(e.type=a.origType,n=a.handler.apply(this,arguments),e.type=t),n}}})),S.fn.extend({on:function(e,t,n,r){return Re(this,e,t,n,r)},one:function(e,t,n,r){return Re(this,e,t,n,r,1)},off:function(e,t,n){var r,o;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,S(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"===typeof e){for(o in e)this.off(o,t,e[o]);return this}return!1!==t&&"function"!==typeof t||(n=t,t=void 0),!1===n&&(n=Ae),this.each((function(){S.event.remove(this,e,n,t)}))}});var Oe=/<script|<style|<link/i,Pe=/checked\s*(?:[^=]|=\s*.checked.)/i,Be=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Me(e,t){return R(e,"table")&&R(11!==t.nodeType?t:t.firstChild,"tr")&&S(e).children("tbody")[0]||e}function Ne(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Le(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Ve(e,t){var n,r,o,a,i,s,u;if(1===t.nodeType){if(te.hasData(e)&&(a=te.get(e),u=a.events,u))for(o in te.remove(t,"handle events"),u)for(n=0,r=u[o].length;n<r;n++)S.event.add(t,o,u[o][n]);ne.hasData(e)&&(i=ne.access(e),s=S.extend({},i),ne.set(t,s))}}function je(e,t){var n=t.nodeName.toLowerCase();"input"===n&&ye.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function We(e,t,n,r){t=l(t);var o,a,i,s,u,c,d=0,p=e.length,f=p-1,h=t[0],v=y(h);if(v||p>1&&"string"===typeof h&&!g.checkClone&&Pe.test(h))return e.each((function(o){var a=e.eq(o);v&&(t[0]=h.call(this,o,a.html())),We(a,t,n,r)}));if(p&&(o=Se(t,e[0].ownerDocument,!1,e,r),a=o.firstChild,1===o.childNodes.length&&(o=a),a||r)){for(i=S.map(Ce(o,"script"),Ne),s=i.length;d<p;d++)u=o,d!==f&&(u=S.clone(u,!0,!0),s&&S.merge(i,Ce(u,"script"))),n.call(e[d],u,d);if(s)for(c=i[i.length-1].ownerDocument,S.map(i,Le),d=0;d<s;d++)u=i[d],we.test(u.type||"")&&!te.access(u,"globalEval")&&S.contains(c,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?S._evalUrl&&!u.noModule&&S._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},c):C(u.textContent.replace(Be,""),u,c))}return e}function He(e,t,n){for(var r,o=t?S.filter(t,e):e,a=0;null!=(r=o[a]);a++)n||1!==r.nodeType||S.cleanData(Ce(r)),r.parentNode&&(n&&de(r)&&_e(Ce(r,"script")),r.parentNode.removeChild(r));return e}S.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,o,a,i,s=e.cloneNode(!0),u=de(e);if(!g.noCloneChecked&&(1===e.nodeType||11===e.nodeType)&&!S.isXMLDoc(e))for(i=Ce(s),a=Ce(e),r=0,o=a.length;r<o;r++)je(a[r],i[r]);if(t)if(n)for(a=a||Ce(e),i=i||Ce(s),r=0,o=a.length;r<o;r++)Ve(a[r],i[r]);else Ve(e,s);return i=Ce(s,"script"),i.length>0&&_e(i,!u&&Ce(e,"script")),s},cleanData:function(e){for(var t,n,r,o=S.event.special,a=0;void 0!==(n=e[a]);a++)if(Q(n)){if(t=n[te.expando]){if(t.events)for(r in t.events)o[r]?S.event.remove(n,r):S.removeEvent(n,r,t.handle);n[te.expando]=void 0}n[ne.expando]&&(n[ne.expando]=void 0)}}}),S.fn.extend({detach:function(e){return He(this,e,!0)},remove:function(e){return He(this,e)},text:function(e){return K(this,(function(e){return void 0===e?S.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return We(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Me(this,e);t.appendChild(e)}}))},prepend:function(){return We(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Me(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return We(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return We(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(S.cleanData(Ce(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return S.clone(this,e,t)}))},html:function(e){return K(this,(function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"===typeof e&&!Oe.test(e)&&!xe[(be.exec(e)||["",""])[1].toLowerCase()]){e=S.htmlPrefilter(e);try{for(;n<r;n++)t=this[n]||{},1===t.nodeType&&(S.cleanData(Ce(t,!1)),t.innerHTML=e);t=0}catch(o){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return We(this,arguments,(function(t){var n=this.parentNode;S.inArray(this,e)<0&&(S.cleanData(Ce(this)),n&&n.replaceChild(t,this))}),e)}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){S.fn[e]=function(e){for(var n,r=[],o=S(e),a=o.length-1,i=0;i<=a;i++)n=i===a?this:this.clone(!0),S(o[i])[t](n),c.apply(r,n.get());return this.pushStack(r)}}));var Ue=new RegExp("^("+se+")(?!px)[a-z%]+$","i"),ze=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=n),t.getComputedStyle(e)},$e=function(e,t,n){var r,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];for(o in r=n.call(e),t)e.style[o]=a[o];return r},qe=new RegExp(le.join("|"),"i");function Ge(e,t,n){var r,o,a,i,s=e.style;return n=n||ze(e),n&&(i=n.getPropertyValue(t)||n[t],""!==i||de(e)||(i=S.style(e,t)),!g.pixelBoxStyles()&&Ue.test(i)&&qe.test(t)&&(r=s.width,o=s.minWidth,a=s.maxWidth,s.minWidth=s.maxWidth=s.width=i,i=n.width,s.width=r,s.minWidth=o,s.maxWidth=a)),void 0!==i?i+"":i}function Ke(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}(function(){function e(){if(c){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ce.appendChild(l).appendChild(c);var e=n.getComputedStyle(c);r="1%"!==e.top,u=12===t(e.marginLeft),c.style.right="60%",i=36===t(e.right),o=36===t(e.width),c.style.position="absolute",a=12===t(c.offsetWidth/3),ce.removeChild(l),c=null}}function t(e){return Math.round(parseFloat(e))}var r,o,a,i,s,u,l=w.createElement("div"),c=w.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",g.clearCloneStyle="content-box"===c.style.backgroundClip,S.extend(g,{boxSizingReliable:function(){return e(),o},pixelBoxStyles:function(){return e(),i},pixelPosition:function(){return e(),r},reliableMarginLeft:function(){return e(),u},scrollboxSize:function(){return e(),a},reliableTrDimensions:function(){var e,t,r,o;return null==s&&(e=w.createElement("table"),t=w.createElement("tr"),r=w.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="border:1px solid",t.style.height="1px",r.style.height="9px",r.style.display="block",ce.appendChild(e).appendChild(t).appendChild(r),o=n.getComputedStyle(t),s=parseInt(o.height,10)+parseInt(o.borderTopWidth,10)+parseInt(o.borderBottomWidth,10)===t.offsetHeight,ce.removeChild(e)),s}}))})();var Xe=["Webkit","Moz","ms"],Ye=w.createElement("div").style,Ze={};function Je(e){var t=e[0].toUpperCase()+e.slice(1),n=Xe.length;while(n--)if(e=Xe[n]+t,e in Ye)return e}function Qe(e){var t=S.cssProps[e]||Ze[e];return t||(e in Ye?e:Ze[e]=Je(e)||e)}var et=/^(none|table(?!-c[ea]).+)/,tt=/^--/,nt={position:"absolute",visibility:"hidden",display:"block"},rt={letterSpacing:"0",fontWeight:"400"};function ot(e,t,n){var r=ue.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function at(e,t,n,r,o,a){var i="width"===t?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;i<4;i+=2)"margin"===n&&(u+=S.css(e,n+le[i],!0,o)),r?("content"===n&&(u-=S.css(e,"padding"+le[i],!0,o)),"margin"!==n&&(u-=S.css(e,"border"+le[i]+"Width",!0,o))):(u+=S.css(e,"padding"+le[i],!0,o),"padding"!==n?u+=S.css(e,"border"+le[i]+"Width",!0,o):s+=S.css(e,"border"+le[i]+"Width",!0,o));return!r&&a>=0&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-a-u-s-.5))||0),u}function it(e,t,n){var r=ze(e),o=!g.boxSizingReliable()||n,a=o&&"border-box"===S.css(e,"boxSizing",!1,r),i=a,s=Ge(e,t,r),u="offset"+t[0].toUpperCase()+t.slice(1);if(Ue.test(s)){if(!n)return s;s="auto"}return(!g.boxSizingReliable()&&a||!g.reliableTrDimensions()&&R(e,"tr")||"auto"===s||!parseFloat(s)&&"inline"===S.css(e,"display",!1,r))&&e.getClientRects().length&&(a="border-box"===S.css(e,"boxSizing",!1,r),i=u in e,i&&(s=e[u])),s=parseFloat(s)||0,s+at(e,t,n||(a?"border":"content"),i,r,s)+"px"}function st(e,t,n,r,o){return new st.prototype.init(e,t,n,r,o)}S.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ge(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,a,i,s=J(t),u=tt.test(t),l=e.style;if(u||(t=Qe(s)),i=S.cssHooks[t]||S.cssHooks[s],void 0===n)return i&&"get"in i&&void 0!==(o=i.get(e,!1,r))?o:l[t];a=typeof n,"string"===a&&(o=ue.exec(n))&&o[1]&&(n=he(e,t,o),a="number"),null!=n&&n===n&&("number"!==a||u||(n+=o&&o[3]||(S.cssNumber[s]?"":"px")),g.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),i&&"set"in i&&void 0===(n=i.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var o,a,i,s=J(t),u=tt.test(t);return u||(t=Qe(s)),i=S.cssHooks[t]||S.cssHooks[s],i&&"get"in i&&(o=i.get(e,!0,n)),void 0===o&&(o=Ge(e,t,r)),"normal"===o&&t in rt&&(o=rt[t]),""===n||n?(a=parseFloat(o),!0===n||isFinite(a)?a||0:o):o}}),S.each(["height","width"],(function(e,t){S.cssHooks[t]={get:function(e,n,r){if(n)return!et.test(S.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?it(e,t,r):$e(e,nt,(function(){return it(e,t,r)}))},set:function(e,n,r){var o,a=ze(e),i=!g.scrollboxSize()&&"absolute"===a.position,s=i||r,u=s&&"border-box"===S.css(e,"boxSizing",!1,a),l=r?at(e,t,r,u,a):0;return u&&i&&(l-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(a[t])-at(e,t,"border",!1,a)-.5)),l&&(o=ue.exec(n))&&"px"!==(o[3]||"px")&&(e.style[t]=n,n=S.css(e,t)),ot(e,n,l)}}})),S.cssHooks.marginLeft=Ke(g.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(Ge(e,"marginLeft"))||e.getBoundingClientRect().left-$e(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),S.each({margin:"",padding:"",border:"Width"},(function(e,t){S.cssHooks[e+t]={expand:function(n){for(var r=0,o={},a="string"===typeof n?n.split(" "):[n];r<4;r++)o[e+le[r]+t]=a[r]||a[r-2]||a[0];return o}},"margin"!==e&&(S.cssHooks[e+t].set=ot)})),S.fn.extend({css:function(e,t){return K(this,(function(e,t,n){var r,o,a={},i=0;if(Array.isArray(t)){for(r=ze(e),o=t.length;i<o;i++)a[t[i]]=S.css(e,t[i],!1,r);return a}return void 0!==n?S.style(e,t,n):S.css(e,t)}),e,t,arguments.length>1)}}),S.Tween=st,st.prototype={constructor:st,init:function(e,t,n,r,o,a){this.elem=e,this.prop=n,this.easing=o||S.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=a||(S.cssNumber[n]?"":"px")},cur:function(){var e=st.propHooks[this.prop];return e&&e.get?e.get(this):st.propHooks._default.get(this)},run:function(e){var t,n=st.propHooks[this.prop];return this.options.duration?this.pos=t=S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):st.propHooks._default.set(this),this}},st.prototype.init.prototype=st.prototype,st.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=S.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){S.fx.step[e.prop]?S.fx.step[e.prop](e):1!==e.elem.nodeType||!S.cssHooks[e.prop]&&null==e.elem.style[Qe(e.prop)]?e.elem[e.prop]=e.now:S.style(e.elem,e.prop,e.now+e.unit)}}},st.propHooks.scrollTop=st.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},S.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},S.fx=st.prototype.init,S.fx.step={};var ut,lt,ct=/^(?:toggle|show|hide)$/,dt=/queueHooks$/;function pt(){lt&&(!1===w.hidden&&n.requestAnimationFrame?n.requestAnimationFrame(pt):n.setTimeout(pt,S.fx.interval),S.fx.tick())}function ft(){return n.setTimeout((function(){ut=void 0})),ut=Date.now()}function ht(e,t){var n,r=0,o={height:e};for(t=t?1:0;r<4;r+=2-t)n=le[r],o["margin"+n]=o["padding"+n]=e;return t&&(o.opacity=o.width=e),o}function vt(e,t,n){for(var r,o=(yt.tweeners[t]||[]).concat(yt.tweeners["*"]),a=0,i=o.length;a<i;a++)if(r=o[a].call(n,t,e))return r}function mt(e,t,n){var r,o,a,i,s,u,l,c,d="width"in t||"height"in t,p=this,f={},h=e.style,v=e.nodeType&&fe(e),m=te.get(e,"fxshow");for(r in n.queue||(i=S._queueHooks(e,"fx"),null==i.unqueued&&(i.unqueued=0,s=i.empty.fire,i.empty.fire=function(){i.unqueued||s()}),i.unqueued++,p.always((function(){p.always((function(){i.unqueued--,S.queue(e,"fx").length||i.empty.fire()}))}))),t)if(o=t[r],ct.test(o)){if(delete t[r],a=a||"toggle"===o,o===(v?"hide":"show")){if("show"!==o||!m||void 0===m[r])continue;v=!0}f[r]=m&&m[r]||S.style(e,r)}if(u=!S.isEmptyObject(t),u||!S.isEmptyObject(f))for(r in d&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],l=m&&m.display,null==l&&(l=te.get(e,"display")),c=S.css(e,"display"),"none"===c&&(l?c=l:(ge([e],!0),l=e.style.display||l,c=S.css(e,"display"),ge([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===S.css(e,"float")&&(u||(p.done((function(){h.display=l})),null==l&&(c=h.display,l="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always((function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]}))),u=!1,f)u||(m?"hidden"in m&&(v=m.hidden):m=te.access(e,"fxshow",{display:l}),a&&(m.hidden=!v),v&&ge([e],!0),p.done((function(){for(r in v||ge([e]),te.remove(e,"fxshow"),f)S.style(e,r,f[r])}))),u=vt(v?m[r]:0,r,p),r in m||(m[r]=u.start,v&&(u.end=u.start,u.start=0))}function gt(e,t){var n,r,o,a,i;for(n in e)if(r=J(n),o=t[r],a=e[n],Array.isArray(a)&&(o=a[1],a=e[n]=a[0]),n!==r&&(e[r]=a,delete e[n]),i=S.cssHooks[r],i&&"expand"in i)for(n in a=i.expand(a),delete e[r],a)n in e||(e[n]=a[n],t[n]=o);else t[r]=o}function yt(e,t,n){var r,o,a=0,i=yt.prefilters.length,s=S.Deferred().always((function(){delete u.elem})),u=function(){if(o)return!1;for(var t=ut||ft(),n=Math.max(0,l.startTime+l.duration-t),r=n/l.duration||0,a=1-r,i=0,u=l.tweens.length;i<u;i++)l.tweens[i].run(a);return s.notifyWith(e,[l,a,n]),a<1&&u?n:(u||s.notifyWith(e,[l,1,0]),s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:S.extend({},t),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},n),originalProperties:t,originalOptions:n,startTime:ut||ft(),duration:n.duration,tweens:[],createTween:function(t,n){var r=S.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(o)return this;for(o=!0;n<r;n++)l.tweens[n].run(1);return t?(s.notifyWith(e,[l,1,0]),s.resolveWith(e,[l,t])):s.rejectWith(e,[l,t]),this}}),c=l.props;for(gt(c,l.opts.specialEasing);a<i;a++)if(r=yt.prefilters[a].call(l,e,c,l.opts),r)return y(r.stop)&&(S._queueHooks(l.elem,l.opts.queue).stop=r.stop.bind(r)),r;return S.map(c,vt,l),y(l.opts.start)&&l.opts.start.call(e,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),S.fx.timer(S.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l}S.Animation=S.extend(yt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return he(n.elem,e,ue.exec(t),n),n}]},tweener:function(e,t){y(e)?(t=e,e=["*"]):e=e.match(j);for(var n,r=0,o=e.length;r<o;r++)n=e[r],yt.tweeners[n]=yt.tweeners[n]||[],yt.tweeners[n].unshift(t)},prefilters:[mt],prefilter:function(e,t){t?yt.prefilters.unshift(e):yt.prefilters.push(e)}}),S.speed=function(e,t,n){var r=e&&"object"===typeof e?S.extend({},e):{complete:n||!n&&t||y(e)&&e,duration:e,easing:n&&t||t&&!y(t)&&t};return S.fx.off?r.duration=0:"number"!==typeof r.duration&&(r.duration in S.fx.speeds?r.duration=S.fx.speeds[r.duration]:r.duration=S.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){y(r.old)&&r.old.call(this),r.queue&&S.dequeue(this,r.queue)},r},S.fn.extend({fadeTo:function(e,t,n,r){return this.filter(fe).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var o=S.isEmptyObject(e),a=S.speed(t,n,r),i=function(){var t=yt(this,S.extend({},e),a);(o||te.get(this,"finish"))&&t.stop(!0)};return i.finish=i,o||!1===a.queue?this.each(i):this.queue(a.queue,i)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!==typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each((function(){var t=!0,o=null!=e&&e+"queueHooks",a=S.timers,i=te.get(this);if(o)i[o]&&i[o].stop&&r(i[o]);else for(o in i)i[o]&&i[o].stop&&dt.test(o)&&r(i[o]);for(o=a.length;o--;)a[o].elem!==this||null!=e&&a[o].queue!==e||(a[o].anim.stop(n),t=!1,a.splice(o,1));!t&&n||S.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,n=te.get(this),r=n[e+"queue"],o=n[e+"queueHooks"],a=S.timers,i=r?r.length:0;for(n.finish=!0,S.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=a.length;t--;)a[t].elem===this&&a[t].queue===e&&(a[t].anim.stop(!0),a.splice(t,1));for(t=0;t<i;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish}))}}),S.each(["toggle","show","hide"],(function(e,t){var n=S.fn[t];S.fn[t]=function(e,r,o){return null==e||"boolean"===typeof e?n.apply(this,arguments):this.animate(ht(t,!0),e,r,o)}})),S.each({slideDown:ht("show"),slideUp:ht("hide"),slideToggle:ht("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){S.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}})),S.timers=[],S.fx.tick=function(){var e,t=0,n=S.timers;for(ut=Date.now();t<n.length;t++)e=n[t],e()||n[t]!==e||n.splice(t--,1);n.length||S.fx.stop(),ut=void 0},S.fx.timer=function(e){S.timers.push(e),S.fx.start()},S.fx.interval=13,S.fx.start=function(){lt||(lt=!0,pt())},S.fx.stop=function(){lt=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(e,t){return e=S.fx&&S.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,r){var o=n.setTimeout(t,e);r.stop=function(){n.clearTimeout(o)}}))},function(){var e=w.createElement("input"),t=w.createElement("select"),n=t.appendChild(w.createElement("option"));e.type="checkbox",g.checkOn=""!==e.value,g.optSelected=n.selected,e=w.createElement("input"),e.value="t",e.type="radio",g.radioValue="t"===e.value}();var bt,wt=S.expr.attrHandle;S.fn.extend({attr:function(e,t){return K(this,S.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){S.removeAttr(this,e)}))}}),S.extend({attr:function(e,t,n){var r,o,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return"undefined"===typeof e.getAttribute?S.prop(e,t,n):(1===a&&S.isXMLDoc(e)||(o=S.attrHooks[t.toLowerCase()]||(S.expr.match.bool.test(t)?bt:void 0)),void 0!==n?null===n?void S.removeAttr(e,t):o&&"set"in o&&void 0!==(r=o.set(e,n,t))?r:(e.setAttribute(t,n+""),n):o&&"get"in o&&null!==(r=o.get(e,t))?r:(r=S.find.attr(e,t),null==r?void 0:r))},attrHooks:{type:{set:function(e,t){if(!g.radioValue&&"radio"===t&&R(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,o=t&&t.match(j);if(o&&1===e.nodeType)while(n=o[r++])e.removeAttribute(n)}}),bt={set:function(e,t,n){return!1===t?S.removeAttr(e,n):e.setAttribute(n,n),n}},S.each(S.expr.match.bool.source.match(/\w+/g),(function(e,t){var n=wt[t]||S.find.attr;wt[t]=function(e,t,r){var o,a,i=t.toLowerCase();return r||(a=wt[i],wt[i]=o,o=null!=n(e,t,r)?i:null,wt[i]=a),o}}));var xt=/^(?:input|select|textarea|button)$/i,Ct=/^(?:a|area)$/i;function _t(e){var t=e.match(j)||[];return t.join(" ")}function kt(e){return e.getAttribute&&e.getAttribute("class")||""}function St(e){return Array.isArray(e)?e:"string"===typeof e&&e.match(j)||[]}S.fn.extend({prop:function(e,t){return K(this,S.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[S.propFix[e]||e]}))}}),S.extend({prop:function(e,t,n){var r,o,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return 1===a&&S.isXMLDoc(e)||(t=S.propFix[t]||t,o=S.propHooks[t]),void 0!==n?o&&"set"in o&&void 0!==(r=o.set(e,n,t))?r:e[t]=n:o&&"get"in o&&null!==(r=o.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=S.find.attr(e,"tabindex");return t?parseInt(t,10):xt.test(e.nodeName)||Ct.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),g.optSelected||(S.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){S.propFix[this.toLowerCase()]=this})),S.fn.extend({addClass:function(e){var t,n,r,o,a,i,s,u=0;if(y(e))return this.each((function(t){S(this).addClass(e.call(this,t,kt(this)))}));if(t=St(e),t.length)while(n=this[u++])if(o=kt(n),r=1===n.nodeType&&" "+_t(o)+" ",r){i=0;while(a=t[i++])r.indexOf(" "+a+" ")<0&&(r+=a+" ");s=_t(r),o!==s&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,r,o,a,i,s,u=0;if(y(e))return this.each((function(t){S(this).removeClass(e.call(this,t,kt(this)))}));if(!arguments.length)return this.attr("class","");if(t=St(e),t.length)while(n=this[u++])if(o=kt(n),r=1===n.nodeType&&" "+_t(o)+" ",r){i=0;while(a=t[i++])while(r.indexOf(" "+a+" ")>-1)r=r.replace(" "+a+" "," ");s=_t(r),o!==s&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e,r="string"===n||Array.isArray(e);return"boolean"===typeof t&&r?t?this.addClass(e):this.removeClass(e):y(e)?this.each((function(n){S(this).toggleClass(e.call(this,n,kt(this),t),t)})):this.each((function(){var t,o,a,i;if(r){o=0,a=S(this),i=St(e);while(t=i[o++])a.hasClass(t)?a.removeClass(t):a.addClass(t)}else void 0!==e&&"boolean"!==n||(t=kt(this),t&&te.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":te.get(this,"__className__")||""))}))},hasClass:function(e){var t,n,r=0;t=" "+e+" ";while(n=this[r++])if(1===n.nodeType&&(" "+_t(kt(n))+" ").indexOf(t)>-1)return!0;return!1}});var Et=/\r/g;S.fn.extend({val:function(e){var t,n,r,o=this[0];return arguments.length?(r=y(e),this.each((function(n){var o;1===this.nodeType&&(o=r?e.call(this,n,S(this).val()):e,null==o?o="":"number"===typeof o?o+="":Array.isArray(o)&&(o=S.map(o,(function(e){return null==e?"":e+""}))),t=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,o,"value")||(this.value=o))}))):o?(t=S.valHooks[o.type]||S.valHooks[o.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(o,"value"))?n:(n=o.value,"string"===typeof n?n.replace(Et,""):null==n?"":n)):void 0}}),S.extend({valHooks:{option:{get:function(e){var t=S.find.attr(e,"value");return null!=t?t:_t(S.text(e))}},select:{get:function(e){var t,n,r,o=e.options,a=e.selectedIndex,i="select-one"===e.type,s=i?null:[],u=i?a+1:o.length;for(r=a<0?u:i?a:0;r<u;r++)if(n=o[r],(n.selected||r===a)&&!n.disabled&&(!n.parentNode.disabled||!R(n.parentNode,"optgroup"))){if(t=S(n).val(),i)return t;s.push(t)}return s},set:function(e,t){var n,r,o=e.options,a=S.makeArray(t),i=o.length;while(i--)r=o[i],(r.selected=S.inArray(S.valHooks.option.get(r),a)>-1)&&(n=!0);return n||(e.selectedIndex=-1),a}}}}),S.each(["radio","checkbox"],(function(){S.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=S.inArray(S(e).val(),t)>-1}},g.checkOn||(S.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})),g.focusin="onfocusin"in n;var It=/^(?:focusinfocus|focusoutblur)$/,At=function(e){e.stopPropagation()};S.extend(S.event,{trigger:function(e,t,r,o){var a,i,s,u,l,c,d,p,f=[r||w],v=h.call(e,"type")?e.type:e,m=h.call(e,"namespace")?e.namespace.split("."):[];if(i=p=s=r=r||w,3!==r.nodeType&&8!==r.nodeType&&!It.test(v+S.event.triggered)&&(v.indexOf(".")>-1&&(m=v.split("."),v=m.shift(),m.sort()),l=v.indexOf(":")<0&&"on"+v,e=e[S.expando]?e:new S.Event(v,"object"===typeof e&&e),e.isTrigger=o?2:3,e.namespace=m.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),t=null==t?[e]:S.makeArray(t,[e]),d=S.event.special[v]||{},o||!d.trigger||!1!==d.trigger.apply(r,t))){if(!o&&!d.noBubble&&!b(r)){for(u=d.delegateType||v,It.test(u+v)||(i=i.parentNode);i;i=i.parentNode)f.push(i),s=i;s===(r.ownerDocument||w)&&f.push(s.defaultView||s.parentWindow||n)}a=0;while((i=f[a++])&&!e.isPropagationStopped())p=i,e.type=a>1?u:d.bindType||v,c=(te.get(i,"events")||Object.create(null))[e.type]&&te.get(i,"handle"),c&&c.apply(i,t),c=l&&i[l],c&&c.apply&&Q(i)&&(e.result=c.apply(i,t),!1===e.result&&e.preventDefault());return e.type=v,o||e.isDefaultPrevented()||d._default&&!1!==d._default.apply(f.pop(),t)||!Q(r)||l&&y(r[v])&&!b(r)&&(s=r[l],s&&(r[l]=null),S.event.triggered=v,e.isPropagationStopped()&&p.addEventListener(v,At),r[v](),e.isPropagationStopped()&&p.removeEventListener(v,At),S.event.triggered=void 0,s&&(r[l]=s)),e.result}},simulate:function(e,t,n){var r=S.extend(new S.Event,n,{type:e,isSimulated:!0});S.event.trigger(r,null,t)}}),S.fn.extend({trigger:function(e,t){return this.each((function(){S.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var n=this[0];if(n)return S.event.trigger(e,t,n,!0)}}),g.focusin||S.each({focus:"focusin",blur:"focusout"},(function(e,t){var n=function(e){S.event.simulate(t,e.target,S.event.fix(e))};S.event.special[t]={setup:function(){var r=this.ownerDocument||this.document||this,o=te.access(r,t);o||r.addEventListener(e,n,!0),te.access(r,t,(o||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,o=te.access(r,t)-1;o?te.access(r,t,o):(r.removeEventListener(e,n,!0),te.remove(r,t))}}}));var Ft=n.location,Dt={guid:Date.now()},Rt=/\?/;S.parseXML=function(e){var t,r;if(!e||"string"!==typeof e)return null;try{t=(new n.DOMParser).parseFromString(e,"text/xml")}catch(o){}return r=t&&t.getElementsByTagName("parsererror")[0],t&&!r||S.error("Invalid XML: "+(r?S.map(r.childNodes,(function(e){return e.textContent})).join("\n"):e)),t};var Tt=/\[\]$/,Ot=/\r?\n/g,Pt=/^(?:submit|button|image|reset|file)$/i,Bt=/^(?:input|select|textarea|keygen)/i;function Mt(e,t,n,r){var o;if(Array.isArray(t))S.each(t,(function(t,o){n||Tt.test(e)?r(e,o):Mt(e+"["+("object"===typeof o&&null!=o?t:"")+"]",o,n,r)}));else if(n||"object"!==_(t))r(e,t);else for(o in t)Mt(e+"["+o+"]",t[o],n,r)}S.param=function(e,t){var n,r=[],o=function(e,t){var n=y(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!S.isPlainObject(e))S.each(e,(function(){o(this.name,this.value)}));else for(n in e)Mt(n,e[n],t,o);return r.join("&")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=S.prop(this,"elements");return e?S.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!S(this).is(":disabled")&&Bt.test(this.nodeName)&&!Pt.test(e)&&(this.checked||!ye.test(e))})).map((function(e,t){var n=S(this).val();return null==n?null:Array.isArray(n)?S.map(n,(function(e){return{name:t.name,value:e.replace(Ot,"\r\n")}})):{name:t.name,value:n.replace(Ot,"\r\n")}})).get()}});var Nt=/%20/g,Lt=/#.*$/,Vt=/([?&])_=[^&]*/,jt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Wt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ht=/^(?:GET|HEAD)$/,Ut=/^\/\//,zt={},$t={},qt="*/".concat("*"),Gt=w.createElement("a");function Kt(e){return function(t,n){"string"!==typeof t&&(n=t,t="*");var r,o=0,a=t.toLowerCase().match(j)||[];if(y(n))while(r=a[o++])"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Xt(e,t,n,r){var o={},a=e===$t;function i(s){var u;return o[s]=!0,S.each(e[s]||[],(function(e,s){var l=s(t,n,r);return"string"!==typeof l||a||o[l]?a?!(u=l):void 0:(t.dataTypes.unshift(l),i(l),!1)})),u}return i(t.dataTypes[0])||!o["*"]&&i("*")}function Yt(e,t){var n,r,o=S.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((o[n]?e:r||(r={}))[n]=t[n]);return r&&S.extend(!0,e,r),e}function Zt(e,t,n){var r,o,a,i,s=e.contents,u=e.dataTypes;while("*"===u[0])u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(o in s)if(s[o]&&s[o].test(r)){u.unshift(o);break}if(u[0]in n)a=u[0];else{for(o in n){if(!u[0]||e.converters[o+" "+u[0]]){a=o;break}i||(i=o)}a=a||i}if(a)return a!==u[0]&&u.unshift(a),n[a]}function Jt(e,t,n,r){var o,a,i,s,u,l={},c=e.dataTypes.slice();if(c[1])for(i in e.converters)l[i.toLowerCase()]=e.converters[i];a=c.shift();while(a)if(e.responseFields[a]&&(n[e.responseFields[a]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=a,a=c.shift(),a)if("*"===a)a=u;else if("*"!==u&&u!==a){if(i=l[u+" "+a]||l["* "+a],!i)for(o in l)if(s=o.split(" "),s[1]===a&&(i=l[u+" "+s[0]]||l["* "+s[0]],i)){!0===i?i=l[o]:!0!==l[o]&&(a=s[0],c.unshift(s[1]));break}if(!0!==i)if(i&&e.throws)t=i(t);else try{t=i(t)}catch(d){return{state:"parsererror",error:i?d:"No conversion from "+u+" to "+a}}}return{state:"success",data:t}}Gt.href=Ft.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ft.href,type:"GET",isLocal:Wt.test(Ft.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":qt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Yt(Yt(e,S.ajaxSettings),t):Yt(S.ajaxSettings,e)},ajaxPrefilter:Kt(zt),ajaxTransport:Kt($t),ajax:function(e,t){"object"===typeof e&&(t=e,e=void 0),t=t||{};var r,o,a,i,s,u,l,c,d,p,f=S.ajaxSetup({},t),h=f.context||f,v=f.context&&(h.nodeType||h.jquery)?S(h):S.event,m=S.Deferred(),g=S.Callbacks("once memory"),y=f.statusCode||{},b={},x={},C="canceled",_={readyState:0,getResponseHeader:function(e){var t;if(l){if(!i){i={};while(t=jt.exec(a))i[t[1].toLowerCase()+" "]=(i[t[1].toLowerCase()+" "]||[]).concat(t[2])}t=i[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return l?a:null},setRequestHeader:function(e,t){return null==l&&(e=x[e.toLowerCase()]=x[e.toLowerCase()]||e,b[e]=t),this},overrideMimeType:function(e){return null==l&&(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(l)_.always(e[_.status]);else for(t in e)y[t]=[y[t],e[t]];return this},abort:function(e){var t=e||C;return r&&r.abort(t),k(0,t),this}};if(m.promise(_),f.url=((e||f.url||Ft.href)+"").replace(Ut,Ft.protocol+"//"),f.type=t.method||t.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(j)||[""],null==f.crossDomain){u=w.createElement("a");try{u.href=f.url,u.href=u.href,f.crossDomain=Gt.protocol+"//"+Gt.host!==u.protocol+"//"+u.host}catch(E){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!==typeof f.data&&(f.data=S.param(f.data,f.traditional)),Xt(zt,f,t,_),l)return _;for(d in c=S.event&&f.global,c&&0===S.active++&&S.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Ht.test(f.type),o=f.url.replace(Lt,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(Nt,"+")):(p=f.url.slice(o.length),f.data&&(f.processData||"string"===typeof f.data)&&(o+=(Rt.test(o)?"&":"?")+f.data,delete f.data),!1===f.cache&&(o=o.replace(Vt,"$1"),p=(Rt.test(o)?"&":"?")+"_="+Dt.guid+++p),f.url=o+p),f.ifModified&&(S.lastModified[o]&&_.setRequestHeader("If-Modified-Since",S.lastModified[o]),S.etag[o]&&_.setRequestHeader("If-None-Match",S.etag[o])),(f.data&&f.hasContent&&!1!==f.contentType||t.contentType)&&_.setRequestHeader("Content-Type",f.contentType),_.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+qt+"; q=0.01":""):f.accepts["*"]),f.headers)_.setRequestHeader(d,f.headers[d]);if(f.beforeSend&&(!1===f.beforeSend.call(h,_,f)||l))return _.abort();if(C="abort",g.add(f.complete),_.done(f.success),_.fail(f.error),r=Xt($t,f,t,_),r){if(_.readyState=1,c&&v.trigger("ajaxSend",[_,f]),l)return _;f.async&&f.timeout>0&&(s=n.setTimeout((function(){_.abort("timeout")}),f.timeout));try{l=!1,r.send(b,k)}catch(E){if(l)throw E;k(-1,E)}}else k(-1,"No Transport");function k(e,t,i,u){var d,p,b,w,x,C=t;l||(l=!0,s&&n.clearTimeout(s),r=void 0,a=u||"",_.readyState=e>0?4:0,d=e>=200&&e<300||304===e,i&&(w=Zt(f,_,i)),!d&&S.inArray("script",f.dataTypes)>-1&&S.inArray("json",f.dataTypes)<0&&(f.converters["text script"]=function(){}),w=Jt(f,w,_,d),d?(f.ifModified&&(x=_.getResponseHeader("Last-Modified"),x&&(S.lastModified[o]=x),x=_.getResponseHeader("etag"),x&&(S.etag[o]=x)),204===e||"HEAD"===f.type?C="nocontent":304===e?C="notmodified":(C=w.state,p=w.data,b=w.error,d=!b)):(b=C,!e&&C||(C="error",e<0&&(e=0))),_.status=e,_.statusText=(t||C)+"",d?m.resolveWith(h,[p,C,_]):m.rejectWith(h,[_,C,b]),_.statusCode(y),y=void 0,c&&v.trigger(d?"ajaxSuccess":"ajaxError",[_,f,d?p:b]),g.fireWith(h,[_,C]),c&&(v.trigger("ajaxComplete",[_,f]),--S.active||S.event.trigger("ajaxStop")))}return _},getJSON:function(e,t,n){return S.get(e,t,n,"json")},getScript:function(e,t){return S.get(e,void 0,t,"script")}}),S.each(["get","post"],(function(e,t){S[t]=function(e,n,r,o){return y(n)&&(o=o||r,r=n,n=void 0),S.ajax(S.extend({url:e,type:t,dataType:o,data:n,success:r},S.isPlainObject(e)&&e))}})),S.ajaxPrefilter((function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")})),S._evalUrl=function(e,t,n){return S.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){S.globalEval(e,t,n)}})},S.fn.extend({wrapAll:function(e){var t;return this[0]&&(y(e)&&(e=e.call(this[0])),t=S(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return y(e)?this.each((function(t){S(this).wrapInner(e.call(this,t))})):this.each((function(){var t=S(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)}))},wrap:function(e){var t=y(e);return this.each((function(n){S(this).wrapAll(t?e.call(this,n):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){S(this).replaceWith(this.childNodes)})),this}}),S.expr.pseudos.hidden=function(e){return!S.expr.pseudos.visible(e)},S.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(e){}};var Qt={0:200,1223:204},en=S.ajaxSettings.xhr();g.cors=!!en&&"withCredentials"in en,g.ajax=en=!!en,S.ajaxTransport((function(e){var t,r;if(g.cors||en&&!e.crossDomain)return{send:function(o,a){var i,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)s[i]=e.xhrFields[i];for(i in e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest"),o)s.setRequestHeader(i,o[i]);t=function(e){return function(){t&&(t=r=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!==typeof s.status?a(0,"error"):a(s.status,s.statusText):a(Qt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!==typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=t(),r=s.onerror=s.ontimeout=t("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&n.setTimeout((function(){t&&r()}))},t=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(u){if(t)throw u}},abort:function(){t&&t()}}})),S.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return S.globalEval(e),e}}}),S.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),S.ajaxTransport("script",(function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(r,o){t=S("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&o("error"===e.type?404:200,e.type)}),w.head.appendChild(t[0])},abort:function(){n&&n()}}}));var tn=[],nn=/(=)\?(?=&|$)|\?\?/;S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=tn.pop()||S.expando+"_"+Dt.guid++;return this[e]=!0,e}}),S.ajaxPrefilter("json jsonp",(function(e,t,r){var o,a,i,s=!1!==e.jsonp&&(nn.test(e.url)?"url":"string"===typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&nn.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return o=e.jsonpCallback=y(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(nn,"$1"+o):!1!==e.jsonp&&(e.url+=(Rt.test(e.url)?"&":"?")+e.jsonp+"="+o),e.converters["script json"]=function(){return i||S.error(o+" was not called"),i[0]},e.dataTypes[0]="json",a=n[o],n[o]=function(){i=arguments},r.always((function(){void 0===a?S(n).removeProp(o):n[o]=a,e[o]&&(e.jsonpCallback=t.jsonpCallback,tn.push(o)),i&&y(a)&&a(i[0]),i=a=void 0})),"script"})),g.createHTMLDocument=function(){var e=w.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),S.parseHTML=function(e,t,n){return"string"!==typeof e?[]:("boolean"===typeof t&&(n=t,t=!1),t||(g.createHTMLDocument?(t=w.implementation.createHTMLDocument(""),r=t.createElement("base"),r.href=w.location.href,t.head.appendChild(r)):t=w),o=T.exec(e),a=!n&&[],o?[t.createElement(o[1])]:(o=Se([e],t,a),a&&a.length&&S(a).remove(),S.merge([],o.childNodes)));var r,o,a},S.fn.load=function(e,t,n){var r,o,a,i=this,s=e.indexOf(" ");return s>-1&&(r=_t(e.slice(s)),e=e.slice(0,s)),y(t)?(n=t,t=void 0):t&&"object"===typeof t&&(o="POST"),i.length>0&&S.ajax({url:e,type:o||"GET",dataType:"html",data:t}).done((function(e){a=arguments,i.html(r?S("<div>").append(S.parseHTML(e)).find(r):e)})).always(n&&function(e,t){i.each((function(){n.apply(this,a||[e.responseText,t,e])}))}),this},S.expr.pseudos.animated=function(e){return S.grep(S.timers,(function(t){return e===t.elem})).length},S.offset={setOffset:function(e,t,n){var r,o,a,i,s,u,l,c=S.css(e,"position"),d=S(e),p={};"static"===c&&(e.style.position="relative"),s=d.offset(),a=S.css(e,"top"),u=S.css(e,"left"),l=("absolute"===c||"fixed"===c)&&(a+u).indexOf("auto")>-1,l?(r=d.position(),i=r.top,o=r.left):(i=parseFloat(a)||0,o=parseFloat(u)||0),y(t)&&(t=t.call(e,n,S.extend({},s))),null!=t.top&&(p.top=t.top-s.top+i),null!=t.left&&(p.left=t.left-s.left+o),"using"in t?t.using.call(e,p):d.css(p)}},S.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){S.offset.setOffset(this,e,t)}));var t,n,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],o={top:0,left:0};if("fixed"===S.css(r,"position"))t=r.getBoundingClientRect();else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&"static"===S.css(e,"position"))e=e.parentNode;e&&e!==r&&1===e.nodeType&&(o=S(e).offset(),o.top+=S.css(e,"borderTopWidth",!0),o.left+=S.css(e,"borderLeftWidth",!0))}return{top:t.top-o.top-S.css(r,"marginTop",!0),left:t.left-o.left-S.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){var e=this.offsetParent;while(e&&"static"===S.css(e,"position"))e=e.offsetParent;return e||ce}))}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var n="pageYOffset"===t;S.fn[e]=function(r){return K(this,(function(e,r,o){var a;if(b(e)?a=e:9===e.nodeType&&(a=e.defaultView),void 0===o)return a?a[t]:e[r];a?a.scrollTo(n?a.pageXOffset:o,n?o:a.pageYOffset):e[r]=o}),e,r,arguments.length)}})),S.each(["top","left"],(function(e,t){S.cssHooks[t]=Ke(g.pixelPosition,(function(e,n){if(n)return n=Ge(e,t),Ue.test(n)?S(e).position()[t]+"px":n}))})),S.each({Height:"height",Width:"width"},(function(e,t){S.each({padding:"inner"+e,content:t,"":"outer"+e},(function(n,r){S.fn[r]=function(o,a){var i=arguments.length&&(n||"boolean"!==typeof o),s=n||(!0===o||!0===a?"margin":"border");return K(this,(function(t,n,o){var a;return b(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(a=t.documentElement,Math.max(t.body["scroll"+e],a["scroll"+e],t.body["offset"+e],a["offset"+e],a["client"+e])):void 0===o?S.css(t,n,s):S.style(t,n,o,s)}),t,i?o:void 0,i)}}))})),S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){S.fn[t]=function(e){return this.on(t,e)}})),S.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),S.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){S.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}));var rn=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;S.proxy=function(e,t){var n,r,o;if("string"===typeof t&&(n=e[t],t=e,e=n),y(e))return r=u.call(arguments,2),o=function(){return e.apply(t||this,r.concat(u.call(arguments)))},o.guid=e.guid=e.guid||S.guid++,o},S.holdReady=function(e){e?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=R,S.isFunction=y,S.isWindow=b,S.camelCase=J,S.type=_,S.now=Date.now,S.isNumeric=function(e){var t=S.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},S.trim=function(e){return null==e?"":(e+"").replace(rn,"")},r=[],o=function(){return S}.apply(t,r),void 0===o||(e.exports=o);var on=n.jQuery,an=n.$;return S.noConflict=function(e){return n.$===S&&(n.$=an),e&&n.jQuery===S&&(n.jQuery=on),S},"undefined"===typeof a&&(n.jQuery=n.$=S),S}))},8816:function(e,t,n){var r=n(1923),o=n(3793).EventEmitter;function a(e){if(!(this instanceof a))return new a(e);o.call(this),e=e||{},this.concurrency=e.concurrency||1/0,this.timeout=e.timeout||0,this.pending=0,this.session=0,this.running=!1,this.jobs=[]}e.exports=a,r(a,o);var i=["push","unshift","splice","pop","shift","slice","reverse","indexOf","lastIndexOf"];for(var s in i)(function(e){a.prototype[e]=function(){return Array.prototype[e].apply(this.jobs,arguments)}})(i[s]);function u(e){var t=this;function n(e){t.end(e)}function r(o){t.removeListener("error",n),t.removeListener("end",r),e(o)}this.on("error",n),this.on("end",r)}function l(e){this.session++,this.running=!1,this.emit("end",e)}Object.defineProperty(a.prototype,"length",{get:function(){return this.pending+this.jobs.length}}),a.prototype.start=function(e){if(e&&u.call(this,e),this.pending!==this.concurrency)if(0!==this.jobs.length){var t=this,n=this.jobs.shift(),r=!0,o=this.session,a=null,i=!1;this.timeout&&(a=setTimeout((function(){i=!0,t.listeners("timeout").length>0?t.emit("timeout",s,n):s()}),this.timeout)),this.pending++,this.running=!0,n(s),this.jobs.length>0&&this.start()}else 0===this.pending&&l.call(this);function s(e,s){r&&t.session===o&&(r=!1,t.pending--,null!==a&&clearTimeout(a),e?t.emit("error",e,n):!1===i&&t.emit("success",s,n),t.session===o&&(0===t.pending&&0===t.jobs.length?l.call(t):t.running&&t.start()))}},a.prototype.stop=function(){this.running=!1},a.prototype.end=function(e){this.jobs.length=0,this.pending=0,l.call(this,e)}},3233:function(e,t,n){"use strict";n(1703);var r,o=n(8816),a=n(9242);r="undefined"!==typeof Promise?Promise:function(){throw new Error("Must call Queue.setPromise() first")};var i=function(e){var t=this;o.apply(t,arguments),"undefined"!==typeof e&&(!0===e.autoStart&&["push","unshift"].forEach((function(e){var n=t[e];t[e]=function(){n.apply(t,arguments),t.jobs.length&&!1===t.running&&t.start()}})),t.on("end",(function(){t.jobs.length&&!1===t.running&&t.start()})))};a.inherits(i,o);var s=function(e,t,n){return new r((function(o,a){var i=function(e){new r(n).then((function(t){return e(),t}),(function(t){throw e(),t})).then(o,a)};e[t](i)}))};i.prototype.pushTask=function(e){return s(this,"push",e)},i.prototype.unshiftTask=function(e){return s(this,"unshift",e)},i.setPromise=function(e){r=e},e.exports=i},2051:function(e){e.exports=function(e){return e&&"object"===typeof e&&"function"===typeof e.copy&&"function"===typeof e.fill&&"function"===typeof e.readUInt8}},606:function(e,t,n){"use strict";n(8675),n(3462),n(7380),n(1118),n(1703);var r=n(2773),o=n(4784),a=n(2591),i=n(8300);function s(e){return e.call.bind(e)}var u="undefined"!==typeof BigInt,l="undefined"!==typeof Symbol,c=s(Object.prototype.toString),d=s(Number.prototype.valueOf),p=s(String.prototype.valueOf),f=s(Boolean.prototype.valueOf);if(u)var h=s(BigInt.prototype.valueOf);if(l)var v=s(Symbol.prototype.valueOf);function m(e,t){if("object"!==typeof e)return!1;try{return t(e),!0}catch(n){return!1}}function g(e){return"undefined"!==typeof Promise&&e instanceof Promise||null!==e&&"object"===typeof e&&"function"===typeof e.then&&"function"===typeof e.catch}function y(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):i(e)||W(e)}function b(e){return"Uint8Array"===a(e)}function w(e){return"Uint8ClampedArray"===a(e)}function x(e){return"Uint16Array"===a(e)}function C(e){return"Uint32Array"===a(e)}function _(e){return"Int8Array"===a(e)}function k(e){return"Int16Array"===a(e)}function S(e){return"Int32Array"===a(e)}function E(e){return"Float32Array"===a(e)}function I(e){return"Float64Array"===a(e)}function A(e){return"BigInt64Array"===a(e)}function F(e){return"BigUint64Array"===a(e)}function D(e){return"[object Map]"===c(e)}function R(e){return"undefined"!==typeof Map&&(D.working?D(e):e instanceof Map)}function T(e){return"[object Set]"===c(e)}function O(e){return"undefined"!==typeof Set&&(T.working?T(e):e instanceof Set)}function P(e){return"[object WeakMap]"===c(e)}function B(e){return"undefined"!==typeof WeakMap&&(P.working?P(e):e instanceof WeakMap)}function M(e){return"[object WeakSet]"===c(e)}function N(e){return M(e)}function L(e){return"[object ArrayBuffer]"===c(e)}function V(e){return"undefined"!==typeof ArrayBuffer&&(L.working?L(e):e instanceof ArrayBuffer)}function j(e){return"[object DataView]"===c(e)}function W(e){return"undefined"!==typeof DataView&&(j.working?j(e):e instanceof DataView)}t.isArgumentsObject=r,t.isGeneratorFunction=o,t.isTypedArray=i,t.isPromise=g,t.isArrayBufferView=y,t.isUint8Array=b,t.isUint8ClampedArray=w,t.isUint16Array=x,t.isUint32Array=C,t.isInt8Array=_,t.isInt16Array=k,t.isInt32Array=S,t.isFloat32Array=E,t.isFloat64Array=I,t.isBigInt64Array=A,t.isBigUint64Array=F,D.working="undefined"!==typeof Map&&D(new Map),t.isMap=R,T.working="undefined"!==typeof Set&&T(new Set),t.isSet=O,P.working="undefined"!==typeof WeakMap&&P(new WeakMap),t.isWeakMap=B,M.working="undefined"!==typeof WeakSet&&M(new WeakSet),t.isWeakSet=N,L.working="undefined"!==typeof ArrayBuffer&&L(new ArrayBuffer),t.isArrayBuffer=V,j.working="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof DataView&&j(new DataView(new ArrayBuffer(1),0,1)),t.isDataView=W;var H="undefined"!==typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function U(e){return"[object SharedArrayBuffer]"===c(e)}function z(e){return"undefined"!==typeof H&&("undefined"===typeof U.working&&(U.working=U(new H)),U.working?U(e):e instanceof H)}function $(e){return"[object AsyncFunction]"===c(e)}function q(e){return"[object Map Iterator]"===c(e)}function G(e){return"[object Set Iterator]"===c(e)}function K(e){return"[object Generator]"===c(e)}function X(e){return"[object WebAssembly.Module]"===c(e)}function Y(e){return m(e,d)}function Z(e){return m(e,p)}function J(e){return m(e,f)}function Q(e){return u&&m(e,h)}function ee(e){return l&&m(e,v)}function te(e){return Y(e)||Z(e)||J(e)||Q(e)||ee(e)}function ne(e){return"undefined"!==typeof Uint8Array&&(V(e)||z(e))}t.isSharedArrayBuffer=z,t.isAsyncFunction=$,t.isMapIterator=q,t.isSetIterator=G,t.isGeneratorObject=K,t.isWebAssemblyCompiledModule=X,t.isNumberObject=Y,t.isStringObject=Z,t.isBooleanObject=J,t.isBigIntObject=Q,t.isSymbolObject=ee,t.isBoxedPrimitive=te,t.isAnyArrayBuffer=ne,["isProxy","isExternal","isModuleNamespaceObject"].forEach((function(e){Object.defineProperty(t,e,{enumerable:!1,value:function(){throw new Error(e+" is not supported in userland")}})}))},9242:function(e,t,n){n(1703);var r=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},o=/%[sdj%]/g;t.format=function(e){if(!_(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(u(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,a=r.length,i=String(e).replace(o,(function(e){if("%%"===e)return"%";if(n>=a)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return e}})),s=r[n];n<a;s=r[++n])w(s)||!I(s)?i+=" "+s:i+=" "+u(s);return i},t.deprecate=function(e,n){if("undefined"!==typeof process&&!0===process.noDeprecation)return e;if("undefined"===typeof process)return function(){return t.deprecate(e,n).apply(this,arguments)};var r=!1;function o(){if(!r){if(process.throwDeprecation)throw new Error(n);process.traceDeprecation?console.trace(n):console.error(n),r=!0}return e.apply(this,arguments)}return o};var a={},i=/^$/;if({NODE_ENV:"production",BASE_URL:"/"}.NODE_DEBUG){var s={NODE_ENV:"production",BASE_URL:"/"}.NODE_DEBUG;s=s.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),i=new RegExp("^"+s+"$","i")}function u(e,n){var r={seen:[],stylize:c};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),b(n)?r.showHidden=n:n&&t._extend(r,n),S(r.showHidden)&&(r.showHidden=!1),S(r.depth)&&(r.depth=2),S(r.colors)&&(r.colors=!1),S(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=l),p(r,e,r.depth)}function l(e,t){var n=u.styles[t];return n?"["+u.colors[n][0]+"m"+e+"["+u.colors[n][1]+"m":e}function c(e,t){return e}function d(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}function p(e,n,r){if(e.customInspect&&n&&D(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var o=n.inspect(r,e);return _(o)||(o=p(e,o,r)),o}var a=f(e,n);if(a)return a;var i=Object.keys(n),s=d(i);if(e.showHidden&&(i=Object.getOwnPropertyNames(n)),F(n)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return h(n);if(0===i.length){if(D(n)){var u=n.name?": "+n.name:"";return e.stylize("[Function"+u+"]","special")}if(E(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(A(n))return e.stylize(Date.prototype.toString.call(n),"date");if(F(n))return h(n)}var l,c="",b=!1,w=["{","}"];if(y(n)&&(b=!0,w=["[","]"]),D(n)){var x=n.name?": "+n.name:"";c=" [Function"+x+"]"}return E(n)&&(c=" "+RegExp.prototype.toString.call(n)),A(n)&&(c=" "+Date.prototype.toUTCString.call(n)),F(n)&&(c=" "+h(n)),0!==i.length||b&&0!=n.length?r<0?E(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),l=b?v(e,n,r,s,i):i.map((function(t){return m(e,n,r,s,t,b)})),e.seen.pop(),g(l,c,w)):w[0]+c+w[1]}function f(e,t){if(S(t))return e.stylize("undefined","undefined");if(_(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return C(t)?e.stylize(""+t,"number"):b(t)?e.stylize(""+t,"boolean"):w(t)?e.stylize("null","null"):void 0}function h(e){return"["+Error.prototype.toString.call(e)+"]"}function v(e,t,n,r,o){for(var a=[],i=0,s=t.length;i<s;++i)M(t,String(i))?a.push(m(e,t,n,r,String(i),!0)):a.push("");return o.forEach((function(o){o.match(/^\d+$/)||a.push(m(e,t,n,r,o,!0))})),a}function m(e,t,n,r,o,a){var i,s,u;if(u=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]},u.get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),M(r,o)||(i="["+o+"]"),s||(e.seen.indexOf(u.value)<0?(s=w(n)?p(e,u.value,null):p(e,u.value,n-1),s.indexOf("\n")>-1&&(s=a?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n"))):s=e.stylize("[Circular]","special")),S(i)){if(a&&o.match(/^\d+$/))return s;i=JSON.stringify(""+o),i.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(i=i.substr(1,i.length-2),i=e.stylize(i,"name")):(i=i.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),i=e.stylize(i,"string"))}return i+": "+s}function g(e,t,n){var r=e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0);return r>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function y(e){return Array.isArray(e)}function b(e){return"boolean"===typeof e}function w(e){return null===e}function x(e){return null==e}function C(e){return"number"===typeof e}function _(e){return"string"===typeof e}function k(e){return"symbol"===typeof e}function S(e){return void 0===e}function E(e){return I(e)&&"[object RegExp]"===T(e)}function I(e){return"object"===typeof e&&null!==e}function A(e){return I(e)&&"[object Date]"===T(e)}function F(e){return I(e)&&("[object Error]"===T(e)||e instanceof Error)}function D(e){return"function"===typeof e}function R(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e||"symbol"===typeof e||"undefined"===typeof e}function T(e){return Object.prototype.toString.call(e)}function O(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(e=e.toUpperCase(),!a[e])if(i.test(e)){var n=process.pid;a[e]=function(){var r=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,r)}}else a[e]=function(){};return a[e]},t.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.types=n(606),t.isArray=y,t.isBoolean=b,t.isNull=w,t.isNullOrUndefined=x,t.isNumber=C,t.isString=_,t.isSymbol=k,t.isUndefined=S,t.isRegExp=E,t.types.isRegExp=E,t.isObject=I,t.isDate=A,t.types.isDate=A,t.isError=F,t.types.isNativeError=F,t.isFunction=D,t.isPrimitive=R,t.isBuffer=n(2051);var P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function B(){var e=new Date,t=[O(e.getHours()),O(e.getMinutes()),O(e.getSeconds())].join(":");return[e.getDate(),P[e.getMonth()],t].join(" ")}function M(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",B(),t.format.apply(t,arguments))},t.inherits=n(1923),t._extend=function(e,t){if(!t||!I(t))return e;var n=Object.keys(t),r=n.length;while(r--)e[n[r]]=t[n[r]];return e};var N="undefined"!==typeof Symbol?Symbol("util.promisify.custom"):void 0;function L(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}function V(e){if("function"!==typeof e)throw new TypeError('The "original" argument must be of type Function');function t(){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);var r=t.pop();if("function"!==typeof r)throw new TypeError("The last argument must be of type Function");var o=this,a=function(){return r.apply(o,arguments)};e.apply(this,t).then((function(e){process.nextTick(a.bind(null,null,e))}),(function(e){process.nextTick(L.bind(null,e,a))}))}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,r(e)),t}t.promisify=function(e){if("function"!==typeof e)throw new TypeError('The "original" argument must be of type Function');if(N&&e[N]){var t=e[N];if("function"!==typeof t)throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,N,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,r=new Promise((function(e,r){t=e,n=r})),o=[],a=0;a<arguments.length;a++)o.push(arguments[a]);o.push((function(e,r){e?n(e):t(r)}));try{e.apply(this,o)}catch(i){n(i)}return r}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),N&&Object.defineProperty(t,N,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,r(e))},t.promisify.custom=N,t.callbackify=V},89:function(e,t){"use strict";t.Z=(e,t)=>{const n=e.__vccOpts||e;for(const[r,o]of t)n[r]=o;return n}},678:function(e,t,n){"use strict";n.d(t,{PO:function(){return $},p7:function(){return tt}});n(6699),n(1703);var r=n(3396),o=n(4870);
/*!
  * vue-router v4.0.13
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */
const a="function"===typeof Symbol&&"symbol"===typeof Symbol.toStringTag,i=e=>a?Symbol(e):"_vr_"+e,s=i("rvlm"),u=i("rvd"),l=i("r"),c=i("rl"),d=i("rvl"),p="undefined"!==typeof window;function f(e){return e.__esModule||a&&"Module"===e[Symbol.toStringTag]}const h=Object.assign;function v(e,t){const n={};for(const r in t){const o=t[r];n[r]=Array.isArray(o)?o.map(e):e(o)}return n}const m=()=>{};const g=/\/$/,y=e=>e.replace(g,"");function b(e,t,n="/"){let r,o={},a="",i="";const s=t.indexOf("?"),u=t.indexOf("#",s>-1?s:0);return s>-1&&(r=t.slice(0,s),a=t.slice(s+1,u>-1?u:t.length),o=e(a)),u>-1&&(r=r||t.slice(0,u),i=t.slice(u,t.length)),r=I(null!=r?r:t,n),{fullPath:r+(a&&"?")+a+i,path:r,query:o,hash:i}}function w(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function x(e,t){return t&&e.toLowerCase().startsWith(t.toLowerCase())?e.slice(t.length)||"/":e}function C(e,t,n){const r=t.matched.length-1,o=n.matched.length-1;return r>-1&&r===o&&_(t.matched[r],n.matched[o])&&k(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function _(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function k(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!S(e[n],t[n]))return!1;return!0}function S(e,t){return Array.isArray(e)?E(e,t):Array.isArray(t)?E(t,e):e===t}function E(e,t){return Array.isArray(t)?e.length===t.length&&e.every(((e,n)=>e===t[n])):1===e.length&&e[0]===t}function I(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/");let o,a,i=n.length-1;for(o=0;o<r.length;o++)if(a=r[o],1!==i&&"."!==a){if(".."!==a)break;i--}return n.slice(0,i).join("/")+"/"+r.slice(o-(o===r.length?1:0)).join("/")}var A,F;(function(e){e["pop"]="pop",e["push"]="push"})(A||(A={})),function(e){e["back"]="back",e["forward"]="forward",e["unknown"]=""}(F||(F={}));function D(e){if(!e)if(p){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return"/"!==e[0]&&"#"!==e[0]&&(e="/"+e),y(e)}const R=/^[^#]+#/;function T(e,t){return e.replace(R,"#")+t}function O(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const P=()=>({left:window.pageXOffset,top:window.pageYOffset});function B(e){let t;if("el"in e){const n=e.el,r="string"===typeof n&&n.startsWith("#");0;const o="string"===typeof n?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!o)return;t=O(o,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(null!=t.left?t.left:window.pageXOffset,null!=t.top?t.top:window.pageYOffset)}function M(e,t){const n=history.state?history.state.position-t:-1;return n+e}const N=new Map;function L(e,t){N.set(e,t)}function V(e){const t=N.get(e);return N.delete(e),t}let j=()=>location.protocol+"//"+location.host;function W(e,t){const{pathname:n,search:r,hash:o}=t,a=e.indexOf("#");if(a>-1){let t=o.includes(e.slice(a))?e.slice(a).length:1,n=o.slice(t);return"/"!==n[0]&&(n="/"+n),x(n,"")}const i=x(n,e);return i+r+o}function H(e,t,n,r){let o=[],a=[],i=null;const s=({state:a})=>{const s=W(e,location),u=n.value,l=t.value;let c=0;if(a){if(n.value=s,t.value=a,i&&i===u)return void(i=null);c=l?a.position-l.position:0}else r(s);o.forEach((e=>{e(n.value,u,{delta:c,type:A.pop,direction:c?c>0?F.forward:F.back:F.unknown})}))};function u(){i=n.value}function l(e){o.push(e);const t=()=>{const t=o.indexOf(e);t>-1&&o.splice(t,1)};return a.push(t),t}function c(){const{history:e}=window;e.state&&e.replaceState(h({},e.state,{scroll:P()}),"")}function d(){for(const e of a)e();a=[],window.removeEventListener("popstate",s),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",s),window.addEventListener("beforeunload",c),{pauseListeners:u,listen:l,destroy:d}}function U(e,t,n,r=!1,o=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:o?P():null}}function z(e){const{history:t,location:n}=window,r={value:W(e,n)},o={value:t.state};function a(r,a,i){const s=e.indexOf("#"),u=s>-1?(n.host&&document.querySelector("base")?e:e.slice(s))+r:j()+e+r;try{t[i?"replaceState":"pushState"](a,"",u),o.value=a}catch(l){console.error(l),n[i?"replace":"assign"](u)}}function i(e,n){const i=h({},t.state,U(o.value.back,e,o.value.forward,!0),n,{position:o.value.position});a(e,i,!0),r.value=e}function s(e,n){const i=h({},o.value,t.state,{forward:e,scroll:P()});a(i.current,i,!0);const s=h({},U(r.value,e,null),{position:i.position+1},n);a(e,s,!1),r.value=e}return o.value||a(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0),{location:r,state:o,push:s,replace:i}}function $(e){e=D(e);const t=z(e),n=H(e,t.state,t.location,t.replace);function r(e,t=!0){t||n.pauseListeners(),history.go(e)}const o=h({location:"",base:e,go:r,createHref:T.bind(null,e)},t,n);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>t.state.value}),o}function q(e){return"string"===typeof e||e&&"object"===typeof e}function G(e){return"string"===typeof e||"symbol"===typeof e}const K={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},X=i("nf");var Y;(function(e){e[e["aborted"]=4]="aborted",e[e["cancelled"]=8]="cancelled",e[e["duplicated"]=16]="duplicated"})(Y||(Y={}));function Z(e,t){return h(new Error,{type:e,[X]:!0},t)}function J(e,t){return e instanceof Error&&X in e&&(null==t||!!(e.type&t))}const Q="[^/]+?",ee={sensitive:!1,strict:!1,start:!0,end:!0},te=/[.+*?^${}()[\]/\\]/g;function ne(e,t){const n=h({},ee,t),r=[];let o=n.start?"^":"";const a=[];for(const c of e){const e=c.length?[]:[90];n.strict&&!c.length&&(o+="/");for(let t=0;t<c.length;t++){const r=c[t];let i=40+(n.sensitive?.25:0);if(0===r.type)t||(o+="/"),o+=r.value.replace(te,"\\$&"),i+=40;else if(1===r.type){const{value:e,repeatable:n,optional:s,regexp:u}=r;a.push({name:e,repeatable:n,optional:s});const d=u||Q;if(d!==Q){i+=10;try{new RegExp(`(${d})`)}catch(l){throw new Error(`Invalid custom RegExp for param "${e}" (${d}): `+l.message)}}let p=n?`((?:${d})(?:/(?:${d}))*)`:`(${d})`;t||(p=s&&c.length<2?`(?:/${p})`:"/"+p),s&&(p+="?"),o+=p,i+=20,s&&(i+=-8),n&&(i+=-20),".*"===d&&(i+=-50)}e.push(i)}r.push(e)}if(n.strict&&n.end){const e=r.length-1;r[e][r[e].length-1]+=.7000000000000001}n.strict||(o+="/?"),n.end?o+="$":n.strict&&(o+="(?:/|$)");const i=new RegExp(o,n.sensitive?"":"i");function s(e){const t=e.match(i),n={};if(!t)return null;for(let r=1;r<t.length;r++){const e=t[r]||"",o=a[r-1];n[o.name]=e&&o.repeatable?e.split("/"):e}return n}function u(t){let n="",r=!1;for(const o of e){r&&n.endsWith("/")||(n+="/"),r=!1;for(const e of o)if(0===e.type)n+=e.value;else if(1===e.type){const{value:a,repeatable:i,optional:s}=e,u=a in t?t[a]:"";if(Array.isArray(u)&&!i)throw new Error(`Provided param "${a}" is an array but it is not repeatable (* or + modifiers)`);const l=Array.isArray(u)?u.join("/"):u;if(!l){if(!s)throw new Error(`Missing required param "${a}"`);o.length<2&&(n.endsWith("/")?n=n.slice(0,-1):r=!0)}n+=l}}return n}return{re:i,score:r,keys:a,parse:s,stringify:u}}function re(e,t){let n=0;while(n<e.length&&n<t.length){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?1===e.length&&80===e[0]?-1:1:e.length>t.length?1===t.length&&80===t[0]?1:-1:0}function oe(e,t){let n=0;const r=e.score,o=t.score;while(n<r.length&&n<o.length){const e=re(r[n],o[n]);if(e)return e;n++}return o.length-r.length}const ae={type:0,value:""},ie=/[a-zA-Z0-9_]/;function se(e){if(!e)return[[]];if("/"===e)return[[ae]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(e){throw new Error(`ERR (${n})/"${l}": ${e}`)}let n=0,r=n;const o=[];let a;function i(){a&&o.push(a),a=[]}let s,u=0,l="",c="";function d(){l&&(0===n?a.push({type:0,value:l}):1===n||2===n||3===n?(a.length>1&&("*"===s||"+"===s)&&t(`A repeatable param (${l}) must be alone in its segment. eg: '/:ids+.`),a.push({type:1,value:l,regexp:c,repeatable:"*"===s||"+"===s,optional:"*"===s||"?"===s})):t("Invalid state to consume buffer"),l="")}function p(){l+=s}while(u<e.length)if(s=e[u++],"\\"!==s||2===n)switch(n){case 0:"/"===s?(l&&d(),i()):":"===s?(d(),n=1):p();break;case 4:p(),n=r;break;case 1:"("===s?n=2:ie.test(s)?p():(d(),n=0,"*"!==s&&"?"!==s&&"+"!==s&&u--);break;case 2:")"===s?"\\"==c[c.length-1]?c=c.slice(0,-1)+s:n=3:c+=s;break;case 3:d(),n=0,"*"!==s&&"?"!==s&&"+"!==s&&u--,c="";break;default:t("Unknown state");break}else r=n,n=4;return 2===n&&t(`Unfinished custom RegExp for param "${l}"`),d(),i(),o}function ue(e,t,n){const r=ne(se(e.path),n);const o=h(r,{record:e,parent:t,children:[],alias:[]});return t&&!o.record.aliasOf===!t.record.aliasOf&&t.children.push(o),o}function le(e,t){const n=[],r=new Map;function o(e){return r.get(e)}function a(e,n,r){const o=!r,s=de(e);s.aliasOf=r&&r.record;const l=ve(t,e),c=[s];if("alias"in e){const t="string"===typeof e.alias?[e.alias]:e.alias;for(const e of t)c.push(h({},s,{components:r?r.record.components:s.components,path:e,aliasOf:r?r.record:s}))}let d,p;for(const t of c){const{path:c}=t;if(n&&"/"!==c[0]){const e=n.record.path,r="/"===e[e.length-1]?"":"/";t.path=n.record.path+(c&&r+c)}if(d=ue(t,n,l),r?r.alias.push(d):(p=p||d,p!==d&&p.alias.push(d),o&&e.name&&!fe(d)&&i(e.name)),"children"in s){const e=s.children;for(let t=0;t<e.length;t++)a(e[t],d,r&&r.children[t])}r=r||d,u(d)}return p?()=>{i(p)}:m}function i(e){if(G(e)){const t=r.get(e);t&&(r.delete(e),n.splice(n.indexOf(t),1),t.children.forEach(i),t.alias.forEach(i))}else{const t=n.indexOf(e);t>-1&&(n.splice(t,1),e.record.name&&r.delete(e.record.name),e.children.forEach(i),e.alias.forEach(i))}}function s(){return n}function u(e){let t=0;while(t<n.length&&oe(e,n[t])>=0&&(e.record.path!==n[t].record.path||!me(e,n[t])))t++;n.splice(t,0,e),e.record.name&&!fe(e)&&r.set(e.record.name,e)}function l(e,t){let o,a,i,s={};if("name"in e&&e.name){if(o=r.get(e.name),!o)throw Z(1,{location:e});i=o.record.name,s=h(ce(t.params,o.keys.filter((e=>!e.optional)).map((e=>e.name))),e.params),a=o.stringify(s)}else if("path"in e)a=e.path,o=n.find((e=>e.re.test(a))),o&&(s=o.parse(a),i=o.record.name);else{if(o=t.name?r.get(t.name):n.find((e=>e.re.test(t.path))),!o)throw Z(1,{location:e,currentLocation:t});i=o.record.name,s=h({},t.params,e.params),a=o.stringify(s)}const u=[];let l=o;while(l)u.unshift(l.record),l=l.parent;return{name:i,path:a,params:s,matched:u,meta:he(u)}}return t=ve({strict:!1,end:!0,sensitive:!1},t),e.forEach((e=>a(e))),{addRoute:a,resolve:l,removeRoute:i,getRoutes:s,getRecordMatcher:o}}function ce(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function de(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:pe(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||{}:{default:e.component}}}function pe(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]="boolean"===typeof n?n:n[r];return t}function fe(e){while(e){if(e.record.aliasOf)return!0;e=e.parent}return!1}function he(e){return e.reduce(((e,t)=>h(e,t.meta)),{})}function ve(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function me(e,t){return t.children.some((t=>t===e||me(e,t)))}const ge=/#/g,ye=/&/g,be=/\//g,we=/=/g,xe=/\?/g,Ce=/\+/g,_e=/%5B/g,ke=/%5D/g,Se=/%5E/g,Ee=/%60/g,Ie=/%7B/g,Ae=/%7C/g,Fe=/%7D/g,De=/%20/g;function Re(e){return encodeURI(""+e).replace(Ae,"|").replace(_e,"[").replace(ke,"]")}function Te(e){return Re(e).replace(Ie,"{").replace(Fe,"}").replace(Se,"^")}function Oe(e){return Re(e).replace(Ce,"%2B").replace(De,"+").replace(ge,"%23").replace(ye,"%26").replace(Ee,"`").replace(Ie,"{").replace(Fe,"}").replace(Se,"^")}function Pe(e){return Oe(e).replace(we,"%3D")}function Be(e){return Re(e).replace(ge,"%23").replace(xe,"%3F")}function Me(e){return null==e?"":Be(e).replace(be,"%2F")}function Ne(e){try{return decodeURIComponent(""+e)}catch(t){}return""+e}function Le(e){const t={};if(""===e||"?"===e)return t;const n="?"===e[0],r=(n?e.slice(1):e).split("&");for(let o=0;o<r.length;++o){const e=r[o].replace(Ce," "),n=e.indexOf("="),a=Ne(n<0?e:e.slice(0,n)),i=n<0?null:Ne(e.slice(n+1));if(a in t){let e=t[a];Array.isArray(e)||(e=t[a]=[e]),e.push(i)}else t[a]=i}return t}function Ve(e){let t="";for(let n in e){const r=e[n];if(n=Pe(n),null==r){void 0!==r&&(t+=(t.length?"&":"")+n);continue}const o=Array.isArray(r)?r.map((e=>e&&Oe(e))):[r&&Oe(r)];o.forEach((e=>{void 0!==e&&(t+=(t.length?"&":"")+n,null!=e&&(t+="="+e))}))}return t}function je(e){const t={};for(const n in e){const r=e[n];void 0!==r&&(t[n]=Array.isArray(r)?r.map((e=>null==e?null:""+e)):null==r?r:""+r)}return t}function We(){let e=[];function t(t){return e.push(t),()=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)}}function n(){e=[]}return{add:t,list:()=>e,reset:n}}function He(e,t,n,r,o){const a=r&&(r.enterCallbacks[o]=r.enterCallbacks[o]||[]);return()=>new Promise(((i,s)=>{const u=e=>{!1===e?s(Z(4,{from:n,to:t})):e instanceof Error?s(e):q(e)?s(Z(2,{from:t,to:e})):(a&&r.enterCallbacks[o]===a&&"function"===typeof e&&a.push(e),i())},l=e.call(r&&r.instances[o],t,n,u);let c=Promise.resolve(l);e.length<3&&(c=c.then(u)),c.catch((e=>s(e)))}))}function Ue(e,t,n,r){const o=[];for(const a of e)for(const e in a.components){let i=a.components[e];if("beforeRouteEnter"===t||a.instances[e])if(ze(i)){const s=i.__vccOpts||i,u=s[t];u&&o.push(He(u,n,r,a,e))}else{let s=i();0,o.push((()=>s.then((o=>{if(!o)return Promise.reject(new Error(`Couldn't resolve component "${e}" at "${a.path}"`));const i=f(o)?o.default:o;a.components[e]=i;const s=i.__vccOpts||i,u=s[t];return u&&He(u,n,r,a,e)()}))))}}return o}function ze(e){return"object"===typeof e||"displayName"in e||"props"in e||"__vccOpts"in e}function $e(e){const t=(0,r.f3)(l),n=(0,r.f3)(c),a=(0,r.Fl)((()=>t.resolve((0,o.SU)(e.to)))),i=(0,r.Fl)((()=>{const{matched:e}=a.value,{length:t}=e,r=e[t-1],o=n.matched;if(!r||!o.length)return-1;const i=o.findIndex(_.bind(null,r));if(i>-1)return i;const s=Ye(e[t-2]);return t>1&&Ye(r)===s&&o[o.length-1].path!==s?o.findIndex(_.bind(null,e[t-2])):i})),s=(0,r.Fl)((()=>i.value>-1&&Xe(n.params,a.value.params))),u=(0,r.Fl)((()=>i.value>-1&&i.value===n.matched.length-1&&k(n.params,a.value.params)));function d(n={}){return Ke(n)?t[(0,o.SU)(e.replace)?"replace":"push"]((0,o.SU)(e.to)).catch(m):Promise.resolve()}return{route:a,href:(0,r.Fl)((()=>a.value.href)),isActive:s,isExactActive:u,navigate:d}}const qe=(0,r.aZ)({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:$e,setup(e,{slots:t}){const n=(0,o.qj)($e(e)),{options:a}=(0,r.f3)(l),i=(0,r.Fl)((()=>({[Ze(e.activeClass,a.linkActiveClass,"router-link-active")]:n.isActive,[Ze(e.exactActiveClass,a.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive})));return()=>{const o=t.default&&t.default(n);return e.custom?o:(0,r.h)("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},o)}}}),Ge=qe;function Ke(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&(void 0===e.button||0===e.button)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Xe(e,t){for(const n in t){const r=t[n],o=e[n];if("string"===typeof r){if(r!==o)return!1}else if(!Array.isArray(o)||o.length!==r.length||r.some(((e,t)=>e!==o[t])))return!1}return!0}function Ye(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Ze=(e,t,n)=>null!=e?e:null!=t?t:n,Je=(0,r.aZ)({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},setup(e,{attrs:t,slots:n}){const a=(0,r.f3)(d),i=(0,r.Fl)((()=>e.route||a.value)),l=(0,r.f3)(u,0),c=(0,r.Fl)((()=>i.value.matched[l]));(0,r.JJ)(u,l+1),(0,r.JJ)(s,c),(0,r.JJ)(d,i);const p=(0,o.iH)();return(0,r.YP)((()=>[p.value,c.value,e.name]),(([e,t,n],[r,o,a])=>{t&&(t.instances[n]=e,o&&o!==t&&e&&e===r&&(t.leaveGuards.size||(t.leaveGuards=o.leaveGuards),t.updateGuards.size||(t.updateGuards=o.updateGuards))),!e||!t||o&&_(t,o)&&r||(t.enterCallbacks[n]||[]).forEach((t=>t(e)))}),{flush:"post"}),()=>{const o=i.value,a=c.value,s=a&&a.components[e.name],u=e.name;if(!s)return Qe(n.default,{Component:s,route:o});const l=a.props[e.name],d=l?!0===l?o.params:"function"===typeof l?l(o):l:null,f=e=>{e.component.isUnmounted&&(a.instances[u]=null)},v=(0,r.h)(s,h({},d,t,{onVnodeUnmounted:f,ref:p}));return Qe(n.default,{Component:v,route:o})||v}}});function Qe(e,t){if(!e)return null;const n=e(t);return 1===n.length?n[0]:n}const et=Je;function tt(e){const t=le(e.routes,e),n=e.parseQuery||Le,a=e.stringifyQuery||Ve,i=e.history;const s=We(),u=We(),f=We(),g=(0,o.XI)(K);let y=K;p&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const x=v.bind(null,(e=>""+e)),_=v.bind(null,Me),k=v.bind(null,Ne);function S(e,n){let r,o;return G(e)?(r=t.getRecordMatcher(e),o=n):o=e,t.addRoute(o,r)}function E(e){const n=t.getRecordMatcher(e);n&&t.removeRoute(n)}function I(){return t.getRoutes().map((e=>e.record))}function F(e){return!!t.getRecordMatcher(e)}function D(e,r){if(r=h({},r||g.value),"string"===typeof e){const o=b(n,e,r.path),a=t.resolve({path:o.path},r),s=i.createHref(o.fullPath);return h(o,a,{params:k(a.params),hash:Ne(o.hash),redirectedFrom:void 0,href:s})}let o;if("path"in e)o=h({},e,{path:b(n,e.path,r.path).path});else{const t=h({},e.params);for(const e in t)null==t[e]&&delete t[e];o=h({},e,{params:_(e.params)}),r.params=_(r.params)}const s=t.resolve(o,r),u=e.hash||"";s.params=x(k(s.params));const l=w(a,h({},e,{hash:Te(u),path:s.path})),c=i.createHref(l);return h({fullPath:l,hash:u,query:a===Ve?je(e.query):e.query||{}},s,{redirectedFrom:void 0,href:c})}function R(e){return"string"===typeof e?b(n,e,g.value.path):h({},e)}function T(e,t){if(y!==e)return Z(8,{from:t,to:e})}function O(e){return W(e)}function N(e){return O(h(R(e),{replace:!0}))}function j(e){const t=e.matched[e.matched.length-1];if(t&&t.redirect){const{redirect:n}=t;let r="function"===typeof n?n(e):n;return"string"===typeof r&&(r=r.includes("?")||r.includes("#")?r=R(r):{path:r},r.params={}),h({query:e.query,hash:e.hash,params:e.params},r)}}function W(e,t){const n=y=D(e),r=g.value,o=e.state,i=e.force,s=!0===e.replace,u=j(n);if(u)return W(h(R(u),{state:o,force:i,replace:s}),t||n);const l=n;let c;return l.redirectedFrom=t,!i&&C(a,r,n)&&(c=Z(16,{to:l,from:r}),oe(r,r,!0,!1)),(c?Promise.resolve(c):U(l,r)).catch((e=>J(e)?J(e,2)?e:re(e):te(e,l,r))).then((e=>{if(e){if(J(e,2))return W(h(R(e.to),{state:o,force:i,replace:s}),t||l)}else e=$(l,r,!0,s,o);return z(l,r,e),e}))}function H(e,t){const n=T(e,t);return n?Promise.reject(n):Promise.resolve()}function U(e,t){let n;const[r,o,a]=rt(e,t);n=Ue(r.reverse(),"beforeRouteLeave",e,t);for(const s of r)s.leaveGuards.forEach((r=>{n.push(He(r,e,t))}));const i=H.bind(null,e,t);return n.push(i),nt(n).then((()=>{n=[];for(const r of s.list())n.push(He(r,e,t));return n.push(i),nt(n)})).then((()=>{n=Ue(o,"beforeRouteUpdate",e,t);for(const r of o)r.updateGuards.forEach((r=>{n.push(He(r,e,t))}));return n.push(i),nt(n)})).then((()=>{n=[];for(const r of e.matched)if(r.beforeEnter&&!t.matched.includes(r))if(Array.isArray(r.beforeEnter))for(const o of r.beforeEnter)n.push(He(o,e,t));else n.push(He(r.beforeEnter,e,t));return n.push(i),nt(n)})).then((()=>(e.matched.forEach((e=>e.enterCallbacks={})),n=Ue(a,"beforeRouteEnter",e,t),n.push(i),nt(n)))).then((()=>{n=[];for(const r of u.list())n.push(He(r,e,t));return n.push(i),nt(n)})).catch((e=>J(e,8)?e:Promise.reject(e)))}function z(e,t,n){for(const r of f.list())r(e,t,n)}function $(e,t,n,r,o){const a=T(e,t);if(a)return a;const s=t===K,u=p?history.state:{};n&&(r||s?i.replace(e.fullPath,h({scroll:s&&u&&u.scroll},o)):i.push(e.fullPath,o)),g.value=e,oe(e,t,n,s),re()}let q;function X(){q=i.listen(((e,t,n)=>{const r=D(e),o=j(r);if(o)return void W(h(o,{replace:!0}),r).catch(m);y=r;const a=g.value;p&&L(M(a.fullPath,n.delta),P()),U(r,a).catch((e=>J(e,12)?e:J(e,2)?(W(e.to,r).then((e=>{J(e,20)&&!n.delta&&n.type===A.pop&&i.go(-1,!1)})).catch(m),Promise.reject()):(n.delta&&i.go(-n.delta,!1),te(e,r,a)))).then((e=>{e=e||$(r,a,!1),e&&(n.delta?i.go(-n.delta,!1):n.type===A.pop&&J(e,20)&&i.go(-1,!1)),z(r,a,e)})).catch(m)}))}let Y,Q=We(),ee=We();function te(e,t,n){re(e);const r=ee.list();return r.length?r.forEach((r=>r(e,t,n))):console.error(e),Promise.reject(e)}function ne(){return Y&&g.value!==K?Promise.resolve():new Promise(((e,t)=>{Q.add([e,t])}))}function re(e){return Y||(Y=!e,X(),Q.list().forEach((([t,n])=>e?n(e):t())),Q.reset()),e}function oe(t,n,o,a){const{scrollBehavior:i}=e;if(!p||!i)return Promise.resolve();const s=!o&&V(M(t.fullPath,0))||(a||!o)&&history.state&&history.state.scroll||null;return(0,r.Y3)().then((()=>i(t,n,s))).then((e=>e&&B(e))).catch((e=>te(e,t,n)))}const ae=e=>i.go(e);let ie;const se=new Set,ue={currentRoute:g,addRoute:S,removeRoute:E,hasRoute:F,getRoutes:I,resolve:D,options:e,push:O,replace:N,go:ae,back:()=>ae(-1),forward:()=>ae(1),beforeEach:s.add,beforeResolve:u.add,afterEach:f.add,onError:ee.add,isReady:ne,install(e){const t=this;e.component("RouterLink",Ge),e.component("RouterView",et),e.config.globalProperties.$router=t,Object.defineProperty(e.config.globalProperties,"$route",{enumerable:!0,get:()=>(0,o.SU)(g)}),p&&!ie&&g.value===K&&(ie=!0,O(i.location).catch((e=>{0})));const n={};for(const o in K)n[o]=(0,r.Fl)((()=>g.value[o]));e.provide(l,t),e.provide(c,(0,o.qj)(n)),e.provide(d,g);const a=e.unmount;se.add(e),e.unmount=function(){se.delete(e),se.size<1&&(y=K,q&&q(),g.value=K,ie=!1,Y=!1),a()}}};return ue}function nt(e){return e.reduce(((e,t)=>e.then((()=>t()))),Promise.resolve())}function rt(e,t){const n=[],r=[],o=[],a=Math.max(t.matched.length,e.matched.length);for(let i=0;i<a;i++){const a=t.matched[i];a&&(e.matched.find((e=>_(e,a)))?r.push(a):n.push(a));const s=e.matched[i];s&&(t.matched.find((e=>_(e,s)))||o.push(s))}return[n,r,o]}},4954:function(e,t,n){"use strict";n.d(t,{C:function(){return yC}});var r=n(3396),o=n(4870);const a=Symbol("LocalConfigKey"),i=(0,r.Fl)((()=>[]));function s(){return(0,r.f3)(a,i)}var u=(0,r.aZ)({name:"VaConfig",props:{components:{type:Object,default:()=>({})}},setup(e){const{components:t}=(0,o.BK)(e),n=s(),i=(0,r.Fl)((()=>[...n.value,t.value]));return(0,r.JJ)(a,i),{}},render(){return this.$slots.default?this.$slots.default():null}});n(1703);const l=e=>e.config.globalProperties,c=(e,t,n)=>{l(e)[t]=n},d=(e,t)=>l(e)[t];var p="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:{},f=function(){this.__data__=[],this.size=0},h=function(e,t){return e===t||e!=e&&t!=t},v=h,m=function(e,t){for(var n=e.length;n--;)if(v(e[n][0],t))return n;return-1},g=m,y=Array.prototype.splice,b=m,w=m,x=m,C=f,_=function(e){var t=this.__data__,n=g(t,e);return!(n<0)&&(n==t.length-1?t.pop():y.call(t,n,1),--this.size,!0)},k=function(e){var t=this.__data__,n=b(t,e);return n<0?void 0:t[n][1]},S=function(e){return w(this.__data__,e)>-1},E=function(e,t){var n=this.__data__,r=x(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function I(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}I.prototype.clear=C,I.prototype.delete=_,I.prototype.get=k,I.prototype.has=S,I.prototype.set=E;var A,F=I,D=F,R=function(){this.__data__=new D,this.size=0},T=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},O=function(e){return this.__data__.get(e)},P=function(e){return this.__data__.has(e)},B="object"==typeof p&&p&&p.Object===Object&&p,M=B,N="object"==typeof self&&self&&self.Object===Object&&self,L=M||N||Function("return this")(),V=L.Symbol,j=V,W=Object.prototype,H=W.hasOwnProperty,U=W.toString,z=j?j.toStringTag:void 0,$=function(e){var t=H.call(e,z),n=e[z];try{e[z]=void 0;var r=!0}catch(e){}var o=U.call(e);return r&&(t?e[z]=n:delete e[z]),o},q=Object.prototype.toString,G=$,K=function(e){return q.call(e)},X=V?V.toStringTag:void 0,Y=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":X&&X in Object(e)?G(e):K(e)},Z=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},J=Y,Q=Z,ee=function(e){if(!Q(e))return!1;var t=J(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},te=L["__core-js_shared__"],ne=(A=/[^.]+$/.exec(te&&te.keys&&te.keys.IE_PROTO||""))?"Symbol(src)_1."+A:"",re=function(e){return!!ne&&ne in e},oe=Function.prototype.toString,ae=function(e){if(null!=e){try{return oe.call(e)}catch(e){}try{return e+""}catch(e){}}return""},ie=ee,se=re,ue=Z,le=ae,ce=/^\[object .+?Constructor\]$/,de=Function.prototype,pe=Object.prototype,fe=de.toString,he=pe.hasOwnProperty,ve=RegExp("^"+fe.call(he).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),me=function(e){return!(!ue(e)||se(e))&&(ie(e)?ve:ce).test(le(e))},ge=function(e,t){return null==e?void 0:e[t]},ye=function(e,t){var n=ge(e,t);return me(n)?n:void 0},be=ye(L,"Map"),we=ye(Object,"create"),xe=we,Ce=function(){this.__data__=xe?xe(null):{},this.size=0},_e=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ke=we,Se=Object.prototype.hasOwnProperty,Ee=function(e){var t=this.__data__;if(ke){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Se.call(t,e)?t[e]:void 0},Ie=we,Ae=Object.prototype.hasOwnProperty,Fe=we,De=Ce,Re=_e,Te=Ee,Oe=function(e){var t=this.__data__;return Ie?void 0!==t[e]:Ae.call(t,e)},Pe=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Fe&&void 0===t?"__lodash_hash_undefined__":t,this};function Be(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Be.prototype.clear=De,Be.prototype.delete=Re,Be.prototype.get=Te,Be.prototype.has=Oe,Be.prototype.set=Pe;var Me=Be,Ne=F,Le=be,Ve=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e},je=function(e,t){var n=e.__data__;return Ve(t)?n["string"==typeof t?"string":"hash"]:n.map},We=je,He=je,Ue=je,ze=je,$e=function(){this.size=0,this.__data__={hash:new Me,map:new(Le||Ne),string:new Me}},qe=function(e){var t=We(this,e).delete(e);return this.size-=t?1:0,t},Ge=function(e){return He(this,e).get(e)},Ke=function(e){return Ue(this,e).has(e)},Xe=function(e,t){var n=ze(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function Ye(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Ye.prototype.clear=$e,Ye.prototype.delete=qe,Ye.prototype.get=Ge,Ye.prototype.has=Ke,Ye.prototype.set=Xe;var Ze=Ye,Je=F,Qe=be,et=Ze,tt=F,nt=R,rt=T,ot=O,at=P,it=function(e,t){var n=this.__data__;if(n instanceof Je){var r=n.__data__;if(!Qe||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new et(r)}return n.set(e,t),this.size=n.size,this};function st(e){var t=this.__data__=new tt(e);this.size=t.size}st.prototype.clear=nt,st.prototype.delete=rt,st.prototype.get=ot,st.prototype.has=at,st.prototype.set=it;var ut=st,lt=ye,ct=function(){try{var e=lt(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),dt=ct,pt=function(e,t,n){"__proto__"==t&&dt?dt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},ft=pt,ht=h,vt=function(e,t,n){(void 0!==n&&!ht(e[t],n)||void 0===n&&!(t in e))&&ft(e,t,n)},mt=function(e){return function(t,n,r){for(var o=-1,a=Object(t),i=r(t),s=i.length;s--;){var u=i[e?s:++o];if(!1===n(a[u],u,a))break}return t}}(),gt={exports:{}};!function(e,t){var n=L,r=t&&!t.nodeType&&t,o=r&&e&&!e.nodeType&&e,a=o&&o.exports===r?n.Buffer:void 0,i=a?a.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=i?i(n):new e.constructor(n);return e.copy(r),r}}(gt,gt.exports);var yt=L.Uint8Array,bt=function(e){var t=new e.constructor(e.byteLength);return new yt(t).set(new yt(e)),t},wt=bt,xt=function(e,t){var n=t?wt(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)},Ct=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t},_t=Z,kt=Object.create,St=function(){function e(){}return function(t){if(!_t(t))return{};if(kt)return kt(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),Et=function(e,t){return function(n){return e(t(n))}},It=Et(Object.getPrototypeOf,Object),At=Object.prototype,Ft=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||At)},Dt=St,Rt=It,Tt=Ft,Ot=function(e){return"function"!=typeof e.constructor||Tt(e)?{}:Dt(Rt(e))},Pt=function(e){return null!=e&&"object"==typeof e},Bt=Y,Mt=Pt,Nt=function(e){return Mt(e)&&"[object Arguments]"==Bt(e)},Lt=Pt,Vt=Object.prototype,jt=Vt.hasOwnProperty,Wt=Vt.propertyIsEnumerable,Ht=Nt(function(){return arguments}())?Nt:function(e){return Lt(e)&&jt.call(e,"callee")&&!Wt.call(e,"callee")},Ut=Array.isArray,zt=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},$t=ee,qt=zt,Gt=function(e){return null!=e&&qt(e.length)&&!$t(e)},Kt=Gt,Xt=Pt,Yt=function(e){return Xt(e)&&Kt(e)},Zt={exports:{}},Jt=function(){return!1};!function(e,t){var n=L,r=Jt,o=t&&!t.nodeType&&t,a=o&&e&&!e.nodeType&&e,i=a&&a.exports===o?n.Buffer:void 0,s=(i?i.isBuffer:void 0)||r;e.exports=s}(Zt,Zt.exports);var Qt=Y,en=It,tn=Pt,nn=Function.prototype,rn=Object.prototype,on=nn.toString,an=rn.hasOwnProperty,sn=on.call(Object),un=function(e){if(!tn(e)||"[object Object]"!=Qt(e))return!1;var t=en(e);if(null===t)return!0;var n=an.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&on.call(n)==sn},ln=Y,cn=zt,dn=Pt,pn={};pn["[object Float32Array]"]=pn["[object Float64Array]"]=pn["[object Int8Array]"]=pn["[object Int16Array]"]=pn["[object Int32Array]"]=pn["[object Uint8Array]"]=pn["[object Uint8ClampedArray]"]=pn["[object Uint16Array]"]=pn["[object Uint32Array]"]=!0,pn["[object Arguments]"]=pn["[object Array]"]=pn["[object ArrayBuffer]"]=pn["[object Boolean]"]=pn["[object DataView]"]=pn["[object Date]"]=pn["[object Error]"]=pn["[object Function]"]=pn["[object Map]"]=pn["[object Number]"]=pn["[object Object]"]=pn["[object RegExp]"]=pn["[object Set]"]=pn["[object String]"]=pn["[object WeakMap]"]=!1;var fn=function(e){return dn(e)&&cn(e.length)&&!!pn[ln(e)]},hn=function(e){return function(t){return e(t)}},vn={exports:{}};!function(e,t){var n=B,r=t&&!t.nodeType&&t,o=r&&e&&!e.nodeType&&e,a=o&&o.exports===r&&n.process,i=function(){try{var e=o&&o.require&&o.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=i}(vn,vn.exports);var mn=fn,gn=hn,yn=vn.exports,bn=yn&&yn.isTypedArray,wn=bn?gn(bn):mn,xn=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]},Cn=pt,_n=h,kn=Object.prototype.hasOwnProperty,Sn=function(e,t,n){var r=e[t];kn.call(e,t)&&_n(r,n)&&(void 0!==n||t in e)||Cn(e,t,n)},En=Sn,In=pt,An=function(e,t,n,r){var o=!n;n||(n={});for(var a=-1,i=t.length;++a<i;){var s=t[a],u=r?r(n[s],e[s],s,n,e):void 0;void 0===u&&(u=e[s]),o?In(n,s,u):En(n,s,u)}return n},Fn=/^(?:0|[1-9]\d*)$/,Dn=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&Fn.test(e))&&e>-1&&e%1==0&&e<t},Rn=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r},Tn=Ht,On=Ut,Pn=Zt.exports,Bn=Dn,Mn=wn,Nn=Object.prototype.hasOwnProperty,Ln=function(e,t){var n=On(e),r=!n&&Tn(e),o=!n&&!r&&Pn(e),a=!n&&!r&&!o&&Mn(e),i=n||r||o||a,s=i?Rn(e.length,String):[],u=s.length;for(var l in e)!t&&!Nn.call(e,l)||i&&("length"==l||o&&("offset"==l||"parent"==l)||a&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Bn(l,u))||s.push(l);return s},Vn=Z,jn=Ft,Wn=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t},Hn=Object.prototype.hasOwnProperty,Un=Ln,zn=function(e){if(!Vn(e))return Wn(e);var t=jn(e),n=[];for(var r in e)("constructor"!=r||!t&&Hn.call(e,r))&&n.push(r);return n},$n=Gt,qn=function(e){return $n(e)?Un(e,!0):zn(e)},Gn=An,Kn=qn,Xn=vt,Yn=gt.exports,Zn=xt,Jn=Ct,Qn=Ot,er=Ht,tr=Ut,nr=Yt,rr=Zt.exports,or=ee,ar=Z,ir=un,sr=wn,ur=xn,lr=function(e){return Gn(e,Kn(e))},cr=ut,dr=vt,pr=mt,fr=function(e,t,n,r,o,a,i){var s=ur(e,n),u=ur(t,n),l=i.get(u);if(l)Xn(e,n,l);else{var c=a?a(s,u,n+"",e,t,i):void 0,d=void 0===c;if(d){var p=tr(u),f=!p&&rr(u),h=!p&&!f&&sr(u);c=u,p||f||h?tr(s)?c=s:nr(s)?c=Jn(s):f?(d=!1,c=Yn(u,!0)):h?(d=!1,c=Zn(u,!0)):c=[]:ir(u)||er(u)?(c=s,er(s)?c=lr(s):ar(s)&&!or(s)||(c=Qn(u))):d=!1}d&&(i.set(u,c),o(c,u,r,a,i),i.delete(u)),Xn(e,n,c)}},hr=Z,vr=qn,mr=xn,gr=function e(t,n,r,o,a){t!==n&&pr(n,(function(i,s){if(a||(a=new cr),hr(i))fr(t,n,s,r,e,o,a);else{var u=o?o(mr(t,s),i,s+"",t,n,a):void 0;void 0===u&&(u=i),dr(t,s,u)}}),vr)},yr=function(e){return e},br=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},wr=Math.max,xr=function(e,t,n){return t=wr(void 0===t?e.length-1:t,0),function(){for(var r=arguments,o=-1,a=wr(r.length-t,0),i=Array(a);++o<a;)i[o]=r[t+o];o=-1;for(var s=Array(t+1);++o<t;)s[o]=r[o];return s[t]=n(i),br(e,this,s)}},Cr=function(e){return function(){return e}},_r=ct,kr=_r?function(e,t){return _r(e,"toString",{configurable:!0,enumerable:!1,value:Cr(t),writable:!0})}:yr,Sr=Date.now,Er=function(e){var t=0,n=0;return function(){var r=Sr(),o=16-(r-n);if(n=r,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(kr),Ir=yr,Ar=xr,Fr=Er,Dr=h,Rr=Gt,Tr=Dn,Or=Z,Pr=function(e,t){return Fr(Ar(e,t,Ir),e+"")},Br=function(e,t,n){if(!Or(n))return!1;var r=typeof t;return!!("number"==r?Rr(n)&&Tr(t,n.length):"string"==r&&t in n)&&Dr(n[t],e)},Mr=gr,Nr=function(e){return Pr((function(t,n){var r=-1,o=n.length,a=o>1?n[o-1]:void 0,i=o>2?n[2]:void 0;for(a=e.length>3&&"function"==typeof a?(o--,a):void 0,i&&Br(n[0],n[1],i)&&(a=o<3?void 0:a,o=1),t=Object(t);++r<o;){var s=n[r];s&&e(t,s,r,a)}return t}))}((function(e,t,n){Mr(e,t,n)})),Lr=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e},Vr=Et(Object.keys,Object),jr=Ft,Wr=Vr,Hr=Object.prototype.hasOwnProperty,Ur=Ln,zr=function(e){if(!jr(e))return Wr(e);var t=[];for(var n in Object(e))Hr.call(e,n)&&"constructor"!=n&&t.push(n);return t},$r=Gt,qr=function(e){return $r(e)?Ur(e):zr(e)},Gr=An,Kr=qr,Xr=function(e,t){return e&&Gr(t,Kr(t),e)},Yr=An,Zr=qn,Jr=function(e,t){return e&&Yr(t,Zr(t),e)},Qr=function(){return[]},eo=function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,a=[];++n<r;){var i=e[n];t(i,n,e)&&(a[o++]=i)}return a},to=Qr,no=Object.prototype.propertyIsEnumerable,ro=Object.getOwnPropertySymbols,oo=ro?function(e){return null==e?[]:(e=Object(e),eo(ro(e),(function(t){return no.call(e,t)})))}:to,ao=An,io=oo,so=function(e,t){return ao(e,io(e),t)},uo=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e},lo=uo,co=It,po=oo,fo=Qr,ho=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)lo(t,po(e)),e=co(e);return t}:fo,vo=An,mo=ho,go=function(e,t){return vo(e,mo(e),t)},yo=uo,bo=Ut,wo=function(e,t,n){var r=t(e);return bo(e)?r:yo(r,n(e))},xo=wo,Co=oo,_o=qr,ko=function(e){return xo(e,_o,Co)},So=wo,Eo=ho,Io=qn,Ao=function(e){return So(e,Io,Eo)},Fo=ye(L,"DataView"),Do=be,Ro=ye(L,"Promise"),To=ye(L,"Set"),Oo=ye(L,"WeakMap"),Po=Y,Bo=ae,Mo=Bo(Fo),No=Bo(Do),Lo=Bo(Ro),Vo=Bo(To),jo=Bo(Oo),Wo=Po;(Fo&&"[object DataView]"!=Wo(new Fo(new ArrayBuffer(1)))||Do&&"[object Map]"!=Wo(new Do)||Ro&&"[object Promise]"!=Wo(Ro.resolve())||To&&"[object Set]"!=Wo(new To)||Oo&&"[object WeakMap]"!=Wo(new Oo))&&(Wo=function(e){var t=Po(e),n="[object Object]"==t?e.constructor:void 0,r=n?Bo(n):"";if(r)switch(r){case Mo:return"[object DataView]";case No:return"[object Map]";case Lo:return"[object Promise]";case Vo:return"[object Set]";case jo:return"[object WeakMap]"}return t});var Ho=Wo,Uo=Object.prototype.hasOwnProperty,zo=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Uo.call(e,"index")&&(n.index=e.index,n.input=e.input),n},$o=bt,qo=function(e,t){var n=t?$o(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)},Go=/\w*$/,Ko=function(e){var t=new e.constructor(e.source,Go.exec(e));return t.lastIndex=e.lastIndex,t},Xo=V?V.prototype:void 0,Yo=Xo?Xo.valueOf:void 0,Zo=bt,Jo=qo,Qo=Ko,ea=function(e){return Yo?Object(Yo.call(e)):{}},ta=xt,na=function(e,t,n){var r=e.constructor;switch(t){case"[object ArrayBuffer]":return Zo(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return Jo(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return ta(e,n);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return Qo(e);case"[object Symbol]":return ea(e)}},ra=Ho,oa=Pt,aa=function(e){return oa(e)&&"[object Map]"==ra(e)},ia=hn,sa=vn.exports,ua=sa&&sa.isMap,la=ua?ia(ua):aa,ca=Ho,da=Pt,pa=function(e){return da(e)&&"[object Set]"==ca(e)},fa=hn,ha=vn.exports,va=ha&&ha.isSet,ma=va?fa(va):pa,ga=ut,ya=Lr,ba=Sn,wa=Xr,xa=Jr,Ca=gt.exports,_a=Ct,ka=so,Sa=go,Ea=ko,Ia=Ao,Aa=Ho,Fa=zo,Da=na,Ra=Ot,Ta=Ut,Oa=Zt.exports,Pa=la,Ba=Z,Ma=ma,Na=qr,La=qn,Va={};Va["[object Arguments]"]=Va["[object Array]"]=Va["[object ArrayBuffer]"]=Va["[object DataView]"]=Va["[object Boolean]"]=Va["[object Date]"]=Va["[object Float32Array]"]=Va["[object Float64Array]"]=Va["[object Int8Array]"]=Va["[object Int16Array]"]=Va["[object Int32Array]"]=Va["[object Map]"]=Va["[object Number]"]=Va["[object Object]"]=Va["[object RegExp]"]=Va["[object Set]"]=Va["[object String]"]=Va["[object Symbol]"]=Va["[object Uint8Array]"]=Va["[object Uint8ClampedArray]"]=Va["[object Uint16Array]"]=Va["[object Uint32Array]"]=!0,Va["[object Error]"]=Va["[object Function]"]=Va["[object WeakMap]"]=!1;var ja=function e(t,n,r,o,a,i){var s,u=1&n,l=2&n,c=4&n;if(r&&(s=a?r(t,o,a,i):r(t)),void 0!==s)return s;if(!Ba(t))return t;var d=Ta(t);if(d){if(s=Fa(t),!u)return _a(t,s)}else{var p=Aa(t),f="[object Function]"==p||"[object GeneratorFunction]"==p;if(Oa(t))return Ca(t,u);if("[object Object]"==p||"[object Arguments]"==p||f&&!a){if(s=l||f?{}:Ra(t),!u)return l?Sa(t,xa(s,t)):ka(t,wa(s,t))}else{if(!Va[p])return a?t:{};s=Da(t,p,u)}}i||(i=new ga);var h=i.get(t);if(h)return h;i.set(t,s),Ma(t)?t.forEach((function(o){s.add(e(o,n,r,o,t,i))})):Pa(t)&&t.forEach((function(o,a){s.set(a,e(o,n,r,a,t,i))}));var v=d?void 0:(c?l?Ia:Ea:l?La:Na)(t);return ya(v||t,(function(o,a){v&&(o=t[a=o]),ba(s,a,e(o,n,r,a,t,i))})),s},Wa=ja,Ha=function(e){return Wa(e,5)};const Ua=[{name:"{icon}",class:"material-icons",resolve:({icon:e})=>({content:e})}],za=[{name:"arrow_back_ios",to:"arrow_back_ios"},{name:"arrow_forward_ios",to:"arrow_forward_ios"},{name:"first_page",to:"first_page"},{name:"last_page",to:"last_page"},{name:"chevron_right",to:"chevron_right"},{name:"chevron_left",to:"chevron_left"},{name:"expand_more",to:"expand_more"},{name:"expand_less",to:"expand_less"},{name:"arrow_drop_down",to:"arrow_drop_down"},{name:"arrow_drop_up",to:"arrow_drop_up"},{name:"calendar_today",to:"calendar_today"},{name:"delete_outline",to:"delete_outline"},{name:"clear",to:"clear"},{name:"check",to:"check"},{name:"warning",to:"warning"},{name:"highlight_off",to:"highlight_off"},{name:"close",to:"close"},{name:"done",to:"done"},{name:"cancel",to:"cancel"},{name:"loop",to:"loop"}],$a=e=>(e.aliases=e.aliases||[],e.fonts=e.fonts||[],[...e.aliases,...za,...e.fonts,...Ua]),qa={default:{primary:"#2C82E0",secondary:"#767C88",background:"#f4f8fa",success:"#40e583",info:"#2c82e0",danger:"#DE1041",warning:"#FFAC0A",gray:"#babfc2",dark:"#1B1A1F",divider:"#E1E9F8",white:"#ffffff",black:"#000000",focus:"#ffc700"}},Ga=Symbol("GLOBAL_CONFIG"),Ka=()=>{const e=(0,o.iH)({colors:qa.default,icons:$a({}),components:{VaIcon:{sizesConfig:{defaultSize:24,sizes:{small:16,medium:24,large:32}}},VaRating:{sizesConfig:{defaultSize:24,sizes:{small:16,medium:24,large:32}}}},componentsAll:{}});return{getGlobalConfig:()=>e.value,setGlobalConfig:t=>{const n="function"==typeof t?t(e.value):t;e.value=Ha(n)},mergeGlobalConfig:t=>{const n="function"==typeof t?t(e.value):t;e.value=Nr(Ha(e.value),n)},globalConfig:e}};function Xa(){return(0,r.f3)(Ga)}function Ya(){const e=(0,r.f3)(Ga);if(!e){const e=(0,r.FN)();if(!e)throw new Error("useGlobalConfig must be called in setup function");const t=d(e.appContext,"$vaConfig");if(!t)throw new Error("Vuestic GlobalConfigPlugin is not registered");return t}return e}const Za=e=>{const t=(t,n)=>{var a;const i=(0,r.FN)(),u=(e=>{const t=s(),{globalConfig:n}=Ya();return(0,r.Fl)((()=>{var r;return{...{...n.value.componentsAll,...null===(r=n.value.components)||void 0===r?void 0:r[e.name]},...t.value.reduce(((t,n)=>n[e.name]?{...t,...n[e.name]}:t),{})}}))})(e),l=((e,t)=>{const n=e.props;return new Proxy(n,{get:(n,r)=>{const o=e.vnode.props||{},a=n[r],i=t.value[r];return void 0===o[r]&&void 0!==i?i:a}})})(i,u);return((e,t)=>{e.props=t})(i,l),null===(a=e.setup)||void 0===a?void 0:a.call(e,(0,o.YS)(l),n)};return new Proxy(e,{get:(e,n)=>"setup"===n?t:e[n]})},Ja=e=>"setup"in e?Za(e):"__c"in e?(e=>(e.__c=Za(e.__c),e))(e):(e.setup=()=>({}),Za(e));var Qa,ei,ti,ni,ri=function(){return ri=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ri.apply(this,arguments)};function oi(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}!function(e){e.HEX="HEX",e.RGB="RGB",e.RGBA="RGBA",e.HSL="HSL",e.HSLA="HSLA",e.CMYK="CMYK"}(Qa||(Qa={})),function(e){e.ANALOGOUS="ANALOGOUS",e.COMPLEMENTARY="COMPLEMENTARY",e.SPLIT_COMPLEMENTARY="SPLIT_COMPLEMENTARY",e.TRIADIC="TRIADIC",e.TETRADIC="TETRADIC",e.SQUARE="SQUARE"}(ei||(ei={})),function(e){e.ADDITIVE="ADDITIVE",e.SUBTRACTIVE="SUBTRACTIVE"}(ti||(ti={})),function(e){e.black="#000000",e.silver="#C0C0C0",e.gray="#808080",e.white="#FFFFFF",e.maroon="#800000",e.red="#FF0000",e.purple="#800080",e.fuchsia="#FF00FF",e.green="#008000",e.lime="#00FF00",e.olive="#808000",e.yellow="#FFFF00",e.navy="#000080",e.blue="#0000FF",e.teal="#008080",e.aqua="#00FFFF",e.orange="#FFA500",e.aliceblue="#F0F8FF",e.antiquewhite="#FAEBD7",e.aquamarine="#7FFFD4",e.azure="#F0FFFF",e.beige="#F5F5DC",e.bisque="#FFE4C4",e.blanchedalmond="#FFEBCD",e.blueviolet="#8A2BE2",e.brown="#A52A2A",e.burlywood="#DEB887",e.cadetblue="#5F9EA0",e.chartreuse="#7FFF00",e.chocolate="#D2691E",e.coral="#FF7F50",e.cornflowerblue="#6495ED",e.cornsilk="#FFF8DC",e.crimson="#DC143C",e.cyan="#00FFFF",e.darkblue="#00008B",e.darkcyan="#008B8B",e.darkgoldenrod="#B8860B",e.darkgray="#A9A9A9",e.darkgreen="#006400",e.darkgrey="#A9A9A9",e.darkkhaki="#BDB76B",e.darkmagenta="#8B008B",e.darkolivegreen="#556B2F",e.darkorange="#FF8C00",e.darkorchid="#9932CC",e.darkred="#8B0000",e.darksalmon="#E9967A",e.darkseagreen="#8FBC8F",e.darkslateblue="#483D8B",e.darkslategray="#2F4F4F",e.darkslategrey="#2F4F4F",e.darkturquoise="#00CED1",e.darkviolet="#9400D3",e.deeppink="#FF1493",e.deepskyblue="#00BFFF",e.dimgray="#696969",e.dimgrey="#696969",e.dodgerblue="#1E90FF",e.firebrick="#B22222",e.floralwhite="#FFFAF0",e.forestgreen="#228B22",e.gainsboro="#DCDCDC",e.ghostwhite="#F8F8FF",e.gold="#FFD700",e.goldenrod="#DAA520",e.greenyellow="#ADFF2F",e.grey="#808080",e.honeydew="#F0FFF0",e.hotpink="#FF69B4",e.indianred="#CD5C5C",e.indigo="#4B0082",e.ivory="#FFFFF0",e.khaki="#F0E68C",e.lavender="#E6E6FA",e.lavenderblush="#FFF0F5",e.lawngreen="#7CFC00",e.lemonchiffon="#FFFACD",e.lightblue="#ADD8E6",e.lightcoral="#F08080",e.lightcyan="#E0FFFF",e.lightgoldenrodyellow="#FAFAD2",e.lightgray="#D3D3D3",e.lightgreen="#90EE90",e.lightgrey="#D3D3D3",e.lightpink="#FFB6C1",e.lightsalmon="#FFA07A",e.lightseagreen="#20B2AA",e.lightskyblue="#87CEFA",e.lightslategray="#778899",e.lightslategrey="#778899",e.lightsteelblue="#B0C4DE",e.lightyellow="#FFFFE0",e.limegreen="#32CD32",e.linen="#FAF0E6",e.magenta="#FF00FF",e.mediumaquamarine="#66CDAA",e.mediumblue="#0000CD",e.mediumorchid="#BA55D3",e.mediumpurple="#9370DB",e.mediumseagreen="#3CB371",e.mediumslateblue="#7B68EE",e.mediumspringgreen="#00FA9A",e.mediumturquoise="#48D1CC",e.mediumvioletred="#C71585",e.midnightblue="#191970",e.mintcream="#F5FFFA",e.mistyrose="#FFE4E1",e.moccasin="#FFE4B5",e.navajowhite="#FFDEAD",e.oldlace="#FDF5E6",e.olivedrab="#6B8E23",e.orangered="#FF4500",e.orchid="#DA70D6",e.palegoldenrod="#EEE8AA",e.palegreen="#98FB98",e.paleturquoise="#AFEEEE",e.palevioletred="#DB7093",e.papayawhip="#FFEFD5",e.peachpuff="#FFDAB9",e.peru="#CD853F",e.pink="#FFC0CB",e.plum="#DDA0DD",e.powderblue="#B0E0E6",e.rosybrown="#BC8F8F",e.royalblue="#4169E1",e.saddlebrown="#8B4513",e.salmon="#FA8072",e.sandybrown="#F4A460",e.seagreen="#2E8B57",e.seashell="#FFF5EE",e.sienna="#A0522D",e.skyblue="#87CEEB",e.slateblue="#6A5ACD",e.slategray="#708090",e.slategrey="#708090",e.snow="#FFFAFA",e.springgreen="#00FF7F",e.steelblue="#4682B4",e.tan="#D2B48C",e.thistle="#D8BFD8",e.tomato="#FF6347",e.turquoise="#40E0D0",e.violet="#EE82EE",e.wheat="#F5DEB3",e.whitesmoke="#F5F5F5",e.yellowgreen="#9ACD32",e.rebeccapurple="#663399"}(ni||(ni={}));var ai,ii,si,ui,li,ci,di,pi=Object.keys(ni),fi=((ai={})[Qa.HEX]=/^#(?:([a-f\d])([a-f\d])([a-f\d])([a-f\d])?|([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?)$/i,ai[Qa.RGB]=/^rgb\s*\(\s*(?:(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)|(\d+)\s*,\s*(\d+)\s*,\s*(\d+))\s*\)$/,ai[Qa.RGBA]=/^rgba\s*\(\s*(?:(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)|(\d+)\s*,\s*(\d+)\s*,\s*(\d+))\s*,\s*(\d\.?\d*)\s*\)$/,ai[Qa.HSL]=/^hsl\s*\(\s*(-?\d+\.?\d*)\s*,\s*(\d+\.?\d*)%\s*,\s*(\d+\.?\d*)%s*\)$/,ai[Qa.HSLA]=/^hsla\s*\(\s*(-?\d+\.?\d*)\s*,\s*(\d+\.?\d*)%\s*,\s*(\d+\.?\d*)%\s*,\s*(\d\.?\d*)\s*\)$/,ai[Qa.CMYK]=/^(?:device-cmyk|cmyk)\s*\(\s*(?:(\d+\.?\d*%)\s*,\s*(\d+\.?\d*%)\s*,\s*(\d+\.?\d*%)\s*,\s*(\d+\.?\d*%)|(\d\.?\d*)\s*,\s*(\d\.?\d*)\s*,\s*(\d\.?\d*)\s*,\s*(\d\.?\d*))\s*\)$/,ai),hi=/^(\d+(?:\.\d+)?|\.\d+)%$/,vi=/^0x([a-f\d]{1,2})$/i,mi="The provided string color doesn't have a correct format",gi="The provided color object doesn't have the proper keys or format",yi=function(e,t,n){return n<0&&(n+=6),n>=6&&(n-=6),n<1?Math.round(255*((t-e)*n+e)):n<3?Math.round(255*t):n<4?Math.round(255*((t-e)*(4-n)+e)):Math.round(255*e)},bi=function(e,t,n){t/=100;var r=(n/=100)<=.5?n*(t+1):n+t-n*t,o=2*n-r;return{r:yi(o,r,2+(e/=60)),g:yi(o,r,e),b:yi(o,r,e-2)}},wi=function(e,t,n,r){return r=1-r,{r:Math.round(255*(1-e)*r),g:Math.round(255*(1-t)*r),b:Math.round(255*(1-n)*r)}},xi=function(e,t,n){e/=255,t/=255,n/=255;var r=1-Math.max(e,t,n),o=1-r,a=(o-e)/o,i=(o-t)/o,s=(o-n)/o;return{c:Math.round(100*a),m:Math.round(100*i),y:Math.round(100*s),k:Math.round(100*r)}},Ci=function(e,t,n,r){void 0===r&&(r=1),e/=255,t/=255,n/=255,r=Math.min(r,1);var o=Math.max(e,t,n),a=Math.min(e,t,n),i=o-a,s=0,u=0,l=(o+a)/2;if(0===i)s=0,u=0;else{switch(o){case e:s=(t-n)/i%6;break;case t:s=(n-e)/i+2;break;case n:s=(e-t)/i+4}(s=Math.round(60*s))<0&&(s+=360),u=i/(1-Math.abs(2*l-1))}return{h:s,s:Math.round(100*u),l:Math.round(100*l),a:r}},_i=function(e,t){if(e<0&&(e+=360),e>360&&(e-=360),360===e||0===e)return e;var n=[[0,120],[120,180],[180,240],[240,360]],r=[[0,60],[60,120],[120,240],[240,360]],o=t?r:n,a=0,i=0,s=0,u=0;return(t?n:r).find((function(t,n){return e>=t[0]&&e<t[1]&&(a=t[0],i=t[1],s=o[n][0],u=o[n][1],!0)})),s+(u-s)/(i-a)*(e-a)},ki=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},Si=function(e){return hi.test(""+e)?+(""+e).replace(hi,"$1"):Math.min(+e,100)},Ei=function(e){return 1===e.length&&(e+=e),parseInt(e,16)},Ii=function(e){var t=parseInt(""+e).toString(16).toUpperCase();return 1===t.length?"0x0"+t:"0x"+t},Ai=function(e){var t=parseInt(""+e).toString(16).toUpperCase();return 1===t.length&&(t="0"+t),t},Fi=function(e,t){return void 0===t&&(t=!1),!t&&hi.test(e)?Math.min(255*+e.replace(hi,"$1")/100,255):vi.test(e)?3===e.length?t?parseInt(e+e.slice(-1))/255:parseInt(e+e.slice(-1)):t?parseInt(e)/255:parseInt(e):Math.min(+e,t?1:255)},Di=function(e){return Math.min(hi.test(e)?+e.replace(hi,"$1")/100:+e,1)},Ri=function(e){return e.sort().join().toUpperCase()},Ti=function(e,t){void 0===t&&(t=0);var n=Math.pow(10,t);return Math.round(+e*n)/n},Oi=function(e,t,n){return Math.max(t,Math.min(e,n))},Pi=((ii={})[Qa.HEX]=function(e){return"#"+Ai(e.r)+Ai(e.g)+Ai(e.b)+(ki(e,"a")&&Ai(e.a)||"")},ii[Qa.RGB]=function(e){return"rgb"+(ki(e,"a")?"a":"")+"("+Ti(e.r)+","+Ti(e.g)+","+Ti(e.b)+(ki(e,"a")&&","+Ti(e.a,2)||"")+")"},ii[Qa.HSL]=function(e){return"hsl"+(ki(e,"a")?"a":"")+"("+Ti(e.h)+","+Ti(e.s)+"%,"+Ti(e.l)+"%"+(ki(e,"a")&&","+Ti(e.a,2)||"")+")"},ii[Qa.CMYK]=function(e){return"cmyk("+Ti(e.c)+"%,"+Ti(e.m)+"%,"+Ti(e.y)+"%,"+Ti(e.k)+"%)"},ii),Bi=function(e){return(e>360||e<0)&&(e-=360*Math.floor(e/360)),e},Mi=function(e){return isNaN(+e)||e>1?1:Ti(e,2)},Ni=function(e,t,n){return t.reduce((function(t,r){return oi(oi([],t,!0),[ri(ri({},e),{h:n===ti.ADDITIVE?Bi(e.h+r):Bi(_i(_i(e.h,!1)+r,!0))})],!1)}),[ri({},e)])},Li=function(e,t){return Ni(e,[30,-30],t)},Vi=function(e,t){return Ni(e,[180],t)},ji=function(e,t){return Ni(e,[150,-150],t)},Wi=function(e,t){return Ni(e,[120,-120],t)},Hi=function(e,t){return Ni(e,[60,-120,180],t)},Ui=function(e,t){return Ni(e,[90,-90,180],t)},zi=function(e){return"string"==typeof e?function(e){var t;if(Object.keys(Qa).some((function(n){if(fi[n].test(e))return t=n,!0})),!t&&~pi.indexOf(e)&&(t=Qa.HEX),!t)throw new Error(mi);return t}(e):function(e){var t,n=!1,r=Ri(Object.keys(e));if(Object.keys(Qa).filter((function(e){return e!==Qa.HEX})).some((function(e){if(Ri(e.split(""))===r)return t=e,!0})),t&&t===Qa.RGB||t===Qa.RGBA){var o=Object.entries(e).map((function(e){return vi.test(""+e[1])})),a=Object.entries(e).map((function(e){return hi.test(""+e[1])||!vi.test(""+e[1])&&!isNaN(+e[1])&&+e[1]<=255})),i=o.some((function(e,t){return t>0&&e!==o[t-1]})),s=a.some((function(e,t){return t>0&&e!==a[t-1]}));!(n=i||s||!o[0]&&!a[0])&&o[0]&&(t=Qa.HEX)}if(!t||n)throw new Error(gi);return t}(e)},$i=((si={})[Qa.HEX]=function(e){var t=(~pi.indexOf(e)?ni[e]:e).match(fi.HEX),n={r:Ei(t[1]||t[5]),g:Ei(t[2]||t[6]),b:Ei(t[3]||t[7])},r=t[4]||t[8];return void 0!==r&&(n.a=Ei(r)/255),n},si[Qa.RGB]=function(e){var t=e.match(fi.RGB),n=Fi(t[1]||t[4]),r=Fi(t[2]||t[5]),o=Fi(t[3]||t[6]);return{r:Math.min(n,255),g:Math.min(r,255),b:Math.min(o,255)}},si[Qa.RGBA]=function(e){var t=e.match(fi.RGBA),n=Fi(t[1]||t[4]),r=Fi(t[2]||t[5]),o=Fi(t[3]||t[6]),a=+t[7];return{r:Math.min(n,255),g:Math.min(r,255),b:Math.min(o,255),a:Mi(a)}},si[Qa.HSL]=function(e){var t=e.match(fi.HSL),n=Bi(+t[1]),r=Si(t[2]),o=Si(t[3]);return bi(n,r,o)},si[Qa.HSLA]=function(e){var t=e.match(fi.HSLA),n=Bi(+t[1]),r=Si(t[2]),o=Si(t[3]),a=+t[4],i=bi(n,r,o);return i.a=Mi(a),i},si[Qa.CMYK]=function(e){var t=e.match(fi.CMYK),n=Di(t[1]||t[5]),r=Di(t[2]||t[6]),o=Di(t[3]||t[7]),a=Di(t[4]||t[8]);return wi(n,r,o,a)},si),qi=((ui={})[Qa.HEX]=function(e){var t={r:Fi(""+e.r),g:Fi(""+e.g),b:Fi(""+e.b)};return t.a=ki(e,"a")?Math.min(Fi(""+e.a,!0),1):1,t},ui[Qa.RGB]=function(e){var t=this.HEX(e);return delete t.a,t},ui[Qa.RGBA]=function(e){return this.HEX(e)},ui[Qa.HSL]=function(e){var t=Si(""+e.s),n=Si(""+e.l);return bi(Bi(e.h),t,n)},ui[Qa.HSLA]=function(e){var t=this.HSL(e);return t.a=Mi(e.a),t},ui[Qa.CMYK]=function(e){var t=Di(""+e.c),n=Di(""+e.m),r=Di(""+e.y),o=Di(""+e.k);return wi(t,n,r,o)},ui),Gi=function(e,t){return void 0===t&&(t=zi(e)),"string"==typeof e?$i[t](e):qi[t](e)},Ki=((li={})[Qa.HEX]=function(e){return{r:Ii(e.r),g:Ii(e.g),b:Ii(e.b)}},li.HEXA=function(e){var t=Ki.HEX(e);return t.a=ki(e,"a")?Ii(255*e.a):"0xFF",t},li[Qa.RGB]=function(e){return ki(e,"a")&&delete e.a,e},li[Qa.RGBA]=function(e){return e.a=ki(e,"a")?Ti(e.a,2):1,e},li[Qa.HSL]=function(e){var t=Ci(e.r,e.g,e.b);return delete t.a,t},li[Qa.HSLA]=function(e){var t=Ki.HSL(e);return t.a=ki(e,"a")?Ti(e.a,2):1,t},li[Qa.CMYK]=function(e){return xi(e.r,e.g,e.b)},li),Xi=function(e,t,n){var r=zi(e),o="string"==typeof e,a=Gi(e,r),i="string"==typeof e&&ki(a,"a")||"string"!=typeof e&&ki(e,"a"),s=Ci(a.r,a.g,a.b,a.a);i||delete s.a;var u=n?s.l/(t+1):(100-s.l)/(t+1),l=Array(t).fill(null).map((function(e,t){return ri(ri({},s),{l:s.l+u*(t+1)*(1-2*+n)})}));switch(r){case Qa.HEX:default:return l.map((function(e){var t=bi(e.h,e.s,e.l);return i&&(t.a=e.a),o?i?Pi.HEX(ri(ri({},t),{a:Ti(255*t.a,2)})):Pi.HEX(t):i?Ki.HEXA(t):Ki.HEX(t)}));case Qa.RGB:case Qa.RGBA:return l.map((function(e){var t=bi(e.h,e.s,e.l);return i&&(t.a=e.a),o?Pi.RGB(t):i?Ki.RGBA(t):Ki.RGB(t)}));case Qa.HSL:case Qa.HSLA:return l.map((function(e){return o?Pi.HSL(e):i?Ki.HSLA(ri(ri({},bi(e.h,e.s,e.l)),{a:e.a})):Ki.HSL(bi(e.h,e.s,e.l))}))}},Yi=((ci={buildHarmony:function(e,t,n){var r=zi(e),o=Gi(e,r),a=Ci(o.r,o.g,o.b,o.a),i="string"==typeof e&&ki(o,"a")||"string"!=typeof e&&ki(e,"a"),s="string"==typeof e;switch(r){case Qa.HEX:default:return i?this.HEXA(a,t,n,s):this.HEX(a,t,n,s);case Qa.HSL:return this.HSL(a,t,n,s);case Qa.HSLA:return this.HSLA(a,t,n,s);case Qa.RGB:return this.RGB(a,t,n,s);case Qa.RGBA:return this.RGBA(a,t,n,s)}}})[Qa.HEX]=function(e,t,n,r){return t(e,n).map((function(e){return r?Pi.HEX(bi(e.h,e.s,e.l)):Ki.HEX(bi(e.h,e.s,e.l))}))},ci.HEXA=function(e,t,n,r){return t(e,n).map((function(e){return r?Pi.HEX(ri(ri({},bi(e.h,e.s,e.l)),{a:255*Mi(e.a)})):Ki.HEXA(ri(ri({},bi(e.h,e.s,e.l)),{a:Mi(e.a)}))}))},ci[Qa.RGB]=function(e,t,n,r){return t(e,n).map((function(e){return r?Pi.RGB(bi(e.h,e.s,e.l)):Ki.RGB(bi(e.h,e.s,e.l))}))},ci[Qa.RGBA]=function(e,t,n,r){return t(e,n).map((function(e){return r?Pi.RGB(ri(ri({},bi(e.h,e.s,e.l)),{a:Mi(e.a)})):Ki.RGBA(ri(ri({},bi(e.h,e.s,e.l)),{a:Mi(e.a)}))}))},ci[Qa.HSL]=function(e,t,n,r){return t(e,n).map((function(e){return r?Pi.HSL({h:e.h,s:e.s,l:e.l}):Ki.HSL(bi(e.h,e.s,e.l))}))},ci[Qa.HSLA]=function(e,t,n,r){return t(e,n).map((function(e){return r?Pi.HSL(ri(ri({},e),{a:Mi(e.a)})):Ki.HSLA(ri(ri({},bi(e.h,e.s,e.l)),{a:Mi(e.a)}))}))},ci),Zi=((di={mix:function(e,t){var n,r,o,a,i,s,u,l,c,d,p,f,h,v,m,g=e.map((function(e){var t=zi(e);return Gi(e,t)})),y=t===ti.SUBTRACTIVE?g.map((function(e){var t,n,r,o,a,i,s,u,l,c,d,p,f,h,v=(t=e.r,n=e.g,r=e.b,o=Math.min(t,n,r),a=Math.min(255-t,255-n,255-r),i=t-o,s=n-o,u=r-o,l=Math.min(i,s),c=i-l,d=(s+l)/2,p=(u+s-l)/2,f=Math.max(c,d,p)/Math.max(i,s,u),h=isNaN(f)||f===1/0||f<=0?1:f,{r:c/h+a,y:d/h+a,b:p/h+a});return ki(e,"a")&&(v.a=e.a),v})):null;function b(e){var n=t===ti.ADDITIVE?{r:0,g:0,b:0,a:0}:{r:0,y:0,b:0,a:0};return e.reduce((function(e,n){var r=ki(n,"a")?n.a:1,o={r:Math.min(e.r+n.r*r,255),b:Math.min(e.b+n.b*r,255),a:1-(1-r)*(1-e.a)},a="g"in e?e.g:e.y,i="g"in n?n.g:n.y;return ri(ri({},o),t===ti.ADDITIVE?{g:Math.min(a+i*r,255)}:{y:Math.min(a+i*r,255)})}),n)}if(t===ti.ADDITIVE)n=b(g);else{var w=b(y);r=w.r,o=w.y,a=w.b,i=Math.min(r,o,a),s=Math.min(255-r,255-o,255-a),u=r-i,l=o-i,c=a-i,d=Math.min(l,c),p=u+l-d,f=l+2*d,h=2*(c-d),v=Math.max(p,f,h)/Math.max(u,l,c),m=isNaN(v)||v===1/0||v<=0?1:v,(n={r:p/m+s,g:f/m+s,b:h/m+s}).a=w.a}return{r:Ti(n.r,2),g:Ti(n.g,2),b:Ti(n.b,2),a:Oi(n.a,0,1)}}})[Qa.HEX]=function(e,t,n){var r=this.mix(e,t);return delete r.a,n?Pi.HEX(r):Ki.HEX(r)},di.HEXA=function(e,t,n){var r=this.mix(e,t);return r.a=n?255*Mi(r.a):Mi(r.a),n?Pi.HEX(r):Ki.HEXA(r)},di[Qa.RGB]=function(e,t,n){var r=this.mix(e,t);return delete r.a,n?Pi.RGB(r):Ki.RGB(r)},di[Qa.RGBA]=function(e,t,n){var r=this.mix(e,t);return n?Pi.RGB(r):Ki.RGBA(r)},di[Qa.HSL]=function(e,t,n){var r=this.mix(e,t),o=Ci(r.r,r.g,r.b);return delete r.a,delete o.a,n?Pi.HSL(o):Ki.HSL(r)},di[Qa.HSLA]=function(e,t,n){var r=this.mix(e,t),o=Ci(r.r,r.g,r.b,r.a);return n?Pi.HSL(o):Ki.HSLA(r)},di),Ji=function(e,t){return"string"==typeof e&&t||"object"==typeof e&&!t},Qi=function(e,t,n,r,o){var a=r(Gi(e,t));return n?o(a):a},es=function(e,t,n,r,o,a){n<1&&(n=5);var i=function(e,t,n){var r=n-1,o=(t.r-e.r)/r,a=(t.g-e.g)/r,i=(t.b-e.b)/r,s=Mi(e.a),u=(Mi(t.a)-s)/r;return Array(n).fill(null).map((function(n,l){return 0===l?e:l===r?t:{r:Ti(e.r+o*l),g:Ti(e.g+a*l),b:Ti(e.b+i*l),a:Ti(s+u*l,2)}}))}(Gi(e),Gi(t),n);return i.map((function(e){var t=o(e);return r?a(t):t}))},ts=function(){function e(e){this.rgb=Gi(e),this.updateHSL(),this.updateCMYK()}return e.prototype.updateRGB=function(){this.rgb=ri(ri({},bi(this.hsl.h,this.hsl.s,this.hsl.l)),{a:this.hsl.a})},e.prototype.updateRGBFromCMYK=function(){this.rgb=ri(ri({},wi(this.cmyk.c,this.cmyk.m,this.cmyk.y,this.cmyk.k)),{a:this.rgb.a})},e.prototype.updateHSL=function(){this.hsl=Ci(this.rgb.r,this.rgb.g,this.rgb.b,this.rgb.a)},e.prototype.updateCMYK=function(){this.cmyk=xi(this.rgb.r,this.rgb.g,this.rgb.b)},e.prototype.updateRGBAndCMYK=function(){return this.updateRGB(),this.updateCMYK(),this},e.prototype.updateHSLAndCMYK=function(){return this.updateHSL(),this.updateCMYK(),this},e.prototype.updateRGBAndHSL=function(){return this.updateRGBFromCMYK(),this.updateHSL(),this},e.prototype.setH=function(e){return this.hsl.h=Bi(e),this.updateRGBAndCMYK()},e.prototype.setS=function(e){return this.hsl.s=Oi(e,0,100),this.updateRGBAndCMYK()},e.prototype.setL=function(e){return this.hsl.l=Oi(e,0,100),this.updateRGBAndCMYK()},e.prototype.setR=function(e){return this.rgb.r=Oi(e,0,255),this.updateHSLAndCMYK()},e.prototype.setG=function(e){return this.rgb.g=Oi(e,0,255),this.updateHSLAndCMYK()},e.prototype.setB=function(e){return this.rgb.b=Oi(e,0,255),this.updateHSLAndCMYK()},e.prototype.setA=function(e){return this.hsl.a=this.rgb.a=Oi(e,0,1),this},e.prototype.setC=function(e){return this.cmyk.c=Oi(e,0,100),this.updateRGBAndHSL()},e.prototype.setM=function(e){return this.cmyk.m=Oi(e,0,100),this.updateRGBAndHSL()},e.prototype.setY=function(e){return this.cmyk.y=Oi(e,0,100),this.updateRGBAndHSL()},e.prototype.setK=function(e){return this.cmyk.k=Oi(e,0,100),this.updateRGBAndHSL()},Object.defineProperty(e.prototype,"H",{get:function(){return Ti(this.hsl.h)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"S",{get:function(){return Ti(this.hsl.s)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"L",{get:function(){return Ti(this.hsl.l)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"R",{get:function(){return Ti(this.rgb.r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"G",{get:function(){return Ti(this.rgb.g)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"B",{get:function(){return Ti(this.rgb.b)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"A",{get:function(){return Ti(this.hsl.a,2)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"C",{get:function(){return Ti(this.cmyk.c)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"M",{get:function(){return Ti(this.cmyk.m)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Y",{get:function(){return Ti(this.cmyk.y)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"K",{get:function(){return Ti(this.cmyk.k)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"HEXObject",{get:function(){return Ki.HEX(this.rgb)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"HEXAObject",{get:function(){return Ki.HEXA(this.rgb)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"RGBObject",{get:function(){return{r:this.R,g:this.G,b:this.B}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"RGBAObject",{get:function(){return ri(ri({},this.RGBObject),{a:this.A})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"HSLObject",{get:function(){return{h:this.H,s:this.S,l:this.L}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"HSLAObject",{get:function(){return ri(ri({},this.HSLObject),{a:this.A})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"CMYKObject",{get:function(){return{c:this.C,m:this.M,y:this.Y,k:this.K}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"HEX",{get:function(){var e=this.rgb,t={r:e.r,g:e.g,b:e.b};return Pi.HEX(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"HEXA",{get:function(){var e=this.rgb,t={r:e.r,g:e.g,b:e.b,a:255*this.A};return Pi.HEX(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"RGB",{get:function(){var e=this.rgb,t={r:e.r,g:e.g,b:e.b};return Pi.RGB(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"RGBA",{get:function(){var e=this.rgb,t={r:e.r,g:e.g,b:e.b,a:this.A};return Pi.RGB(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"HSL",{get:function(){var e=this.hsl,t={h:e.h,s:e.s,l:e.l};return Pi.HSL(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"HSLA",{get:function(){return Pi.HSL(this.hsl)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"CMYK",{get:function(){return Pi.CMYK(this.cmyk)},enumerable:!1,configurable:!0}),e.toHEX=function(e,t){void 0===t&&(t=!0);var n=zi(e);return Qi(e,n,t,Ki.HEX,Pi.HEX)},e.toHEXA=function(e,t){void 0===t&&(t=!0);var n=zi(e);return Qi(e,n,t,Ki.HEXA,Pi.HEX)},e.toRGB=function(e,t){void 0===t&&(t=!0);var n=zi(e);return Qi(e,n,t,Ki.RGB,Pi.RGB)},e.toRGBA=function(e,t){void 0===t&&(t=!0);var n=zi(e);return Qi(e,n,t,Ki.RGBA,Pi.RGB)},e.toHSL=function(e,t){void 0===t&&(t=!0);var n=zi(e);return n===Qa.HSL&&Ji(e,t)?e:Qi(e,n,t,Ki.HSL,Pi.HSL)},e.toHSLA=function(e,t){void 0===t&&(t=!0);var n=zi(e);return n===Qa.HSLA&&Ji(e,t)?e:Qi(e,n,t,Ki.HSLA,Pi.HSL)},e.toCMYK=function(e,t){void 0===t&&(t=!0);var n=zi(e);return n===Qa.CMYK&&Ji(e,t)?e:Qi(e,n,t,Ki.CMYK,Pi.CMYK)},e.getBlendHEX=function(e,t,n,r){return void 0===n&&(n=5),void 0===r&&(r=!0),es(e,t,n,r,Ki.HEX,Pi.HEX)},e.getBlendHEXA=function(e,t,n,r){return void 0===n&&(n=5),void 0===r&&(r=!0),es(e,t,n,r,Ki.HEXA,Pi.HEX)},e.getBlendRGB=function(e,t,n,r){return void 0===n&&(n=5),void 0===r&&(r=!0),es(e,t,n,r,Ki.RGB,Pi.RGB)},e.getBlendRGBA=function(e,t,n,r){return void 0===n&&(n=5),void 0===r&&(r=!0),es(e,t,n,r,Ki.RGBA,Pi.RGB)},e.getBlendHSL=function(e,t,n,r){return void 0===n&&(n=5),void 0===r&&(r=!0),es(e,t,n,r,Ki.HSL,Pi.HSL)},e.getBlendHSLA=function(e,t,n,r){return void 0===n&&(n=5),void 0===r&&(r=!0),es(e,t,n,r,Ki.HSLA,Pi.HSL)},e.getMixHEX=function(e,t,n){return void 0===t&&(t=ti.ADDITIVE),void 0===n&&(n=!0),Zi.HEX(e,t,n)},e.getMixHEXA=function(e,t,n){return void 0===t&&(t=ti.ADDITIVE),void 0===n&&(n=!0),Zi.HEXA(e,t,n)},e.getMixRGB=function(e,t,n){return void 0===t&&(t=ti.ADDITIVE),void 0===n&&(n=!0),Zi.RGB(e,t,n)},e.getMixRGBA=function(e,t,n){return void 0===t&&(t=ti.ADDITIVE),void 0===n&&(n=!0),Zi.RGBA(e,t,n)},e.getMixHSL=function(e,t,n){return void 0===t&&(t=ti.ADDITIVE),void 0===n&&(n=!0),Zi.HSL(e,t,n)},e.getMixHSLA=function(e,t,n){return void 0===t&&(t=ti.ADDITIVE),void 0===n&&(n=!0),Zi.HSLA(e,t,n)},e.getShades=function(e,t){return Xi(e,t,!0)},e.getTints=function(e,t){return Xi(e,t,!1)},e.getHarmony=function(e,t,n){switch(void 0===t&&(t=ei.COMPLEMENTARY),void 0===n&&(n=ti.ADDITIVE),t){case ei.ANALOGOUS:return Yi.buildHarmony(e,Li,n);case ei.SPLIT_COMPLEMENTARY:return Yi.buildHarmony(e,ji,n);case ei.TRIADIC:return Yi.buildHarmony(e,Wi,n);case ei.TETRADIC:return Yi.buildHarmony(e,Hi,n);case ei.SQUARE:return Yi.buildHarmony(e,Ui,n);default:return Yi.buildHarmony(e,Vi,n)}},e}();const ns={stateful:{type:Boolean,default:!1},modelValue:{type:void 0}},rs=["update:modelValue"];function os(e,t,n){const a=(0,o.iH)(void 0===n?e.modelValue:n);let i;return(0,r.YP)((()=>e.stateful),(t=>{t?i=(0,r.YP)((()=>e.modelValue),(e=>{a.value=e})):null==i||i()}),{immediate:!0}),{valueComputed:(0,r.Fl)({get:()=>e.stateful?a.value:e.modelValue,set(n){e.stateful&&(a.value=n),t("update:modelValue",n)}})}}const as=Symbol("AccordionService"),is=(e,t)=>{let n=[];(0,r.JJ)(as,{isInsideAccordion:!0,onItemMounted:e=>{n.push(e)},onItemUnmounted:e=>{n=n.filter((t=>t!==e))},onItemChanged:r=>{t.value=n.map((t=>(t===r||e.multiply||(t.state.value=!1),t.state.value)))},props:(0,r.Fl)((()=>e))});const o=()=>{n.forEach(((e,n)=>{e.state.value=t.value[n]}))};return(0,r.bv)(o),(0,r.YP)(t,o),{items:n}},ss=e=>{const t=(0,r.f3)(as,{props:(0,o.iH)({inset:void 0,popout:void 0}),onItemChanged:()=>{},onItemMounted:()=>{},onItemUnmounted:()=>{}}),n={state:e};return(0,r.bv)((()=>t.onItemMounted(n))),(0,r.Jd)((()=>t.onItemUnmounted(n))),{accordionProps:t.props,toggle:()=>{e.value=!e.value,t.onItemChanged(n)}}};var us=(0,r.aZ)({name:"VaAccordion",emits:rs,props:{...ns,modelValue:{type:Array,default:()=>[]},multiply:{type:Boolean,default:!1},inset:{type:Boolean,default:!1},popout:{type:Boolean,default:!1}},setup(e,{emit:t}){const{valueComputed:n}=os(e,t,[]),{items:r}=is(e,n);return{collapses:r,value:n}}});const ls={class:"va-accordion"};us.render=function(e,t,n,o,a,i){return(0,r.wg)(),(0,r.iD)("div",ls,[(0,r.WI)(e.$slots,"default")])},us.__file="src/components/va-accordion/VaAccordion.vue";const cs=Ja(us);var ds=n(7139);const ps=()=>"undefined"==typeof window,fs=()=>"undefined"==typeof window?void 0:window,hs={},vs=()=>ps()?"undefined"==typeof globalThis?hs:globalThis:window;var ms=Y,gs=Pt,ys=function(e){return"symbol"==typeof e||gs(e)&&"[object Symbol]"==ms(e)},bs=/\s/,ws=function(e){for(var t=e.length;t--&&bs.test(e.charAt(t)););return t},xs=/^\s+/,Cs=function(e){return e?e.slice(0,ws(e)+1).replace(xs,""):e},_s=Z,ks=ys,Ss=/^[-+]0x[0-9a-f]+$/i,Es=/^0b[01]+$/i,Is=/^0o[0-7]+$/i,As=parseInt,Fs=function(e){if("number"==typeof e)return e;if(ks(e))return NaN;if(_s(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=_s(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Cs(e);var n=Es.test(e);return n||Is.test(e)?As(e.slice(2),n?2:8):Ss.test(e)?NaN:+e},Ds=L,Rs=Z,Ts=function(){return Ds.Date.now()},Os=Fs,Ps=Math.max,Bs=Math.min,Ms=function(e,t,n){var r,o,a,i,s,u,l=0,c=!1,d=!1,p=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function f(t){var n=r,a=o;return r=o=void 0,l=t,i=e.apply(a,n)}function h(e){return l=e,s=setTimeout(m,t),c?f(e):i}function v(e){var n=e-u;return void 0===u||n>=t||n<0||d&&e-l>=a}function m(){var e=Ts();if(v(e))return g(e);s=setTimeout(m,function(e){var n=t-(e-u);return d?Bs(n,a-(e-l)):n}(e))}function g(e){return s=void 0,p&&r?f(e):(r=o=void 0,i)}function y(){var e=Ts(),n=v(e);if(r=arguments,o=this,u=e,n){if(void 0===s)return h(u);if(d)return clearTimeout(s),s=setTimeout(m,t),f(u)}return void 0===s&&(s=setTimeout(m,t)),i}return t=Os(t)||0,Rs(n)&&(c=!!n.leading,a=(d="maxWait"in n)?Ps(Os(n.maxWait)||0,t):a,p="trailing"in n?!!n.trailing:p),y.cancel=function(){void 0!==s&&clearTimeout(s),l=0,r=u=o=s=void 0},y.flush=function(){return void 0===s?i:g(Ts())},y},Ns=function(){},Ls=Ms,Vs=Z,js=function(e,t,n){var r=!0,o=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return Vs(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),Ls(e,t,{leading:r,maxWait:t,trailing:o})};function Ws(){return document.documentElement.clientHeight||window.innerHeight||document.body.clientHeight}function Hs({coordinates:e,offsetTop:t,offsetBottom:n,target:r}){let o=!1,a=!1;const i=Ws();if(null!=t&&i)if(r===window)o=e.top<=t;else{const{top:n}=r.getBoundingClientRect();o=e.top-n<=t}if(null!=n&&i)if(r===window)a=e.bottom>=i-n;else{const{bottom:t}=r.getBoundingClientRect();a=t-e.bottom<=n}return{isTopAffixed:o,isBottomAffixed:a}}function Us(e,t){const{target:n,element:r,offsetTop:o,offsetBottom:a,setState:i,getState:s,initialPosition:u}=t;if(!r)return;const l=!e,c=r.getBoundingClientRect(),d={offsetBottom:a,offsetTop:o,target:n},p=Hs(l&&u?{coordinates:u,...d}:{coordinates:c,...d}),f=s();!function(e,t){return e.isTopAffixed!==t.isTopAffixed||e.isBottomAffixed!==t.isBottomAffixed}(f,p)?f.width!==c.width&&i({...f,width:c.width}):i({...p,width:c.width})}function zs(e){return"scroll"===e}var $s=(0,r.aZ)({name:"VaAffix",emits:["change"],props:{offsetTop:{type:Number,default:void 0},offsetBottom:{type:Number,default:void 0},target:{type:[Object,Function],default:fs}},setup(e,{emit:t}){const n=(0,o.XI)(),a=()=>"function"==typeof e.target?e.target():e.target,i=(0,r.Fl)((()=>s.value.isTopAffixed||s.value.isBottomAffixed)),s=(0,o.iH)({isTopAffixed:!1,isBottomAffixed:!1}),u=()=>s.value,l=e=>{s.value=e,t("change",i)},c=()=>{const t=a();if(!t)return 0;if(void 0!==e.offsetTop){if(!(t instanceof Window)){const{top:n}=t.getBoundingClientRect();return n+e.offsetTop}return e.offsetTop}},d=()=>{const t=a();if(!t)return 0;if(void 0!==e.offsetBottom){if(!(t instanceof Window)){const{bottom:n}=t.getBoundingClientRect(),{borderTopWidth:r,borderBottomWidth:o}=getComputedStyle(t),{offsetHeight:a,clientHeight:i}=t,s=a-i-parseInt(r)-parseInt(o);return Ws()-(n-e.offsetBottom)+s}return e.offsetBottom}},p=e=>{const t=e();return void 0===t?void 0:`${t}px`},f=(0,r.Fl)((()=>[{"va-affix--affixed":i}])),h=(0,r.Fl)((()=>({top:s.value.isTopAffixed?p(c):void 0,bottom:s.value.isBottomAffixed?p(d):void 0,width:`${s.value.width}px`}))),v=(0,o.iH)(),m=(t,r)=>{const o={...e,initialPosition:v.value,element:n.value,target:a(),setState:l,getState:u};if(t&&"resize"!==t){if(r&&r.target){const e=a();e===r.target||e instanceof Window?Us(t,o):l({isBottomAffixed:!1,isTopAffixed:!1})}}else Us(t,o)};let g=Ns;return(0,r.bv)((()=>{var e;v.value=null===(e=n.value)||void 0===e?void 0:e.getBoundingClientRect(),g=function(e,{handler:t,useCapture:n=zs,wait:r=50}){const o=e.map((e=>{const o=js((n=>t(e,n)),r);return window.addEventListener(e,o,n(e)),()=>window.removeEventListener(e,o,n(e))}));return()=>o.forEach((e=>e()))}(["scroll","resize"],{handler:m}),(0,r.Y3)((()=>{m(null)}))})),(0,r.Jd)(g),{computedClass:f,computedStyle:h,isAffixed:i,element:n}}});const qs={ref:"element",class:"va-affix"};$s.render=function(e,t,n,o,a,i){return(0,r.wg)(),(0,r.iD)("div",qs,[(0,r._)("div",{style:(0,ds.j5)({visibility:e.isAffixed?"hidden":"inherit"})},[(0,r.WI)(e.$slots,"default")],4),e.isAffixed?((0,r.wg)(),(0,r.iD)("div",{key:0,class:(0,ds.C_)(e.computedClass),style:(0,ds.j5)(e.computedStyle)},[(0,r.WI)(e.$slots,"default")],6)):(0,r.kq)("v-if",!0)],512)},$s.__file="src/components/va-affix/VaAffix.vue";const Gs=Ja($s);n(6699);var Ks=n(3862);const Xs=!1,Ys=(e=0)=>new Promise((t=>setTimeout(t,e))),Zs=(...e)=>(Xs&&console.warn(...e),!1),Js=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),Qs=(e,t)=>{if(0===t.length)return e;const n=e[t[0]];return Z(n)?Qs(n,t.slice(1)):1===t.length?n:void 0},eu=(e,t)=>t in e?e[t]:(t=t.replace(/^\./,""),Qs(e,t.split("."))),tu=(e,t)=>{if("object"==typeof e&&e)return t?"string"==typeof t?eu(e,t):"function"==typeof t?t(e):e:e},nu=(e=4)=>Math.random().toString(36).substring(2,e+2),ru=()=>`${nu(8)}-${nu(4)}-${nu(4)}`,ou=(e,t)=>new ts(e).setA(t).RGBA,au=(e,t="dark",n="white")=>{const{R:r,G:o,B:a}=new ts(e);return Math.sqrt(r*r*.241+o*o*.691+a*a*.068)>130?t:n},iu=e=>new ts(e).setA(.4).RGBA,su=e=>new ts(e).setA(.2).RGBA,uu=e=>new ts(e).setA(.3).RGBA,lu=(e,t)=>{const n=new ts(e);return t.h&&n.setH(n.H+t.h),t.s&&n.setS(n.S+t.s),t.l&&n.setL(n.L+t.l),t.a&&n.setA(n.A+t.a),n.HSLA},cu=(e,t)=>{const n=new ts(e);return void 0!==t.h&&n.setH(t.h),void 0!==t.s&&n.setS(t.s),void 0!==t.l&&n.setL(t.l),void 0!==t.a&&n.setA(t.a),n.HSLA},du=e=>{const t=(e=>{const t=ts.toHSLA(e,!1);if(t.s<10)return lu(t,{h:2,s:5,l:10});if(t.s<30)return lu(t,{s:-14,l:11});if(t.h>=0&&t.h<44||t.h>=285)return lu(t,{h:11,s:27,l:8});if(t.h>=44&&t.h<85)return lu(t,{h:3,l:9});if(t.h>=85&&t.h<165)return lu(t,{h:16,l:14});if(t.h>=165&&t.h<285)return lu(t,{h:-15,s:3,l:2});throw new Error("This method should handle all colors. But it didn't for some reason.")})(e);return`linear-gradient(to right, ${t}, ${ts.toHSLA(e)})`},pu={color:{type:String,default:""}},fu=()=>{const e=Xa();if(!e)throw new Error("useColors must be used in setup function or Vuestic GlobalConfigPlugin is not registered!");const{setGlobalConfig:t,getGlobalConfig:n}=e,r=()=>n().colors||{},o=(e,t,n)=>{t||(t=r().primary);const o=r();return e||(e=t),o[e]?n?`var(--va-${e})`:o[e]:/^#([\da-f]{3}){1,2}$|^#([\da-f]{4}){1,2}$|(rgb|hsl)a?\((\s*-?\d+%?\s*,){2}(\s*-?\d+%?\s*,?\s*\)?)(,\s*(0?\.\d+)?|1)?\)/.test(e.toLocaleLowerCase())||n&&(e=>/var\(--.+\)/.test(e))(e)?e:t};return{setColors:e=>{t((t=>({...t,colors:{...t.colors,...e}})))},getColors:r,getColor:o,getBoxShadowColor:iu,getHoverColor:su,getFocusColor:uu,getGradientBackground:du,getTextColor:au,shiftHSLAColor:lu,setHSLAColor:cu,colorsToCSSVariable:(e,t="va")=>Object.keys(e).filter((t=>void 0!==e[t])).reduce(((n,r)=>(n[`--${t}-${r}`]=o(e[r],void 0,!0),n)),{})}},hu=(e,t=!1)=>{const{props:n}=(0,r.FN)(),{getColor:a,getTextColor:i}=fu();return{textColorComputed:(0,r.Fl)((()=>{if(n.textColor)return a(n.textColor);const r=a((0,o.SU)(e)||n.color);return(0,o.SU)(t)?r:a(i(r))}))}};var vu=function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o},mu=vu,gu=Ut,yu=ys,bu=V?V.prototype:void 0,wu=bu?bu.toString:void 0,xu=function e(t){if("string"==typeof t)return t;if(gu(t))return mu(t,e)+"";if(yu(t))return wu?wu.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n},Cu=xu,_u=function(e){return null==e?"":Cu(e)};const ku=["x","y","width","height","top","left","right","bottom"],Su=e=>{const t=(0,o.iH)(null);let n={};return(e=>{let t=-1;const n=()=>{t=requestAnimationFrame(n),e()};(0,r.bv)((()=>{n()})),(0,r.Jd)((()=>{cancelAnimationFrame(t)}))})((()=>{if(!e.value)return;const r=e.value.getBoundingClientRect();((e,t)=>{for(let n=0;n<ku.length;n++)if(e[ku[n]]!==t[ku[n]])return!1;return!0})(r,n)||(t.value=r),n=r})),(0,r.YP)(e,(e=>{t.value=e?e.getBoundingClientRect():null})),{domRect:t}};var Eu=Ut,Iu=ys,Au=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Fu=/^\w*$/,Du=function(e,t){if(Eu(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Iu(e))||Fu.test(e)||!Au.test(e)||null!=t&&e in Object(t)},Ru=Ze;function Tu(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],a=n.cache;if(a.has(o))return a.get(o);var i=e.apply(this,r);return n.cache=a.set(o,i)||a,i};return n.cache=new(Tu.Cache||Ru),n}Tu.Cache=Ru;var Ou=Tu,Pu=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Bu=/\\(\\)?/g,Mu=function(e){var t=Ou(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Pu,(function(e,n,r,o){t.push(r?o.replace(Bu,"$1"):n||e)})),t})),Nu=Ut,Lu=Du,Vu=Mu,ju=_u,Wu=function(e,t){return Nu(e)?e:Lu(e,t)?[e]:Vu(ju(e))},Hu=ys,Uu=function(e){if("string"==typeof e||Hu(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t},zu=Wu,$u=Uu,qu=function(e,t){for(var n=0,r=(t=zu(t,e)).length;null!=e&&n<r;)e=e[$u(t[n++])];return n&&n==r?e:void 0},Gu=Sn,Ku=Wu,Xu=Dn,Yu=Z,Zu=Uu,Ju=qu,Qu=function(e,t,n,r){if(!Yu(e))return e;for(var o=-1,a=(t=Ku(t,e)).length,i=a-1,s=e;null!=s&&++o<a;){var u=Zu(t[o]),l=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(o!=i){var c=s[u];void 0===(l=r?r(c,u,s):void 0)&&(l=Yu(c)?c:Xu(t[o+1])?[]:{})}Gu(s,u,l),s=s[u]}return e},el=Wu,tl=Wu,nl=Ht,rl=Ut,ol=Dn,al=zt,il=Uu,sl=function(e,t){return null!=e&&t in Object(e)},ul=function(e,t,n){for(var r=-1,o=(t=tl(t,e)).length,a=!1;++r<o;){var i=il(t[r]);if(!(a=null!=e&&n(e,i)))break;e=e[i]}return a||++r!=o?a:!!(o=null==e?0:e.length)&&al(o)&&ol(i,o)&&(rl(e)||nl(e))},ll=function(e,t,n){for(var r=-1,o=t.length,a={};++r<o;){var i=t[r],s=Ju(e,i);n(s,i)&&Qu(a,el(i,e),s)}return a},cl=function(e,t){return null!=e&&ul(e,t,sl)},dl=function(e,t){return ll(e,t,(function(t,n){return cl(e,n)}))},pl=Ht,fl=Ut,hl=V?V.isConcatSpreadable:void 0,vl=uo,ml=function(e){return fl(e)||pl(e)||!!(hl&&e&&e[hl])},gl=function e(t,n,r,o,a){var i=-1,s=t.length;for(r||(r=ml),a||(a=[]);++i<s;){var u=t[i];n>0&&r(u)?n>1?e(u,n-1,r,o,a):vl(a,u):o||(a[a.length]=u)}return a},yl=gl,bl=function(e){return null!=e&&e.length?yl(e,1):[]},wl=bl,xl=xr,Cl=Er,_l=function(e){return Cl(xl(e,void 0,wl),e+"")},kl=dl,Sl=_l((function(e,t){return null==e?{}:kl(e,t)}));const El=(e,t)=>{const n={};return Object.keys(e).forEach((r=>{n[r]=t(e[r],r)})),n},Il=["top","bottom","left","right"].reduce(((e,t)=>[...e,t,`${t}-start`,`${t}-end`,`${t}-center`]),["auto"]),Al=({x:e,y:t})=>({left:`${e}px`,top:`${t}px`}),Fl=e=>{const[t,n]=e.split("-");return{position:t,align:n||"center"}},Dl=(e,t,n,r)=>"start"===e?t:"end"===e?t+n-r:t+(n-r)/2,Rl=(e,t,n)=>{const{position:r,align:o}=Fl(e),a=Dl(o,t.left,t.width,n.width),i=Dl(o,t.top,t.height,n.height);switch(r){case"top":return{x:a,y:t.top-n.height};case"left":return{y:i,x:t.left-n.width};case"right":return{y:i,x:t.right};default:return{x:a,y:t.bottom}}},Tl=(e,t)=>{const{position:n}=Fl(e),{main:r,cross:o}=(e=>Array.isArray(e)?{main:e[0],cross:e[1]}:{main:e,cross:0})(t);switch(n){case"left":return{y:o,x:-r};case"right":return{y:o,x:r};case"top":return{y:-r,x:o};default:return{y:r,x:o}}},Ol=(e,t,n)=>{const r=n.right,o=n.bottom,a=n.left,i=n.top;return{top:Math.max(i-e.y,0),bottom:Math.max(e.y+t.height-o,0),left:Math.max(a-e.x,0),right:Math.max(e.x+t.width-r,0)}},Pl=(e,t,n)=>Math.max(Math.min(t,n),e),Bl=(e,t,n)=>{const a=(e=>{if(ps()){const t=(0,o.iH)(null);return(0,r.bv)((()=>{t.value=e()})),t}return(0,o.iH)(e())})((()=>document)),i=(0,r.Fl)((()=>{if(!a.value)return;const{root:e}=(0,o.SU)(n);return e?a.value.querySelector(e):a.value.body})),{domRect:s}=Su(e),{domRect:u}=Su(t),l={width:"max-content",position:"absolute"},c=()=>{if(!i.value||!s.value||!u.value)return;let e={x:0,y:0};const{placement:r,keepAnchorWidth:a,offset:c,autoPlacement:d,stickToEdges:p}=(0,o.SU)(n);let f=Rl(r,s.value,u.value);if(c&&(e=Tl(r,c),f=El(f,((t,n)=>t+e[n]))),a){const{width:e}=s.value;Object.assign(l,{width:`${e}px`,maxWidth:`${e}px`})}const h=i.value.getBoundingClientRect();if(d){const t=((e,t,n,r)=>{const{position:o,align:a}=Fl(e),i=Ol(t,n,r),s={top:["bottom",a].join("-"),bottom:["top",a].join("-"),right:["left",a].join("-"),left:["right",a].join("-")};return i[o]?s[o]:e})(r,f,u.value,h);t!==r&&(f=Rl(t,s.value,u.value),c&&(e=Tl(t,c),f=El(f,((t,n)=>t+e[n]))))}p&&(f=((e,t,n,r,o)=>{const{top:a,bottom:i,left:s,right:u}=Ol(e,n,o),l=e.x-u+s,c=e.y-i+a,{x:d,y:p}=t;return{x:Pl(r.left+d-n.width,l,r.right+d),y:Pl(r.top+p-n.height,c,r.bottom+p)}})(f,e,u.value,s.value,h)),t.value&&Object.assign(t.value.style,{...l,...Al(f)})};return(0,r.YP)(s,c),(0,r.YP)(u,c),(0,r.YP)(n,c,{deep:!0}),{anchorDomRect:s,contentDomRect:u}},Ml={defaultSize:48,sizes:{small:32,medium:48,large:64}},Nl={defaultSize:1,sizes:{small:.75,medium:1,large:1.25}},Ll={size:{type:[String,Number],default:"",validator:e=>"string"==typeof e||"number"==typeof e},sizesConfig:{type:Object,default:()=>Ml},fontSizesConfig:{type:Object,default:()=>Nl}},Vl=/(?<fontSize>\d+)(?<extension>px|rem)/i,jl=e=>e/16-.5,Wl=(e,t)=>{var n;void 0===t&&(t=null===(n=(0,r.FN)())||void 0===n?void 0:n.type.name);const{getGlobalConfig:o}=Ya(),a=(0,r.Fl)((()=>{var e,n;return t?null===(n=null===(e=o().components)||void 0===e?void 0:e[t])||void 0===n?void 0:n.sizesConfig:void 0})),i=(0,r.Fl)((()=>{var t,n,r;const{defaultSize:o,sizes:i}=e.sizesConfig,s=null===(t=a.value)||void 0===t?void 0:t.defaultSize;if(!e.size)return`${s||o}px`;if("string"==typeof e.size){const t=null===(r=null===(n=a.value)||void 0===n?void 0:n.sizes)||void 0===r?void 0:r[e.size],o=i[e.size];return t?`${t}px`:o?`${o}px`:e.size}return`${e.size}px`})),s=(0,r.Fl)((()=>{const{defaultSize:t,sizes:n}=e.fontSizesConfig;if(!e.size)return t;if("string"==typeof e.size){if(e.size in n)return n[e.size];const t=e.size.match(Vl);if(!t||!t.groups)throw new Error("Size prop should be either valid string or number");const{extension:r,fontSize:o}=t.groups;return"rem"===r?+o:jl(+o)}return jl(e.size)}));return{sizeComputed:i,fontSizeComputed:(0,r.Fl)((()=>`${s.value}rem`)),fontSizeInRem:s}};var Hl=function(e,t,n){var r=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var a=Array(o);++r<o;)a[r]=e[r+t];return a},Ul=qu,zl=Hl,$l=Wu,ql=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0},Gl=function(e,t){return t.length<2?e:Ul(e,zl(t,0,-1))},Kl=Uu,Xl=un,Yl=vu,Zl=ja,Jl=function(e,t){return t=$l(t,e),null==(e=Gl(e,t))||delete e[Kl(ql(t))]},Ql=Wu,ec=An,tc=function(e){return Xl(e)?void 0:e},nc=Ao,rc=_l((function(e,t){var n={};if(null==e)return n;var r=!1;t=Yl(t,(function(t){return t=Ql(t,e),r||(r=t.length>1),t})),ec(e,nc(e),n),r&&(n=Zl(n,7,tc));for(var o=t.length;o--;)Jl(n,t[o]);return n}));const oc=(e,t)=>{if("string"!=typeof t&&t.global)return[...e.matchAll(t)].map((e=>e.slice(1)));const n=e.match(t)||[];return n?n.length>1?n.slice(1):n:[]},ac=/{[^}]*}/g,ic=e=>e.replace(ac,"(.*)"),sc=(e,t)=>{const n=(e=>(e.match(ac)||[]).map((e=>e.replace(/{|}/g,""))))(t),r=((e,t)=>oc(e,ic(t)))(e,t);return n.reduce(((e,t,n)=>({...e,[t]:r[n]})),{})},uc=e=>"string"==typeof e.name,lc=e=>e.name instanceof RegExp,cc=(e,t)=>{return uc(t)?((e,t)=>{const n=ic(t);return((e,t)=>(e.match(t)||[])[0]===e)(e,new RegExp(n))})(e,t.name):!!lc(t)&&(n=e,t.name.test(n));var n},dc=(e,t)=>{if(uc(t))return((e,t)=>{const n=sc(e,t.name);return t.resolve&&t.resolve(n)})(e,t);if(lc(t))return((e,t)=>{if(t.name.global)throw new Error(`Bad icon config with name ${t.name}. Please, don't use global regex as name.`);const n=oc(e,t.name);return t.resolveFromRegex&&t.resolveFromRegex(...n)})(e,t);throw Error("Unknown icon config")},pc=(e,t,n=[])=>{if(!e)return;const r=((e,t,n=[])=>{const r=t.find((t=>!n.includes(t.name.toString())&&cc(e,t)));if(!r)throw new Error(`Can not find icon config from ${e}. Please provide default config.`);return r})(e,t,n),o=Nr(dc(e,r),r);return n=[...n,r.name.toString()],Nr(pc(o.to,t,n),o)},fc=e=>{const{getGlobalConfig:t}=Ya();return{getIcon:e=>((e,t)=>{const n=pc(e,t);return void 0===n?{}:(e=>{const t=e;return["name","to","resolve","resolveFromRegex"].forEach((e=>{delete t[e]})),t})(n)})(e,t().icons||[])}};var hc=(0,r.aZ)({name:"VaIcon",props:{...Ll,name:{type:String,default:""},tag:{type:String},component:{type:Object},color:{type:String},rotation:{type:[String,Number]},spin:{type:[String,Boolean]},flip:{type:String,default:"off",validator:e=>["off","horizontal","vertical","both"].includes(e)}},setup(e,{attrs:t}){const{getColor:n}=fu(),{sizeComputed:o}=Wl(e),{getIcon:a}=fc(),i=(0,r.Fl)((()=>a(e.name))),s=(0,r.Fl)((()=>e.component||e.tag||i.value.component||i.value.tag||"i")),u=(0,r.Fl)((()=>({...i.value.attrs,...rc(t,["class"])}))),l=e=>{if(void 0!==e&&!1!==e)return"counter-clockwise"===e?"va-icon--spin-reverse":"va-icon--spin"},c=(0,r.Fl)((()=>{var t;return[i.value.class,l(null!==(t=e.spin)&&void 0!==t?t:i.value.spin)]})),d=(0,r.Fl)((()=>{const t=e.rotation?`rotate(${e.rotation}deg)`:"",n="vertical"===e.flip||"both"===e.flip?-1:1,r="horizontal"===e.flip||"both"===e.flip?-1:1;return`${"off"===e.flip?"":`scale(${n}, ${r})`} ${t}`.trim()})),p=(0,r.Fl)((()=>({transform:d.value,cursor:t.onClick?"pointer":null,color:e.color?n(e.color,void 0,!0):i.value.color,fontSize:o.value})));return{iconConfig:i,computedTag:s,computedAttrs:u,computedClass:c,computedStyle:p}}});hc.render=function(e,t,n,o,a,i){return(0,r.wg)(),(0,r.j4)((0,r.LL)(e.computedTag),(0,r.dG)({class:["va-icon",e.computedClass],"aria-hidden":"true",style:e.computedStyle},e.computedAttrs,{notranslate:""}),{default:(0,r.w5)((()=>[(0,r.WI)(e.$slots,"default",{},(()=>[e.iconConfig.content?((0,r.wg)(),(0,r.iD)(r.HY,{key:0},[(0,r.Uk)((0,ds.zw)(e.iconConfig.content),1)],2112)):(0,r.kq)("v-if",!0)]))])),_:3},16,["class","style"])},hc.__file="src/components/va-icon/VaIcon.vue";const vc=Ja(hc);var mc=(0,r.aZ)({name:"VaAlert",components:{VaIcon:vc},emits:rs,props:{...ns,modelValue:{type:Boolean,default:!0},color:{type:String,default:"primary"},textColor:{type:String,default:""},title:{type:String,default:""},description:{type:String,default:""},icon:{type:String,default:""},closeText:{type:String,default:""},closeable:{type:Boolean,default:!1},dense:{type:Boolean,default:!1},outline:{type:Boolean,default:!1},center:{type:Boolean,default:!1},borderColor:{type:String,default:""},border:{type:String,default:"",validator:e=>["top","right","bottom","left",""].includes(e)}},setup(e,{slots:t,emit:n}){const a=(e=>{const{getColor:t}=fu(),n=(0,r.Fl)((()=>Boolean(e.outline||e.border))),{textColorComputed:a}=hu((0,o.Vh)(e,"color"),n),i=(0,r.Fl)((()=>t(e.color)));return{alertStyle:(0,r.Fl)((()=>{let t=i.value,n="none";return e.outline&&(t="transparent"),e.border&&(t="var(--va-white)",n="var(--va-alert-box-shadow)"),{border:e.outline?`1px solid ${i.value}`:"",padding:e.dense?"var(--va-alert-padding-y-dense) var(--va-alert-padding-x)":"",background:t,boxShadow:n}})),contentStyle:(0,r.Fl)((()=>({alignItems:e.center?"center":"",color:e.border?t("dark"):a.value}))),titleStyle:(0,r.Fl)((()=>({color:a.value}))),borderStyle:(0,r.Fl)((()=>({backgroundColor:e.borderColor?t(e.borderColor):i.value})))}})(e),{valueComputed:i}=os(e,n),s=(0,r.Fl)((()=>e.icon||t.icon)),u=(0,r.Fl)((()=>e.title||t.title)),l=(0,r.Fl)((()=>`va-alert__border--${e.border}`)),c=(0,r.Fl)((()=>e.closeText||"close")),d=(0,r.Fl)(ru),p=(0,r.Fl)((()=>`aria-title-${d.value}`)),f=(0,r.Fl)((()=>`aria-description-${d.value}`));return{...a,valueComputed:i,hasIcon:s,hasTitle:u,borderClass:l,closeIcon:c,hide:()=>{i.value=!1},titleIdComputed:p,descriptionIdComputed:f}}});const gc=["role","aria-labelledby","aria-describedby"],yc=["id"],bc=["id"],wc={key:1,class:"va-alert__close"},xc=["aria-label"];mc.render=function(e,t,n,o,a,i){const s=(0,r.up)("va-icon");return e.valueComputed?((0,r.wg)(),(0,r.j4)(Ks.uT,{key:0,name:"fade"},{default:(0,r.w5)((()=>[(0,r._)("div",{class:"va-alert",style:(0,ds.j5)(e.alertStyle),role:e.closeable?"alertdialog":"alert","aria-labelledby":e.titleIdComputed,"aria-describedby":e.descriptionIdComputed},[(0,r._)("div",{style:(0,ds.j5)(e.borderStyle),class:(0,ds.C_)([e.borderClass,"va-alert__border"])},null,6),e.hasIcon?((0,r.wg)(),(0,r.iD)("div",{key:0,style:(0,ds.j5)(e.contentStyle),class:"va-alert__icon","aria-hidden":"true"},[(0,r.WI)(e.$slots,"icon",{},(()=>[(0,r.Wm)(s,{name:e.icon},null,8,["name"])]))],4)):(0,r.kq)("v-if",!0),(0,r._)("div",{style:(0,ds.j5)(e.contentStyle),class:"va-alert__content"},[e.hasTitle?((0,r.wg)(),(0,r.iD)("div",{key:0,style:(0,ds.j5)(e.titleStyle),class:"va-alert__title",id:e.titleIdComputed},[(0,r.WI)(e.$slots,"title",{},(()=>[(0,r.Uk)((0,ds.zw)(e.title),1)]))],12,yc)):(0,r.kq)("v-if",!0),(0,r._)("span",{id:e.descriptionIdComputed},[(0,r.WI)(e.$slots,"default",{},(()=>[(0,r.Uk)((0,ds.zw)(e.$props.description),1)]))],8,bc)],4),e.closeable?((0,r.wg)(),(0,r.iD)("div",wc,[(0,r._)("div",{style:(0,ds.j5)(e.contentStyle),class:"va-alert__close--closeable",role:"button",tabindex:"0","aria-label":e.closeText||"close alert",onClick:t[0]||(t[0]=t=>e.hide()),onKeydown:[t[1]||(t[1]=(0,Ks.D2)((t=>e.hide()),["space"])),t[2]||(t[2]=(0,Ks.D2)((t=>e.hide()),["enter"]))]},[(0,r.WI)(e.$slots,"close",{},(()=>[e.closeText?(0,r.kq)("v-if",!0):((0,r.wg)(),(0,r.j4)(s,{key:0,name:e.closeIcon,size:"small"},null,8,["name"])),(0,r.Uk)(" "+(0,ds.zw)(e.closeText),1)]))],44,xc)])):(0,r.kq)("v-if",!0)],12,gc)])),_:3})):(0,r.kq)("v-if",!0)},mc.__file="src/components/va-alert/VaAlert.vue";const Cc=Ja(mc);function _c(e,t){const n=(0,o.XI)();let a;return(0,r.bv)((()=>{a=function(e){if(!e)throw new Error("Cant find target");return"string"==typeof e?document.querySelector(e):e}(e||n.value),null==a||a.addEventListener("scroll",t)})),(0,r.Jd)((()=>{null==a||a.removeEventListener("scroll",t)})),n}var kc=(0,r.aZ)({name:"VaAppBar",props:{gradient:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1},target:{type:[Object,String],default:""},hideOnScroll:{type:Boolean,default:!1},shadowOnScroll:{type:Boolean,default:!1},shadowColor:{type:String,default:""},color:{type:String,default:void 0},absolute:{type:Boolean,default:!1}},setup(e){const t=(0,o.iH)(0),n=(0,o.iH)(!1),a=(0,o.iH)(!1),i=_c(e.target,(r=>{const o=r.target;t.value<o.scrollTop?(a.value=!!e.hideOnScroll,n.value=!!e.shadowOnScroll):(a.value=!1,n.value=!1),t.value=o.scrollTop})),{getColor:s}=fu(),u=(0,r.Fl)((()=>s(e.color,"primary"))),l=(0,r.Fl)((()=>s(e.shadowColor,u.value))),c=(0,r.Fl)((()=>{const t=iu(e.shadowColor?l.value:u.value);return n.value?`var(--va-app-bar-shadow) ${t}`:""})),d=(0,r.Fl)((()=>a.value?e.bottom?"translateY(100%)":"translateY(-100%)":""));return{scrollRoot:i,computedStyle:(0,r.Fl)((()=>({background:e.gradient?du(u.value):u.value,"box-shadow":c.value,transform:d.value,position:e.absolute?"absolute":void 0}))),computedClass:(0,r.Fl)((()=>({"va-app-bar":!0,"va-app-bar--bottom":e.bottom})))}}});kc.render=function(e,t,n,o,a,i){return(0,r.wg)(),(0,r.iD)("header",{ref:"scrollRoot",role:"toolbar",class:(0,ds.C_)(e.computedClass),style:(0,ds.j5)(e.computedStyle)},[(0,r.WI)(e.$slots,"default")],6)},kc.__file="src/components/va-app-bar/VaAppBar.vue";const Sc=Ja(kc),Ec={loading:{type:Boolean,default:!1}};var Ic=function(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e},Ac=Fs,Fc=function(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=Ac(n))==n?n:0),void 0!==t&&(t=(t=Ac(t))==t?t:0),Ic(Ac(e),t,n)},Dc=(0,r.aZ)({name:"VaProgressCircle",props:{...Ll,modelValue:{type:Number,default:0},indeterminate:{type:Boolean,default:!1},thickness:{type:Number,default:.06},color:{type:String,default:"primary"}},setup(e){const{getColor:t}=fu(),{sizeComputed:n}=Wl(e),o=(0,r.Fl)((()=>Fc(e.thickness,0,1)/2*100)),a=(0,r.Fl)((()=>20-20*o.value/100)),i=(0,r.Fl)((()=>2*Math.PI*a.value)),s=(0,r.Fl)((()=>i.value*(1-Fc(e.modelValue,0,100)/100))),u=(0,r.Fl)((()=>t(e.color,void 0,!0)));return{infoStyle:(0,r.Fl)((()=>({color:u.value}))),rootStyle:(0,r.Fl)((()=>({width:n.value,height:n.value}))),rootClass:(0,r.Fl)((()=>({"va-progress-circle--indeterminate":e.indeterminate}))),ariaAttributesComputed:(0,r.Fl)((()=>({role:"progressbar",ariaLabel:"progress state",ariaValuenow:e.indeterminate?void 0:e.modelValue}))),colorComputed:u,radius:a,dasharray:i,dashoffset:s,cappedThickness:o}}});const Rc={class:"va-progress-circle__wrapper",viewBox:"0 0 40 40"},Tc=["r","stroke","stroke-width","stroke-dasharray","stroke-dashoffset"];Dc.render=function(e,t,n,o,a,i){return(0,r.wg)(),(0,r.iD)("div",(0,r.dG)({class:["va-progress-circle",e.rootClass],style:e.rootStyle},e.ariaAttributesComputed),[((0,r.wg)(),(0,r.iD)("svg",Rc,[(0,r._)("circle",{class:"va-progress-circle__overlay",cx:"50%",cy:"50%",r:e.radius,fill:"none",stroke:e.colorComputed,"stroke-width":e.cappedThickness+"%","stroke-dasharray":e.dasharray,"stroke-dashoffset":e.dashoffset},null,8,Tc)])),e.$slots.default?((0,r.wg)(),(0,r.iD)("div",{key:0,style:(0,ds.j5)(e.infoStyle),class:"va-progress-circle__info"},[(0,r.WI)(e.$slots,"default")],4)):(0,r.kq)("v-if",!0)],16)},Dc.__file="src/components/va-progress-circle/VaProgressCircle.vue";const Oc=Ja(Dc);var Pc=(0,r.aZ)({name:"VaAvatar",components:{VaIcon:vc,VaProgressCircle:Oc},props:{...Ec,...Ll,color:{type:String,default:"info"},textColor:{type:String,default:"white"},square:{type:Boolean,default:!1},icon:{type:String,default:""},src:{type:String,default:null},alt:{type:String,default:""},fontSize:{type:String,default:""}},setup(e){const{getColor:t}=fu(),n=(0,r.Fl)((()=>t(e.color))),{sizeComputed:o,fontSizeComputed:a}=Wl(e,"VaAvatar"),{textColorComputed:i}=hu(),s=(0,r.Fl)((()=>({color:i.value,backgroundColor:e.loading?"transparent":n.value,borderRadius:e.square?0:"",fontSize:e.fontSize||a.value,width:o.value,minWidth:o.value,height:o.value})));return{sizeComputed:o,computedStyle:s,colorComputed:n}}});const Bc=["aria-hidden"],Mc=["src","alt"];Pc.render=function(e,t,n,o,a,i){const s=(0,r.up)("va-progress-circle"),u=(0,r.up)("va-icon");return(0,r.wg)(),(0,r.iD)("div",{class:"va-avatar",style:(0,ds.j5)(e.computedStyle),"aria-hidden":!e.$props.src,"aria-live":"polite"},[(0,r.WI)(e.$slots,"default",{},(()=>[e.$props.loading?((0,r.wg)(),(0,r.j4)(s,{key:0,size:e.sizeComputed,color:e.colorComputed,indeterminate:""},null,8,["size","color"])):e.$props.src?((0,r.wg)(),(0,r.iD)("img",{key:1,src:e.$props.src,alt:e.$props.alt},null,8,Mc)):e.$props.icon?((0,r.wg)(),(0,r.j4)(u,{key:2,name:e.$props.icon},null,8,["name"])):(0,r.kq)("v-if",!0)]))],12,Bc)},Pc.__file="src/components/va-avatar/VaAvatar.vue";const Nc=Ja(Pc),Lc={tag:{type:String,default:"span"},to:{type:[String,Object],default:""},replace:{type:Boolean,default:!1},append:{type:Boolean,default:!1},exact:{type:Boolean,default:!1},activeClass:{type:String,default:""},exactActiveClass:{type:String,default:""},href:{type:String,default:""},target:{type:String,default:""},disabled:{type:Boolean,default:!1}},Vc=e=>{const t=(0,r.Fl)((()=>{var e;return null===(e=(0,r.FN)())||void 0===e?void 0:e.appContext.config.globalProperties})),n=(0,r.Fl)((()=>{var e;return!!(null===(e=t.value)||void 0===e?void 0:e.$nuxt)})),o=(0,r.Fl)((()=>{var e;return null===(e=t.value)||void 0===e?void 0:e.$router})),a=(0,r.Fl)((()=>{var e;return null===(e=t.value)||void 0===e?void 0:e.$route})),i=(0,r.Fl)((()=>e.disabled?e.tag:e.href&&!e.to?"a":e.to?n.value?"nuxt-link":"router-link":e.tag)),s=(0,r.Fl)((()=>["a","router-link","nuxt-link"].includes(i.value))),u=(0,r.Fl)((()=>{if(!o.value||!e.to)return!1;const t=o.value.resolve(e.to).href,n=o.value.currentRoute.value.path;return t.replace("#","")===n.replace("#","")})),l=(0,r.Fl)((()=>{var t;return e.href||(e.to?null===(t=o.value)||void 0===t?void 0:t.resolve(e.to,a.value).href:"")}));return{tagComputed:i,isActiveRouterLink:u,hrefComputed:l,isLinkTag:s}};var jc=(0,r.aZ)({name:"VaButton",components:{VaIcon:vc,VaProgressCircle:Oc},props:{...Ll,...Ec,...Lc,color:{type:String,default:"primary"},textColor:{type:String,default:void 0},tag:{type:String,default:"button"},outline:{type:Boolean,default:void 0},gradient:{type:Boolean,default:void 0},flat:{type:Boolean,default:void 0},type:{type:String,default:"button"},disabled:{type:Boolean,default:!1},block:{type:Boolean,default:!1},rounded:{type:Boolean,default:!0},round:{type:Boolean,default:void 0},spaceBetweenItems:{type:Boolean,default:void 0},icon:{type:String,default:void 0},iconRight:{type:String,default:void 0},size:{type:String,default:"medium",validator:e=>["medium","small","large"].includes(e)}},setup(e,{slots:t}){const n=(0,o.XI)(),{sizeComputed:a}=Wl(e),{tagComputed:i,hrefComputed:s}=Vc(e),u=(0,o.iH)(!1),l=(0,o.iH)(!1),{getColor:c,getGradientBackground:d,shiftHSLAColor:p}=fu(),f=(0,r.Fl)((()=>c(e.color))),h=(0,r.Fl)((()=>Boolean(e.outline||e.flat))),{textColorComputed:v}=hu(f,h),m=(0,r.Fl)((()=>{var e,n,r;return!!(null===(r=null===(n=null===(e=t.default)||void 0===e?void 0:e.call(t))||void 0===n?void 0:n[0])||void 0===r?void 0:r.children)})),g=(0,r.Fl)((()=>{switch(i.value){case"a":case"router-link":case"nuxt-link":return;default:return e.type}})),y=(0,r.Fl)((()=>Boolean(e.iconRight&&!e.icon||!e.iconRight&&e.icon))),b=(0,r.Fl)((()=>({"va-button--default":!e.flat&&!e.outline&&!e.disabled,"va-button--flat":e.flat,"va-button--outline":e.outline,"va-button--disabled":e.disabled,"va-button--hover":u.value,"va-button--focus":l.value,"va-button--large":"large"===e.size,"va-button--small":"small"===e.size,"va-button--normal":!e.size||"medium"===e.size,"va-button--loading":e.loading,"va-button--block":e.block,"va-button--square":!e.rounded,"va-button--round":e.round||!t.default&&y.value,"va-button--no-label":!m.value,"va-button--space-between-items":e.spaceBetweenItems}))),w=(0,r.Fl)((()=>{const e=/([0-9]*)(px)/.exec(a.value);return e?`${+e[1]/2}${e[2]}`:a.value})),x=(0,r.Fl)((()=>{const t=e.outline?f.value:"";let n=e.gradient?d(f.value):f.value;if(h.value&&(n="var(--va-transparent)"),u.value){const t=e.outline?-.9:-.8,r=5,o=h.value?p(f.value,{a:t}):p(f.value,{l:r});n=e.gradient?d(o):o}if(l.value){const t=e.outline?-.8:-.7,r=10,o=h.value?p(f.value,{a:t}):p(f.value,{l:r});n=e.gradient?d(o):o}return{color:v.value,borderColor:t,background:n}}));return{button:n,tagComputed:i,hrefComputed:s,computedClass:b,computedStyle:x,computedType:g,textColorComputed:v,loaderSize:w,focusState:l,hoverState:u,focus:()=>{var e;return null===(e=n.value)||void 0===e?void 0:e.focus()},blur:()=>{var e;return null===(e=n.value)||void 0===e?void 0:e.blur()}}}});jc.render=function(e,t,n,o,a,i){const s=(0,r.up)("va-icon"),u=(0,r.up)("va-progress-circle");return(0,r.wg)(),(0,r.j4)((0,r.LL)(e.tagComputed),(0,r.dG)({class:["va-button",e.computedClass],ref:"button","aria-live":"polite","aria-disabled":e.$props.disabled,style:e.computedStyle,disabled:e.$props.disabled,type:e.computedType,href:e.hrefComputed,target:e.$props.target,to:e.$props.to,replace:e.$props.replace,append:e.$props.append,"active-class":e.$props.activeClass,exact:e.$props.exact,"exact-active-class":e.$props.exactActiveClass,tabindex:e.loading?-1:0},(0,r.mx)(e.$attrs),{onFocus:t[0]||(t[0]=t=>e.focusState=!0),onBlur:t[1]||(t[1]=t=>e.focusState=!1),onMouseleave:t[2]||(t[2]=t=>e.hoverState=!1),onMouseenter:t[3]||(t[3]=t=>e.hoverState=!0)}),{default:(0,r.w5)((()=>[(0,r._)("div",{class:(0,ds.C_)(["va-button__content",{"va-button__content--loading":e.loading}])},[e.icon?((0,r.wg)(),(0,r.j4)(s,{key:0,class:"va-button__left-icon",name:e.icon,size:e.size,color:e.textColorComputed},null,8,["name","size","color"])):(0,r.kq)("v-if",!0),(0,r.WI)(e.$slots,"default"),e.iconRight?((0,r.wg)(),(0,r.j4)(s,{key:1,class:"va-button__right-icon",name:e.iconRight,size:e.size,color:e.textColorComputed},null,8,["name","size","color"])):(0,r.kq)("v-if",!0)],2),e.loading?((0,r.wg)(),(0,r.j4)(u,{key:0,class:"va-button__loader",indeterminate:"",size:e.loaderSize,color:e.computedStyle.color,thickness:.15},null,8,["size","color","thickness"])):(0,r.kq)("v-if",!0)])),_:3},16,["aria-disabled","class","style","disabled","type","href","target","to","replace","append","active-class","exact","exact-active-class","tabindex"])},jc.__file="src/components/va-button/VaButton.vue";const Wc=Ja(jc);var Hc=(0,r.aZ)({name:"VaBacktop",components:{VaButton:Wc},props:{target:{type:[Object,String],default:void 0},visibilityHeight:{type:Number,default:300},speed:{type:Number,default:50},verticalOffset:{type:String,default:"1rem"},horizontalOffset:{type:String,default:"1rem"},color:{type:String,default:""},horizontalPosition:{type:String,default:"right",validator:e=>["right","left"].includes(e)},verticalPosition:{type:String,default:"bottom",validator:e=>["bottom","top"].includes(e)}},setup(e){const t=(0,o.iH)(0),n=(0,r.Fl)((()=>({[e.verticalPosition]:e.verticalOffset,[e.horizontalPosition]:e.horizontalOffset})));let a;const i=(0,o.iH)(!1),s=(0,o.iH)(0),u=()=>{t.value=a instanceof Window?a.scrollY:a.scrollTop},l=(0,r.Fl)((()=>t.value>e.visibilityHeight));return(0,r.bv)((()=>{a=e.target?"string"==typeof e.target?document.querySelector(e.target):e.target:window,a.addEventListener("scroll",u,!0)})),(0,r.Jd)((()=>null==a?void 0:a.removeEventListener("scroll",u))),{computedStyle:n,visible:l,scrollToTop:()=>{i.value||(i.value=!0,a instanceof Window?window.scrollTo({top:0,behavior:"smooth"}):s.value=window.setInterval((()=>{if(a instanceof Element)if(0===a.scrollTop)clearInterval(s.value),i.value=!1;else{const t=Math.floor(a.scrollTop-e.speed);a.scrollTo(0,t)}}),15))}}}});Hc.render=function(e,t,n,o,a,i){const s=(0,r.up)("va-button");return e.visible?((0,r.wg)(),(0,r.iD)("div",{key:0,class:"va-backtop",role:"button","aria-label":"back to top",style:(0,ds.j5)(e.computedStyle),onClick:t[0]||(t[0]=(...t)=>e.scrollToTop&&e.scrollToTop(...t)),onKeydown:t[1]||(t[1]=(0,Ks.D2)((0,Ks.iM)(((...t)=>e.scrollToTop&&e.scrollToTop(...t)),["stop"]),["enter"]))},[(0,r.WI)(e.$slots,"default",{},(()=>[(0,r.Wm)(s,{"aria-hidden":"true",icon:"expand_less",color:e.color},null,8,["color"])]))],36)):(0,r.kq)("v-if",!0)},Hc.__file="src/components/va-backtop/VaBacktop.vue";const Uc=Ja(Hc);var zc=(0,r.aZ)({name:"VaBadge",props:{color:{type:String,default:"danger"},textColor:{type:String},text:{type:[String,Number],default:""},overlap:{type:Boolean,default:!1},multiLine:{type:Boolean,default:!1},visibleEmpty:{type:Boolean,default:!1},dot:{type:Boolean,default:!1},transparent:{type:Boolean,default:!1},left:{type:Boolean,default:!1},bottom:{type:Boolean,default:!1}},setup(e,{slots:t}){const n=(0,r.Fl)((()=>!(e.text||e.visibleEmpty||e.dot||t.text))),o=(0,r.Fl)((()=>t.default||e.dot)),a=(0,r.Fl)((()=>({"va-badge--visible-empty":e.visibleEmpty,"va-badge--empty":n.value,"va-badge--dot":e.dot,"va-badge--multiLine":e.multiLine,"va-badge--floating":o.value,"va-badge--left":e.left,"va-badge--bottom":e.bottom,"va-badge--overlap":e.overlap}))),{getColor:i}=fu(),{textColorComputed:s}=hu(),u=(0,r.Fl)((()=>i(e.color)));return{badgeClass:a,badgeStyle:(0,r.Fl)((()=>({color:s.value,borderColor:u.value,backgroundColor:u.value,opacity:e.transparent?.5:1})))}}});const $c={class:"va-badge__text"};zc.render=function(e,t,n,o,a,i){return(0,r.wg)(),(0,r.iD)("div",{class:(0,ds.C_)(["va-badge",e.badgeClass]),role:"alert"},[(0,r._)("span",{class:"va-badge__text-wrapper",style:(0,ds.j5)(e.badgeStyle)},[(0,r._)("span",$c,[(0,r.WI)(e.$slots,"text",{},(()=>[(0,r.Uk)((0,ds.zw)(e.text),1)]))])],4),(0,r.WI)(e.$slots,"default")],2)},zc.__file="src/components/va-badge/VaBadge.vue";const qc=Ja(zc),Gc={align:{type:String,default:"left"},vertical:{type:Boolean,default:!1}},Kc={left:"flex-start",center:"center",right:"flex-end",between:"space-between",around:"space-around"},Xc={left:"flex-start",center:"center",right:"flex-end",stretch:"stretch"},Yc=(e,t)=>t?Xc[e]:"center";function Zc(e){return{alignComputed:(0,r.Fl)((()=>{return{display:"flex",flexDirection:e.vertical?"column":"row",justifyContent:(t=e.align,n=e.vertical,n?"center":t?Kc[t]:"flex-start"),alignItems:Yc(e.align,e.vertical)};var t,n}))}}var Jc=(0,r.aZ)({name:"VaBreadcrumbs",props:{...Gc,separator:{type:String,default:"/"},color:{type:String,default:"gray"},activeColor:{type:String,default:null},separatorColor:{type:String,default:null}},setup(e,{slots:t}){const{alignComputed:n}=Zc(e),{getColor:a}=fu(),i=(0,r.Fl)((()=>e.separatorColor?a(e.separatorColor):a(e.color))),s=(0,r.Fl)((()=>e.activeColor?a(e.activeColor):a(e.color))),u=(e,t)=>[...e,...(t&&t.type===r.HY&&t.children?t.children:[t]).filter((e=>{var t,n;return!!(null===(n=null===(t=null==e?void 0:e.type)||void 0===t?void 0:t.name)||void 0===n?void 0:n.match(/VaBreadcrumbsItem$/))}))],l=e=>{const t=null==e?void 0:e.props;return!(!t||!Js(t,"disabled"))&&(""===t.disabled||Boolean(t.disabled))},c=(0,o.iH)(!0),d=()=>{var n;const o=(null===(n=null==t?void 0:t.default())||void 0===n?void 0:n.reduce(u,[]))||[],a=o.length,d=e=>e===a-1,p=e=>{const t=null==e?void 0:e.props;return!(!t||!Js(t,"to"))&&!(!t.to||t.disabled)},f=[];return a&&o.forEach(((n,o)=>{c.value&&!p(n)&&(c.value=!1),f.push(((e,t)=>(0,r.h)("span",{class:"va-breadcrumbs__item",ariaCurrent:!(!d(t)||!p(e))&&"location",style:{color:d(t)||l(e)?null:s.value}},[e]))(n,o)),d(o)||f.push((()=>{const n=t.separator?t.separator():[e.separator];return(0,r.h)("span",{ariaHidden:!0,class:["va-breadcrumbs__separator"],style:[{color:i.value}]},n)})())})),f};return()=>(0,r.h)("div",{class:"va-breadcrumbs",style:n.value,role:c.value?"navigation":void 0,ariaLabel:c.value?"breadcrumbs":void 0},d())}});Jc.__file="src/components/va-breadcrumbs/VaBreadcrumbs.vue";var Qc=(0,r.aZ)({name:"VaBreadcrumbsItem",props:{...Lc,disabled:{type:Boolean,default:!1},label:{type:String,default:""}},setup:e=>{const{tagComputed:t,hrefComputed:n,isLinkTag:o}=Vc(e);return{tagComputed:t,hrefComputed:n,classComputed:(0,r.Fl)((()=>({"va-breadcrumb-item--link":o.value})))}}});Qc.render=function(e,t,n,o,a,i){return(0,r.wg)(),(0,r.j4)((0,r.LL)(e.tagComputed),{class:(0,ds.C_)(["va-breadcrumb-item",e.classComputed]),"active-class":e.$props.activeClass,href:e.hrefComputed,to:e.$props.to,target:e.$props.target,replace:e.$props.replace,append:e.$props.append,exact:e.$props.exact,"exact-active-class":e.$props.exactActiveClass},{default:(0,r.w5)((()=>[(0,r.WI)(e.$slots,"default",{},(()=>[(0,r.Uk)((0,ds.zw)(e.label),1)]))])),_:3},8,["class","active-class","href","to","target","replace","append","exact","exact-active-class"])},Qc.__file="src/components/va-breadcrumbs/VaBreadcrumbsItem/VaBreadcrumbsItem.vue";const ed=Ja(Qc),td=Ja(Jc),nd=e=>"object"==typeof e?e.listen:e,rd=e=>"object"==typeof e?e.emit:e,od=e=>({createListeners:t=>e.reduce(((e,n)=>{return{...e,[(r=nd(n),`on${r.charAt(0).toUpperCase()+r.slice(1)}`)]:(...e)=>t(rd(n),...e)};var r}),{}),createVOnListeners:t=>e.reduce(((e,n)=>({...e,[nd(n)]:(...e)=>t(rd(n),...e)})),{}),createEmits:()=>e.map(rd)});var ad=function(e,t,n,r){var o=-1,a=null==e?0:e.length;for(r&&a&&(n=e[++o]);++o<a;)n=t(n,e[o],o,e);return n},id=function(e){return function(t){return null==e?void 0:e[t]}}({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),sd=_u,ud=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ld=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g"),cd=function(e){return(e=sd(e))&&e.replace(ud,id).replace(ld,"")},dd=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,pd=function(e){return e.match(dd)||[]},fd=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,hd=function(e){return fd.test(e)},vd="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",md="["+vd+"]",gd="\\d+",yd="[\\u2700-\\u27bf]",bd="[a-z\\xdf-\\xf6\\xf8-\\xff]",wd="[^\\ud800-\\udfff"+vd+gd+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",xd="(?:\\ud83c[\\udde6-\\uddff]){2}",Cd="[\\ud800-\\udbff][\\udc00-\\udfff]",_d="[A-Z\\xc0-\\xd6\\xd8-\\xde]",kd="(?:"+bd+"|"+wd+")",Sd="(?:"+_d+"|"+wd+")",Ed="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",Id="[\\ufe0e\\ufe0f]?"+Ed+"(?:\\u200d(?:"+["[^\\ud800-\\udfff]",xd,Cd].join("|")+")[\\ufe0e\\ufe0f]?"+Ed+")*",Ad="(?:"+[yd,xd,Cd].join("|")+")"+Id,Fd=RegExp([_d+"?"+bd+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[md,_d,"$"].join("|")+")",Sd+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[md,_d+kd,"$"].join("|")+")",_d+"?"+kd+"+(?:['’](?:d|ll|m|re|s|t|ve))?",_d+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",gd,Ad].join("|"),"g"),Dd=pd,Rd=hd,Td=_u,Od=function(e){return e.match(Fd)||[]},Pd=ad,Bd=cd,Md=function(e,t,n){return e=Td(e),void 0===(t=n?void 0:t)?Rd(e)?Od(e):Dd(e):e.match(t)||[]},Nd=RegExp("['’]","g"),Ld=function(e){return function(t){return Pd(Md(Bd(t).replace(Nd,"")),e,"")}},Vd=Ld((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}));const jd=(e,t)=>{Xs&&!e&&console.warn('You must pass the @param "prefix" to the useBem hook!');const n=(0,r.Fl)((()=>ee(t)?t():(0,o.SU)(t))),a=(0,r.Fl)((()=>Object.entries((0,o.SU)(n)).reduce(((t,[n,r])=>(r&&(t[`${e}--${Vd(n)}`]=!0),t)),{}))),i=(0,r.Fl)((()=>Object.keys(a.value))),s=(0,r.Fl)((()=>i.value.join(" ")));return new Proxy({},{ownKeys:()=>Reflect.ownKeys(a.value),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(a.value,t),get(e,t,n){switch(t){case"asArray":return i;case"asString":return s;case"asObject":return a;default:return Reflect.get(a.value,t,n)}}})},Wd=(e,t,n={})=>{(0,r.bv)((()=>window.addEventListener(e,t,{capture:!0,...n}))),(0,r.Jd)((()=>window.removeEventListener(e,t,{capture:!0,...n})))},Hd=(e,t)=>{Wd("click",(n=>{const r=n.target;var a;(a=e,Array.isArray(a)?a:[a]).some((e=>{return(0,o.SU)(e)&&(t=(0,o.SU)(e),!!(n=r)&&(n.parentElement===t||t.contains(n)));var t,n}))||t(r)}))},Ud=e=>{let t=null;const n=()=>Ms((()=>{null==t||t(),t=null}),(0,o.SU)(e));let a=n();return(0,o.dq)(e)&&(0,r.YP)(e,(()=>{a=n()})),{debounced:e=>{t=e,a()},cancel:()=>a.cancel()}};var zd=(0,r.aZ)({name:"VaDropdown",props:{...ns,stateful:{default:!0},modelValue:{type:Boolean,default:!1},disabled:{type:Boolean},readonly:{type:Boolean},anchorSelector:{type:String,default:""},attachElement:{type:String,default:"body"},disableAttachment:{type:Boolean,default:!1},keepAnchorWidth:{type:Boolean,default:!1},isContentHoverable:{type:Boolean,default:!0},closeOnContentClick:{type:Boolean,default:!0},closeOnClickOutside:{type:Boolean,default:!0},closeOnAnchorClick:{type:Boolean,default:!0},hoverOverTimeout:{type:Number,default:30},hoverOutTimeout:{type:Number,default:200},offset:{type:[Array,Number],default:0},trigger:{type:String,default:"click",validator:e=>["click","hover","none"].includes(e)},placement:{type:String,default:"bottom",validator:e=>Il.includes(e)}},emits:[...rs,"anchor-click","dropdown-content-click","click-outside"],setup(e,{emit:t}){const n=(0,o.XI)(),a=(0,o.XI)(),{valueComputed:i}=os(e,t),s=(0,r.Fl)({get:()=>i.value&&!e.disabled&&!e.readonly,set(e){i.value=e}}),u=jd("va-dropdown",(()=>Sl(e,["disabled"]))),l=(0,r.Fl)((()=>n.value&&e.anchorSelector&&n.value.querySelector(e.anchorSelector)||n.value));Bl(l,a,(0,r.Fl)((()=>({placement:e.placement,keepAnchorWidth:e.keepAnchorWidth,offset:e.offset,stickToEdges:!0,autoPlacement:!0,root:e.attachElement}))));const{debounced:c,cancel:d}=Ud((0,o.Vh)(e,"hoverOverTimeout")),{debounced:p,cancel:f}=Ud((0,o.Vh)(e,"hoverOutTimeout")),h=(e,n)=>{t(e),n&&(s.value=!1)};return Hd([n,a],(()=>{e.closeOnClickOutside&&s.value&&h("click-outside",e.closeOnClickOutside)})),{valueComputed:s,anchorRef:n,contentRef:a,computedClass:u,emitAndClose:h,onAnchorClick:()=>{"click"!==e.trigger||e.disabled||(s.value?h("anchor-click",e.closeOnAnchorClick):(s.value=!0,t("anchor-click")))},onMouseEnter:()=>{"hover"!==e.trigger||e.disabled||(c((()=>{s.value=!0})),f())},onMouseLeave:()=>{"hover"!==e.trigger||e.disabled||(e.isContentHoverable?p((()=>{s.value=!1})):s.value=!1,d())}}}});const $d=["aria-disabled","aria-expanded"];zd.render=function(e,t,n,o,a,i){return(0,r.wg)(),(0,r.iD)("div",{class:(0,ds.C_)(["va-dropdown",e.computedClass]),"aria-haspopup":"listbox","aria-disabled":e.$props.disabled,"aria-expanded":!!e.valueComputed},[(0,r._)("div",{ref:"anchorRef",class:"va-dropdown__anchor",onClick:t[0]||(t[0]=(...t)=>e.onAnchorClick&&e.onAnchorClick(...t)),onMouseenter:t[1]||(t[1]=(...t)=>e.onMouseEnter&&e.onMouseEnter(...t)),onMouseleave:t[2]||(t[2]=(...t)=>e.onMouseLeave&&e.onMouseLeave(...t))},[(0,r.WI)(e.$slots,"anchor")],544),e.valueComputed?((0,r.wg)(),(0,r.j4)(r.lR,{key:0,to:e.attachElement,disabled:e.disableAttachment},[(0,r._)("div",{ref:"contentRef",class:"va-dropdown__content-wrapper",onMouseover:t[3]||(t[3]=t=>e.$props.isContentHoverable&&e.onMouseEnter()),onMouseout:t[4]||(t[4]=(...t)=>e.onMouseLeave&&e.onMouseLeave(...t)),onClick:t[5]||(t[5]=(0,Ks.iM)((t=>e.emitAndClose("dropdown-content-click",e.closeOnContentClick)),["stop"]))},[(0,r.WI)(e.$slots,"default")],544)],8,["to","disabled"])):(0,r.kq)("v-if",!0)],10,$d)},zd.__file="src/components/va-dropdown/VaDropdown.vue";var qd=(0,r.aZ)({name:"VaDropdownContent",props:{noPadding:{type:Boolean,default:!1},background:{type:String,default:"white"},textColor:{type:String}},setup(e){const{getColor:t}=fu(),{textColorComputed:n}=hu((0,o.Vh)(e,"background"));return{computedStyle:(0,r.Fl)((()=>({background:t(e.background,void 0,!0),color:n.value,padding:e.noPadding?0:void 0})))}}});qd.render=function(e,t,n,o,a,i){return(0,r.wg)(),(0,r.iD)("div",{class:"va-dropdown__content",style:(0,ds.j5)(e.computedStyle),role:"listbox"},[(0,r.WI)(e.$slots,"default")],4)},qd.__file="src/components/va-dropdown/components/VaDropdownContent/VaDropdownContent.vue";const Gd=Ja(qd),Kd=Ja(zd);var Xd=(0,r.aZ)({name:"VaButtonGroup",components:{VaConfig:u},props:{color:{type:String,default:"primary"},gradient:{type:Boolean,default:void 0},textColor:{type:String,default:void 0},rounded:{type:Boolean,default:!0},outline:{type:Boolean,default:!1},flat:{type:Boolean,default:!1},size:{type:String,default:"medium",validator:e=>["medium","small","large"].includes(e)}},setup(e){const{getColor:t,getGradientBackground:n}=fu(),o=(0,r.Fl)((()=>t(e.color))),a=(0,r.Fl)((()=>Boolean(e.outline||e.flat))),{textColorComputed:i}=hu(o,a),s=(0,r.Fl)((()=>e.outline||e.flat?"":e.gradient?n(o.value):o.value)),u=(0,r.Fl)((()=>({[e.gradient?"background-image":"background"]:s.value,color:i.value})));return{buttonConfig:(0,r.Fl)((()=>({VaButton:{...e,color:e.gradient?"#00000000":e.color,textColor:i.value}}))),computedStyle:u,computedClass:(0,r.Fl)((()=>({"va-button-group_square":!e.rounded})))}}});Xd.render=function(e,t,n,o,a,i){const s=(0,r.up)("va-config");return(0,r.wg)(),(0,r.iD)("div",{class:(0,ds.C_)(["va-button-group",e.computedClass]),style:(0,ds.j5)(e.computedStyle)},[(0,r.Wm)(s,{components:e.buttonConfig},{default:(0,r.w5)((()=>[(0,r.WI)(e.$slots,"default")])),_:3},8,["components"])],6)},Xd.__file="src/components/va-button-group/VaButtonGroup.vue";const Yd=Ja(Xd),{createEmits:Zd,createVOnListeners:Jd}=od(["click"]),{createEmits:Qd,createVOnListeners:ep}=od([{listen:"click",emit:"main-button-click"}]);var tp=(0,r.aZ)({name:"VaButtonDropdown",components:{VaButtonGroup:Yd,VaButton:Wc,VaDropdown:Kd,VaDropdownContent:Gd},emits:["update:modelValue",...Zd(),...Qd()],props:{...ns,modelValue:{type:Boolean,default:!1},stateful:{type:Boolean,default:!0},color:{type:String,default:"primary"},textColor:{type:String,default:void 0},size:{type:String,default:"medium",validator:e=>["medium","small","large"].includes(e)},outline:{type:Boolean,default:!1},flat:{type:Boolean,default:!1},rounded:{type:Boolean,default:!0},gradient:{type:Boolean,default:void 0},icon:{type:String,default:"expand_more"},openedIcon:{type:String,default:"expand_less"},hideIcon:{type:Boolean,default:!1},leftIcon:{type:Boolean,default:!1},disableButton:{type:Boolean,default:!1},disableDropdown:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},placement:{type:String,default:"bottom",validator:e=>Il.includes(e)},offset:{type:[Number,Array],default:2},keepAnchorWidth:{type:Boolean,default:!1},closeOnContentClick:{type:Boolean,default:!0},split:{type:Boolean},splitTo:{type:String,default:""},splitHref:{type:String,default:""},loading:{type:Boolean,default:!1},label:{type:String}},setup(e,{emit:t,slots:n}){const{valueComputed:o}=os(e,t),a=(0,r.Fl)((()=>o.value?e.openedIcon:e.icon)),i=(0,r.Fl)((()=>({"va-button-dropdown":!0,"va-button-dropdown--split":e.split,"va-button-dropdown--normal":"medium"===e.size,"va-button-dropdown--large":"large"===e.size,"va-button-dropdown--small":"small"===e.size}))),s=(0,r.Fl)((()=>{const t=!e.label&&!n.label||e.leftIcon?"icon":"icon-right";return e.hideIcon?{}:{[t]:a.value}})),u=(0,r.Fl)((()=>Sl(e,["outline","gradient","rounded","flat","size","color"]))),l=(0,r.Fl)((()=>({to:e.splitTo,href:e.splitHref,loading:e.loading})));return{hideDropdown:()=>{o.value=!1},valueComputed:o,computedIcon:a,computedClass:i,listeners:Jd(t),mainButtonListeners:ep(t),computedButtonIcons:s,computedViewStyles:u,computedMainButtonProps:l}}});tp.render=function(e,t,n,o,a,i){const s=(0,r.up)("va-button"),u=(0,r.up)("va-dropdown-content"),l=(0,r.up)("va-dropdown"),c=(0,r.up)("va-button-group");return(0,r.wg)(),(0,r.iD)("div",{class:(0,ds.C_)(e.computedClass)},[e.$props.split?((0,r.wg)(),(0,r.j4)(c,(0,r.dG)({key:1,class:{"va-button-group__left-icon":e.$props.leftIcon}},e.computedViewStyles),{default:(0,r.w5)((()=>[e.$props.leftIcon?(0,r.kq)("v-if",!0):((0,r.wg)(),(0,r.j4)(s,(0,r.dG)({key:0,disabled:e.$props.disabled||e.$props.disableButton},e.computedMainButtonProps,(0,r.mx)(e.mainButtonListeners)),{default:(0,r.w5)((()=>[(0,r.WI)(e.$slots,"label",{},(()=>[(0,r.Uk)((0,ds.zw)(e.label),1)]))])),_:3},16,["disabled"])),(0,r.Wm)(l,{disabled:e.$props.disabled||e.$props.disableDropdown,placement:e.$props.placement,offset:e.$props.offset,stateful:e.$props.stateful,modelValue:e.valueComputed,"onUpdate:modelValue":t[1]||(t[1]=t=>e.valueComputed=t)},{anchor:(0,r.w5)((()=>[(0,r.Wm)(s,(0,r.dG)({"aria-label":"toggle dropdown",disabled:e.$props.disabled||e.$props.disableDropdown,icon:e.computedIcon},(0,r.mx)(e.listeners),{onKeydown:(0,Ks.D2)((0,Ks.iM)(e.hideDropdown,["prevent"]),["esc"])}),null,16,["disabled","icon","onKeydown"])])),default:(0,r.w5)((()=>[(0,r.Wm)(u,null,{default:(0,r.w5)((()=>[(0,r.WI)(e.$slots,"default")])),_:3})])),_:3},8,["disabled","placement","offset","stateful","modelValue"]),e.$props.leftIcon?((0,r.wg)(),(0,r.j4)(s,(0,r.dG)({key:1,disabled:e.$props.disabled||e.$props.disableButton},e.computedMainButtonProps,(0,r.mx)(e.mainButtonListeners)),{default:(0,r.w5)((()=>[(0,r.WI)(e.$slots,"label",{},(()=>[(0,r.Uk)((0,ds.zw)(e.label),1)]))])),_:3},16,["disabled"])):(0,r.kq)("v-if",!0)])),_:3},16,["class"])):((0,r.wg)(),(0,r.j4)(l,{key:0,disabled:e.$props.disabled,placement:e.$props.placement,offset:e.$props.offset,"keep-anchor-width":e.$props.keepAnchorWidth,"close-on-content-click":e.$props.closeOnContentClick,stateful:e.$props.stateful,modelValue:e.valueComputed,"onUpdate:modelValue":t[0]||(t[0]=t=>e.valueComputed=t)},{anchor:(0,r.w5)((()=>[(0,r.Wm)(s,(0,r.dG)({disabled:e.$props.disabled,round:!e.$props.label&&!e.$slots.label},{...e.computedButtonIcons,...e.computedViewStyles},(0,r.mx)(e.listeners),{onKeydown:(0,Ks.D2)((0,Ks.iM)(e.hideDropdown,["prevent"]),["esc"])}),{default:(0,r.w5)((()=>[(0,r.WI)(e.$slots,"label",{},(()=>[(0,r.Uk)((0,ds.zw)(e.label),1)]))])),_:3},16,["disabled","round","onKeydown"])])),default:(0,r.w5)((()=>[(0,r.Wm)(u,null,{default:(0,r.w5)((()=>[(0,r.WI)(e.$slots,"default")])),_:3})])),_:3},8,["disabled","placement","offset","keep-anchor-width","close-on-content-click","stateful","modelValue"]))],2)},tp.__file="src/components/va-button-dropdown/VaButtonDropdown.vue";const np=Ja(tp);var rp=(0,r.aZ)({name:"VaButtonToggle",components:{VaButtonGroup:Yd,VaButton:Wc},emits:["update:modelValue"],props:{options:{type:Array,required:!0},color:{type:String,default:"primary"},textColor:{type:String,default:void 0},activeButtonTextColor:{type:String},modelValue:{type:[String,Number],default:""},outline:{type:Boolean,default:!1},flat:{type:Boolean,default:!1},rounded:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},size:{type:String,default:"medium",validator:e=>["medium","small","large"].includes(e)},toggleColor:{type:String,default:""},gradient:{type:Boolean,default:!1}},setup(e,{emit:t}){const{getColor:n}=fu(),o=(0,r.Fl)((()=>n(e.color))),a=(0,r.Fl)((()=>e.outline||e.flat)),i=(0,r.Fl)((()=>e.toggleColor?n(e.toggleColor):a.value?o.value:lu(o.value,{l:-6}))),{textColorComputed:s}=hu(i),u=t=>t===e.modelValue;return{getButtonProps:(t={})=>{var n;const r={icon:t.icon,iconRight:t.iconRight};return u(t.value)?{color:i.value,textColor:null!==(n=e.activeButtonTextColor)&&void 0!==n?n:s.value,...r,...a.value&&{outline:!1,flat:!1}}:r},getButtonClass:e=>({"va-button--active":u(e)}),changeValue:e=>t("update:modelValue",e),isToggled:u}}});const op={class:"va-button-toggle"};rp.render=function(e,t,n,o,a,i){const s=(0,r.up)("va-button"),u=(0,r.up)("va-button-group");return(0,r.wg)(),(0,r.iD)("div",op,[(0,r.Wm)(u,{color:e.color,textColor:e.textColor,rounded:e.rounded,outline:e.outline,flat:e.flat,gradient:e.gradient},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.options,(t=>((0,r.wg)(),(0,r.j4)(s,(0,r.dG)({key:t.value,"aria-pressed":e.isToggled(t.value),class:e.getButtonClass(t.value),disabled:e.disabled,size:e.size},e.getButtonProps(t),{onClick:n=>e.changeValue(t.value)}),{default:(0,r.w5)((()=>[(0,r.Uk)((0,ds.zw)(t.label),1)])),_:2},1040,["aria-pressed","class","disabled","size","onClick"])))),128))])),_:1},8,["color","textColor","rounded","outline","flat","gradient"])])},rp.__file="src/components/va-button-toggle/VaButtonToggle.vue";const ap=Ja(rp);var ip=(0,r.aZ)({name:"VaCard",emits:["click"],props:{...Lc,tag:{type:String,default:"div"},square:{type:Boolean,default:!1},outlined:{type:Boolean,default:!1},bordered:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},href:{type:String,default:""},target:{type:String,default:""},stripe:{type:Boolean,default:!1},stripeColor:{type:String,default:""},gradient:{type:Boolean,default:!1},textColor:{type:String},color:{type:String,default:"white"}},setup(e){const{getColor:t}=fu(),{isLinkTag:n,tagComputed:o,hrefComputed:a}=Vc(e),{textColorComputed:i}=hu(),s=(0,r.Fl)((()=>({background:t(e.stripeColor)})));return{cardClasses:(0,r.Fl)((()=>({"va-card--square":e.square,"va-card--outlined":e.outlined,"va-card--no-border":!e.bordered,"va-card--disabled":e.disabled,"va-card--link":n.value}))),cardStyles:(0,r.Fl)((()=>e.gradient&&e.color?{background:du(t(e.color)),color:i.value}:{background:t(e.color),color:i.value})),stripeStyles:s,tagComputed:o,hrefComputed:a}}});ip.render=function(e,t,n,o,a,i){return(0,r.wg)(),(0,r.j4)((0,r.LL)(e.tagComputed),{class:(0,ds.C_)(["va-card",e.cardClasses]),style:(0,ds.j5)(e.cardStyles),href:e.hrefComputed,target:e.target,to:e.to,replace:e.replace,exact:e.exact,"active-class":e.activeClass,"exact-active-class":e.exactActiveClass},{default:(0,r.w5)((()=>[e.stripe?((0,r.wg)(),(0,r.iD)("div",{key:0,class:"va-card__stripe",style:(0,ds.j5)(e.stripeStyles)},null,4)):(0,r.kq)("v-if",!0),(0,r._)("div",{class:"va-card__inner",onClick:t[0]||(t[0]=t=>e.$emit("click",t))},[(0,r.WI)(e.$slots,"default")])])),_:3},8,["class","style","href","target","to","replace","exact","active-class","exact-active-class"])},ip.__file="src/components/va-card/VaCard.vue";var sp=(0,r.aZ)({name:"VaCardContent"});const up={class:"va-card__content"};sp.render=function(e,t,n,o,a,i){return(0,r.wg)(),(0,r.iD)("div",up,[(0,r.WI)(e.$slots,"default")])},sp.__file="src/components/va-card/VaCardContent.vue";var lp=(0,r.aZ)({name:"VaCardTitle",props:{textColor:{type:String}},setup(e){const{getColor:t}=fu();return{titleStyles:(0,r.Fl)((()=>({color:e.textColor?t(e.textColor):""})))}}});lp.render=function(e,t,n,o,a,i){return(0,r.wg)(),(0,r.iD)("div",{class:"va-card__title",style:(0,ds.j5)(e.titleStyles)},[(0,r.WI)(e.$slots,"default")],4)},lp.__file="src/components/va-card/VaCardTitle.vue";var cp=(0,r.aZ)({name:"VaCardActions",props:{...Gc},setup(e){const{alignComputed:t}=Zc(e);return{alignComputed:t}}});cp.render=function(e,t,n,o,a,i){return(0,r.wg)(),(0,r.iD)("div",{class:(0,ds.C_)([e.vertical?"va-card__actions_vertical":"va-card__actions"]),style:(0,ds.j5)(e.alignComputed)},[(0,r.WI)(e.$slots,"default")],6)},cp.__file="src/components/va-card/VaCardActions.vue";const dp=Ja(sp),pp=Ja(lp),fp=Ja(cp),hp=Ja(ip);var vp=(0,r.aZ)({name:"VaImage",emits:["loaded","error"],props:{ratio:{type:Number,default:1},contain:{type:Boolean,default:!1},src:{type:String,required:!0},alt:{type:String,default:""}},setup(e,{emit:t}){const n=(0,o.iH)(!0),a=(0,o.iH)(!1),i=(0,r.Fl)((()=>({objectFit:e.contain?"contain":"cover"}))),s=(0,r.Fl)((()=>({paddingBottom:1/e.ratio*100+"%"})));return(0,r.YP)((()=>e.src),(()=>{n.value=!0,a.value=!1})),{loading:n,loadingError:a,imageStyles:i,paddingStyles:s,handleLoad:()=>{n.value=!1,t("loaded",e.src)},handleError:e=>{a.value=!0,n.value=!1,t("error",e)}}}});const mp={class:"va-image","aria-live":"polite"},gp={key:0,class:"va-image__error"},yp={class:"va-image__img"},bp=["src","alt"],wp={class:"va-image__overlay"},xp={key:1,class:"va-image__loader"};vp.render=function(e,t,n,o,a,i){return(0,r.wg)(),(0,r.iD)("div",mp,[e.loadingError?((0,r.wg)(),(0,r.iD)("div",gp,[(0,r.WI)(e.$slots,"error")])):(0,r.kq)("v-if",!0),(0,r._)("div",{style:(0,ds.j5)(e.paddingStyles)},null,4),(0,r.wy)((0,r._)("div",yp,[(0,r._)("img",{style:(0,ds.j5)(e.imageStyles),src:e.$props.src,alt:e.$props.alt,onError:t[0]||(t[0]=(...t)=>e.handleError&&e.handleError(...t)),onLoad:t[1]||(t[1]=(...t)=>e.handleLoad&&e.handleLoad(...t))},null,44,bp)],512),[[Ks.F8,!e.loadingError&&!e.loading]]),(0,r._)("div",wp,[(0,r.WI)(e.$slots,"default")]),e.loading?((0,r.wg)(),(0,r.iD)("div",xp,[(0,r.WI)(e.$slots,"loader")])):(0,r.kq)("v-if",!0)])},vp.__file="src/components/va-image/VaImage.vue";const Cp=Ja(vp);var _p=(0,r.aZ)({name:"VaHover",props:{...ns,disabled:{type:Boolean,default:!1},modelValue:{type:Boolean,default:!1}},emits:rs,setup(e,{emit:t}){const{valueComputed:n}=os(e,t);return{onMouseEnter:()=>{e.disabled||(n.value=!0)},onMouseLeave:()=>{e.disabled||(n.value=!1)},valueComputed:n}}});_p.render=function(e,t,n,o,a,i){return(0,r.wg)(),(0,r.iD)("div",{class:"va-hover",onMouseenter:t[0]||(t[0]=(...t)=>e.onMouseEnter&&e.onMouseEnter(...t)),onMouseleave:t[1]||(t[1]=(...t)=>e.onMouseLeave&&e.onMouseLeave(...t))},[(0,r.WI)(e.$slots,"default",(0,ds.vs)((0,r.F4)({hover:e.valueComputed})))],32)},_p.__file="src/components/va-hover/VaHover.vue";const kp=Ja(_p),Sp=(e,t)=>{let n=-1,a=1;const i=()=>{e.autoscroll&&(clearInterval(n),n=setInterval((()=>{e.infinite?(t.value+=1,t.value>=e.items.length&&(t.value=0)):(t.value<=0&&(a=1),t.value>=e.items.length-1&&(a=-1),t.value+=a)}),e.autoscrollInterval))};let s;const u=()=>{e.autoscroll&&(clearInterval(n),s=setTimeout((()=>{i(),clearTimeout(s)}),e.autoscrollPauseDuration))},l=()=>{clearInterval(n),clearTimeout(s)};(0,r.bv)((()=>i())),(0,r.Jd)((()=>l()));const c=(0,o.iH)({transition:void 0}),d=(0,o.iH)(0),p=(0,r.Fl)((()=>"fade"===e.effect?{...c.value,transition:"none"}:e.vertical?{...c.value,transform:`translateY(${-100*d.value}%)`}:{...c.value,transform:`translateX(${-100*d.value}%)`})),f={isAnimating:!1,speed:.3,order:[],move(t,n){const r=e.items.length-1,o=e.items.length;0===n&&t===r?(this.order.push({to:o}),this.order.push({to:0,animate:!1})):n===r&&0===t?(this.order.push({to:o,animate:!1}),this.order.push({to:n})):this.order.push({to:n}),this.isAnimating||this.runAnimation()},runAnimation(){this.isAnimating=!0;const e=this.order.shift();e?(d.value=null==e?void 0:e.to,e.animate||void 0===e.animate?(c.value.transition=`all ${this.speed}s linear`,setTimeout((()=>{this.runAnimation()}),1e3*this.speed)):(c.value.transition="none",setTimeout((()=>{this.runAnimation()}),16))):this.isAnimating=!1}};(0,r.YP)(t,((e,t)=>{f.move(t,e)}));const h=(0,r.Fl)((()=>"fade"===e.effect?[e.items[t.value]]:e.infinite?[...e.items,e.items[0]]:e.items));return{start:i,pause:u,stop:l,withPause:e=>(...t)=>{u(),e(...t)},computedSlidesStyle:p,slides:h}},Ep=()=>{const{setHSLAColor:e,getColor:t}=fu();return{computedColor:(0,r.Fl)((()=>e(t("dark"),{a:.7}))),computedHoverColor:(0,r.Fl)((()=>e(t("primary"),{a:.7}))),computedActiveColor:(0,r.Fl)((()=>t("primary")))}};var Ip=(0,r.aZ)({name:"VaCarousel",components:{VaImage:Cp,VaButton:Wc,VaHover:kp},props:{...ns,modelValue:{type:Number,default:0},items:{type:Array,required:!0},autoscroll:{type:Boolean,default:!1},autoscrollInterval:{type:Number,default:1e3},autoscrollPauseDuration:{type:Number,default:2e3},infinite:{type:Boolean,default:!1},fadeKeyframe:{type:String,default:"va-carousel-fade-appear 1s"},arrows:{type:Boolean,default:!0},indicators:{type:Boolean,default:!0},indicatorTrigger:{type:String,default:"click",validator:e=>["click","hover"].includes(e)},vertical:{type:Boolean,default:!1},height:{type:String,default:"300px"},effect:{type:String,default:"transition",validator:e=>["fade","transition"].includes(e)},color:{type:String,default:"primary"}},emits:rs,setup(e,{emit:t}){const{valueComputed:n}=os(e,t,0),{goTo:o,next:a,prev:i,doShowNextButton:s,doShowPrevButton:u}=((e,t)=>({doShowPrevButton:(0,r.Fl)((()=>t.value>0||e.infinite)),doShowNextButton:(0,r.Fl)((()=>t.value<e.items.length-1||e.infinite)),goTo:e=>{t.value=e},prev:()=>{e.infinite&&t.value<=0?t.value=e.items.length-1:t.value-=1},next:()=>{e.infinite&&t.value>=e.items.length-1?t.value=0:t.value+=1}}))(e,n),{withPause:l,computedSlidesStyle:c,slides:d}=Sp(e,n),p=(0,r.Fl)((()=>e.items.length&&e.items.every((e=>!!e&&"object"==typeof e&&!!(null==e?void 0:e.src)))));return{doShowNextButton:s,doShowPrevButton:u,computedSlidesStyle:c,goTo:l(o),prev:l(i),next:l(a),slides:d,isObjectSlides:p,isCurrentSlide:e=>+e===n.value,...Ep()}}});const Ap={key:1,class:"va-carousel__indicators"},Fp={class:"va-carousel__content"},Dp=["aria-hidden","aria-current","aria-label"];Ip.render=function(e,t,n,o,a,i){const s=(0,r.up)("va-button"),u=(0,r.up)("va-hover"),l=(0,r.up)("va-image");return(0,r.wg)(),(0,r.iD)("div",{class:(0,ds.C_)(["va-carousel",{"va-carousel--vertical":e.$props.vertical,[`va-carousel--${e.$props.effect}`]:!0}]),style:(0,ds.j5)({height:e.height}),role:"region","aria-label":"carousel"},[e.$props.arrows?((0,r.wg)(),(0,r.iD)(r.HY,{key:0},[e.doShowPrevButton?((0,r.wg)(),(0,r.iD)("div",{key:0,class:"va-carousel__arrow va-carousel__arrow--left",onClick:t[0]||(t[0]=(...t)=>e.prev&&e.prev(...t)),onKeydown:t[1]||(t[1]=(0,Ks.D2)((0,Ks.iM)(((...t)=>e.prev&&e.prev(...t)),["stop"]),["enter"]))},[(0,r.WI)(e.$slots,"prev-arrow",{},(()=>[(0,r.Wm)(u,{stateful:""},{default:(0,r.w5)((({hover:t})=>[(0,r.Wm)(s,{color:t?e.computedHoverColor:e.computedColor,icon:e.vertical?"expand_less":"chevron_left","aria-label":"go previous slide"},null,8,["color","icon"])])),_:1})]))],32)):(0,r.kq)("v-if",!0),e.doShowNextButton?((0,r.wg)(),(0,r.iD)("div",{key:1,class:"va-carousel__arrow va-carousel__arrow--right",onClick:t[2]||(t[2]=(...t)=>e.next&&e.next(...t)),onKeydown:t[3]||(t[3]=(0,Ks.D2)((0,Ks.iM)(((...t)=>e.next&&e.next(...t)),["stop"]),["enter"]))},[(0,r.WI)(e.$slots,"next-arrow",{},(()=>[(0,r.Wm)(u,{stateful:""},{default:(0,r.w5)((({hover:t})=>[(0,r.Wm)(s,{color:t?e.computedHoverColor:e.computedColor,icon:e.vertical?"expand_more":"chevron_right","aria-label":"go next slide"},null,8,["color","icon"])])),_:1})]))],32)):(0,r.kq)("v-if",!0)],64)):(0,r.kq)("v-if",!0),e.$props.indicators?((0,r.wg)(),(0,r.iD)("div",Ap,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.$props.items,((t,n)=>((0,r.wg)(),(0,r.iD)("div",(0,r.dG)({class:["va-carousel__indicator",{"va-carousel__indicator--active":n===e.modelValue}],key:n},"hover"===e.indicatorTrigger?{onmouseover:()=>e.goTo(n)}:{onclick:()=>e.goTo(n)}),[(0,r.WI)(e.$slots,"indicator",(0,ds.vs)((0,r.F4)({item:t,index:n,goTo:e.goTo,isActive:e.isCurrentSlide(n)})),(()=>[(0,r.Wm)(u,{stateful:""},{default:(0,r.w5)((({hover:t})=>[(0,r.Wm)(s,{"aria-label":`go slide #${n+1}`,round:"",color:e.isCurrentSlide(n)?e.computedActiveColor:t?e.computedHoverColor:e.computedColor},{default:(0,r.w5)((()=>[(0,r.Uk)((0,ds.zw)(n+1),1)])),_:2},1032,["aria-label","color"])])),_:2},1024)]))],16)))),128))])):(0,r.kq)("v-if",!0),(0,r._)("div",Fp,[(0,r._)("div",{class:"va-carousel__slides",style:(0,ds.j5)(e.computedSlidesStyle),role:"list"},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.slides,((t,n)=>((0,r.wg)(),(0,r.iD)("div",{class:"va-carousel__slide",key:t,style:(0,ds.j5)("fade"===e.effect?{animation:e.fadeKeyframe}:""),role:"listitem","aria-hidden":!e.isCurrentSlide(n),"aria-current":e.isCurrentSlide(n),"aria-label":`slide ${n+1} of ${e.slides.length}`},[(0,r.WI)(e.$slots,"default",(0,ds.vs)((0,r.F4)({item:t,index:n,goTo:e.goTo,isActive:e.isCurrentSlide(n)})),(()=>[(0,r.Wm)(l,{src:e.isObjectSlides?t.src:t,alt:e.isObjectSlides?t.alt:""},null,8,["src","alt"])]))],12,Dp)))),128))],4)])],6)},Ip.__file="src/components/va-carousel/VaCarousel.vue";const Rp=Ja(Ip);function Tp(){const e=(0,o.iH)(!1);let t=!1;const n={mousedown:()=>{t=!0},focus:()=>{t||(e.value=!0),t=!1},blur:()=>{e.value=!1,t=!1}};return{hasKeyboardFocus:e,keyboardFocusListeners:n}}function Op(e,t,n,a){if(void 0===a)return[(0,r.Fl)({set(t){n(`update:${e}`,t)},get:()=>t[e]})];const i=t[e],s=(0,o.iH)(void 0===i?a:i);return(0,r.YP)((()=>t[e]),(e=>{void 0!==e&&(s.value=e)})),[(0,r.Fl)({set(t){s.value=t,n(`update:${e}`,t)},get:()=>void 0===t[e]?s.value:t[e]})]}const Pp=["focus","blur"];function Bp(e,t){const n=(0,o.iH)(!1),a=e=>{n.value=!0,null==t||t("focus",e)},i=e=>{n.value=!1,null==t||t("blur",e)};return e&&((0,r.bv)((()=>{var t,n;(null==e?void 0:e.value)instanceof HTMLElement&&(null===(t=e.value)||void 0===t||t.addEventListener("focus",a),null===(n=e.value)||void 0===n||n.addEventListener("blur",i))})),(0,r.Jd)((()=>{var t,n;(null==e?void 0:e.value)instanceof HTMLElement&&(null===(t=e.value)||void 0===t||t.removeEventListener("focus",a),null===(n=e.value)||void 0===n||n.removeEventListener("blur",i))}))),{isFocused:n,onFocus:a,onBlur:i,focus:()=>{var t;null===(t=null==e?void 0:e.value)||void 0===t||t.focus()},blur:()=>{var t;null===(t=null==e?void 0:e.value)||void 0===t||t.blur()}}}const Mp=Symbol("FormService");var Np=Y,Lp=Ut,Vp=Pt,jp=function(e){return"string"==typeof e||!Lp(e)&&Vp(e)&&"[object String]"==Np(e)};const Wp={modelValue:{required:!1},error:{type:Boolean,default:void 0},errorMessages:{type:[Array,String],default:void 0},errorCount:{type:[String,Number],default:1},rules:{type:Array,default:()=>[]},success:{type:Boolean,default:!1},messages:{type:[Array,String],default:()=>[]},immediateValidation:{type:Boolean,default:!1}},Hp=["update:error","update:errorMessages"],Up=(e,t,n,o)=>{const{isFocused:a,onFocus:i,onBlur:s}=Bp(),[u]=Op("error",e,t,!1),[l]=Op("errorMessages",e,t,[]),c=()=>{u.value=!1,l.value=[]},d=()=>{if(!e.rules||!e.rules.length)return!0;let t=!1,n=[];return((e=[],t=null)=>(jp(e)&&(e=[e]),e.map((e=>ee(e)?e(t):e))))(bl(e.rules),e.modelValue).forEach((e=>{jp(e)?(n=[...n,e],t=!0):!1===e&&(t=!0)})),l.value=n,u.value=t,!t};(0,r.YP)(a,(e=>!e&&d())),(0,r.YP)((()=>e.modelValue),(()=>d()),{immediate:e.immediateValidation});const p={resetValidation:c,focus:o,validate:d,reset:n,hasError:()=>u.value},f=(0,r.f3)(Mp,void 0);return(0,r.bv)((()=>{null==f||f.onChildMounted(p)})),(0,r.Jd)((()=>{null==f||f.onChildUnmounted(p)})),{computedError:u,computedErrorMessages:l,listeners:{onFocus:i,onBlur:s},validate:d,resetValidation:c}};var zp=(0,r.aZ)({name:"VaMessageList",props:{modelValue:{type:[String,Array],default:""},limit:{type:Number,default:1},color:{type:String}},setup(e){const{getColor:t}=fu();return{messages:(0,r.Fl)((()=>e.modelValue?Array.isArray(e.modelValue)?e.modelValue.slice(0,e.limit):[e.modelValue]:[])),computedStyle:(0,r.Fl)((()=>e.color?{color:t(e.color)}:{}))}}});zp.render=function(e,t,n,o,a,i){return e.messages.length?((0,r.wg)(),(0,r.iD)("div",{key:0,class:"va-message-list",style:(0,ds.j5)(e.computedStyle)},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.messages,((e,t)=>((0,r.wg)(),(0,r.iD)("div",{key:t,class:"va-message-list__message"},(0,ds.zw)(e),1)))),128))],4)):(0,r.kq)("v-if",!0)},zp.__file="src/components/va-input/components/VaMessageList/VaMessageList.vue";const $p=Ja(zp),qp={...ns,...Ec,...Wp,arrayValue:{type:null,default:null},label:{type:String,default:""},leftLabel:{type:Boolean,default:!1},trueValue:{type:null,default:!0},falseValue:{type:null,default:!1},indeterminate:{type:Boolean,default:!1},indeterminateValue:{type:null,default:null},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1}},Gp=[...Hp,"update:modelValue","focus","blur"],Kp=(e,t,{input:n,label:o,container:a})=>{(e=>{const t=[e.falseValue,e.trueValue];if(e.indeterminate&&t.push(e.indeterminateValue),new Set(t).size!==t.length)throw new Error("falseValue, trueValue, indeterminateValue props should have strictly different values, which is not the case.")})(e);const i=()=>t("update:modelValue",!1),s=()=>{var e;return null===(e=n.value)||void 0===e?void 0:e.focus()},{computedError:u,computedErrorMessages:l,validate:c}=Up(e,t,i,s),{valueComputed:d}=os(e,t),{isFocused:p}=Bp(),f=(0,r.Fl)((()=>!!e.indeterminate&&d.value===e.indeterminateValue)),h=(0,r.Fl)((()=>null!==e.arrayValue)),v=(0,r.Fl)((()=>{var t;return h.value?null===(t=e.modelValue)||void 0===t?void 0:t.includes(e.arrayValue):d.value===e.trueValue}));return{isChecked:v,isIndeterminate:f,onBlur:e=>{var r;n.value!==e.target||(r=e.relatedTarget)&&[o.value,a.value].includes(r)||(p.value=!1,u.value=!1,c(),t("blur",e))},onFocus:e=>{p.value=!0,t("focus",e)},toggleSelection:()=>{e.readonly||e.disabled||e.loading||(h.value?e.modelValue?Array.isArray(e.modelValue)?e.modelValue.includes(e.arrayValue)?t("update:modelValue",e.modelValue.filter((t=>t!==e.arrayValue))):t("update:modelValue",e.modelValue.concat(e.arrayValue)):t("update:modelValue",e.modelValue===e.arrayValue?[]:[e.modelValue,e.arrayValue]):t("update:modelValue",[e.arrayValue]):e.indeterminate?f.value?d.value=e.trueValue:v.value?d.value=e.falseValue:d.value=e.indeterminateValue:v.value?d.value=e.falseValue:d.value=e.trueValue)},reset:i,focus:s,computedError:u,computedErrorMessages:l}};var Xp=(0,r.aZ)({name:"VaMessageListWrapper",components:{VaMessageList:$p},props:{...Wp},setup:e=>({messagesColor:(0,r.Fl)((()=>e.error?"danger":e.success?"success":"")),messagesComputed:(0,r.Fl)((()=>e.error?e.errorMessages:e.messages)),errorLimit:(0,r.Fl)((()=>e.error?Number(e.errorCount):99))})});const Yp={class:"va-message-list-wrapper"};Xp.render=function(e,t,n,o,a,i){const s=(0,r.up)("va-message-list");return(0,r.wg)(),(0,r.iD)("div",Yp,[(0,r.WI)(e.$slots,"default"),(0,r.Wm)(s,{color:e.messagesColor,limit:e.errorLimit,"model-value":e.messagesComputed},null,8,["color","limit","model-value"])])},Xp.__file="src/components/va-input/components/VaMessageListWrapper.vue";const Zp=[Boolean,Array,String,Object];var Jp=(0,r.aZ)({name:"VaCheckbox",components:{VaMessageListWrapper:Xp,VaIcon:vc},emits:Gp,props:{...qp,modelValue:{type:Zp,default:!1},color:{type:String,default:"primary"},checkedIcon:{type:String,default:"check"},indeterminate:{type:Boolean,default:!1},indeterminateValue:{type:Zp,default:null},indeterminateIcon:{type:String,default:"remove"},id:{type:String,default:""},name:{type:String,default:""},ariaLabel:{type:String,default:void 0}},setup(e,{emit:t}){const n={container:(0,o.XI)(),input:(0,o.XI)(),label:(0,o.XI)()},{isChecked:a,computedError:i,isIndeterminate:s,computedErrorMessages:u,toggleSelection:l,onBlur:c,onFocus:d}=Kp(e,t,n),{getColor:p}=fu(),{hasKeyboardFocus:f,keyboardFocusListeners:h}=Tp(),{textColorComputed:v}=hu(),m=(0,r.Fl)((()=>a.value||s.value)),g=(0,r.Fl)((()=>({"va-checkbox--selected":a.value,"va-checkbox--readonly":e.readonly,"va-checkbox--disabled":e.disabled,"va-checkbox--indeterminate":e.indeterminate,"va-checkbox--error":i.value,"va-checkbox--left-label":e.leftLabel,"va-checkbox--on-keyboard-focus":f.value}))),y=(0,r.Fl)((()=>({color:i.value?p("danger"):"",padding:e.label?e.leftLabel?"0 0.5rem 0 0":"0 0 0 0.5rem":""}))),b=(0,r.Fl)((()=>{const t={background:m.value?p(e.color):"",borderColor:m.value?p(e.color):""};return i.value&&(t.borderColor=p("danger")),t})),w=(0,r.Fl)((()=>e.indeterminate&&s.value?e.indeterminateIcon:e.checkedIcon)),x=(0,r.Fl)(ru),C=(0,r.Fl)((()=>e.id||x.value)),_=(0,r.Fl)((()=>e.name||x.value)),k=(0,r.Fl)((()=>({name:_.value,disabled:e.disabled,readonly:e.readonly,tabindex:e.disabled?-1:0,ariaLabel:e.ariaLabel,ariaDisabled:e.disabled,ariaReadOnly:e.readonly,ariaChecked:m.value,"aria-invalid":!!u.value.length,"aria-errormessage":"string"==typeof u.value?u.value:u.value.join(", ")})));return{isActive:m,computedClass:g,labelStyle:y,inputStyle:b,computedIconName:w,textColorComputed:v,computedError:i,computedErrorMessages:u,keyboardFocusListeners:h,toggleSelection:l,onBlur:c,onFocus:d,inputAttributesComputed:k,computedId:C,computedName:_}}});const Qp=["id","indeterminate","value","checked"],ef=["for"];Jp.render=function(e,t,n,o,a,i){const s=(0,r.up)("va-icon"),u=(0,r.up)("VaMessageListWrapper");return(0,r.wg)(),(0,r.j4)(u,{class:(0,ds.C_)(["va-checkbox",e.computedClass]),disabled:e.disabled,success:e.success,messages:e.messages,error:e.computedError,"error-messages":e.computedErrorMessages,"error-count":e.errorCount},{default:(0,r.w5)((()=>[(0,r._)("div",{ref:"container",class:"va-checkbox__input-container",onClick:t[6]||(t[6]=(...t)=>e.toggleSelection&&e.toggleSelection(...t)),onBlur:t[7]||(t[7]=(...t)=>e.onBlur&&e.onBlur(...t))},[(0,r._)("div",{class:"va-checkbox__square",style:(0,ds.j5)(e.inputStyle),onSelectstart:t[4]||(t[4]=(0,Ks.iM)((()=>{}),["prevent"]))},[(0,r._)("input",(0,r.dG)({ref:"input",type:"checkbox",class:"va-checkbox__input",id:e.computedId,indeterminate:e.indeterminate,value:e.label,checked:e.isActive},e.inputAttributesComputed,(0,r.mx)(e.keyboardFocusListeners),{onFocus:t[0]||(t[0]=(...t)=>e.onFocus&&e.onFocus(...t)),onBlur:t[1]||(t[1]=(...t)=>e.onBlur&&e.onBlur(...t)),onClick:t[2]||(t[2]=(0,Ks.iM)((()=>{}),["stop","prevent"])),onKeypress:t[3]||(t[3]=(0,Ks.iM)(((...t)=>e.toggleSelection&&e.toggleSelection(...t)),["prevent"]))}),null,16,Qp),(0,r.wy)((0,r.Wm)(s,{class:"va-checkbox__icon",size:"20px",name:e.computedIconName,color:e.textColorComputed},null,8,["name","color"]),[[Ks.F8,e.isActive]])],36),e.label||e.$slots.label?((0,r.wg)(),(0,r.iD)("label",{key:0,ref:"label",class:"va-checkbox__label",for:e.computedId,style:(0,ds.j5)(e.labelStyle),onBlur:t[5]||(t[5]=(...t)=>e.onBlur&&e.onBlur(...t))},[(0,r.WI)(e.$slots,"label",{},(()=>[(0,r.Uk)((0,ds.zw)(e.label),1)]))],44,ef)):(0,r.kq)("v-if",!0)],544)])),_:3},8,["class","disabled","success","messages","error","error-messages","error-count"])},Jp.__file="src/components/va-checkbox/VaCheckbox.vue";const tf=Ja(Jp),nf=e=>void 0!==e.$el?e.$el:e;function rf(e){const t=(0,o.iH)(!1),n=()=>{t.value=!0},a=()=>{t.value=!1};return e&&(0,r.YP)(e,((e,t)=>{if(e){const t=nf(e);t.addEventListener("mouseenter",n),t.addEventListener("mouseleave",a)}if(t){const e=nf(t);e.removeEventListener("mouseenter",n),e.removeEventListener("mouseleave",a)}})),{isHovered:t,onMouseEnter:n,onMouseLeave:a}}var of=(0,r.aZ)({name:"VaChip",components:{VaIcon:vc},emits:[...rs,"focus"],props:{...Lc,...pu,...ns,modelValue:{type:Boolean,default:!0},closeable:{type:Boolean,default:!1},outline:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},square:{type:Boolean,default:!1},shadow:{type:Boolean,default:!1},flat:{type:Boolean,default:!1},icon:{type:String,default:""},tag:{type:String,default:"span"},size:{type:String,default:"medium",validator:e=>["small","medium","large"].includes(e)}},setup(e,{emit:t}){const{getColor:n}=fu(),a=(0,r.Fl)((()=>n(e.color))),i=(0,r.Fl)((()=>e.outline?a.value:"")),s=(0,r.Fl)((()=>Boolean(e.outline||e.flat))),{textColorComputed:u}=hu((0,o.Vh)(e,"color"),s),l={small:"0.875rem",medium:"1rem",large:"1.25rem"},{hasKeyboardFocus:c,keyboardFocusListeners:d}=Tp(),p=(0,r.Fl)((()=>{if(!(!e.shadow||e.flat||e.outline||e.disabled||c.value))return`0 0.125rem 0.19rem 0 ${iu(a.value)}`})),{valueComputed:f}=os(e,t),{tagComputed:h,hrefComputed:v}=Vc(e),{isHovered:m,onMouseEnter:g,onMouseLeave:y}=rf();return{keyboardFocusListeners:d,valueComputed:f,hrefComputed:v,tagComputed:h,onMouseEnter:g,onMouseLeave:y,isHovered:m,close:()=>{e.disabled||(f.value=!1)},iconSize:(0,r.Fl)((()=>l[e.size])),tabIndexComputed:(0,r.Fl)((()=>e.disabled?-1:0)),computedClass:(0,r.Fl)((()=>({"va-chip--small":"small"===e.size,"va-chip--large":"large"===e.size,"va-chip--square":e.square,"va-chip--disabled":e.disabled}))),computedStyle:(0,r.Fl)((()=>{const t={color:u.value,borderColor:i.value,background:"",boxShadow:p.value};return e.outline||e.flat?c.value?t.background=uu(a.value):m.value&&(t.background=su(a.value)):t.background=a.value,t}))}}});const af={class:"va-chip__content"};of.render=function(e,t,n,o,a,i){const s=(0,r.up)("va-icon");return e.valueComputed?((0,r.wg)(),(0,r.j4)((0,r.LL)(e.tagComputed),{key:0,class:(0,ds.C_)(["va-chip",e.computedClass]),href:e.hrefComputed,target:e.target,to:e.to,replace:e.replace,exact:e.exact,"active-class":e.activeClass,"exact-active-class":e.exactActiveClass,style:(0,ds.j5)(e.computedStyle)},{default:(0,r.w5)((()=>[(0,r._)("span",(0,r.dG)({class:"va-chip__inner"},(0,r.mx)(e.keyboardFocusListeners),{onFocus:t[0]||(t[0]=t=>e.$emit("focus")),onMouseenter:t[1]||(t[1]=(...t)=>e.onMouseEnter&&e.onMouseEnter(...t)),onMouseleave:t[2]||(t[2]=(...t)=>e.onMouseLeave&&e.onMouseLeave(...t))}),[e.icon?((0,r.wg)(),(0,r.j4)(s,{key:0,class:"va-chip__icon",name:e.icon,size:e.iconSize},null,8,["name","size"])):(0,r.kq)("v-if",!0),(0,r._)("span",af,[(0,r.WI)(e.$slots,"default")]),e.closeable?((0,r.wg)(),(0,r.j4)(s,{key:1,class:"va-chip__close-icon",name:"close",role:"button","aria-label":"close","aria-hidden":"false",tabindex:e.tabIndexComputed,size:e.iconSize,onClick:(0,Ks.iM)(e.close,["stop"]),onKeydown:[(0,Ks.D2)((0,Ks.iM)(e.close,["stop"]),["enter"]),(0,Ks.D2)((0,Ks.iM)(e.close,["stop"]),["space"])]},null,8,["tabindex","size","onClick","onKeydown"])):(0,r.kq)("v-if",!0)],16)])),_:3},8,["href","target","to","replace","exact","active-class","exact-active-class","class","style"])):(0,r.kq)("v-if",!0)},of.__file="src/components/va-chip/VaChip.vue";const sf=Ja(of);var uf=(0,r.aZ)({name:"VaCollapse",components:{VaIcon:vc},props:{modelValue:{type:Boolean,default:void 0},disabled:{type:Boolean,default:!1},header:{type:String,default:""},icon:{type:String,default:""},solid:{type:Boolean,default:!1},color:{type:String,default:"background"},textColor:{type:String,default:""},colorAll:{type:Boolean,default:!1}},emits:["focus","update:modelValue"],setup(e,{emit:t,slots:n}){const a=(0,o.XI)(),[i]=Op("modelValue",e,t,!1),{getColor:s,getHoverColor:u}=fu(),{accordionProps:l,toggle:c}=ss(i),{textColorComputed:d}=hu(),p=e=>"#text"===e.nodeName?(e=>{const t=document.createRange();t.selectNodeContents(e);const n=t.getBoundingClientRect();return n.bottom-n.top})(e):"#comment"===e.nodeName?0:e.clientHeight,f=(0,r.Fl)((()=>i.value&&a.value?Array.from(a.value.childNodes).reduce(((e,t)=>e+p(t)),0):0)),{hasKeyboardFocus:h,keyboardFocusListeners:v}=Tp(),m=()=>{const e=f.value/1e3*.2;return`${e>.2?e:.2}s`},g=(0,r.Fl)(ru),y=(0,r.Fl)((()=>`header-${g.value}`)),b=(0,r.Fl)((()=>`panel-${g.value}`)),w=(0,r.Fl)((()=>e.disabled?-1:0));return{body:a,height:f,toggle:c,computedModelValue:i,hasKeyboardFocus:h,keyboardFocusListeners:v,textColorComputed:d,headerIdComputed:y,panelIdComputed:b,tabIndexComputed:w,computedClasses:(0,r.Fl)((()=>({"va-collapse--expanded":i.value,"va-collapse--disabled":e.disabled,"va-collapse--solid":e.solid,"va-collapse--active":e.solid&&i.value,"va-collapse--popout":l.value.popout&&i.value,"va-collapse--inset":l.value.inset&&i.value}))),headerStyle:(0,r.Fl)((()=>({paddingLeft:e.icon&&0,color:d.value,backgroundColor:e.color?s(e.color):""}))),contentStyle:(0,r.Fl)((()=>{var t;const r=i.value&&!!(null===(t=n.default)||void 0===t?void 0:t.call(n)[0]);return{visibility:r?"visible":"hidden",height:`${f.value}px`,transitionDuration:m(),background:r&&e.color&&e.colorAll?u(s(e.color)):""}}))}}});const lf=["tabindex","aria-expanded","id","aria-controls","aria-disabled"],cf={class:"va-collapse__header__text"},df=["id","aria-labelledby"];uf.render=function(e,t,n,o,a,i){const s=(0,r.up)("va-icon");return(0,r.wg)(),(0,r.iD)("div",{class:(0,ds.C_)(["va-collapse",e.computedClasses])},[(0,r._)("div",(0,r.dG)({class:"va-collapse__header",role:"button",tabindex:e.tabIndexComputed,"aria-expanded":e.computedModelValue,id:e.headerIdComputed,"aria-controls":e.panelIdComputed,"aria-disabled":e.$props.disabled},(0,r.mx)(e.keyboardFocusListeners),{onFocus:t[0]||(t[0]=t=>e.$emit("focus")),onClick:t[1]||(t[1]=(...t)=>e.toggle&&e.toggle(...t)),onKeydown:[t[2]||(t[2]=(0,Ks.D2)(((...t)=>e.toggle&&e.toggle(...t)),["enter"])),t[3]||(t[3]=(0,Ks.D2)(((...t)=>e.toggle&&e.toggle(...t)),["space"]))]}),[(0,r.WI)(e.$slots,"header",(0,ds.vs)((0,r.F4)({value:e.computedModelValue,hasKeyboardFocus:e.hasKeyboardFocus})),(()=>[(0,r._)("div",{class:"va-collapse__header__content",style:(0,ds.j5)(e.headerStyle)},[e.icon?((0,r.wg)(),(0,r.j4)(s,{key:0,class:"va-collapse__header__icon",name:e.icon,color:e.textColorComputed},null,8,["name","color"])):(0,r.kq)("v-if",!0),(0,r._)("div",cf,(0,ds.zw)(e.header),1),(0,r.Wm)(s,{class:"va-collapse__header__icon",name:e.computedModelValue?"expand_less":"expand_more",color:e.textColorComputed},null,8,["name","color"])],4)]))],16,lf),(0,r._)("div",{ref:"body",class:"va-collapse__body",role:"region",style:(0,ds.j5)(e.contentStyle),id:e.panelIdComputed,"aria-labelledby":e.headerIdComputed},[(0,r.WI)(e.$slots,"default")],12,df)],2)},uf.__file="src/components/va-collapse/VaCollapse.vue";const pf=Ja(uf);var ff=(0,r.aZ)({name:"VaColorIndicator",emits:rs,props:{...ns,modelValue:{type:Boolean,default:null},color:{type:String,default:""},square:{type:Boolean,default:!1}},setup(e,{emit:t}){const{valueComputed:n}=os(e,t),{getColor:o}=fu(),a=(0,r.Fl)((()=>o(e.color))),i=(0,r.Fl)((()=>({borderRadius:e.square?"0px":"50%",backgroundColor:a.value}))),s=(0,r.Fl)((()=>({"va-color-indicator--selected":n.value,"va-color-indicator--hoverable":void 0!==n.value})));return{valueComputed:n,computedStyle:i,computedClass:s,toggleModelValue:()=>{n.value=!n.value}}}});ff.render=function(e,t,n,o,a,i){return(0,r.wg)(),(0,r.iD)("div",{class:(0,ds.C_)(["va-color-indicator",e.computedClass]),style:(0,ds.j5)(e.computedStyle),onClick:t[0]||(t[0]=(...t)=>e.toggleModelValue&&e.toggleModelValue(...t)),onKeydown:[t[1]||(t[1]=(0,Ks.D2)(((...t)=>e.toggleModelValue&&e.toggleModelValue(...t)),["enter"])),t[2]||(t[2]=(0,Ks.D2)(((...t)=>e.toggleModelValue&&e.toggleModelValue(...t)),["space"]))]},[(0,r._)("div",{class:"va-color-indicator__core",style:(0,ds.j5)(e.computedStyle)},null,4)],38)},ff.__file="src/components/va-color-indicator/VaColorIndicator.vue";const hf=Ja(ff);function vf(e){switch(!0){case Array.isArray(e):return e.reduce(((e,t)=>({...e,[t]:null})),{});case"object"==typeof e&&null!==e:return e;default:return{}}}function mf(e,t,n="props"){const{mixins:r,extends:o}=t;o&&mf(e,o,n),r&&r.forEach((t=>mf(e,t,n)));const a=vf(t[n]);for(const i in a)e[i]=a[i]}const gf=e=>function(e,t="props"){var n,r;const o=null!==(n=e.mixins)&&void 0!==n?n:[],a={};mf(a,null!==(r=e.extends)&&void 0!==r?r:[],t);for(let i=0;i<o.length;i++)mf(a,o[i],t);return Object.assign(a,vf(e[t])),a}(function(e){return e.options?e.options:e.__vccOpts||e.__b?{...e.__vccOpts,...e.__b}:e}(e)),yf=(e,t)=>(0,r.Fl)((()=>Object.keys(t).reduce(((t,n)=>(t[n]=e[n],t)),{})));function bf(e,t){const n=gf(e);return t?Object.keys(n).reduce(((e,r)=>(t.includes(r)||void 0===n[r]||(e[r]="string"==typeof n[r]?{}:n[r]),e)),{}):n}function wf(e){return[...new Set(e.emits)]}const xf={disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1}},Cf=(e,t)=>({computedClasses:jd(e,(0,r.Fl)((()=>Sl(t,["disabled","readonly"]))))});var _f="undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},kf=function(e,t,n,r,o,a,i,s,u,l){var c=this;c.numeralDecimalMark=e||".",c.numeralIntegerScale=t>0?t:0,c.numeralDecimalScale=n>=0?n:2,c.numeralThousandsGroupStyle=r||kf.groupStyle.thousand,c.numeralPositiveOnly=!!o,c.stripLeadingZeroes=!1!==a,c.prefix=i||""===i?i:"",c.signBeforePrefix=!!s,c.tailPrefix=!!u,c.delimiter=l||""===l?l:",",c.delimiterRE=l?new RegExp("\\"+l,"g"):""};kf.groupStyle={thousand:"thousand",lakh:"lakh",wan:"wan",none:"none"},kf.prototype={getRawValue:function(e){return e.replace(this.delimiterRE,"").replace(this.numeralDecimalMark,".")},format:function(e){var t,n,r,o,a=this,i="";switch(e=e.replace(/[A-Za-z]/g,"").replace(a.numeralDecimalMark,"M").replace(/[^\dM-]/g,"").replace(/^\-/,"N").replace(/\-/g,"").replace("N",a.numeralPositiveOnly?"":"-").replace("M",a.numeralDecimalMark),a.stripLeadingZeroes&&(e=e.replace(/^(-)?0+(?=\d)/,"$1")),n="-"===e.slice(0,1)?"-":"",r="undefined"!=typeof a.prefix?a.signBeforePrefix?n+a.prefix:a.prefix+n:n,o=e,e.indexOf(a.numeralDecimalMark)>=0&&(t=e.split(a.numeralDecimalMark),o=t[0],i=a.numeralDecimalMark+t[1].slice(0,a.numeralDecimalScale)),"-"===n&&(o=o.slice(1)),a.numeralIntegerScale>0&&(o=o.slice(0,a.numeralIntegerScale)),a.numeralThousandsGroupStyle){case kf.groupStyle.lakh:o=o.replace(/(\d)(?=(\d\d)+\d$)/g,"$1"+a.delimiter);break;case kf.groupStyle.wan:o=o.replace(/(\d)(?=(\d{4})+$)/g,"$1"+a.delimiter);break;case kf.groupStyle.thousand:o=o.replace(/(\d)(?=(\d{3})+$)/g,"$1"+a.delimiter);break}return a.tailPrefix?n+o.toString()+(a.numeralDecimalScale>0?i.toString():"")+a.prefix:r+o.toString()+(a.numeralDecimalScale>0?i.toString():"")}};var Sf=kf,Ef=function(e,t,n){var r=this;r.date=[],r.blocks=[],r.datePattern=e,r.dateMin=t.split("-").reverse().map((function(e){return parseInt(e,10)})),2===r.dateMin.length&&r.dateMin.unshift(0),r.dateMax=n.split("-").reverse().map((function(e){return parseInt(e,10)})),2===r.dateMax.length&&r.dateMax.unshift(0),r.initBlocks()};Ef.prototype={initBlocks:function(){var e=this;e.datePattern.forEach((function(t){"Y"===t?e.blocks.push(4):e.blocks.push(2)}))},getISOFormatDate:function(){var e=this,t=e.date;return t[2]?t[2]+"-"+e.addLeadingZero(t[1])+"-"+e.addLeadingZero(t[0]):""},getBlocks:function(){return this.blocks},getValidatedDate:function(e){var t=this,n="";return e=e.replace(/[^\d]/g,""),t.blocks.forEach((function(r,o){if(e.length>0){var a=e.slice(0,r),i=a.slice(0,1),s=e.slice(r);switch(t.datePattern[o]){case"d":"00"===a?a="01":parseInt(i,10)>3?a="0"+i:parseInt(a,10)>31&&(a="31");break;case"m":"00"===a?a="01":parseInt(i,10)>1?a="0"+i:parseInt(a,10)>12&&(a="12");break}n+=a,e=s}})),this.getFixedDateString(n)},getFixedDateString:function(e){var t,n,r,o=this,a=o.datePattern,i=[],s=0,u=0,l=0,c=0,d=0,p=0,f=!1;4===e.length&&"y"!==a[0].toLowerCase()&&"y"!==a[1].toLowerCase()&&(c="d"===a[0]?0:2,d=2-c,t=parseInt(e.slice(c,c+2),10),n=parseInt(e.slice(d,d+2),10),i=this.getFixedDate(t,n,0)),8===e.length&&(a.forEach((function(e,t){switch(e){case"d":s=t;break;case"m":u=t;break;default:l=t;break}})),p=2*l,c=s<=l?2*s:2*s+2,d=u<=l?2*u:2*u+2,t=parseInt(e.slice(c,c+2),10),n=parseInt(e.slice(d,d+2),10),r=parseInt(e.slice(p,p+4),10),f=4===e.slice(p,p+4).length,i=this.getFixedDate(t,n,r)),4!==e.length||"y"!==a[0]&&"y"!==a[1]||(d="m"===a[0]?0:2,p=2-d,n=parseInt(e.slice(d,d+2),10),r=parseInt(e.slice(p,p+2),10),f=2===e.slice(p,p+2).length,i=[0,n,r]),6!==e.length||"Y"!==a[0]&&"Y"!==a[1]||(d="m"===a[0]?0:4,p=2-.5*d,n=parseInt(e.slice(d,d+2),10),r=parseInt(e.slice(p,p+4),10),f=4===e.slice(p,p+4).length,i=[0,n,r]),i=o.getRangeFixedDate(i),o.date=i;var h=0===i.length?e:a.reduce((function(e,t){switch(t){case"d":return e+(0===i[0]?"":o.addLeadingZero(i[0]));case"m":return e+(0===i[1]?"":o.addLeadingZero(i[1]));case"y":return e+(f?o.addLeadingZeroForYear(i[2],!1):"");case"Y":return e+(f?o.addLeadingZeroForYear(i[2],!0):"")}}),"");return h},getRangeFixedDate:function(e){var t=this,n=t.datePattern,r=t.dateMin||[],o=t.dateMax||[];return!e.length||r.length<3&&o.length<3||n.find((function(e){return"y"===e.toLowerCase()}))&&0===e[2]?e:o.length&&(o[2]<e[2]||o[2]===e[2]&&(o[1]<e[1]||o[1]===e[1]&&o[0]<e[0]))?o:r.length&&(r[2]>e[2]||r[2]===e[2]&&(r[1]>e[1]||r[1]===e[1]&&r[0]>e[0]))?r:e},getFixedDate:function(e,t,n){return e=Math.min(e,31),t=Math.min(t,12),n=parseInt(n||0,10),(t<7&&t%2===0||t>8&&t%2===1)&&(e=Math.min(e,2===t?this.isLeapYear(n)?29:28:30)),[e,t,n]},isLeapYear:function(e){return e%4===0&&e%100!==0||e%400===0},addLeadingZero:function(e){return(e<10?"0":"")+e},addLeadingZeroForYear:function(e,t){return t?(e<10?"000":e<100?"00":e<1e3?"0":"")+e:(e<10?"0":"")+e}};var If=Ef,Af=function(e,t){var n=this;n.time=[],n.blocks=[],n.timePattern=e,n.timeFormat=t,n.initBlocks()};Af.prototype={initBlocks:function(){var e=this;e.timePattern.forEach((function(){e.blocks.push(2)}))},getISOFormatTime:function(){var e=this,t=e.time;return t[2]?e.addLeadingZero(t[0])+":"+e.addLeadingZero(t[1])+":"+e.addLeadingZero(t[2]):""},getBlocks:function(){return this.blocks},getTimeFormatOptions:function(){var e=this;return"12"===String(e.timeFormat)?{maxHourFirstDigit:1,maxHours:12,maxMinutesFirstDigit:5,maxMinutes:60}:{maxHourFirstDigit:2,maxHours:23,maxMinutesFirstDigit:5,maxMinutes:60}},getValidatedTime:function(e){var t=this,n="";e=e.replace(/[^\d]/g,"");var r=t.getTimeFormatOptions();return t.blocks.forEach((function(o,a){if(e.length>0){var i=e.slice(0,o),s=i.slice(0,1),u=e.slice(o);switch(t.timePattern[a]){case"h":parseInt(s,10)>r.maxHourFirstDigit?i="0"+s:parseInt(i,10)>r.maxHours&&(i=r.maxHours+"");break;case"m":case"s":parseInt(s,10)>r.maxMinutesFirstDigit?i="0"+s:parseInt(i,10)>r.maxMinutes&&(i=r.maxMinutes+"");break}n+=i,e=u}})),this.getFixedTimeString(n)},getFixedTimeString:function(e){var t,n,r,o=this,a=o.timePattern,i=[],s=0,u=0,l=0,c=0,d=0,p=0;return 6===e.length&&(a.forEach((function(e,t){switch(e){case"s":s=2*t;break;case"m":u=2*t;break;case"h":l=2*t;break}})),p=l,d=u,c=s,t=parseInt(e.slice(c,c+2),10),n=parseInt(e.slice(d,d+2),10),r=parseInt(e.slice(p,p+2),10),i=this.getFixedTime(r,n,t)),4===e.length&&o.timePattern.indexOf("s")<0&&(a.forEach((function(e,t){switch(e){case"m":u=2*t;break;case"h":l=2*t;break}})),p=l,d=u,t=0,n=parseInt(e.slice(d,d+2),10),r=parseInt(e.slice(p,p+2),10),i=this.getFixedTime(r,n,t)),o.time=i,0===i.length?e:a.reduce((function(e,t){switch(t){case"s":return e+o.addLeadingZero(i[2]);case"m":return e+o.addLeadingZero(i[1]);case"h":return e+o.addLeadingZero(i[0])}}),"")},getFixedTime:function(e,t,n){return n=Math.min(parseInt(n||0,10),60),t=Math.min(t,60),e=Math.min(e,60),[e,t,n]},addLeadingZero:function(e){return(e<10?"0":"")+e}};var Ff=Af,Df=function(e,t){var n=this;n.delimiter=t||""===t?t:" ",n.delimiterRE=t?new RegExp("\\"+t,"g"):"",n.formatter=e};Df.prototype={setFormatter:function(e){this.formatter=e},format:function(e){var t=this;t.formatter.clear(),e=e.replace(/[^\d+]/g,""),e=e.replace(/^\+/,"B").replace(/\+/g,"").replace("B","+"),e=e.replace(t.delimiterRE,"");for(var n,r="",o=!1,a=0,i=e.length;a<i;a++)n=t.formatter.inputDigit(e.charAt(a)),/[\s()-]/g.test(n)?(r=n,o=!0):o||(r=n);return r=r.replace(/[()]/g,""),r=r.replace(/[\s-]/g,t.delimiter),r}};var Rf=Df,Tf={blocks:{uatp:[4,5,6],amex:[4,6,5],diners:[4,6,4],discover:[4,4,4,4],mastercard:[4,4,4,4],dankort:[4,4,4,4],instapayment:[4,4,4,4],jcb15:[4,6,5],jcb:[4,4,4,4],maestro:[4,4,4,4],visa:[4,4,4,4],mir:[4,4,4,4],unionPay:[4,4,4,4],general:[4,4,4,4]},re:{uatp:/^(?!1800)1\d{0,14}/,amex:/^3[47]\d{0,13}/,discover:/^(?:6011|65\d{0,2}|64[4-9]\d?)\d{0,12}/,diners:/^3(?:0([0-5]|9)|[689]\d?)\d{0,11}/,mastercard:/^(5[1-5]\d{0,2}|22[2-9]\d{0,1}|2[3-7]\d{0,2})\d{0,12}/,dankort:/^(5019|4175|4571)\d{0,12}/,instapayment:/^63[7-9]\d{0,13}/,jcb15:/^(?:2131|1800)\d{0,11}/,jcb:/^(?:35\d{0,2})\d{0,12}/,maestro:/^(?:5[0678]\d{0,2}|6304|67\d{0,2})\d{0,12}/,mir:/^220[0-4]\d{0,12}/,visa:/^4\d{0,15}/,unionPay:/^(62|81)\d{0,14}/},getStrictBlocks:function(e){var t=e.reduce((function(e,t){return e+t}),0);return e.concat(19-t)},getInfo:function(e,t){var n=Tf.blocks,r=Tf.re;for(var o in t=!!t,r)if(r[o].test(e)){var a=n[o];return{type:o,blocks:t?this.getStrictBlocks(a):a}}return{type:"unknown",blocks:t?this.getStrictBlocks(n.general):n.general}}},Of=Tf,Pf={noop:function(){},strip:function(e,t){return e.replace(t,"")},getPostDelimiter:function(e,t,n){if(0===n.length)return e.slice(-t.length)===t?t:"";var r="";return n.forEach((function(t){e.slice(-t.length)===t&&(r=t)})),r},getDelimiterREByDelimiter:function(e){return new RegExp(e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),"g")},getNextCursorPosition:function(e,t,n,r,o){return t.length===e?n.length:e+this.getPositionOffset(e,t,n,r,o)},getPositionOffset:function(e,t,n,r,o){var a,i,s;return a=this.stripDelimiters(t.slice(0,e),r,o),i=this.stripDelimiters(n.slice(0,e),r,o),s=a.length-i.length,0!==s?s/Math.abs(s):0},stripDelimiters:function(e,t,n){var r=this;if(0===n.length){var o=t?r.getDelimiterREByDelimiter(t):"";return e.replace(o,"")}return n.forEach((function(t){t.split("").forEach((function(t){e=e.replace(r.getDelimiterREByDelimiter(t),"")}))})),e},headStr:function(e,t){return e.slice(0,t)},getMaxLength:function(e){return e.reduce((function(e,t){return e+t}),0)},getPrefixStrippedValue:function(e,t,n,r,o,a,i,s,u){if(0===n)return e;if(e===t&&""!==e)return"";if(u&&"-"==e.slice(0,1)){var l="-"==r.slice(0,1)?r.slice(1):r;return"-"+this.getPrefixStrippedValue(e.slice(1),t,n,l,o,a,i,s,u)}if(r.slice(0,n)!==t&&!s)return i&&!r&&e?e:"";if(r.slice(-n)!==t&&s)return i&&!r&&e?e:"";var c=this.stripDelimiters(r,o,a);return e.slice(0,n)===t||s?e.slice(-n)!==t&&s?c.slice(0,-n-1):s?e.slice(0,-n):e.slice(n):c.slice(n)},getFirstDiffIndex:function(e,t){var n=0;while(e.charAt(n)===t.charAt(n))if(""===e.charAt(n++))return-1;return n},getFormattedValue:function(e,t,n,r,o,a){var i="",s=o.length>0,u="";return 0===n?e:(t.forEach((function(t,l){if(e.length>0){var c=e.slice(0,t),d=e.slice(t);u=s?o[a?l-1:l]||u:r,a?(l>0&&(i+=u),i+=c):(i+=c,c.length===t&&l<n-1&&(i+=u)),e=d}})),i)},fixPrefixCursor:function(e,t,n,r){if(e){var o=e.value,a=n||r[0]||" ";if(e.setSelectionRange&&t&&!(t.length+a.length<=o.length)){var i=2*o.length;setTimeout((function(){e.setSelectionRange(i,i)}),1)}}},checkFullSelection:function(e){try{var t=window.getSelection()||document.getSelection()||{};return t.toString().length===e.length}catch(n){}return!1},setSelection:function(e,t,n){if(e===this.getActiveElement(n)&&!(e&&e.value.length<=t))if(e.createTextRange){var r=e.createTextRange();r.move("character",t),r.select()}else try{e.setSelectionRange(t,t)}catch(ei){console.warn("The input element type does not support selection")}},getActiveElement:function(e){var t=e.activeElement;return t&&t.shadowRoot?this.getActiveElement(t.shadowRoot):t},isAndroid:function(){return navigator&&/android/i.test(navigator.userAgent)},isAndroidBackspaceKeydown:function(e,t){return!!(this.isAndroid()&&e&&t)&&t===e.slice(0,-1)}},Bf=Pf,Mf={assign:function(e,t){return e=e||{},t=t||{},e.creditCard=!!t.creditCard,e.creditCardStrictMode=!!t.creditCardStrictMode,e.creditCardType="",e.onCreditCardTypeChanged=t.onCreditCardTypeChanged||function(){},e.phone=!!t.phone,e.phoneRegionCode=t.phoneRegionCode||"AU",e.phoneFormatter={},e.time=!!t.time,e.timePattern=t.timePattern||["h","m","s"],e.timeFormat=t.timeFormat||"24",e.timeFormatter={},e.date=!!t.date,e.datePattern=t.datePattern||["d","m","Y"],e.dateMin=t.dateMin||"",e.dateMax=t.dateMax||"",e.dateFormatter={},e.numeral=!!t.numeral,e.numeralIntegerScale=t.numeralIntegerScale>0?t.numeralIntegerScale:0,e.numeralDecimalScale=t.numeralDecimalScale>=0?t.numeralDecimalScale:2,e.numeralDecimalMark=t.numeralDecimalMark||".",e.numeralThousandsGroupStyle=t.numeralThousandsGroupStyle||"thousand",e.numeralPositiveOnly=!!t.numeralPositiveOnly,e.stripLeadingZeroes=!1!==t.stripLeadingZeroes,e.signBeforePrefix=!!t.signBeforePrefix,e.tailPrefix=!!t.tailPrefix,e.swapHiddenInput=!!t.swapHiddenInput,e.numericOnly=e.creditCard||e.date||!!t.numericOnly,e.uppercase=!!t.uppercase,e.lowercase=!!t.lowercase,e.prefix=e.creditCard||e.date?"":t.prefix||"",e.noImmediatePrefix=!!t.noImmediatePrefix,e.prefixLength=e.prefix.length,e.rawValueTrimPrefix=!!t.rawValueTrimPrefix,e.copyDelimiter=!!t.copyDelimiter,e.initValue=void 0!==t.initValue&&null!==t.initValue?t.initValue.toString():"",e.delimiter=t.delimiter||""===t.delimiter?t.delimiter:t.date?"/":t.time?":":t.numeral?",":(t.phone," "),e.delimiterLength=e.delimiter.length,e.delimiterLazyShow=!!t.delimiterLazyShow,e.delimiters=t.delimiters||[],e.blocks=t.blocks||[],e.blocksLength=e.blocks.length,e.root="object"===typeof _f&&_f?_f:window,e.document=t.document||e.root.document,e.maxLength=0,e.backspace=!1,e.result="",e.onValueChanged=t.onValueChanged||function(){},e}},Nf=Mf,Lf=function(e,t){var n=this,r=!1;if("string"===typeof e?(n.element=document.querySelector(e),r=document.querySelectorAll(e).length>1):"undefined"!==typeof e.length&&e.length>0?(n.element=e[0],r=e.length>1):n.element=e,!n.element)throw new Error("[cleave.js] Please check the element");if(r)try{console.warn("[cleave.js] Multiple input fields matched, cleave.js will only take the first one.")}catch(ei){}t.initValue=n.element.value,n.properties=Lf.DefaultProperties.assign({},t),n.init()};Lf.prototype={init:function(){var e=this,t=e.properties;t.numeral||t.phone||t.creditCard||t.time||t.date||0!==t.blocksLength||t.prefix?(t.maxLength=Lf.Util.getMaxLength(t.blocks),e.isAndroid=Lf.Util.isAndroid(),e.lastInputValue="",e.isBackward="",e.onChangeListener=e.onChange.bind(e),e.onKeyDownListener=e.onKeyDown.bind(e),e.onFocusListener=e.onFocus.bind(e),e.onCutListener=e.onCut.bind(e),e.onCopyListener=e.onCopy.bind(e),e.initSwapHiddenInput(),e.element.addEventListener("input",e.onChangeListener),e.element.addEventListener("keydown",e.onKeyDownListener),e.element.addEventListener("focus",e.onFocusListener),e.element.addEventListener("cut",e.onCutListener),e.element.addEventListener("copy",e.onCopyListener),e.initPhoneFormatter(),e.initDateFormatter(),e.initTimeFormatter(),e.initNumeralFormatter(),(t.initValue||t.prefix&&!t.noImmediatePrefix)&&e.onInput(t.initValue)):e.onInput(t.initValue)},initSwapHiddenInput:function(){var e=this,t=e.properties;if(t.swapHiddenInput){var n=e.element.cloneNode(!0);e.element.parentNode.insertBefore(n,e.element),e.elementSwapHidden=e.element,e.elementSwapHidden.type="hidden",e.element=n,e.element.id=""}},initNumeralFormatter:function(){var e=this,t=e.properties;t.numeral&&(t.numeralFormatter=new Lf.NumeralFormatter(t.numeralDecimalMark,t.numeralIntegerScale,t.numeralDecimalScale,t.numeralThousandsGroupStyle,t.numeralPositiveOnly,t.stripLeadingZeroes,t.prefix,t.signBeforePrefix,t.tailPrefix,t.delimiter))},initTimeFormatter:function(){var e=this,t=e.properties;t.time&&(t.timeFormatter=new Lf.TimeFormatter(t.timePattern,t.timeFormat),t.blocks=t.timeFormatter.getBlocks(),t.blocksLength=t.blocks.length,t.maxLength=Lf.Util.getMaxLength(t.blocks))},initDateFormatter:function(){var e=this,t=e.properties;t.date&&(t.dateFormatter=new Lf.DateFormatter(t.datePattern,t.dateMin,t.dateMax),t.blocks=t.dateFormatter.getBlocks(),t.blocksLength=t.blocks.length,t.maxLength=Lf.Util.getMaxLength(t.blocks))},initPhoneFormatter:function(){var e=this,t=e.properties;if(t.phone)try{t.phoneFormatter=new Lf.PhoneFormatter(new t.root.Cleave.AsYouTypeFormatter(t.phoneRegionCode),t.delimiter)}catch(n){throw new Error("[cleave.js] Please include phone-type-formatter.{country}.js lib")}},onKeyDown:function(e){var t=this,n=e.which||e.keyCode;t.lastInputValue=t.element.value,t.isBackward=8===n},onChange:function(e){var t=this,n=t.properties,r=Lf.Util;t.isBackward=t.isBackward||"deleteContentBackward"===e.inputType;var o=r.getPostDelimiter(t.lastInputValue,n.delimiter,n.delimiters);t.isBackward&&o?n.postDelimiterBackspace=o:n.postDelimiterBackspace=!1,this.onInput(this.element.value)},onFocus:function(){var e=this,t=e.properties;e.lastInputValue=e.element.value,t.prefix&&t.noImmediatePrefix&&!e.element.value&&this.onInput(t.prefix),Lf.Util.fixPrefixCursor(e.element,t.prefix,t.delimiter,t.delimiters)},onCut:function(e){Lf.Util.checkFullSelection(this.element.value)&&(this.copyClipboardData(e),this.onInput(""))},onCopy:function(e){Lf.Util.checkFullSelection(this.element.value)&&this.copyClipboardData(e)},copyClipboardData:function(e){var t=this,n=t.properties,r=Lf.Util,o=t.element.value,a="";a=n.copyDelimiter?o:r.stripDelimiters(o,n.delimiter,n.delimiters);try{e.clipboardData?e.clipboardData.setData("Text",a):window.clipboardData.setData("Text",a),e.preventDefault()}catch(i){}},onInput:function(e){var t=this,n=t.properties,r=Lf.Util,o=r.getPostDelimiter(e,n.delimiter,n.delimiters);return n.numeral||!n.postDelimiterBackspace||o||(e=r.headStr(e,e.length-n.postDelimiterBackspace.length)),n.phone?(!n.prefix||n.noImmediatePrefix&&!e.length?n.result=n.phoneFormatter.format(e):n.result=n.prefix+n.phoneFormatter.format(e).slice(n.prefix.length),void t.updateValueState()):n.numeral?(n.prefix&&n.noImmediatePrefix&&0===e.length?n.result="":n.result=n.numeralFormatter.format(e),void t.updateValueState()):(n.date&&(e=n.dateFormatter.getValidatedDate(e)),n.time&&(e=n.timeFormatter.getValidatedTime(e)),e=r.stripDelimiters(e,n.delimiter,n.delimiters),e=r.getPrefixStrippedValue(e,n.prefix,n.prefixLength,n.result,n.delimiter,n.delimiters,n.noImmediatePrefix,n.tailPrefix,n.signBeforePrefix),e=n.numericOnly?r.strip(e,/[^\d]/g):e,e=n.uppercase?e.toUpperCase():e,e=n.lowercase?e.toLowerCase():e,n.prefix&&(n.tailPrefix?e+=n.prefix:e=n.prefix+e,0===n.blocksLength)?(n.result=e,void t.updateValueState()):(n.creditCard&&t.updateCreditCardPropsByValue(e),e=r.headStr(e,n.maxLength),n.result=r.getFormattedValue(e,n.blocks,n.blocksLength,n.delimiter,n.delimiters,n.delimiterLazyShow),void t.updateValueState()))},updateCreditCardPropsByValue:function(e){var t,n=this,r=n.properties,o=Lf.Util;o.headStr(r.result,4)!==o.headStr(e,4)&&(t=Lf.CreditCardDetector.getInfo(e,r.creditCardStrictMode),r.blocks=t.blocks,r.blocksLength=r.blocks.length,r.maxLength=o.getMaxLength(r.blocks),r.creditCardType!==t.type&&(r.creditCardType=t.type,r.onCreditCardTypeChanged.call(n,r.creditCardType)))},updateValueState:function(){var e=this,t=Lf.Util,n=e.properties;if(e.element){var r=e.element.selectionEnd,o=e.element.value,a=n.result;r=t.getNextCursorPosition(r,o,a,n.delimiter,n.delimiters),e.isAndroid?window.setTimeout((function(){e.element.value=a,t.setSelection(e.element,r,n.document,!1),e.callOnValueChanged()}),1):(e.element.value=a,n.swapHiddenInput&&(e.elementSwapHidden.value=e.getRawValue()),t.setSelection(e.element,r,n.document,!1),e.callOnValueChanged())}},callOnValueChanged:function(){var e=this,t=e.properties;t.onValueChanged.call(e,{target:{name:e.element.name,value:t.result,rawValue:e.getRawValue()}})},setPhoneRegionCode:function(e){var t=this,n=t.properties;n.phoneRegionCode=e,t.initPhoneFormatter(),t.onChange()},setRawValue:function(e){var t=this,n=t.properties;e=void 0!==e&&null!==e?e.toString():"",n.numeral&&(e=e.replace(".",n.numeralDecimalMark)),n.postDelimiterBackspace=!1,t.element.value=e,t.onInput(e)},getRawValue:function(){var e=this,t=e.properties,n=Lf.Util,r=e.element.value;return t.rawValueTrimPrefix&&(r=n.getPrefixStrippedValue(r,t.prefix,t.prefixLength,t.result,t.delimiter,t.delimiters,t.noImmediatePrefix,t.tailPrefix,t.signBeforePrefix)),r=t.numeral?t.numeralFormatter.getRawValue(r):n.stripDelimiters(r,t.delimiter,t.delimiters),r},getISOFormatDate:function(){var e=this,t=e.properties;return t.date?t.dateFormatter.getISOFormatDate():""},getISOFormatTime:function(){var e=this,t=e.properties;return t.time?t.timeFormatter.getISOFormatTime():""},getFormattedValue:function(){return this.element.value},destroy:function(){var e=this;e.element.removeEventListener("input",e.onChangeListener),e.element.removeEventListener("keydown",e.onKeyDownListener),e.element.removeEventListener("focus",e.onFocusListener),e.element.removeEventListener("cut",e.onCutListener),e.element.removeEventListener("copy",e.onCopyListener)},toString:function(){return"[Cleave Object]"}},Lf.NumeralFormatter=Sf,Lf.DateFormatter=If,Lf.TimeFormatter=Ff,Lf.PhoneFormatter=Rf,Lf.CreditCardDetector=Of,Lf.Util=Bf,Lf.DefaultProperties=Nf,("object"===typeof _f&&_f?_f:window)["Cleave"]=Lf;var Vf=Lf,jf=Vf;const Wf=(e,t)=>(0,r.Fl)((()=>Object.entries(t()).map((([t,n])=>({[`--${e}-${Vd(t)}`]:n})))));var Hf=(0,r.aZ)({name:"VaInputWrapper",components:{VaMessageList:$p,VaIcon:vc},props:{...xf,...Wp,label:{type:String,default:""},color:{type:String,default:"primary"},outline:{type:Boolean,default:!1},bordered:{type:Boolean,default:!1},focused:{type:Boolean,default:!1},error:{type:Boolean,default:!1},success:{type:Boolean,default:!1},requiredMark:{type:Boolean,default:!1}},emits:["click","click-prepend","click-append","click-prepend-inner","click-append-inner"],setup(e){const{getColor:t}=fu(),n=jd("va-input-wrapper",(()=>({...Sl(e,["outline","bordered","success","focused","error","disabled","readonly"]),labeled:!!e.label,solid:!e.outline&&!e.bordered}))),o=Wf("va-input-wrapper",(()=>({color:a.value}))),a=(0,r.Fl)((()=>t(e.color))),i=(0,r.Fl)((()=>e.error?e.errorMessages:e.messages)),s=(0,r.Fl)((()=>{var e;return Boolean("string"==typeof i.value?i.value:null===(e=i.value)||void 0===e?void 0:e.length)}));return{wrapperClass:n,wrapperStyle:o,colorComputed:a,messagesColor:(0,r.Fl)((()=>e.error?"danger":e.success?"success":"")),messagesComputed:i,hasMessages:s,errorLimit:(0,r.Fl)((()=>e.error?Number(e.errorCount):99))}}});const Uf={class:"va-input-wrapper__container"},zf={class:"va-input-wrapper__field"},$f={class:"va-input-wrapper__text"},qf={key:0,class:"va-input-wrapper__required-mark"};Hf.render=function(e,t,n,o,a,i){const s=(0,r.up)("va-icon"),u=(0,r.up)("va-message-list");return(0,r.wg)(),(0,r.iD)("div",{class:(0,ds.C_)(["va-input-wrapper",e.wrapperClass]),style:(0,ds.j5)(e.wrapperStyle),onClick:t[4]||(t[4]=t=>e.$emit("click",t))},[(0,r._)("div",Uf,[e.$slots.prepend?((0,r.wg)(),(0,r.iD)("div",{key:0,class:"va-input-wrapper__prepend-inner",onClick:t[0]||(t[0]=t=>e.$emit("click-prepend"))},[(0,r.WI)(e.$slots,"prepend")])):(0,r.kq)("v-if",!0),(0,r._)("div",zf,[e.$slots.prependInner?((0,r.wg)(),(0,r.iD)("div",{key:0,class:"va-input-wrapper__prepend-inner",onClick:t[1]||(t[1]=t=>e.$emit("click-prepend-inner",t))},[(0,r.WI)(e.$slots,"prependInner")])):(0,r.kq)("v-if",!0),(0,r._)("div",$f,[e.label?((0,r.wg)(),(0,r.iD)("label",{key:0,"aria-hidden":"true",class:"va-input-wrapper__label",style:(0,ds.j5)({color:e.colorComputed})},[(0,r.Uk)((0,ds.zw)(e.label)+" ",1),e.requiredMark?((0,r.wg)(),(0,r.iD)("span",qf," * ")):(0,r.kq)("v-if",!0)],4)):(0,r.kq)("v-if",!0),(0,r.WI)(e.$slots,"default")]),e.success?((0,r.wg)(),(0,r.j4)(s,{key:1,color:"success",name:"check_circle",size:"small"})):(0,r.kq)("v-if",!0),e.error?((0,r.wg)(),(0,r.j4)(s,{key:2,color:"danger",name:"warning",size:"small"})):(0,r.kq)("v-if",!0),(0,r.WI)(e.$slots,"icon"),e.$slots.appendInner?((0,r.wg)(),(0,r.iD)("div",{key:3,class:"va-input-wrapper__append-inner",onClick:t[2]||(t[2]=t=>e.$emit("click-append-inner",t))},[(0,r.WI)(e.$slots,"appendInner")])):(0,r.kq)("v-if",!0)]),e.$slots.append?((0,r.wg)(),(0,r.iD)("div",{key:1,class:"va-input-wrapper__append-inner",onClick:t[3]||(t[3]=t=>e.$emit("click-append"))},[(0,r.WI)(e.$slots,"append")])):(0,r.kq)("v-if",!0)]),(0,r.WI)(e.$slots,"messages",(0,ds.vs)((0,r.F4)({messages:e.messagesComputed,errorLimit:e.errorLimit,color:e.messagesColor})),(()=>[e.hasMessages?((0,r.wg)(),(0,r.j4)(u,{key:0,color:e.messagesColor,"model-value":e.messagesComputed,limit:e.errorLimit},null,8,["color","model-value","limit"])):(0,r.kq)("v-if",!0)]))],6)},Hf.__file="src/components/va-input/components/VaInputWrapper.vue";const Gf={clearable:{type:Boolean,default:!1},clearableIcon:{type:String,default:"highlight_off"},clearValue:{type:String,default:""}},Kf=["clear"],Xf=(e,t,n,o,a)=>{const{isFocused:i,onFocus:s,onBlur:u}=Bp(o,n),l=[null,void 0,e.clearValue],c=(0,r.Fl)((()=>e.clearable&&!e.disabled&&!e.readonly&&!l.includes(t.value))),d=(0,r.Fl)((()=>(null==i?void 0:i.value)?e.color||"primary":(null==a?void 0:a.value)?"danger":e.success?"success":"gray")),p=(0,r.Fl)((()=>({name:e.clearableIcon,color:d.value,size:"small"})));return{canBeCleared:c,clearIconColor:d,clearIconProps:p,onFocus:s,onBlur:u}},Yf=e=>{const t=(()=>{const e=(0,o.XI)(),t=()=>{e.value=document.activeElement};return(0,r.bv)(t),Wd("focus",t),Wd("blur",t),e})(),n=(e=>{if(e)return e;const t=(0,r.FN)(),n=(0,o.XI)();return(0,r.bv)((()=>{var e;n.value=null!==(e=t.proxy.$el)&&void 0!==e?e:void 0})),(0,r.ic)((()=>{var e;n.value=null!==(e=t.proxy.$el)&&void 0!==e?e:void 0})),(0,r.Jd)((()=>{var e;n.value=null!==(e=t.proxy.$el)&&void 0!==e?e:void 0})),n})(e);let a=null;return(0,r.Fl)({get(){var e;if(!t.value)return!1;if(t.value===n.value)return!0;const r=null===(e=n.value)||void 0===e?void 0:e.contains(t.value);return r&&(a=t.value),r},set(e){const t=null!=a?a:n.value;e?null==t||t.focus():null==t||t.blur()}})},Zf={creditCard:{creditCard:!0},date:{date:!0,datePattern:["d","m","Y"]},time:{time:!0,timePattern:["h","m"],timeFormat:"24"},numeral:{numeral:!0,numeralThousandsGroupStyle:"thousand"}},Jf={mask:{type:[String,Object],default:""},returnRaw:{type:Boolean,default:!0},modelValue:{type:String}},Qf=(e,t,n)=>{const a=(0,o.iH)(),i=()=>{a.value&&a.value.destroy()},s=()=>{var n;i(),e.value&&(a.value=new jf(e.value,"string"==typeof(n=t.mask)?Zf[n]?{...Zf[n]}:{}:{...n}))};(0,r.bv)((()=>{s()})),(0,r.Jd)((()=>{i()})),(0,r.YP)((()=>[e.value,t.mask]),(()=>{s()}));const u=(0,r.Fl)((()=>a.value&&t.returnRaw&&t.modelValue===a.value.getRawValue()?a.value.getFormattedValue():t.modelValue));return{cleave:a,computedValue:u,onInput:e=>{const r=e.target.value;("string"===t.mask||Object.keys(t.mask).length)&&a.value&&(a.value.setRawValue(r),t.returnRaw)?n("update:modelValue",a.value.getRawValue()):n("update:modelValue",r)}}},eh=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"],th=e=>{const t=window.getComputedStyle(e);return{boxSizing:t.getPropertyValue("box-sizing")||t.getPropertyValue("-moz-box-sizing")||t.getPropertyValue("-webkit-box-sizing"),padding:parseFloat(t.getPropertyValue("padding-bottom"))+parseFloat(t.getPropertyValue("padding-top")),border:parseFloat(t.getPropertyValue("border-bottom-width"))+parseFloat(t.getPropertyValue("border-top-width")),styles:eh.map((e=>`${e}:${t.getPropertyValue(e)}`)).join(";")+";",lineHeight:parseInt(t.getPropertyValue("line-height"))}};let nh=null;const rh=(e,t)=>{nh||(nh=document.createElement("textarea")),nh.setAttribute("style",t+"\n  min-height:0 !important;\n  max-height:none !important;\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important';\n"),nh.value=e.value||e.placeholder||"";const n=e.getAttribute("wrap");return null!==n?nh.setAttribute("wrap",n):nh.removeAttribute("wrap"),nh},oh=e=>{if(e>0&&(0|e)===e)return!0;throw new Error(`\`minRows|maxRows\` must be a positive integer greater than 0, but ${e} is provided`)},{createEmits:ah,createListeners:ih}=od(["input","change","click","update:modelValue"]);var sh=(0,r.aZ)({name:"VaTextarea",props:{...xf,modelValue:{type:[String,Number],default:""},placeholder:{type:String},autosize:{type:Boolean,default:!1},minRows:{type:Number,default:1,validator:oh},maxRows:{type:Number,validator:oh}},emits:ah(),setup(e,{emit:t}){const n=(0,o.XI)(),a=(0,o.iH)(-1),i=(0,o.iH)(-1),{calculateRowHeight:s,calculateHeight:u}=(e=>({calculateRowHeight:()=>e.value?th(e.value).lineHeight:0,calculateHeight:()=>{if(!e.value)return 0;const{boxSizing:t,padding:n,border:r,styles:o}=th(e.value),a=rh(e.value,o);document.body.appendChild(a);let i=a.scrollHeight;return"border-box"===t?i+=r:"content-box"===t&&(i-=n),document.body.removeChild(a),i}}))(n),l=(0,r.Fl)((()=>Boolean((e.autosize||e.maxRows||1!==e.minRows)&&n.value))),c=()=>{l.value&&(i.value=u())};(0,r.bv)((()=>{l.value&&(a.value=s()),c()})),(0,r.YP)((()=>e.modelValue),(()=>{(0,r.Y3)(c)}));const d=(0,r.Fl)((()=>({minHeight:a.value*e.minRows+"px",maxHeight:e.maxRows?a.value*e.maxRows+"px":void 0,height:i.value+"px",resize:l.value?void 0:"none"}))),p=(0,r.Fl)((()=>({...Sl(e,["disabled","readonly","placeholder","ariaLabel"])})));return{textarea:n,computedStyle:d,listeners:ih(t),computedProps:p,focus:()=>{var e;null===(e=n.value)||void 0===e||e.focus()},blur:()=>{var e;null===(e=n.value)||void 0===e||e.blur()}}}});const uh=["value"];sh.render=function(e,t,n,o,a,i){return(0,r.wg)(),(0,r.iD)("textarea",(0,r.dG)({ref:"textarea",class:"textarea",style:e.computedStyle},{...e.computedProps,...e.listeners},{value:e.modelValue}),null,16,uh)},sh.__file="src/components/va-input/components/VaTextarea/VaTextarea.vue";const lh=bf(sh),{createEmits:ch,createListeners:dh}=od(["change","keyup","keypress","keydown","focus","blur"]),{createEmits:ph,createListeners:fh}=od(["click","click-prepend","click-append","click-prepend-inner","click-append-inner"]);var hh=(0,r.aZ)({name:"VaInput",components:{VaInputWrapper:Hf,VaTextarea:sh,VaIcon:hc},props:{...xf,...Wp,...Gf,...Jf,...lh,placeholder:{type:String,default:""},tabindex:{type:Number,default:0},modelValue:{type:[String,Number],default:""},label:{type:String,default:""},type:{type:String,default:"text"},loading:{type:Boolean,default:!1},inputClass:{type:String,default:""},pattern:{type:String},inputmode:{type:String,default:"text"},ariaLabel:{type:String,default:void 0},color:{type:String,default:"primary"},outline:{type:Boolean,default:!1},bordered:{type:Boolean,default:!1},requiredMark:{type:Boolean,default:!1}},emits:["update:modelValue",...Hp,...Kf,...ch(),...ph()],inheritAttrs:!1,setup(e,{emit:t,attrs:n,slots:a}){const i=(0,o.XI)(),s=Yf(),u=()=>{t("update:modelValue",e.clearValue),t("clear")},l=()=>{var e;null===(e=i.value)||void 0===e||e.focus()},c=(0,r.Fl)((()=>{const e=["icon"];return Object.keys(a).filter((t=>!e.includes(t)))})),{computedError:d,computedErrorMessages:p,listeners:f}=Up(e,t,u,l),{modelValue:h}=(0,o.BK)(e),{canBeCleared:v,clearIconProps:m}=Xf(e,h,t,i,d),g=(0,r.Fl)((()=>"textarea"===e.type?void 0:i.value)),{computedValue:y,onInput:b}=Qf(g,e,t),w=dh(t),x={...w,onFocus:e=>{w.onFocus(e),f.onFocus()},onBlur:e=>{w.onBlur(e),f.onBlur()},onInput:b},C=(0,r.Fl)((()=>e.disabled?-1:e.tabindex)),_=(0,r.Fl)((()=>({ariaLabel:e.ariaLabel||e.label,ariaRequired:e.requiredMark,ariaDisabled:e.disabled,ariaReadOnly:e.readonly,"aria-invalid":!!p.value.length,"aria-errormessage":"string"==typeof p.value?p.value:p.value.join(", "),tabindex:C.value,class:e.inputClass,...rc(n,["class","style"])}))),k=(0,r.Fl)((()=>({..._.value,...Sl(e,["type","disabled","readonly","placeholder","pattern","inputmode"])})));return{input:i,inputEvents:x,computedChildAttributes:_,computedInputAttributes:k,textareaProps:yf(e,lh),computedValue:y,tabIndexComputed:C,computedError:d,computedErrorMessages:p,isFocused:s,canBeCleared:v,clearIconProps:m,fieldListeners:fh(t),filterSlots:c,reset:u,focus:l,blur:()=>{var e;null===(e=i.value)||void 0===e||e.blur()}}}});const vh=["value"];hh.render=function(e,t,n,o,a,i){const s=(0,r.up)("va-icon"),u=(0,r.up)("VaTextarea"),l=(0,r.up)("VaInputWrapper");return(0,r.wg)(),(0,r.j4)(l,(0,r.dG)(e.fieldListeners,{class:e.$attrs.class,style:e.$attrs.style,color:e.$props.color,readonly:e.$props.readonly,disabled:e.$props.disabled,success:e.$props.success,messages:e.$props.messages,error:e.computedError,"error-messages":e.computedErrorMessages,"error-count":e.errorCount,label:e.$props.label,bordered:e.$props.bordered,outline:e.$props.outline,requiredMark:e.$props.requiredMark,focused:e.isFocused,onClick:e.focus}),(0,r.Nv)({icon:(0,r.w5)((t=>[e.canBeCleared?((0,r.wg)(),(0,r.j4)(s,(0,r.dG)({key:0,role:"button","aria-hidden":"false","aria-label":"reset",class:"va-input__icons__reset",tabindex:e.tabIndexComputed},e.clearIconProps,{onClick:(0,Ks.iM)(e.reset,["stop"]),onKeydown:[(0,Ks.D2)((0,Ks.iM)(e.reset,["stop"]),["enter"]),(0,Ks.D2)((0,Ks.iM)(e.reset,["stop"]),["space"])]}),null,16,["tabindex","onClick","onKeydown"])):(0,r.kq)("v-if",!0),e.$props.loading?((0,r.wg)(),(0,r.j4)(s,{key:1,color:e.$props.color,size:"small",name:"loop",spin:"counter-clockwise"},null,8,["color"])):(0,r.kq)("v-if",!0),(0,r.WI)(e.$slots,"icon",(0,ds.vs)((0,r.F4)(t)))])),default:(0,r.w5)((()=>["textarea"!==e.type||e.$slots.content?e.$slots.content?(0,r.kq)("v-if",!0):((0,r.wg)(),(0,r.iD)("input",(0,r.dG)({key:1,ref:"input",class:"va-input__content__input"},{...e.computedInputAttributes,...e.inputEvents},{value:e.computedValue}),null,16,vh)):((0,r.wg)(),(0,r.j4)(u,(0,r.dG)({key:0,ref:"input"},{...e.computedChildAttributes,...e.textareaProps,...e.inputEvents},{class:"va-input__content__input"}),null,16))])),_:2},[(0,r.Ko)(e.filterSlots,(t=>({name:t,fn:(0,r.w5)((n=>[(0,r.WI)(e.$slots,t,(0,ds.vs)((0,r.F4)(n)))]))})))]),1040,["class","style","color","readonly","disabled","success","messages","error","error-messages","error-count","label","bordered","outline","requiredMark","focused","onClick"])},hh.__file="src/components/va-input/VaInput.vue";const mh=Ja(hh);var gh=(0,r.aZ)({name:"VaColorInput",components:{VaInput:mh,VaColorIndicator:hf},emits:rs,props:{...ns,modelValue:{type:String,default:null},disabled:{type:Boolean,default:!1},indicator:{type:String,default:"dot",validator:e=>["dot","square"].includes(e)}},setup:(e,{emit:t})=>{const n=(0,o.XI)(),{valueComputed:a}=os(e,t),i=(0,r.Fl)((()=>e.disabled?-1:0));return{valueComputed:a,callPickerDialog:()=>{var t;return!e.disabled&&(null===(t=n.value)||void 0===t?void 0:t.click())},colorPicker:n,tabIndexComputed:i}}});const yh={class:"va-color-input"};gh.render=function(e,t,n,o,a,i){const s=(0,r.up)("va-color-indicator"),u=(0,r.up)("va-input");return(0,r.wg)(),(0,r.iD)("div",yh,[(0,r.Wm)(s,{class:"va-color-input__dot",role:"button","aria-label":"open color picker","aria-disabled":e.$props.disabled,tabindex:e.tabIndexComputed,color:e.valueComputed,indicator:e.$props.indicator,onClick:e.callPickerDialog,onKeydown:[(0,Ks.D2)(e.callPickerDialog,["space"]),(0,Ks.D2)(e.callPickerDialog,["enter"])]},null,8,["aria-disabled","tabindex","color","indicator","onClick","onKeydown"]),(0,r.Wm)(u,{class:"va-color-input__input",placeholder:"input color",modelValue:e.valueComputed,"onUpdate:modelValue":t[0]||(t[0]=t=>e.valueComputed=t),tabindex:e.tabIndexComputed,disabled:e.$props.disabled},null,8,["modelValue","tabindex","disabled"]),(0,r.wy)((0,r._)("input",{ref:"colorPicker",type:"color",class:"visually-hidden","aria-hidden":"true",tabindex:"-1","onUpdate:modelValue":t[1]||(t[1]=t=>e.valueComputed=t)},null,512),[[Ks.nr,e.valueComputed]])])},gh.__file="src/components/va-color-input/VaColorInput.vue";const bh=Ja(gh);var wh=(0,r.aZ)({name:"VaColorPalette",components:{VaColorIndicator:hf},emits:rs,props:{...ns,modelValue:{type:String,default:null},palette:{type:Array,default:()=>[]},indicator:{type:String,default:"dot",validator:e=>["dot","square"].includes(e)}},setup(e,{emit:t}){const{valueComputed:n}=os(e,t);return{valueComputed:n,isSelected:e=>n.value===e}}});const xh={class:"va-color-palette"},Ch={class:"va-color-palette__colors",role:"listbox","aria-label":"color selection"};wh.render=function(e,t,n,o,a,i){const s=(0,r.up)("va-color-indicator");return(0,r.wg)(),(0,r.iD)("div",xh,[(0,r._)("ul",Ch,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.palette,((t,n)=>((0,r.wg)(),(0,r.j4)(s,{key:n,role:"option","aria-label":`color ${t}`,"aria-selected":e.isSelected(t),tabindex:"0",modelValue:e.isSelected(t),color:t,square:"square"===e.indicator,"onUpdate:modelValue":n=>e.valueComputed=t},null,8,["aria-label","aria-selected","modelValue","color","square","onUpdate:modelValue"])))),128))])])},wh.__file="src/components/va-color-palette/VaColorPalette.vue";const _h=Ja(wh);var kh={name:"VaContent"};const Sh={class:"va-content"};kh.render=function(e,t,n,o,a,i){return(0,r.wg)(),(0,r.iD)("div",Sh,[(0,r.WI)(e.$slots,"default")])},kh.__file="src/components/va-content/VaContent.vue";const Eh=Ja(kh),Ih=e=>"number"==typeof e?`${e}px`:e,{createEmits:Ah,createListeners:Fh}=od(["change"]),{createEmits:Dh,createListeners:Rh}=od([{listen:"click-prepend",emit:"click:decrease-button"},{listen:"click-append",emit:"click:increase-button"},{listen:"click-prepend-inner",emit:"click:decrease-icon"},{listen:"click-append-inner",emit:"click:increase-icon"}]);var Th=(0,r.aZ)({name:"VaCounter",components:{VaInputWrapper:Hf,VaIcon:hc,VaButton:jc},props:{...xf,...ns,modelValue:{type:[String,Number],default:0},manualInput:{type:Boolean,default:!1},stateful:{type:Boolean,default:!1},min:{type:Number,default:void 0},max:{type:Number,default:void 0},step:{type:Number,default:1},label:{type:String,default:""},messages:{type:[Array,String],default:()=>[]},width:{type:[String,Number],default:"160px"},color:{type:String,default:"primary"},outline:{type:Boolean},bordered:{type:Boolean},increaseIcon:{type:String,default:"add"},decreaseIcon:{type:String,default:"remove"},buttons:{type:Boolean,default:!1},flat:{type:Boolean,default:!0},rounded:{type:Boolean,default:!1},margins:{type:[String,Number],default:"4px"},textColor:{type:String,default:void 0}},emits:["update:modelValue",...Ah(),...Dh(),...Pp],inheritAttrs:!1,setup(e,{emit:t,attrs:n}){const a=(0,o.XI)(),{isFocused:i,focus:s,blur:u}=Bp(a,t),{valueComputed:l}=os(e,t),c=t=>e.min&&e.step?e.min+e.step*Math.floor((t-e.min)/e.step):t,d=t=>{e.min&&t<e.min?l.value=e.min:e.max&&t>e.max?l.value=c(e.max):l.value=c(t)},p=(0,r.Fl)((()=>!!e.min&&Number(l.value)<=e.min)),f=(0,r.Fl)((()=>!!e.max&&(e.step?Number(l.value)>e.max-e.step:Number(l.value)>=e.max))),h=(0,r.Fl)((()=>e.disabled?-1:0)),v=(0,r.Fl)((()=>p.value||e.readonly||e.disabled)),m=(0,r.Fl)((()=>f.value||e.readonly||e.disabled)),g=()=>{v.value||d(Number(l.value)-e.step)},y=()=>{m.value||d(Number(l.value)+e.step)},{getColor:b}=fu(),w=(0,r.Fl)((()=>b(e.color))),x=(0,r.Fl)((()=>({class:{"va-counter__icon--inactive":v.value},color:w.value,name:e.decreaseIcon,...!v.value&&{onClick:g}}))),C=(0,r.Fl)((()=>({class:{"va-counter__icon--inactive":m.value},color:w.value,name:e.increaseIcon,...!m.value&&{onClick:y}}))),_=(0,r.Fl)((()=>0===("string"==typeof e.margins?parseFloat(e.margins):e.margins))),k=(0,r.Fl)((()=>({...Sl(e,["rounded","color","textColor"]),flat:e.flat&&!e.outline,outline:e.flat&&e.outline}))),S=(0,r.Fl)((()=>({...k.value,icon:e.decreaseIcon,disabled:v.value}))),E=(0,r.Fl)((()=>({...k.value,icon:e.increaseIcon,disabled:m.value}))),I=(0,r.Fl)((()=>({tabindex:h.value,ariaLabel:e.label||"counter value",ariaValuemin:e.min,ariaValuemax:e.max,...rc(n,["class","style"]),...Sl(e,["disabled","min","max","step"]),readonly:e.readonly||!e.manualInput}))),A=(0,r.Fl)((()=>({...Sl(e,["color","readonly","disabled","messages","label","bordered","outline"])}))),F=(0,r.Fl)((()=>[n.class,{"va-counter--input-square":_.value}])),D=(0,r.Fl)((()=>({width:Ih(e.width),...n.style||{}}))),R=(0,r.Fl)((()=>Ih(e.margins)));return{input:a,valueComputed:l,isFocused:i,fieldListeners:Rh(t),inputListeners:Fh(t),inputAttributesComputed:I,inputWrapperPropsComputed:A,setCountInput:({target:e})=>{l.value=Number(null==e?void 0:e.value)},setCountChange:({target:e})=>{d(Number(null==e?void 0:e.value))},decreaseCount:g,increaseCount:y,decreaseIconProps:x,increaseIconProps:C,decreaseButtonProps:S,increaseButtonProps:E,colorComputed:w,classComputed:F,styleComputed:D,marginComputed:R,focus:s,blur:u}}});const Oh={ref:"input",tabindex:"0"},Ph=["value"];Th.render=function(e,t,n,o,a,i){const s=(0,r.up)("va-button"),u=(0,r.up)("va-icon"),l=(0,r.up)("VaInputWrapper");return(0,r.wg)(),(0,r.j4)(l,(0,r.dG)({class:"va-counter"},{...e.fieldListeners,...e.inputWrapperPropsComputed},{class:e.classComputed,style:e.styleComputed,focused:e.isFocused,onKeydown:[t[8]||(t[8]=(0,Ks.D2)((0,Ks.iM)((t=>e.increaseCount()),["prevent"]),["up"])),t[9]||(t[9]=(0,Ks.D2)((0,Ks.iM)((t=>e.decreaseCount()),["prevent"]),["down"]))]}),(0,r.Nv)({default:(0,r.w5)((()=>[e.$slots.content?(0,r.kq)("v-if",!0):((0,r.wg)(),(0,r.iD)("input",(0,r.dG)({key:0,ref:"input",class:"va-input__content__input",type:"number",inputmode:"decimal"},{...e.inputAttributesComputed,...e.inputListeners},{value:e.valueComputed,onInput:t[6]||(t[6]=(...t)=>e.setCountInput&&e.setCountInput(...t)),onChange:t[7]||(t[7]=(...t)=>e.setCountChange&&e.setCountChange(...t))}),null,16,Ph))])),_:2},[e.$props.buttons?{name:"prepend",fn:(0,r.w5)((n=>[(0,r._)("div",{class:"va-counter__prepend-wrapper",style:(0,ds.j5)({marginRight:e.marginComputed}),onMousedown:t[1]||(t[1]=(0,Ks.iM)((t=>e.focus()),["prevent"]))},[(0,r.WI)(e.$slots,"decreaseAction",(0,ds.vs)((0,r.F4)({...n,decreaseCount:e.decreaseCount})),(()=>[(0,r.Wm)(s,(0,r.dG)({class:"va-counter__button-decrease","aria-label":"decrease counter"},e.decreaseButtonProps,{onClick:t[0]||(t[0]=t=>e.decreaseCount())}),null,16)]))],36)]))}:{name:"prependInner",fn:(0,r.w5)((n=>[(0,r._)("div",{onMousedown:t[2]||(t[2]=(0,Ks.iM)((t=>e.focus()),["prevent"]))},[(0,r.WI)(e.$slots,"decreaseAction",(0,ds.vs)((0,r.F4)({...n,decreaseCount:e.decreaseCount})),(()=>[(0,r.Wm)(u,(0,r.dG)({class:"va-counter__icon-decrease"},e.decreaseIconProps),null,16)]))],32)]))},e.$props.buttons?{name:"append",fn:(0,r.w5)((n=>[(0,r._)("div",{class:"va-counter__append-wrapper",style:(0,ds.j5)({marginLeft:e.marginComputed}),onMousedown:t[4]||(t[4]=(0,Ks.iM)((t=>e.focus()),["prevent"]))},[(0,r.WI)(e.$slots,"increaseAction",(0,ds.vs)((0,r.F4)({...n,increaseCount:e.increaseCount})),(()=>[(0,r.Wm)(s,(0,r.dG)({class:"va-counter__button-increase","aria-label":"increase counter"},e.increaseButtonProps,{onClick:t[3]||(t[3]=t=>e.increaseCount())}),null,16)]))],36)]))}:{name:"appendInner",fn:(0,r.w5)((n=>[(0,r._)("div",{onMousedown:t[5]||(t[5]=(0,Ks.iM)((t=>e.focus()),["prevent"]))},[(0,r.WI)(e.$slots,"increaseAction",(0,ds.vs)((0,r.F4)({...n,increaseCount:e.increaseCount})),(()=>[(0,r.Wm)(u,(0,r.dG)({class:"va-counter__icon-increase"},e.increaseIconProps),null,16)]))],32)]))},e.$slots.content?{name:"content",fn:(0,r.w5)((t=>[(0,r._)("div",Oh,[(0,r.WI)(e.$slots,"content",(0,ds.vs)((0,r.F4)({...t,value:Number(e.valueComputed)})))],512)]))}:void 0]),1040,["class","style","focused"])},Th.__file="src/components/va-counter/VaCounter.vue";const Bh=Ja(Th);var Mh=(0,r.aZ)({name:"VaInnerLoading",components:{VaIcon:vc},props:{...Ec,color:{type:String},icon:{type:String,default:"autorenew"},size:{type:Number,default:30}},setup(e){const{getColor:t}=fu();return{colorComputed:(0,r.Fl)((()=>t(e.color)))}}});const Nh={class:"inner-loading"},Lh={key:0,class:"inner-loading__overlay","aria-hidden":"true"};Mh.render=function(e,t,n,o,a,i){const s=(0,r.up)("va-icon");return(0,r.wg)(),(0,r.iD)("div",Nh,[(0,r.WI)(e.$slots,"default"),e.$props.loading?((0,r.wg)(),(0,r.iD)("div",Lh,[(0,r.Wm)(s,{class:"inner-loading__spinner",spin:"",color:e.colorComputed,size:e.$props.size,name:e.$props.icon},null,8,["color","size","name"])])):(0,r.kq)("v-if",!0)])},Mh.__file="src/components/va-inner-loading/VaInnerLoading.vue";const Vh=Ja(Mh);var jh=Hl,Wh=function(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:jh(e,t,n)},Hh=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),Uh=function(e){return Hh.test(e)},zh=function(e){return e.split("")},$h="[\\ud800-\\udfff]",qh="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Gh="\\ud83c[\\udffb-\\udfff]",Kh="[^\\ud800-\\udfff]",Xh="(?:\\ud83c[\\udde6-\\uddff]){2}",Yh="[\\ud800-\\udbff][\\udc00-\\udfff]",Zh="(?:"+qh+"|"+Gh+")?",Jh="[\\ufe0e\\ufe0f]?"+Zh+"(?:\\u200d(?:"+[Kh,Xh,Yh].join("|")+")[\\ufe0e\\ufe0f]?"+Zh+")*",Qh="(?:"+[Kh+qh+"?",qh,Xh,Yh,$h].join("|")+")",ev=RegExp(Gh+"(?="+Gh+")|"+Qh+Jh,"g"),tv=zh,nv=Uh,rv=function(e){return e.match(ev)||[]},ov=Wh,av=Uh,iv=function(e){return nv(e)?rv(e):tv(e)},sv=_u,uv=function(e){return function(t){t=sv(t);var n=av(t)?iv(t):void 0,r=n?n[0]:t.charAt(0),o=n?ov(n,1).join(""):t.slice(1);return r[e]()+o}}("toUpperCase"),lv=Ld((function(e,t,n){return e+(n?" ":"")+uv(t)}));const cv=(e,t)=>{const n="string"==typeof e?{key:e}:e;return{source:e,initialIndex:t,key:n.key,name:n.name||n.key,label:n.label||lv(n.key),thTitle:n.thTitle||n.headerTitle||n.label||lv(n.key),sortable:n.sortable||!1,sortingFn:n.sortingFn,thAlign:n.thAlign||n.alignHead||"left",thVerticalAlign:n.thVerticalAlign||n.verticalAlignHead||"middle",tdAlign:n.tdAlign||n.align||"left",tdVerticalAlign:n.tdVerticalAlign||n.verticalAlign||"middle",width:n.width,tdClass:n.tdClass||n.classes,thClass:n.thClass||n.headerClasses,tdStyle:n.tdStyle||n.style,thStyle:n.thStyle||n.headerStyle}};function dv(e){return{columnsComputed:(0,r.Fl)((()=>{return 0===e.columns.length?(t=e.items,Object.keys(Nr({},...t)).map(cv)):e.columns.map(cv);var t}))}}const pv=(e,t)=>"function"==typeof t?t(e):eu(e,t)||e,fv=(e,t,n,r)=>{const o=pv(e,n);return{initialIndex:t,itemKey:o,source:e,cells:r.map((n=>((e,t,n,r)=>{var o;const a=eu(n,r.key);return{rowIndex:e,rowKey:t,rowData:n,column:r,source:a,value:(null===(o=null==a?void 0:a.toString)||void 0===o?void 0:o.call(a))||""}})(t,o,e,n)))}};function hv(e,t,n){const a=(0,o.iH)([]),i=(0,r.Fl)({get:()=>void 0===t.modelValue?a.value:t.modelValue,set(e){void 0===t.modelValue&&(a.value=e),n("update:modelValue",e)}}),s=(0,o.iH)(-1);(0,r.YP)((()=>t.selectMode),((e,t)=>{"single"===e&&"multiple"===t&&(i.value=[],f(-1))})),(0,r.YP)(e,(()=>{f(-1)})),(0,r.YP)(i,((e,t=[])=>{n("selectionChange",{currentSelectedItems:e,previousSelectedItems:t})}),{immediate:!0});const u=e=>pv(e,t.itemsTrackBy),l=(0,r.Fl)((()=>!e.value.some((({source:e})=>i.value.includes(u(e)))))),c=(0,r.Fl)((()=>0!==e.value.length&&e.value.every((({source:e})=>i.value.includes(u(e)))))),d=(0,r.Fl)((()=>!l.value&&!c.value));function p(e){return i.value.includes(u(e.source))}function f(t){if(-1===t)s.value=-1;else{const n=e.value.find((e=>e.initialIndex===t));s.value=n?e.value.indexOf(n):-1}}function h(e){t.selectable&&(p(e)?(function(e){const t=i.value.findIndex((t=>t===u(e.source)));i.value=[...i.value.slice(0,t),...i.value.slice(t+1)]}(e),"single"===t.selectMode?f(-1):f(e.initialIndex)):("single"===t.selectMode?function(e){i.value=[u(e.source)]}(e):function(e){i.value=[...i.value,u(e.source)]}(e),f(e.initialIndex)))}return{ctrlSelectRow:function(e){t.selectable&&h(e)},shiftSelectRows:function(n){if(t.selectable)return"single"===t.selectMode||-1===s.value?h(n):(function(e){const t=e.map((e=>u(e.source)));l.value?i.value=t:t.every((e=>i.value.includes(e)))?i.value=i.value.filter((e=>!t.includes(e))):i.value=[...new Set([...i.value,...t])]}(function(t){let n,r;return p(e.value[s.value])?(n=Math.min(s.value,t),r=Math.max(s.value,t)):(n=Math.min(s.value+1,t),r=Math.max(s.value-1,t)),e.value.slice(n,r+1)}(e.value.indexOf(n))),void f(-1))},toggleRowSelection:h,toggleBulkSelection:function(){c.value?function(){const t=e.value.map((e=>u(e.source)));i.value=i.value.filter((e=>!t.includes(e)))}():function(){i.value=[...new Set([...i.value,...e.value.map((e=>u(e.source)))])]}(),f(-1)},isRowSelected:p,noRowsSelected:l,severalRowsSelected:d,allRowsSelected:c}}const vv="--va-data-table",mv=e=>"function"==typeof e,gv=e=>mv(e)?e():e,yv=e=>mv(e)?e():e;function bv(e){const{getColor:t,getFocusColor:n,getHoverColor:o,shiftHSLAColor:a}=fu(),i=(0,r.Fl)((()=>t(e.selectedColor)));return{rowCSSVariables:(0,r.Fl)((()=>({[`${vv}-hover-color`]:o(i.value),[`${vv}-selected-color`]:e.selectable?n(i.value):void 0}))),stickyCSSVariables:(0,r.Fl)((()=>({[`${vv}-scroll-table-color`]:(e.height||e.stickyHeader||e.stickyFooter)&&a(i.value,{l:40}),[`${vv}-scroll-table-height`]:e.height?Ih(e.height):void 0}))),getHeaderCSSVariables:e=>({[`${vv}-width`]:e.width&&Ih(e.width),[`${vv}-align`]:e.thAlign,[`${vv}-vertical-align`]:e.thVerticalAlign,[`${vv}-cursor`]:e.sortable?"pointer":"default"}),getCellCSSVariables:e=>({[`${vv}-align`]:e.column.tdAlign,[`${vv}-vertical-align`]:e.column.tdVerticalAlign}),getFooterCSSVariables:t=>({[`${vv}-align`]:t.thAlign,[`${vv}-vertical-align`]:t.thVerticalAlign,[`${vv}-cursor`]:e.allowFooterSorting&&t.sortable?"pointer":"default"}),getClass:gv,getStyle:yv}}const wv=e=>"function"==typeof e,xv=e=>null!==e&&"object"==typeof e;var Cv=(0,r.aZ)({name:"VaDataTable",components:{VaInnerLoading:Vh,VaCheckbox:tf,VaIcon:vc},inheritAttrs:!1,props:{columns:{type:Array,default:()=>[]},items:{type:Array,default:()=>[]},itemsTrackBy:{type:[String,Function],default:""},modelValue:{type:Array},sortingOrder:{type:String},sortBy:{type:String},filter:{type:String,default:""},filterMethod:{type:Function},hoverable:{type:Boolean,default:!1},clickable:{type:Boolean,default:!1},animated:{type:Boolean,default:!0},selectable:{type:Boolean,default:!1},selectMode:{type:String,default:"multiple"},selectedColor:{type:String,default:"primary"},perPage:{type:Number},currentPage:{type:Number},loading:{type:Boolean,default:!1},loadingColor:{type:String,default:"primary"},noDataHtml:{type:String,default:"No items"},noDataFilteredHtml:{type:String,default:"No items match the provided filtering condition"},hideDefaultHeader:{type:Boolean,default:!1},footerClone:{type:Boolean,default:!1},allowFooterSorting:{type:Boolean,default:!1},striped:{type:Boolean,default:!1},stickyHeader:{type:Boolean,default:!1},stickyFooter:{type:Boolean,default:!1},height:{type:[String,Number]},rowBind:{type:null},cellBind:{type:null}},emits:["update:modelValue","update:sortBy","update:sortingOrder","filtered","sorted","selectionChange","row:click","row:dblclick","row:contextmenu"],setup(e,{attrs:t,emit:n}){const{columnsComputed:a}=dv(e),{rowsComputed:i}=function(e,t){return{rowsComputed:(0,r.Fl)((()=>t.items.map(((n,r)=>fv(n,r,t.itemsTrackBy,e.value)))))}}(a,e),{filteredRows:s}=function(e,t,n){const o=(0,r.Fl)((()=>e.value.length&&(""!==t.filter||t.filterMethod)?e.value.filter((e=>e.cells.some((e=>"function"==typeof t.filterMethod?t.filterMethod(e.source):e.value.toLowerCase().includes(t.filter.toLowerCase()))))):e.value));return(0,r.YP)(o,(()=>{n("filtered",{items:o.value.map((e=>e.source)),itemsIndexes:o.value.map((e=>e.initialIndex))})})),{filteredRows:o}}(i,e,n),{sortBySync:u,sortingOrderSync:l,toggleSorting:c,sortedRows:d}=function(e,t,n,a){const i=(0,o.iH)(""),s=(0,r.Fl)({get:()=>void 0===n.sortBy?i.value:n.sortBy,set(e){void 0===n.sortBy&&(i.value=e),a("update:sortBy",e)}}),u=(0,o.iH)(null),l=(0,r.Fl)({get:()=>void 0===n.sortingOrder?u.value:n.sortingOrder,set(e){void 0===n.sortingOrder&&(u.value=e),a("update:sortingOrder",e)}}),c=(0,r.Fl)((()=>{if(t.value.length<=1)return t.value;const n=e.value.find((e=>e.name===s.value));if(!n||!n.sortable)return t.value;const r=e.value.indexOf(n);return[...t.value].sort(((e,t)=>{const o=e.cells[r].value,a=t.cells[r].value,i=e.cells[r].source,s=t.cells[r].source;return null===l.value?e.initialIndex-t.initialIndex:("desc"===l.value?-1:1)*("function"==typeof n.sortingFn?n.sortingFn(i,s):o.localeCompare(a))}))}));return(0,r.YP)(c,(()=>{a("sorted",{sortBy:s.value,sortingOrder:l.value,items:c.value.map((e=>e.source)),itemsIndexes:c.value.map((e=>e.initialIndex))})})),{sortBySync:s,sortingOrderSync:l,toggleSorting:function(e){e.name===s.value?null===l.value?l.value="asc":"asc"===l.value?l.value="desc":l.value=null:(s.value=e.name,l.value="asc")},sortedRows:c}}(a,s,e,n),{paginatedRows:p}=function(e,t){return{paginatedRows:(0,r.Fl)((()=>{if(!t.perPage||t.perPage<0)return e.value;if(!t.currentPage||t.currentPage<0)return e.value.slice(0,t.perPage);const n=t.perPage*(t.currentPage-1);return e.value.slice(n,n+t.perPage)}))}}(d,e),{ctrlSelectRow:f,shiftSelectRows:h,toggleBulkSelection:v,isRowSelected:m,severalRowsSelected:g,allRowsSelected:y}=hv(p,e,n),{rowCSSVariables:b,stickyCSSVariables:w,getHeaderCSSVariables:x,getCellCSSVariables:C,getFooterCSSVariables:_,getClass:k,getStyle:S}=bv(e),{getRowBind:E,getCellBind:I}=function(e){return{getRowBind:t=>wv(e.rowBind)?e.rowBind(t.source,t.initialIndex):xv(e.rowBind)?e.rowBind:{},getCellBind:(t,n)=>wv(e.cellBind)?e.cellBind(t.source,n.source,t.column,n.initialIndex):xv(e.cellBind)?e.cellBind:{}}}(e),A=function(e,t){const n=(0,o.iH)("table-transition-shuffle"),a=(0,o.iH)(t.value.length),i=(0,r.Fl)((()=>t.value.length!==a.value));return(0,r.YP)(t,(t=>{const r=i.value||t.length>50?"fade":"shuffle";n.value=e.animated?`table-transition-${r}`:"",a.value=t.length})),(0,r.YP)((()=>e.currentPage),(()=>{i.value||(n.value=e.animated?"table-transition-shuffle":"")})),n}(e,p),F=(0,r.Fl)((()=>0===e.items.length)),D=(0,r.Fl)((()=>0===p.value.length)),R=(0,r.Fl)((()=>({class:[{"va-data-table--sticky":e.stickyHeader||e.stickyFooter},{"va-data-table--scroll":!!e.height},t.class],style:[w.value,t.style]}))),T=(0,r.Fl)((()=>({...rc(t,["class","style"]),class:Sl(e,["striped","selectable","hoverable","clickable"])})));return{columnsComputed:a,rows:p,ctrlSelectRow:f,shiftSelectRows:h,toggleBulkSelection:v,isRowSelected:m,severalRowsSelected:g,allRowsSelected:y,sortBySync:u,sortingOrderSync:l,toggleSorting:c,rowCSSVariables:b,getHeaderCSSVariables:x,getCellCSSVariables:C,getFooterCSSVariables:_,getClass:k,getStyle:S,showNoDataHtml:F,showNoDataFilteredHtml:D,onRowClickHandler:(t,r,o)=>{e.clickable&&n(t,{event:r,item:o.source,itemIndex:o.initialIndex})},computedAttributes:R,computedTableAttributes:T,animationName:A,getColumnAriaSortOrder:e=>l.value&&u.value===e?"asc"===l.value?"ascending":"descending":"none",getRowBind:E,getCellBind:I}}});const _v={key:0},kv={key:0,class:"va-data-table__table-tr"},Sv={key:0,scope:"col",class:"va-data-table__table-th va-data-table__table-cell-select"},Ev=["aria-sort","aria-label","title","onClick","onKeydown"],Iv=["tabindex"],Av={key:0},Fv={key:"showNoDataHtml"},Dv=["colspan","innerHTML"],Rv={key:"showNoDataFilteredHtml"},Tv=["colspan","innerHTML"],Ov=["onClick","onDblclick","onContextmenu"],Pv={key:0,class:"va-data-table__table-tr"},Bv={key:0,class:"va-data-table__table-th"},Mv=["title","aria-label","onClick","onKeydown"],Nv=["tabindex"],Lv={key:0};Cv.render=function(e,t,n,o,a,i){const s=(0,r.up)("va-checkbox"),u=(0,r.up)("va-icon"),l=(0,r.up)("va-inner-loading");return(0,r.wg)(),(0,r.j4)(l,(0,r.dG)({class:"va-data-table","aria-live":"polite"},e.computedAttributes,{loading:e.loading,color:e.loadingColor}),{default:(0,r.w5)((()=>[(0,r._)("table",(0,r.dG)({class:"va-data-table__table"},e.computedTableAttributes),["colgroup"in e.$slots?((0,r.wg)(),(0,r.iD)("colgroup",_v,[(0,r.WI)(e.$slots,"colgroup",(0,ds.vs)((0,r.F4)(e.columnsComputed)))])):(0,r.kq)("v-if",!0),(0,r._)("thead",{class:(0,ds.C_)(["va-data-table__table-thead",{"va-data-table__table-thead--sticky":e.$props.stickyHeader}])},[(0,r.WI)(e.$slots,"headerPrepend"),e.hideDefaultHeader?(0,r.kq)("v-if",!0):((0,r.wg)(),(0,r.iD)("tr",kv,[e.selectable?((0,r.wg)(),(0,r.iD)("th",Sv,["multiple"===e.selectMode?((0,r.wg)(),(0,r.j4)(s,{key:0,"aria-label":"select all rows","model-value":e.severalRowsSelected?"idl":e.allRowsSelected,"true-value":!0,"false-value":!1,color:e.selectedColor,"indeterminate-value":"idl",indeterminate:"","onUpdate:modelValue":e.toggleBulkSelection},null,8,["model-value","color","onUpdate:modelValue"])):(0,r.kq)("v-if",!0)])):(0,r.kq)("v-if",!0),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.columnsComputed,(n=>((0,r.wg)(),(0,r.iD)("th",{key:n.name,scope:"col","aria-sort":e.getColumnAriaSortOrder(n.name),"aria-label":n.sortable?`sort column by ${n.label}`:void 0,title:n.thTitle,class:(0,ds.C_)(["va-data-table__table-th",e.getClass(n.thClass)]),style:(0,ds.j5)([e.getHeaderCSSVariables(n),e.getStyle(n.thStyle)]),onClick:(0,Ks.iM)((t=>n.sortable&&e.toggleSorting(n)),["exact"]),onKeydown:(0,Ks.D2)((0,Ks.iM)((t=>n.sortable&&e.toggleSorting(n)),["stop"]),["enter"])},[(0,r._)("div",{class:"va-data-table__table-th-wrapper",tabindex:n.sortable?0:-1},[`header(${n.name})`in e.$slots?((0,r.wg)(),(0,r.iD)("span",Av,[(0,r.WI)(e.$slots,`header(${n.name})`,(0,ds.vs)((0,r.F4)({label:n.label,key:n.key})))])):(0,r.WI)(e.$slots,"header",(0,ds.vs)((0,r.dG)({key:1},{label:n.label,key:n.key})),(()=>[(0,r._)("span",null,(0,ds.zw)(n.label),1)])),n.sortable?((0,r.wg)(),(0,r.iD)("div",{key:2,class:"va-data-table__table-th-sorting","aria-hidden":"true",onSelectstart:t[0]||(t[0]=(0,Ks.iM)((()=>{}),["prevent"]))},[(0,r.Wm)(u,{name:"asc"===e.sortingOrderSync?"expand_less":"expand_more",size:"small",class:(0,ds.C_)(["va-data-table__table-th-sorting-icon",{active:e.sortBySync===n.name&&null!==e.sortingOrderSync}])},null,8,["name","class"])],32)):(0,r.kq)("v-if",!0)],8,Iv)],46,Ev)))),128))])),(0,r.WI)(e.$slots,"headerAppend")],2),(0,r._)("tbody",{class:"va-data-table__table-tbody",style:(0,ds.j5)(e.rowCSSVariables)},[(0,r.WI)(e.$slots,"bodyPrepend"),(0,r.Wm)(Ks.W3,{name:e.animationName,appear:""},{default:(0,r.w5)((()=>[e.showNoDataHtml?((0,r.wg)(),(0,r.iD)("tr",Fv,[(0,r._)("td",{colspan:e.columnsComputed.length+(e.selectable?1:0),innerHTML:e.noDataHtml,class:"no-data"},null,8,Dv)])):e.showNoDataFilteredHtml?((0,r.wg)(),(0,r.iD)("tr",Rv,[(0,r._)("td",{colspan:e.columnsComputed.length+(e.selectable?1:0),innerHTML:e.noDataFilteredHtml,class:"no-data"},null,8,Tv)])):(0,r.kq)("v-if",!0),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.rows,(n=>((0,r.wg)(),(0,r.iD)("tr",(0,r.dG)({key:`table-row_${n.initialIndex}`,class:["va-data-table__table-tr",[{selected:e.isRowSelected(n)}]]},e.getRowBind(n),{onClick:t=>e.onRowClickHandler("row:click",t,n),onDblclick:t=>e.onRowClickHandler("row:dblclick",t,n),onContextmenu:t=>e.onRowClickHandler("row:contextmenu",t,n)}),[e.selectable?((0,r.wg)(),(0,r.iD)("td",{class:"va-data-table__table-td va-data-table__table-cell-select",key:`selectable_${n.initialIndex}`,onSelectstart:t[1]||(t[1]=(0,Ks.iM)((()=>{}),["prevent"]))},[(0,r.Wm)(s,{"model-value":e.isRowSelected(n),color:e.selectedColor,"aria-label":`select row ${n.initialIndex}`,onClick:[(0,Ks.iM)((t=>e.shiftSelectRows(n)),["shift","exact","stop"]),(0,Ks.iM)((t=>e.ctrlSelectRow(n)),["ctrl","exact","stop"]),(0,Ks.iM)((t=>e.ctrlSelectRow(n)),["exact","stop"])]},null,8,["model-value","color","aria-label","onClick"])],32)):(0,r.kq)("v-if",!0),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(n.cells,(t=>((0,r.wg)(),(0,r.iD)("td",(0,r.dG)({key:`table-cell_${t.column.name+t.rowIndex}`,class:["va-data-table__table-td",e.getClass(t.column.tdClass)],style:[e.getCellCSSVariables(t),e.getStyle(t.column.tdStyle)]},e.getCellBind(t,n)),[`cell(${t.column.name})`in e.$slots?(0,r.WI)(e.$slots,`cell(${t.column.name})`,(0,ds.vs)((0,r.dG)({key:0},t))):(0,r.WI)(e.$slots,"cell",(0,ds.vs)((0,r.dG)({key:1},t)),(()=>[(0,r.Uk)((0,ds.zw)(t.value),1)]))],16)))),128))],16,Ov)))),128))])),_:3},8,["name"]),(0,r.WI)(e.$slots,"bodyAppend")],4),e.footerClone?((0,r.wg)(),(0,r.iD)("tfoot",{key:1,class:(0,ds.C_)(["va-data-table__table-tfoot",{"va-data-table__table-tfoot--sticky":e.$props.stickyFooter}])},[(0,r.WI)(e.$slots,"footerPrepend"),e.hideDefaultHeader?(0,r.kq)("v-if",!0):((0,r.wg)(),(0,r.iD)("tr",Pv,[e.selectable?((0,r.wg)(),(0,r.iD)("th",Bv,["multiple"===e.selectMode?((0,r.wg)(),(0,r.j4)(s,{key:0,"aria-label":"select all rows","model-value":e.severalRowsSelected?"idl":e.allRowsSelected,"true-value":!0,"false-value":!1,color:e.selectedColor,"indeterminate-value":"idl",indeterminate:"","onUpdate:modelValue":e.toggleBulkSelection},null,8,["model-value","color","onUpdate:modelValue"])):(0,r.kq)("v-if",!0)])):(0,r.kq)("v-if",!0),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.columnsComputed,(n=>((0,r.wg)(),(0,r.iD)("th",{key:n.name,title:n.thTitle,"aria-label":e.allowFooterSorting&&n.sortable?`sort column by ${n.label}`:void 0,class:(0,ds.C_)(["va-data-table__table-th",e.getClass(n.thClass)]),style:(0,ds.j5)([e.getFooterCSSVariables(n),e.getStyle(n.thStyle)]),onClick:(0,Ks.iM)((t=>e.allowFooterSorting&&n.sortable&&e.toggleSorting(n)),["exact"]),onKeydown:(0,Ks.D2)((0,Ks.iM)((t=>e.allowFooterSorting&&n.sortable&&e.toggleSorting(n)),["stop"]),["enter"])},[(0,r._)("div",{class:"va-data-table__table-th-wrapper",tabindex:e.allowFooterSorting&&n.sortable?0:-1},[`footer(${n.name})`in e.$slots?((0,r.wg)(),(0,r.iD)("span",Lv,[(0,r.WI)(e.$slots,`footer(${n.name})`,(0,ds.vs)((0,r.F4)({label:n.label,key:n.key})))])):(0,r.WI)(e.$slots,"footer",(0,ds.vs)((0,r.dG)({key:1},n)),(()=>[(0,r._)("span",null,(0,ds.zw)(n.label),1)])),e.allowFooterSorting&&n.sortable?((0,r.wg)(),(0,r.iD)("div",{key:2,class:"va-data-table__table-th-sorting",onSelectstart:t[2]||(t[2]=(0,Ks.iM)((()=>{}),["prevent"]))},[(0,r.Wm)(u,{name:"asc"===e.sortingOrderSync?"expand_less":"expand_more",size:"small",class:(0,ds.C_)(["va-data-table__table-th-sorting-icon",{active:e.sortBySync===n.name&&null!==e.sortingOrderSync}])},null,8,["name","class"])],32)):(0,r.kq)("v-if",!0)],8,Nv)],46,Mv)))),128))])),(0,r.WI)(e.$slots,"footerAppend")],2)):(0,r.kq)("v-if",!0)],16)])),_:3},16,["loading","color"])},Cv.__file="src/components/va-data-table/VaDataTable.vue";const Vv=Ja(Cv);var jv=Y,Wv=Pt,Hv=function(e){return Wv(e)&&"[object Date]"==jv(e)},Uv=hn,zv=vn.exports,$v=zv&&zv.isDate,qv=$v?Uv($v):Hv;const Gv=(e,t)=>(null==e?void 0:e.toDateString())===(null==t?void 0:t.toDateString()),Kv=(e,t)=>(null==e?void 0:e.getFullYear())===(null==t?void 0:t.getFullYear()),Xv=(e,t)=>Kv(e,t)&&(null==e?void 0:e.getMonth())===(null==t?void 0:t.getMonth()),Yv=e=>"object"==typeof e&&("start"in e||"end"in e),Zv=e=>qv(e),Jv=e=>Array.isArray(e),Qv=(e,t,n)=>{const a=(i=e.modelValue,qv(i)?i:qv(null==i?void 0:i.start)?i.start:Array.isArray(i)&&qv(i[0])?i[0]:new Date);var i;const s={type:"day",year:a.getFullYear(),month:a.getMonth(),...n},u=(0,o.iH)(s),l=(0,r.Fl)({get:()=>({...u.value,...e.view}),set(e){u.value=e,t("update:view",e)}});return{syncView:l,next:()=>{var e;"day"===l.value.type?l.value=11===(e=l.value).month?{...e,year:e.year+1,month:0}:{...e,month:e.month+1}:"month"===l.value.type&&(l.value={...l.value,year:l.value.year+1})},prev:()=>{var e;"day"===l.value.type?l.value=0===(e=l.value).month?{...e,year:e.year-1,month:11}:{...e,month:e.month-1}:"month"===l.value.type&&(l.value={...l.value,year:l.value.year-1})}}};function em(e){return void 0===e}const tm=({rowSize:e,start:t,end:n,onSelected:r,onFocusIndex:a})=>{const i=(0,o.iH)(-1);let s=!1;const u={onFocus:()=>{if(s)return;s=!1;const e=void 0===a?(0,o.SU)(t)||0:(0,o.SU)(a);i.value=e},onKeydown:a=>{if(["ArrowRight","ArrowLeft","ArrowDown","ArrowUp","Enter","Space"].includes(a.key)&&a.preventDefault(),"Enter"!==a.key&&"Space"!==a.key)"ArrowRight"===a.key&&(i.value+=1),"ArrowLeft"===a.key&&(i.value-=1),"ArrowDown"===a.key&&(i.value+=e),"ArrowUp"===a.key&&(i.value-=e),!em(t)&&i.value<(0,o.SU)(t)&&(i.value=(0,o.SU)(t)),!em(n)&&i.value>(0,o.SU)(n)-1&&(i.value=(0,o.SU)(n)-1);else{if(void 0===r)return;r(i.value)}},onBlur:()=>{s=!1,i.value=-1},onMousedown:()=>{s=!0},tabindex:0};return{focusedCellIndex:i,containerAttributes:u}},nm=(e,t)=>{throw Error(`Incorrect modelValue for mode ${t}. Got ${JSON.stringify(e)}`)},rm=e=>e.start&&e.end&&e.start>e.end?{start:e.end,end:e.start}:e,om=(e,t,n)=>({updateModelValue:r=>{if(!e.modelValue)return void t("update:modelValue",((e,t)=>{if("single"===t)return e;if("range"===t)return{start:e,end:null};if("multiple"===t)return[e];if("auto"===t)return e;throw new Error("Unknown mode")})(r,e.mode));const o="auto"===e.mode?(a=e.modelValue,Zv(a)?"single":Yv(a)?"range":Jv(a)?"multiple":nm(a,"auto")):e.mode;var a;if("single"===o){if(!Zv(e.modelValue))return nm(e.modelValue,o);t("update:modelValue",r)}else if("range"===o){if(!Yv(e.modelValue))return nm(e.modelValue,o);if(e.modelValue.end&&n(e.modelValue.end,r))return t("update:modelValue",{start:e.modelValue.start,end:null});if(e.modelValue.start&&n(e.modelValue.start,r))return t("update:modelValue",{start:null,end:e.modelValue.end});if(null===e.modelValue.end)return t("update:modelValue",rm({start:e.modelValue.start,end:r}));if(null===e.modelValue.start)return t("update:modelValue",rm({end:e.modelValue.end,start:r}));t("update:modelValue",{start:r,end:null})}else if("multiple"===o){if(!Jv(e.modelValue))return nm(e.modelValue,o);const a=!!e.modelValue.find((e=>n(e,r)));t("update:modelValue",a?e.modelValue.filter((e=>!n(e,r))):[...e.modelValue,r].sort(((e,t)=>e.getTime()-t.getTime())))}}}),am=(e,t,n,a)=>{const i=(e=>({month:Xv,day:Gv,year:Kv}[e]))(e),s=n.allowedDays||n.allowedMonths||n.allowedYears,u=(0,o.iH)(-1),l=(0,r.Fl)((()=>t.value[u.value])),{updateModelValue:c}=om(n,a,i);return(0,r.YP)(l,(t=>{a(`hover:${e}`,t)})),{hoveredIndex:u,hoveredValue:l,onClick:t=>{n.readonly||(e=>void 0!==s&&!s(e))(t)||(c(t),a(`click:${e}`,t))},isToday:e=>{const t=new Date;return i(t,e)},isSelected:e=>!!n.modelValue&&(Zv(n.modelValue)?i(n.modelValue,e):Jv(n.modelValue)?!!n.modelValue.find((t=>i(t,e))):!!Yv(n.modelValue)&&(i(n.modelValue.start,e)||i(n.modelValue.end,e))),isInRange:e=>{if(!n.modelValue)return!1;if(!Yv(n.modelValue))return!1;if(n.modelValue.start&&n.modelValue.end)return n.modelValue.start<e&&n.modelValue.end>e;const t=n.modelValue.start||n.modelValue.end;return!!t&&!!l.value&&(t<e?l.value>=e:l.value<=e)}}},im=(e,t)=>new Date(e,t+1,0).getDate(),sm=e=>Array.from(Array(e).keys()).map((e=>e+1)),um=(e,t)=>{const n=(0,r.Fl)((()=>{return o=e.value.year,a=e.value.month,n=new Date(o,a,1).getDay(),t&&"Monday"===(null===(r=t.firstWeekday)||void 0===r?void 0:r.value)?0===n?6:n-1:n;var n,r,o,a})),o=()=>{if(0===n.value)return[];const t=im(e.value.year,e.value.month-1);return sm(t).slice(-n.value).map((t=>new Date(e.value.year,e.value.month-1,t)))},a=(0,r.Fl)((()=>[...o(),...sm(im(e.value.year,e.value.month)).map((t=>new Date(e.value.year,e.value.month,t)))])),i=(0,r.Fl)((()=>a.value.length));return{calendarDates:(0,r.Fl)((()=>{const t=a.value,n=42-t.length,r=im(e.value.year,e.value.month+1),o=sm(r);return[...t,...o.slice(0,n).map((t=>new Date(e.value.year,e.value.month+1,t)))]})),currentMonthStartIndex:n,currentMonthEndIndex:i}};var lm=(0,r.aZ)({name:"VaDatePickerCell",props:{otherMonth:{type:Boolean,default:!1},today:{type:Boolean,default:!1},inRange:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},selected:{type:Boolean,default:!1},weekend:{type:Boolean,default:!1},hidden:{type:Boolean,default:!1},focused:{type:Boolean,default:!1},highlightWeekend:{type:Boolean,default:!1},highlightToday:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1}},emits:["click"],setup:(e,{emit:t})=>({onClick:()=>{e.disabled||t("click")}})});const cm={key:0,class:"va-date-picker-cell va-date-picker-cell_clear"};lm.render=function(e,t,n,o,a,i){return e.hidden?((0,r.wg)(),(0,r.iD)("div",cm)):((0,r.wg)(),(0,r.iD)("div",{key:1,class:(0,ds.C_)(["va-date-picker-cell",{"va-date-picker-cell_other-month":e.otherMonth,"va-date-picker-cell_today":e.highlightToday&&e.today,"va-date-picker-cell_in-range":e.inRange,"va-date-picker-cell_disabled":e.disabled,"va-date-picker-cell_highlighted-weekend":e.highlightWeekend&&e.weekend,"va-date-picker-cell_selected":e.selected,"va-date-picker-cell_focused":e.focused,"va-date-picker-cell_readonly":e.readonly}]),onClick:t[0]||(t[0]=(...t)=>e.onClick&&e.onClick(...t)),onKeypress:t[1]||(t[1]=(0,Ks.D2)((0,Ks.iM)(((...t)=>e.onClick&&e.onClick(...t)),["prevent","stop"]),["space","enter"]))},[(0,r.WI)(e.$slots,"default")],34))},lm.__file="src/components/va-date-picker/components/VaDatePickerCell.vue";const dm=bf(lm,["date","selectedValue","focusedDate","focused"]);var pm=(0,r.aZ)({name:"VaDayPicker",components:{VaDatePickerCell:lm},props:{...dm,monthNames:{type:Array,required:!0},weekdayNames:{type:Array,required:!0},firstWeekday:{type:String,default:"Sunday"},hideWeekDays:{type:Boolean,default:!1},view:{type:Object,default:()=>({type:"day"})},modelValue:{type:[Date,Array,Object]},mode:{type:String,default:"auto"},showOtherMonths:{type:Boolean,default:!1},allowedDays:{type:Function},weekends:{type:Function},highlightWeekend:{type:Boolean,default:!1},highlightToday:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1}},emits:["update:modelValue","hover:day","click:day"],setup(e,{emit:t}){const{firstWeekday:n,weekdayNames:a,view:i}=(0,o.BK)(e),s=yf(e,dm),{calendarDates:u,currentMonthStartIndex:l,currentMonthEndIndex:c}=um(i,{firstWeekday:n}),d=(0,r.Fl)((()=>"Sunday"===n.value?a.value:[...a.value.slice(1),a.value[0]])),{hoveredIndex:p,onClick:f,isToday:h,isSelected:v,isInRange:m}=am("day",u,e,t),g=(0,r.Fl)((()=>e.showOtherMonths?0:l.value)),y=(0,r.Fl)((()=>e.showOtherMonths?u.value.length:c.value)),{focusedCellIndex:b,containerAttributes:w}=tm({rowSize:7,start:g,end:y,onSelected:e=>f(u.value[e])});return(0,r.YP)(b,(e=>{p.value=e})),(0,r.YP)(p,(e=>{b.value=e})),{hoveredIndex:p,calendarDates:u,onClick:f,isToday:h,isSelected:v,isInRange:m,isOtherMonth:t=>e.view.month!==t.getMonth(),isDateDisabled:t=>void 0!==e.allowedDays&&!e.allowedDays(t),isDateWeekend:t=>void 0===e.weekends?6===t.getDay()||0===t.getDay():e.weekends(t),containerAttributes:w,weekdayNamesComputed:d,VaDayPickerCellPropValues:s,focusedCellIndex:b}}});const fm=["onMouseenter"],hm={class:"va-date-picker-cell__day"};pm.render=function(e,t,n,o,a,i){const s=(0,r.up)("va-date-picker-cell");return(0,r.wg)(),(0,r.iD)("div",(0,r.dG)({class:"va-day-picker"},e.containerAttributes),[e.hideWeekDays?(0,r.kq)("v-if",!0):((0,r.wg)(!0),(0,r.iD)(r.HY,{key:0},(0,r.Ko)(e.weekdayNamesComputed,(t=>((0,r.wg)(),(0,r.iD)("div",{key:t,class:"va-day-picker__weekday"},[(0,r.WI)(e.$slots,"weekday",{},(()=>[(0,r.Uk)((0,ds.zw)(t),1)]))])))),128)),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.calendarDates,((n,o)=>((0,r.wg)(),(0,r.iD)("div",{class:"va-day-picker__calendar__day-wrapper",key:o,onMouseenter:t=>e.hoveredIndex=o,onMouseleave:t[0]||(t[0]=t=>e.hoveredIndex=-1)},[(0,r.Wm)(s,{hidden:e.isOtherMonth(n)&&!e.showOtherMonths,today:e.isToday(n),selected:e.isSelected(n),"in-range":e.isInRange(n),"other-month":e.isOtherMonth(n),weekend:e.isDateWeekend(n),disabled:e.isDateDisabled(n),focused:e.hoveredIndex===o,"highlight-today":e.highlightToday,"highlight-weekend":e.highlightWeekend,readonly:e.readonly,onClick:t=>{e.onClick(n),e.focusedCellIndex=o}},{default:(0,r.w5)((()=>[(0,r._)("span",hm,[(0,r.WI)(e.$slots,"day",(0,ds.vs)((0,r.F4)({date:n})),(()=>[(0,r.Uk)((0,ds.zw)(n.getDate()),1)]))])])),_:2},1032,["hidden","today","selected","in-range","other-month","weekend","disabled","focused","highlight-today","highlight-weekend","readonly","onClick"])],40,fm)))),128))],16)},pm.__file="src/components/va-date-picker/components/VaDayPicker/VaDayPicker.vue";var vm=(0,r.aZ)({name:"VaDatePickerHeader",components:{VaButton:Wc},emits:["update:view"],props:{monthNames:{type:Array,required:!0},view:{type:Object},color:{type:String,default:void 0},disabled:{type:Boolean,default:!1}},setup(e,{emit:t}){const{syncView:n,prev:r,next:o}=Qv(e,t);return{prev:r,next:o,changeView:e=>{n.value=e},switchView:()=>{"day"===n.value.type?n.value={...n.value,type:"month"}:"month"===n.value.type&&(n.value={...n.value,type:"year"})},syncView:n}}});const mm={key:0,class:"va-date-picker-header va-date-picker__header"},gm={class:"va-date-picker__header__text"},ym={class:"ml-1"};vm.render=function(e,t,n,o,a,i){const s=(0,r.up)("va-button");return"year"!==e.syncView.type?((0,r.wg)(),(0,r.iD)("div",mm,[(0,r.WI)(e.$slots,"buttonPrev",(0,ds.vs)((0,r.F4)({onClick:e.prev})),(()=>[(0,r.Wm)(s,{disabled:e.$props.disabled,icon:"chevron_left",flat:"",size:"small",color:e.color,textColor:"dark","aria-label":"next period",onClick:e.prev},null,8,["disabled","color","onClick"])])),(0,r._)("div",gm,[(0,r.WI)(e.$slots,"header",(0,ds.vs)((0,r.F4)({year:e.syncView.year,month:e.syncView.month,monthNames:e.monthNames,view:e.syncView,changeView:e.changeView,switchView:e.switchView})),(()=>[(0,r.Wm)(s,{disabled:e.$props.disabled,flat:"",size:"small",rounded:!1,color:e.color,textColor:"dark","aria-label":"switch view",onClick:e.switchView},{default:(0,r.w5)((()=>[(0,r.WI)(e.$slots,"year",(0,ds.vs)((0,r.F4)({year:e.syncView.year})),(()=>[(0,r.Uk)((0,ds.zw)(e.syncView.year),1)])),"day"===e.syncView.type?(0,r.WI)(e.$slots,"month",(0,ds.vs)((0,r.dG)({key:0},{month:e.syncView.month})),(()=>[(0,r._)("span",ym,(0,ds.zw)(e.monthNames[e.syncView.month]),1)])):(0,r.kq)("v-if",!0)])),_:3},8,["disabled","color","onClick"])]))]),(0,r.WI)(e.$slots,"buttonNext",(0,ds.vs)((0,r.F4)({onClick:e.next})),(()=>[(0,r.Wm)(s,{disabled:e.$props.disabled,icon:"chevron_right",flat:"",size:"small",color:e.color,textColor:"dark","aria-label":"previous period",onClick:e.next},null,8,["disabled","color","onClick"])]))])):(0,r.kq)("v-if",!0)},vm.__file="src/components/va-date-picker/components/VaDatePickerHeader/VaDatePickerHeader.vue";var bm=(0,r.aZ)({name:"VaMonthPicker",components:{VaDatePickerCell:lm},props:{modelValue:{type:[Date,Array,Object]},monthNames:{type:Array,required:!0},view:{type:Object,default:()=>({type:"month"})},allowedMonths:{type:Function,default:void 0},highlightToday:{type:Boolean,default:!0},mode:{type:String,default:"auto"},readonly:{type:Boolean,default:!1}},emits:["update:modelValue","hover:month","click:month"],setup(e,{emit:t}){const{view:n}=(0,o.BK)(e),a=(0,r.Fl)((()=>Array.from(Array(12).keys()).map((e=>new Date(n.value.year,e))))),{hoveredIndex:i,onClick:s,isToday:u,isSelected:l,isInRange:c}=am("month",a,e,t),{focusedCellIndex:d,containerAttributes:p}=tm({rowSize:3,start:0,end:a.value.length,onSelected:e=>s(a.value[e])});return(0,r.YP)(d,(e=>{i.value=e})),(0,r.YP)(i,(e=>{d.value=e})),{months:a,hoveredIndex:i,onClick:s,isToday:u,isSelected:l,isInRange:c,isDisabled:t=>void 0!==e.allowedMonths&&!e.allowedMonths(t),containerAttributes:p,focusedCellIndex:d}}});const wm=["onMouseenter"];bm.render=function(e,t,n,o,a,i){const s=(0,r.up)("va-date-picker-cell");return(0,r.wg)(),(0,r.iD)("div",(0,r.dG)({class:"va-month-picker"},e.containerAttributes),[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.months,((n,o)=>((0,r.wg)(),(0,r.iD)("div",{key:o,class:"va-month-picker__month-wrapper",onMouseenter:t=>e.hoveredIndex=o,onMouseleave:t[0]||(t[0]=t=>e.hoveredIndex=-1)},[(0,r.Wm)(s,{"in-range":!!e.isInRange(n),selected:!!e.isSelected(n),disabled:!!e.isDisabled(n),today:!!e.isToday(n),focused:e.hoveredIndex===o,"highlight-today":e.highlightToday,readonly:e.readonly,onClick:t=>{e.onClick(n),e.focusedCellIndex=o}},{default:(0,r.w5)((()=>[(0,r.WI)(e.$slots,"month",(0,ds.vs)((0,r.F4)({monthIndex:o,month:e.monthNames[o]})),(()=>[(0,r.Uk)((0,ds.zw)(e.monthNames[o]),1)]))])),_:2},1032,["in-range","selected","disabled","today","focused","highlight-today","readonly","onClick"])],40,wm)))),128))],16)},bm.__file="src/components/va-date-picker/components/VaMonthPicker/VaMonthPicker.vue";var xm=(0,r.aZ)({name:"VaYearPicker",components:{VaDatePickerCell:lm},props:{modelValue:{type:[Date,Array,Object]},allowedYears:{type:Function,default:void 0},highlightToday:{type:Boolean,default:!0},startYear:{type:Number,default:1970},mode:{type:String,default:"auto"},view:{type:Object,default:()=>({type:"year"})},endYear:{type:Number,default:()=>(new Date).getFullYear()+50},readonly:{type:Boolean,default:!1}},emits:["update:modelValue","hover:year","click:year"],setup(e,{emit:t}){const n=(0,o.XI)(),{view:a}=(0,o.BK)(e),i=(e,t)=>{const n=t-e+1;return Array.from(Array(n).keys()).map((t=>(e=>{const t=new Date;return t.setFullYear(e),t})(e+t)))},s=(0,r.Fl)((()=>i(e.startYear,e.endYear)));(0,r.bv)((()=>{(e=>{if(!n.value)return;const t=n.value.scrollHeight,r=n.value.offsetHeight,o=t/s.value.length*e;n.value.scrollTo({top:o-r/2})})(s.value.findIndex((e=>e.getFullYear()===a.value.year)))}));const{hoveredIndex:u,onClick:l,isToday:c,isSelected:d,isInRange:p}=am("year",s,e,t),{focusedCellIndex:f,containerAttributes:h}=tm({rowSize:1,start:0,end:s.value.length,onFocusIndex:(0,r.Fl)((()=>s.value.findIndex((e=>e.getFullYear()===a.value.year)))),onSelected:e=>l(s.value[e])});return(0,r.YP)(f,(e=>-1!==e&&(e=>{if(!n.value)return;const t=n.value.scrollHeight,r=n.value.offsetHeight,o=t/s.value.length*e,a=t/s.value.length,i=o-n.value.scrollTop;i<0?n.value.scrollTo({top:o}):i>r&&n.value.scrollTo({top:o-r+a})})(e))),(0,r.YP)(f,(e=>{u.value=e})),(0,r.YP)(u,(e=>{f.value=e})),{hoveredIndex:u,years:s,rootNode:n,onClick:l,isToday:c,isSelected:d,isInRange:p,isYearDisabled:t=>void 0!==e.allowedYears&&!e.allowedYears(t),focusedCellIndex:f,containerAttributes:h}}});xm.render=function(e,t,n,o,a,i){const s=(0,r.up)("va-date-picker-cell");return(0,r.wg)(),(0,r.iD)("div",(0,r.dG)({ref:"rootNode",class:"va-year-picker"},e.containerAttributes,{onKeydown:t[1]||(t[1]=(0,Ks.D2)((0,Ks.iM)((()=>{}),["prevent"]),["space"]))}),[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.years,((n,o)=>((0,r.wg)(),(0,r.j4)(s,{key:n.toString(),"in-range":e.isInRange(n),selected:e.isSelected(n),disabled:e.isYearDisabled(n),today:e.isToday(n),focused:e.focusedCellIndex===o,"highlight-today":e.highlightToday,readonly:e.readonly,onClick:t=>{e.onClick(n),e.focusedCellIndex=o},onMouseenter:t=>e.hoveredIndex=o,onMouseleave:t[0]||(t[0]=t=>e.hoveredIndex=-1)},{default:(0,r.w5)((()=>[(0,r.Uk)((0,ds.zw)(n.getFullYear()),1)])),_:2},1032,["in-range","selected","disabled","today","focused","highlight-today","readonly","onClick","onMouseenter"])))),128))],16)},xm.__file="src/components/va-date-picker/components/VaYearPicker/VaYearPicker.vue";var Cm=(0,r.aZ)({name:"VaDatePicker",components:{VaDayPicker:pm,VaDatePickerHeader:vm,VaMonthPicker:bm,VaYearPicker:xm},props:{...ns,...bf(vm),...bf(pm),...bf(bm),...bf(xm),modelValue:{type:[Date,Array,Object]},monthNames:{type:Array,default:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},weekdayNames:{type:Array,default:["SU","MO","TU","WE","TH","FR","SA"]},view:{type:Object},type:{type:String,default:"day"},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},color:{type:String,default:void 0},weekendsColor:{type:String,default:void 0}},emits:[...rs,...wf(vm),...wf(xm),...wf(pm),...wf(bm)],setup(e,{emit:t}){const n=(0,o.iH)(),{valueComputed:a}=os(e,t),{syncView:i}=Qv(e,t,{type:e.type}),s=(0,r.Fl)((()=>({"va-date-picker_without-week-days":e.hideWeekDays,"va-date-picker_disabled":e.disabled}))),{colorsToCSSVariable:u}=fu(),l=u({color:e.color,"weekends-color":e.weekendsColor},"va-date-picker"),c=()=>{var e;return null===(e=n.value)||void 0===e?void 0:e.$el.focus()};return(0,r.YP)(i,((e,t)=>{e.type!==t.type&&(0,r.Y3)(c)})),{dayPickerProps:yf(e,bf(pm)),headerProps:yf(e,bf(vm)),monthPickerProps:yf(e,bf(bm)),yearPickerProps:yf(e,bf(xm)),syncView:i,classComputed:s,valueComputed:a,onDayModelValueUpdate:t=>{e.readonly||"day"===e.type&&(a.value=t)},onMonthClick:n=>{t("click:month",n);const r=n.getFullYear(),o=n.getMonth();"month"!==e.type&&(i.value={type:"day",year:r,month:o})},onMonthModelValueUpdate:t=>{"month"===e.type&&(a.value=t)},onYearClick:n=>{t("click:year",n);const r=n.getFullYear();"year"!==e.type&&(i.value={type:"month",year:r,month:i.value.month})},onYearModelValueUpdate:t=>{"year"===e.type&&(a.value=t)},colorsStyle:l,currentPicker:n,focusCurrentPicker:c,isPickerReadonly:t=>e.readonly&&e.type===t}}});const _m={class:"va-date-picker__picker-wrapper"};Cm.render=function(e,t,n,o,a,i){const s=(0,r.up)("va-date-picker-header"),u=(0,r.up)("va-day-picker"),l=(0,r.up)("va-month-picker"),c=(0,r.up)("va-year-picker");return(0,r.wg)(),(0,r.iD)("div",{class:(0,ds.C_)(["va-date-picker",e.classComputed]),style:(0,ds.j5)(e.colorsStyle)},[(0,r.Wm)(s,(0,r.dG)(e.headerProps,{view:e.syncView,"onUpdate:view":t[0]||(t[0]=t=>e.syncView=t)}),(0,r.Nv)({_:2},[(0,r.Ko)(e.$slots,((t,n)=>({name:n,fn:(0,r.w5)((t=>[(0,r.WI)(e.$slots,n,(0,ds.vs)((0,r.F4)(t)))]))})))]),1040,["view"]),(0,r._)("div",_m,["day"===e.syncView.type?((0,r.wg)(),(0,r.j4)(u,(0,r.dG)({key:0,ref:"currentPicker"},e.dayPickerProps,{"model-value":e.valueComputed,view:e.syncView,readonly:e.$props.disabled||e.isPickerReadonly("day"),"onUpdate:modelValue":e.onDayModelValueUpdate,"onHover:day":t[1]||(t[1]=t=>e.$emit("hover:day",t)),"onClick:day":t[2]||(t[2]=t=>e.$emit("click:day",t))}),(0,r.Nv)({_:2},[(0,r.Ko)(e.$slots,((t,n)=>({name:n,fn:(0,r.w5)((t=>[(0,r.WI)(e.$slots,n,(0,ds.vs)((0,r.F4)(t)))]))})))]),1040,["model-value","view","readonly","onUpdate:modelValue"])):(0,r.kq)("v-if",!0),"month"===e.syncView.type?((0,r.wg)(),(0,r.j4)(l,(0,r.dG)({key:1,ref:"currentPicker"},e.monthPickerProps,{view:e.syncView,"model-value":e.valueComputed,readonly:e.$props.disabled||e.isPickerReadonly("month"),"onUpdate:modelValue":e.onMonthModelValueUpdate,"onHover:month":t[3]||(t[3]=t=>e.$emit("hover:month",t)),"onClick:month":e.onMonthClick}),(0,r.Nv)({_:2},[(0,r.Ko)(e.$slots,((t,n)=>({name:n,fn:(0,r.w5)((t=>[(0,r.WI)(e.$slots,n,(0,ds.vs)((0,r.F4)(t)))]))})))]),1040,["view","model-value","readonly","onUpdate:modelValue","onClick:month"])):(0,r.kq)("v-if",!0),"year"===e.syncView.type?((0,r.wg)(),(0,r.j4)(c,(0,r.dG)({key:2,ref:"currentPicker"},e.yearPickerProps,{view:e.syncView,"model-value":e.valueComputed,readonly:e.$props.disabled||e.isPickerReadonly("year"),"onHover:year":t[4]||(t[4]=t=>e.$emit("hover:year",t)),"onUpdate:modelValue":e.onYearModelValueUpdate,"onClick:year":e.onYearClick}),(0,r.Nv)({_:2},[(0,r.Ko)(e.$slots,((t,n)=>({name:n,fn:(0,r.w5)((t=>[(0,r.WI)(e.$slots,n,(0,ds.vs)((0,r.F4)(t)))]))})))]),1040,["view","model-value","readonly","onUpdate:modelValue","onClick:year"])):(0,r.kq)("v-if",!0)])],6)},Cm.__file="src/components/va-date-picker/VaDatePicker.vue";var km=function(e){return null==e};const Sm=e=>new Date(Date.parse(e)),Em=e=>{const t=(0,o.iH)(!0),n=n=>{const r=(e.parseDate||Sm)(n);var o;return t.value=qv(o=r)&&!isNaN(o.getTime()),r};return{parseDateInputValue:r=>{if(t.value=!0,e.parse)return e.parse(r,t);if((t=>t.includes(e.delimiter))(r))return r.split(e.delimiter).map(n);if((t=>t.includes(e.rangeDelimiter))(r)){const[t,o]=r.split(e.rangeDelimiter).map(n);return{start:t,end:o}}return n(r)},isValid:t}},Im=e=>"object"==typeof e&&("start"in e||"end"in e),Am=e=>"string"==typeof e?Sm(e):new Date(e),Fm=e=>Array.isArray(e)?e.map(Am):Im(e)?{start:km(e.start)?e.start:Am(e.start),end:km(e.end)?e.end:Am(e.end)}:Am(e),Dm=(e,t,n=Fm)=>{const a=(0,o.iH)(e.value&&n(e.value)),i=(0,r.Fl)({get:()=>a.value,set:n=>{t.value&&(e.value=n),n?(Im(n)?null!==n.end&&(e.value=n):e.value=n,a.value=n):e.value=n}});return(0,r.YP)(e,(e=>{a.value=e})),{valueComputed:i,reset:()=>{a.value&&Im(a.value)&&(a.value=e.value&&n(e.value))}}},Rm=bf(mh,["mask","returnRaw","autosize","minRows","maxRows","type","inputmode"]),Tm=bf(Cm);var Om=(0,r.aZ)({name:"VaDateInput",components:{VaDropdown:Kd,VaDropdownContent:Gd,VaDatePicker:Cm,VaInput:mh,VaIcon:vc},props:{...Rm,...Tm,...Wp,clearValue:{type:Date,default:void 0},modelValue:{type:[Date,Array,Object,String,Number]},resetOnClose:{type:Boolean,default:!0},isOpen:{type:Boolean,default:void 0},format:{type:Function},formatDate:{type:Function,default:e=>e.toLocaleDateString()},parse:{type:Function},parseDate:{type:Function},parseValue:{type:Function},delimiter:{type:String,default:", "},rangeDelimiter:{type:String,default:" ~ "},manualInput:{type:Boolean,default:!1},color:{type:String,default:"primary"},leftIcon:{type:Boolean,default:!1},icon:{type:String,default:"calendar_today"}},emits:[...wf(Cm),...Kf,...Hp,...rs,"update:is-open","update:text"],setup(e,{emit:t,slots:n}){const a=(0,o.iH)(),i=(0,o.iH)(),{isOpen:s,resetOnClose:u}=(0,o.BK)(e),{valueComputed:l}=os(e,t),{syncProp:c}=function(e,t,n,a){if(void 0===a)return{syncProp:(0,r.Fl)({set(e){n(`update:${t}`,e)},get:()=>e.value})};const i=(0,o.iH)(a);return{syncProp:(0,r.Fl)({set(e){i.value=e,n(`update:${t}`,e)},get:()=>void 0===(null==e?void 0:e.value)?i.value:e.value})}}(s,"is-open",t,!1),d=(0,r.Fl)((()=>!u.value)),{valueComputed:p,reset:f}=Dm(l,d,e.parseValue);(0,r.YP)(c,(e=>{e||d.value||f()}));const h=t=>t?e.formatDate(t):"...",{parseDateInputValue:v,isValid:m}=Em(e);(0,r.YP)(p,(()=>{m.value=!0}));const g=t=>{if(e.format)return e.format(p.value);if(Jv(t))return t.map((t=>e.formatDate(t))).join(e.delimiter);if(Zv(t))return e.formatDate(t);if(Yv(t))return h(t.start)+e.rangeDelimiter+h(t.end);throw new Error("VaDatePicker: Invalid model value. Value should be Date, Date[] or { start: Date, end: Date | null }")},{text:y,value:b}=(w=p,x=v,C=g,{text:(0,r.Fl)({get(){const e=w.value;return"string"==typeof e?e:C(e)},set(e){"string"==typeof w.value?w.value=e:w.value=x(e)}}),value:(0,r.Fl)({get:()=>"string"==typeof w.value?x(w.value):w.value,set(e){"string"==typeof w.value?w.value=C(e):w.value=e}})});var w,x,C;const _=(0,r.Fl)((()=>m.value?p.value?y.value:e.clearValue?g(e.clearValue):"":"")),k=()=>{l.value=e.clearValue,t("clear")},S=()=>{var e;null===(e=a.value)||void 0===e||e.focus()},E=()=>{(0,r.Y3)((()=>{var e;return null===(e=i.value)||void 0===e?void 0:e.focusCurrentPicker()}))},I=()=>{c.value?E():S()},{computedError:A,computedErrorMessages:F,listeners:D}=Up(e,t,k,S),R=(0,r.Fl)((()=>!m.value&&p.value!==e.clearValue||A.value)),T=(0,r.Fl)((()=>{const t=[e.leftIcon&&"prependInner",(!e.leftIcon||e.clearable)&&"icon"];return Object.keys(n).filter((e=>!t.includes(e)))})),{canBeCleared:O,clearIconProps:P,onFocus:B,onBlur:M}=Xf(e,p),N=(0,r.Fl)((()=>({name:e.icon,color:e.color,size:"small",class:"va-date-input__icon"}))),L=(0,r.Fl)((()=>({...yf(e,Rm).value,clearable:!1,rules:[],error:R.value,errorMessages:F.value,readonly:e.readonly||!e.manualInput}))),V=(0,r.Fl)((()=>({focus:()=>{B(),D.onFocus()},blur:()=>{M(),D.onBlur()}})));return{datePicker:i,valueText:_,valueWithoutText:b,valueComputed:p,isOpenSync:c,onInputTextChanged:({target:e})=>{const t=v(e.value);m.value&&(p.value=t)},input:a,inputProps:L,inputListeners:V,datePickerProps:yf(e,bf(Cm)),filterSlots:T,canBeCleared:O,clearIconProps:P,iconProps:N,hideAndFocus:()=>{c.value=!1,S()},showAndFocus:t=>{e.manualInput||(c.value=!0,E(),t.preventDefault())},toggleDropdown:()=>{c.value=!c.value,(0,r.Y3)(I)},showDropdown:()=>{c.value=!0,(0,r.Y3)(I)},focusInputOrPicker:I,reset:k,focus:S,blur:()=>{var e;null===(e=a.value)||void 0===e||e.blur()}}}});const Pm={class:"va-date-input"};Om.render=function(e,t,n,o,a,i){const s=(0,r.up)("va-icon"),u=(0,r.up)("va-input"),l=(0,r.up)("va-date-picker"),c=(0,r.up)("va-dropdown-content"),d=(0,r.up)("va-dropdown");return(0,r.wg)(),(0,r.iD)("div",Pm,[(0,r.Wm)(d,{modelValue:e.isOpenSync,"onUpdate:modelValue":t[13]||(t[13]=t=>e.isOpenSync=t),trigger:"none",anchorSelector:".va-input-wrapper__field",offset:[2,0],"close-on-content-click":!1,stateful:!1,disabled:e.disabled},{anchor:(0,r.w5)((()=>[(0,r.WI)(e.$slots,"input",(0,ds.vs)((0,r.F4)({valueText:e.valueText,inputProps:e.inputProps,inputListeners:e.inputListeners})),(()=>[(0,r.Wm)(u,(0,r.dG)({ref:"input",class:"va-date-input__input"},e.inputProps,(0,r.mx)(e.inputListeners),{"model-value":e.valueText,"aria-label":"selected date",onChange:e.onInputTextChanged,onClick:t[3]||(t[3]=t=>e.toggleDropdown()),onKeydown:[(0,Ks.D2)((0,Ks.iM)(e.showAndFocus,["stop"]),["enter"]),(0,Ks.D2)((0,Ks.iM)(e.showAndFocus,["stop"]),["space"])]}),(0,r.Nv)({prependInner:(0,r.w5)((t=>[(0,r.WI)(e.$slots,"prependInner",(0,ds.vs)((0,r.F4)(t))),e.$props.leftIcon?((0,r.wg)(),(0,r.j4)(s,(0,ds.vs)((0,r.dG)({key:0},e.iconProps)),null,16)):(0,r.kq)("v-if",!0)])),icon:(0,r.w5)((()=>[e.canBeCleared?((0,r.wg)(),(0,r.j4)(s,(0,r.dG)({key:0,"aria-hiden":"false",role:"button","aria-label":"reset",tabindex:"0",class:"va-date-input__clear-icon"},e.clearIconProps,{onClick:t[0]||(t[0]=t=>e.reset()),onKeydown:[t[1]||(t[1]=(0,Ks.D2)((0,Ks.iM)((t=>e.reset()),["stop"]),["enter"])),t[2]||(t[2]=(0,Ks.D2)((0,Ks.iM)((t=>e.reset()),["stop"]),["space"]))]}),null,16)):e.$props.leftIcon?(0,r.kq)("v-if",!0):((0,r.wg)(),(0,r.j4)(s,(0,r.dG)({key:1},e.iconProps,{tabindex:"0",onKeydown:[(0,Ks.D2)((0,Ks.iM)(e.showDropdown,["stop"]),["enter"]),(0,Ks.D2)((0,Ks.iM)(e.showDropdown,["stop"]),["space"])]}),null,16,["onKeydown"]))])),_:2},[(0,r.Ko)(e.filterSlots,(t=>({name:t,fn:(0,r.w5)((n=>[(0,r.WI)(e.$slots,t,(0,ds.vs)((0,r.F4)(n)))]))})))]),1040,["model-value","onChange","onKeydown"])]))])),default:(0,r.w5)((()=>[(0,r.Wm)(c,{onKeydown:t[12]||(t[12]=(0,Ks.D2)((0,Ks.iM)((t=>e.hideAndFocus()),["stop","prevent"]),["esc"]))},{default:(0,r.w5)((()=>[(0,r.Wm)(l,(0,r.dG)({ref:"datePicker"},e.datePickerProps,{modelValue:e.valueWithoutText,"onUpdate:modelValue":t[4]||(t[4]=t=>e.valueWithoutText=t),"onClick:day":t[5]||(t[5]=t=>e.$emit("click:day",t)),"onClick:month":t[6]||(t[6]=t=>e.$emit("click:month",t)),"onClick:year":t[7]||(t[7]=t=>e.$emit("click:year",t)),"onHover:day":t[8]||(t[8]=t=>e.$emit("hover:day",t)),"onHover:month":t[9]||(t[9]=t=>e.$emit("hover:month",t)),"onHover:year":t[10]||(t[10]=t=>e.$emit("hover:year",t)),"onUpdate:view":t[11]||(t[11]=t=>e.$emit("update:view",t))}),(0,r.Nv)({_:2},[(0,r.Ko)(e.$slots,((t,n)=>({name:n,fn:(0,r.w5)((t=>[(0,r.WI)(e.$slots,n,(0,ds.vs)((0,r.F4)(t)))]))})))]),1040,["modelValue"])])),_:3})])),_:3},8,["modelValue","disabled"])])},Om.__file="src/components/va-date-input/VaDateInput.vue";const Bm=Ja(Om),Mm=Ja(Cm);var Nm=(0,r.aZ)({name:"VaDivider",props:{vertical:{type:Boolean,default:!1},dashed:{type:Boolean,default:!1},inset:{type:Boolean,default:!1},orientation:{type:String,default:"center",validator:e=>["left","right","center"].includes(e)}},setup:(e,{slots:t})=>({hasSlot:(0,r.Fl)((()=>!!t.default)),classComputed:(0,r.Fl)((()=>({"va-divider--vertical":e.vertical,"va-divider--inset":e.inset,[`va-divider--${e.orientation}`]:e.orientation&&!e.vertical,"va-divider--dashed":e.dashed})))})});const Lm=["aria-orientation"],Vm={key:0,class:"va-divider__text"};Nm.render=function(e,t,n,o,a,i){return(0,r.wg)(),(0,r.iD)("div",{role:"separator",class:(0,ds.C_)(["va-divider",e.classComputed]),"aria-orientation":e.vertical?"vertical":"horizontal"},[e.hasSlot&&!e.vertical?((0,r.wg)(),(0,r.iD)("div",Vm,[(0,r.WI)(e.$slots,"default")])):(0,r.kq)("v-if",!0)],10,Lm)},Nm.__file="src/components/va-divider/VaDivider.vue";const jm=Ja(Nm),Wm=(0,r.aZ)({name:"ModalElement",inheritAttrs:!1,props:{isTransition:{type:Boolean,default:!0}},setup:(e,{slots:t,attrs:n})=>()=>{var o;return e.isTransition?(0,r.h)(Ks.uT,{...n},t):null===(o=t.default)||void 0===o?void 0:o.call(t,n)}});var Hm=(0,r.aZ)({name:"VaModal",inheritAttrs:!1,components:{VaButton:Wc,VaIcon:vc,ModalElement:Wm},emits:[...rs,"cancel","ok","before-open","open","before-close","close","click-outside"],props:{...ns,modelValue:{type:Boolean,default:!1},attachElement:{type:String,default:"body"},disableAttachment:{type:Boolean,default:!1},title:{type:String,default:""},message:{type:String,default:""},okText:{type:String,default:"OK"},cancelText:{type:String,default:"Cancel"},hideDefaultActions:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},mobileFullscreen:{type:Boolean,default:!0},noDismiss:{type:Boolean,default:!1},noOutsideDismiss:{type:Boolean,default:!1},noEscDismiss:{type:Boolean,default:!1},maxWidth:{type:String,default:""},maxHeight:{type:String,default:""},anchorClass:{type:String},size:{type:String,default:"medium",validator:e=>["medium","small","large"].includes(e)},fixedLayout:{type:Boolean,default:!1},withoutTransitions:{type:Boolean,default:!1},overlay:{type:Boolean,default:!0},overlayOpacity:{type:[Number,String],default:.6},blur:{type:Boolean,default:!1},zIndex:{type:[Number,String]},backgroundColor:{type:String,default:"white"},noPadding:{type:Boolean,default:!1}},setup(e,{emit:t}){const n=(0,o.XI)(),{getColor:a}=fu(),{textColorComputed:i}=hu((0,o.Vh)(e,"backgroundColor")),{valueComputed:s}=os(e,t),u=(0,r.Fl)((()=>({"va-modal--fullscreen":e.fullscreen,"va-modal--mobile-fullscreen":e.mobileFullscreen,"va-modal--fixed-layout":e.fixedLayout,"va-modal--no-padding":e.noPadding,[`va-modal--size-${e.size}`]:"medium"!==e.size}))),l=(0,r.Fl)((()=>({"z-index":e.zIndex}))),c=(0,r.Fl)((()=>({maxWidth:e.maxWidth,maxHeight:e.maxHeight,color:i.value,background:a(e.backgroundColor)}))),d=(0,r.Fl)((()=>{const t=!!document.querySelectorAll(".va-modal__overlay").length;if(e.overlay&&!t)return{"background-color":`rgba(0, 0, 0, ${e.overlayOpacity})`,"z-index":e.zIndex&&Number(e.zIndex)-1}})),p=()=>{s.value=!1},f=()=>{p(),t("cancel")},h=t=>{t.modalsCounter=t.modalsCounter?t.modalsCounter+1:1;const n=t.modalsCounter;setTimeout((()=>{"Escape"!==t.code||e.noEscDismiss||e.noDismiss||t.modalsCounter!==n||f()}))};(0,r.YP)(s,(t=>{t?window.addEventListener("keyup",h):window.removeEventListener("keyup",h),e.blur&&(t?document.body.classList.add("va-modal-overlay-background--blurred"):document.body.classList.remove("va-modal-overlay-background--blurred"))}),{immediate:!0});const v={show:()=>{s.value=!0},hide:p,toggle:()=>{s.value=!s.value},cancel:f,ok:()=>{p(),t("ok")},onOutsideClick:()=>{e.noOutsideDismiss||e.noDismiss||(t("click-outside"),f())},onBeforeEnterTransition:e=>t("before-open",e),onAfterEnterTransition:e=>t("open",e),onBeforeLeaveTransition:e=>t("before-close",e),onAfterLeaveTransition:e=>t("close",e),listenKeyUp:h};return{getColor:a,rootElement:n,valueComputed:s,computedClass:u,computedDialogStyle:c,computedModalContainerStyle:l,computedOverlayStyles:d,...v}}});const Um=["aria-labelledby"],zm={key:0,class:"va-modal__anchor"},$m={key:0,class:"va-modal"},qm={key:0},Gm={key:1,class:"va-modal__header"},Km={key:2,class:"va-modal__message"},Xm={key:3,class:"va-modal__message"},Ym={key:4,class:"va-modal__footer"},Zm={key:5,class:"va-modal__footer"};Hm.render=function(e,t,n,o,a,i){const s=(0,r.up)("va-icon"),u=(0,r.up)("va-button"),l=(0,r.up)("modal-element");return(0,r.wg)(),(0,r.iD)("div",{ref:"rootElement",class:(0,ds.C_)(["va-modal-entry",e.$props.anchorClass]),role:"dialog","aria-modal":"true","aria-labelledby":e.title},[e.$slots.anchor?((0,r.wg)(),(0,r.iD)("div",zm,[(0,r.WI)(e.$slots,"anchor",(0,ds.vs)((0,r.F4)({show:e.show,hide:e.hide,toggle:e.toggle})))])):(0,r.kq)("v-if",!0),((0,r.wg)(),(0,r.j4)(r.lR,{to:e.attachElement,disabled:e.$props.disableAttachment},[(0,r.Wm)(l,(0,r.dG)({name:"va-modal",isTransition:!e.$props.withoutTransitions,appear:"",duration:300},e.$attrs,{onBeforeEnter:e.onBeforeEnterTransition,onAfterEnter:e.onAfterEnterTransition,onBeforeLeave:e.onBeforeLeaveTransition,onAfterLeave:e.onAfterLeaveTransition}),{default:(0,r.w5)((()=>[e.valueComputed?((0,r.wg)(),(0,r.iD)("div",$m,[e.$props.overlay?((0,r.wg)(),(0,r.iD)("div",{key:0,class:"va-modal__overlay",style:(0,ds.j5)(e.computedOverlayStyles),onClick:t[0]||(t[0]=(...t)=>e.onOutsideClick&&e.onOutsideClick(...t))},null,4)):(0,r.kq)("v-if",!0),(0,r._)("div",{class:"va-modal__container",style:(0,ds.j5)(e.computedModalContainerStyle)},[(0,r._)("div",{class:(0,ds.C_)(["va-modal__dialog",e.computedClass]),style:(0,ds.j5)(e.computedDialogStyle)},[e.$props.fullscreen?((0,r.wg)(),(0,r.j4)(s,{key:0,name:"close",class:"va-modal__close",role:"button","aria-label":"close","aria-hidden":"false",tabindex:"0",onClick:e.cancel,onKeydown:[(0,Ks.D2)(e.cancel,["space"]),(0,Ks.D2)(e.cancel,["enter"])]},null,8,["onClick","onKeydown"])):(0,r.kq)("v-if",!0),(0,r._)("div",{class:"va-modal__inner",style:(0,ds.j5)({maxWidth:e.$props.maxWidth,maxHeight:e.$props.maxHeight})},[e.$slots.content?((0,r.wg)(),(0,r.iD)("div",qm,[(0,r.WI)(e.$slots,"content",(0,ds.vs)((0,r.F4)({cancel:e.cancel,ok:e.ok})))])):(0,r.kq)("v-if",!0),e.$slots.content?(0,r.kq)("v-if",!0):((0,r.wg)(),(0,r.iD)(r.HY,{key:1},[e.title?((0,r.wg)(),(0,r.iD)("div",{key:0,class:"va-modal__title",style:(0,ds.j5)({color:e.getColor("primary")})},(0,ds.zw)(e.$props.title),5)):(0,r.kq)("v-if",!0),e.$slots.header?((0,r.wg)(),(0,r.iD)("div",Gm,[(0,r.WI)(e.$slots,"header")])):(0,r.kq)("v-if",!0),e.$props.message?((0,r.wg)(),(0,r.iD)("div",Km,(0,ds.zw)(e.$props.message),1)):(0,r.kq)("v-if",!0),e.$slots.default?((0,r.wg)(),(0,r.iD)("div",Xm,[(0,r.WI)(e.$slots,"default")])):(0,r.kq)("v-if",!0),!e.$props.cancelText&&!e.$props.okText||e.$props.hideDefaultActions?(0,r.kq)("v-if",!0):((0,r.wg)(),(0,r.iD)("div",Ym,[e.$props.cancelText?((0,r.wg)(),(0,r.j4)(u,{key:0,color:"gray",class:"mr-2",flat:"",onClick:e.cancel},{default:(0,r.w5)((()=>[(0,r.Uk)((0,ds.zw)(e.$props.cancelText),1)])),_:1},8,["onClick"])):(0,r.kq)("v-if",!0),(0,r.Wm)(u,{onClick:e.ok},{default:(0,r.w5)((()=>[(0,r.Uk)((0,ds.zw)(e.$props.okText),1)])),_:1},8,["onClick"])])),e.$slots.footer?((0,r.wg)(),(0,r.iD)("div",Zm,[(0,r.WI)(e.$slots,"footer")])):(0,r.kq)("v-if",!0)],64))],4)],6)],4)])):(0,r.kq)("v-if",!0)])),_:3},16,["isTransition","onBeforeEnter","onAfterEnter","onBeforeLeave","onAfterLeave"])],8,["to","disabled"]))],10,Um)},Hm.__file="src/components/va-modal/VaModal.vue";const Jm=Ja(Hm);var Qm=(0,r.aZ)({name:"VaFileUploadUndo",components:{VaButton:Wc},emits:["recover"]});const eg={class:"va-file-upload-undo"},tg=(0,r._)("span",null,"File was successfully deleted",-1),ng=(0,r.Uk)(" Undo ");Qm.render=function(e,t,n,o,a,i){const s=(0,r.up)("va-button");return(0,r.wg)(),(0,r.iD)("div",eg,[tg,(0,r.Wm)(s,{class:"va-file-upload-undo__button",size:"small",outline:"",onClick:t[0]||(t[0]=t=>e.$emit("recover"))},{default:(0,r.w5)((()=>[ng])),_:1})])},Qm.__file="src/components/va-file-upload/VaFileUploadUndo/VaFileUploadUndo.vue";const rg=Ja(Qm);var og=(0,r.aZ)({name:"VaFileUploadListItem",components:{VaIcon:vc,VaCard:hp,VaFileUploadUndo:rg},emits:["remove"],props:{file:{type:Object,default:null},color:{type:String,default:"success"},undo:{type:Boolean,default:!1},undoDuration:{type:Number,default:3e3}},setup(e,{emit:t}){const n=(0,o.iH)(!1);return{removed:n,removeFile:()=>{e.undo?(n.value=!0,setTimeout((()=>{n.value&&(t("remove"),n.value=!1)}),e.undoDuration)):(t("remove"),n.value=!1)},recoverFile:()=>{n.value=!1}}}});const ag={key:1,class:"va-file-upload-list-item__content"},ig={class:"va-file-upload-list-item__name"},sg={class:"va-file-upload-list-item__size"};og.render=function(e,t,n,o,a,i){const s=(0,r.up)("va-file-upload-undo"),u=(0,r.up)("va-icon"),l=(0,r.up)("va-card");return(0,r.wg)(),(0,r.j4)(l,{class:(0,ds.C_)(["va-file-upload-list-item",{"file-upload-list-item--undo":e.removed}]),stripe:e.removed&&e.undo,stripeColor:e.color,"no-margin":"","no-padding":""},{default:(0,r.w5)((()=>[e.removed&&e.undo?((0,r.wg)(),(0,r.j4)(s,{key:0,onRecover:e.recoverFile},null,8,["onRecover"])):((0,r.wg)(),(0,r.iD)("div",ag,[(0,r._)("div",ig,(0,ds.zw)(e.file&&e.file.name),1),(0,r._)("div",sg,(0,ds.zw)(e.file&&e.file.size),1),(0,r.Wm)(u,{class:"va-file-upload-list-item__delete",name:"clear",role:"button","aria-hidden":"false","aria-label":"remove file",tabindex:"0",color:"danger",onClick:e.removeFile,onKeydown:[(0,Ks.D2)((0,Ks.iM)(e.removeFile,["stop"]),["enter"]),(0,Ks.D2)((0,Ks.iM)(e.removeFile,["stop"]),["space"])]},null,8,["onClick","onKeydown"])]))])),_:1},8,["class","stripe","stripeColor"])},og.__file="src/components/va-file-upload/VaFileUploadListItem/VaFileUploadListItem.vue";const ug=Ja(og);var lg=(0,r.aZ)({name:"VaFileUploadGalleryItem",components:{VaFileUploadUndo:rg,VaButton:Wc},emits:["remove"],props:{file:{type:Object,default:null},color:{type:String,default:"success"},undo:{type:Boolean,default:!1},undoDuration:{type:Number,default:3e3}},setup(e,{emit:t}){const n=(0,o.iH)(""),a=(0,o.iH)(!1),i=(0,o.iH)(!1),s=(0,r.Fl)((()=>({backgroundColor:ou(e.color,.7)}))),u=()=>{if(e.file.name&&e.file.image)if(e.file.image.url)n.value=e.file.image.url;else if(e.file.image instanceof File){const t=new FileReader;t.readAsDataURL(e.file.image),t.onload=e=>{var t,r;(null===(t=e.target)||void 0===t?void 0:t.result).includes("image")&&(n.value=null===(r=e.target)||void 0===r?void 0:r.result)}}};return(0,r.bv)(u),(0,r.YP)((()=>e.file),u),{previewImage:n,removed:a,isFocused:i,recoverImage:()=>{a.value=!1},overlayStyles:s,removeImage:()=>{e.undo?(a.value=!0,setTimeout((()=>{a.value&&(t("remove"),a.value=!1)}),e.undoDuration)):(t("remove"),a.value=!1)}}}});const cg=["src"],dg={class:"va-file-upload-gallery-item__overlay"},pg=["title"];lg.render=function(e,t,n,o,a,i){const s=(0,r.up)("va-file-upload-undo"),u=(0,r.up)("va-button");return e.removed&&e.undo?((0,r.wg)(),(0,r.iD)("div",{key:0,class:(0,ds.C_)(["va-file-upload-gallery-item",{"va-file-upload-gallery-item--undo":e.removed}])},[(0,r.Wm)(s,{class:"va-file-upload-gallery-item--undo",onRecover:e.recoverImage},null,8,["onRecover"])],2)):((0,r.wg)(),(0,r.iD)("div",{key:1,tabindex:"0",class:(0,ds.C_)(["va-file-upload-gallery-item",{"file-upload-gallery-item_not-image":!e.previewImage,"va-file-upload-gallery-item--focused":e.isFocused}]),onFocus:t[2]||(t[2]=t=>e.isFocused=!0),onBlur:t[3]||(t[3]=t=>e.isFocused=!1)},[e.previewImage?((0,r.wg)(),(0,r.iD)("img",{key:0,src:e.previewImage,alt:"",class:"va-file-upload-gallery-item__image"},null,8,cg)):(0,r.kq)("v-if",!0),(0,r._)("div",dg,[(0,r._)("div",{class:"va-file-upload-gallery-item__overlay-background",style:(0,ds.j5)(e.overlayStyles)},null,4),(0,r._)("div",{class:"va-file-upload-gallery-item__name",title:e.file.name},(0,ds.zw)(e.file.name),9,pg),(0,r.Wm)(u,{flat:"",color:"danger",icon:"delete_outline",class:"va-file-upload-gallery-item__delete","aria-label":"remove image",onClick:e.removeImage,onFocus:t[0]||(t[0]=t=>e.isFocused=!0),onBlur:t[1]||(t[1]=t=>e.isFocused=!1)},null,8,["onClick"])])],34))},lg.__file="src/components/va-file-upload/VaFileUploadGalleryItem/VaFileUploadGalleryItem.vue";const fg=Ja(lg);var hg=(0,r.aZ)({name:"VaFileUploadSingleItem",components:{VaButton:Wc},emits:["remove"],props:{file:{type:Object,default:null}}});const vg={class:"va-file-upload-single-item"},mg={class:"va-file-upload-single-item__name"},gg=(0,r.Uk)(" Delete ");hg.render=function(e,t,n,o,a,i){const s=(0,r.up)("va-button");return(0,r.wg)(),(0,r.iD)("div",vg,[(0,r._)("div",mg,(0,ds.zw)(e.file&&e.file.name),1),(0,r.Wm)(s,{class:"va-file-upload-single-item__button",size:"small",color:"danger",flat:"",onClick:t[0]||(t[0]=t=>e.$emit("remove"))},{default:(0,r.w5)((()=>[gg])),_:1})])},hg.__file="src/components/va-file-upload/VaFileUploadSingleItem/VaFileUploadSingleItem.vue";const yg=Ja(hg);var bg=(0,r.aZ)({name:"VaFileUploadList",components:{VaFileUploadListItem:ug,VaFileUploadGalleryItem:fg,VaFileUploadSingleItem:yg},emits:["remove","removeSingle"],props:{type:{type:String,default:""},files:{type:Array,default:null},color:{type:String,default:"success"},undo:{type:Boolean,default:!1},undoDuration:{type:Number,default:3e3}},setup(e){const t=(0,r.Fl)((()=>e.files.map(n))),n=e=>({name:e.name||e.url||"",size:o(e.size),date:a(new Date),image:e}),o=e=>{if(0===e)return"0 Bytes";if(!e)return"";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][t]},a=(e=new Date)=>e.toLocaleDateString("en-US",{hour:"2-digit",minute:"2-digit",month:"short",day:"numeric",year:"numeric"});return{filesList:t}}});const wg=["role"];bg.render=function(e,t,n,o,a,i){const s=(0,r.up)("va-file-upload-list-item"),u=(0,r.up)("va-file-upload-gallery-item"),l=(0,r.up)("va-file-upload-single-item");return(0,r.wg)(),(0,r.iD)("div",{class:(0,ds.C_)(["va-file-upload-list",`va-file-upload-list--${e.type}`]),role:"single"!==e.type?"list":void 0},["list"===e.type?((0,r.wg)(!0),(0,r.iD)(r.HY,{key:0},(0,r.Ko)(e.filesList,((t,n)=>((0,r.wg)(),(0,r.j4)(s,{key:t.name,role:"listitem",file:t,color:e.color,undo:e.undo,undoDuration:e.undoDuration,onRemove:t=>e.$emit("remove",n)},null,8,["file","color","undo","undoDuration","onRemove"])))),128)):(0,r.kq)("v-if",!0),"gallery"===e.type?((0,r.wg)(!0),(0,r.iD)(r.HY,{key:1},(0,r.Ko)(e.filesList,((t,n)=>((0,r.wg)(),(0,r.j4)(u,{role:"listitem",file:t,key:t.name,color:e.color,undo:e.undo,undoDuration:e.undoDuration,onRemove:t=>e.$emit("remove",n)},null,8,["file","color","undo","undoDuration","onRemove"])))),128)):(0,r.kq)("v-if",!0),"single"===e.type&&e.filesList.length?((0,r.wg)(),(0,r.j4)(l,{key:2,file:e.filesList[e.filesList.length-1],onRemove:t[0]||(t[0]=t=>e.$emit("removeSingle"))},null,8,["file"])):(0,r.kq)("v-if",!0)],10,wg)},bg.__file="src/components/va-file-upload/VaFileUploadList/VaFileUploadList.vue";const xg=Ja(bg);var Cg=(0,r.aZ)({name:"VaFileUpload",components:{VaModal:Jm,VaButton:Wc,VaFileUploadList:xg},props:{fileTypes:{type:String,default:""},dropzone:{type:Boolean,default:!1},hideFileList:{type:Boolean,default:!1},color:{type:String,default:"primary"},disabled:{type:Boolean,default:!1},undo:{type:Boolean,default:!1},undoDuration:{type:Number,default:3e3},dropZoneText:{type:String,default:"Drag’n’drop files or"},uploadButtonText:{type:String,default:"Upload file"},modelValue:{type:[Object,Array],default:()=>[]},type:{type:String,default:"list",validator:e=>["list","gallery","single"].includes(e)}},emits:["update:modelValue","file-removed","file-added"],setup(e,{emit:t}){const n=(0,o.XI)(),a=(0,o.iH)(!1),i=(0,o.iH)(!1),{getColor:s,shiftHSLAColor:u}=fu(),l=(0,r.Fl)((()=>s(e.color))),c=(0,r.Fl)((()=>({backgroundColor:e.dropzone?u(l.value,{a:i.value?-.82:-.92}):"transparent"}))),d=(0,r.Fl)({get:()=>Array.isArray(e.modelValue)?e.modelValue:[e.modelValue],set(n){"single"===e.type?t("update:modelValue",n[0]):t("update:modelValue",n)}}),p=t=>t.filter((t=>{const n=t.name||t.url;if(!n)return!1;if(t.url)return!0;if(["audio/*","video/*","image/*"].find((t=>e.fileTypes.includes(t))))return!0;const r=n.substring(n.lastIndexOf(".")+1).toLowerCase(),o=e.fileTypes.includes(r);return o||(a.value=!0),o})),f=n=>{var r,o;const a=(null===(r=n.target)||void 0===r?void 0:r.files)||(null===(o=n.dataTransfer)||void 0===o?void 0:o.files);if(!a)return;const i=e.fileTypes?p(Array.from(a)):a;d.value="single"===e.type?i:[...d.value,...i],t("file-added",i)};return(0,r.bv)((()=>{Array.isArray(d.value)&&(d.value=p(d.value))})),{modal:a,dropzoneHighlight:i,fileInputRef:n,colorComputed:l,computedStyle:c,uploadFile:f,changeFieldValue:e=>{f(e),n.value&&(n.value.value="")},files:d,removeFile:e=>{if(e in d.value){const n=d.value[e];d.value=d.value.filter(((t,n)=>n!==e)),t("file-removed",n)}},removeSingleFile:()=>{if(d.value.length>0){const e=d.value[0];d.value=[],t("file-removed",e)}},callFileDialogue:()=>{n.value&&n.value.click()}}}});const _g={class:"va-file-upload__field"},kg={key:0,class:"va-file-upload__field__text"},Sg=["accept","multiple","disabled"];Cg.render=function(e,t,n,o,a,i){const s=(0,r.up)("va-button"),u=(0,r.up)("va-file-upload-list"),l=(0,r.up)("va-modal");return(0,r.wg)(),(0,r.iD)("div",{class:(0,ds.C_)(["va-file-upload",{"va-file-upload--dropzone":e.dropzone}]),style:(0,ds.j5)(e.computedStyle)},[(0,r.WI)(e.$slots,"default",{},(()=>[(0,r._)("div",_g,[e.dropzone?((0,r.wg)(),(0,r.iD)("div",kg,(0,ds.zw)(e.dropZoneText),1)):(0,r.kq)("v-if",!0),(0,r.Wm)(s,{class:"va-file-upload__field__button",disabled:e.disabled,color:e.colorComputed,style:(0,ds.j5)({"pointer-events":e.dropzoneHighlight?"none":""}),onChange:e.changeFieldValue,onClick:e.callFileDialogue},{default:(0,r.w5)((()=>[(0,r.Uk)((0,ds.zw)(e.uploadButtonText),1)])),_:1},8,["disabled","color","style","onChange","onClick"])])])),(0,r._)("input",{ref:"fileInputRef",type:"file",class:"va-file-upload__field__input",tabindex:-1,"aria-hidden":"true",accept:e.fileTypes,multiple:"single"!==e.type,disabled:e.disabled,onChange:t[0]||(t[0]=(...t)=>e.changeFieldValue&&e.changeFieldValue(...t)),onDragenter:t[1]||(t[1]=t=>e.dropzoneHighlight=!0),onDragleave:t[2]||(t[2]=t=>e.dropzoneHighlight=!1)},null,40,Sg),e.files.length&&!e.$props.hideFileList?((0,r.wg)(),(0,r.j4)(u,{key:0,type:e.type,files:e.files,color:e.colorComputed,undo:e.undo,undoDuration:e.undoDuration,onRemove:e.removeFile,onRemoveSingle:e.removeSingleFile},null,8,["type","files","color","undo","undoDuration","onRemove","onRemoveSingle"])):(0,r.kq)("v-if",!0),(0,r.Wm)(l,{modelValue:e.modal,"onUpdate:modelValue":t[3]||(t[3]=t=>e.modal=t),"hide-default-actions":"",title:"File validation",message:"File type is incorrect!"},null,8,["modelValue"])],6)},Cg.__file="src/components/va-file-upload/VaFileUpload.vue";const Eg=Ja(Cg),Ig=e=>!!e.focusInvalid;var Ag=(0,r.aZ)({name:"VaForm",emits:["validation"],props:{autofocus:{type:Boolean,default:!1},tag:{type:String,default:"div"}},setup(e,{emit:t}){const n=(0,o.iH)([]),a=()=>(0,r.f3)(Mp,void 0);(0,r.JJ)(Mp,{onChildMounted:e=>i(e),onChildUnmounted:e=>s(e)});const i=e=>{n.value.push(e)},s=e=>{n.value=n.value.filter((t=>t!==e))},u=()=>{var e;null===(e=n.value.find((({focus:e})=>e)))||void 0===e||e.focus()},l={reset:()=>{n.value.filter((({reset:e})=>e)).forEach((e=>{e.reset()}))},resetValidation:()=>{n.value.filter((({resetValidation:e})=>e)).forEach((e=>{e.resetValidation()}))},focus:u,focusInvalid:()=>{const e=n.value.find((e=>!Ig(e)&&e.hasError()));e?e.focus():n.value.forEach((e=>Ig(e)&&e.focusInvalid()))},validate:()=>{const e=n.value.filter((({validate:e})=>e)).map((e=>e.validate())).every((e=>e));return t("validation",e),e}};return(0,r.bv)((()=>{var t,n;null===(n=null===(t=a())||void 0===t?void 0:t.onChildMounted)||void 0===n||n.call(t,l),e.autofocus&&(0,r.Y3)(u)})),(0,r.Ah)((()=>{var e,t;null===(t=null===(e=a())||void 0===e?void 0:e.onChildUnmounted)||void 0===t||t.call(e,l)})),l}});Ag.render=function(e,t,n,o,a,i){return(0,r.wg)(),(0,r.j4)((0,r.LL)(e.tag),{class:"va-form"},{default:(0,r.w5)((()=>[(0,r.WI)(e.$slots,"default")])),_:3})},Ag.__file="src/components/va-form/VaForm.vue";const Fg=Ja(Ag);var Dg=(0,r.aZ)({name:"VaInfiniteScroll",components:{VaProgressCircle:Oc},props:{load:{type:Function,required:!0},offset:{type:Number,default:500},reverse:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},scrollTarget:{type:[String,Object],default:void 0},debounce:{type:Number,default:100},tag:{type:String,default:"div"}},emits:["onload","onerror"],setup(e,{emit:t}){const n=(0,o.XI)(),a=(0,o.XI)(),i=(0,o.iH)(!1),s=(0,o.iH)(!1),u=(0,o.iH)(!1),l=(0,o.iH)(),c=(0,o.iH)(0),d=(0,o.iH)(0),p=(0,r.Fl)((()=>{var t;let r;return r="string"==typeof e.scrollTarget?document.querySelector(e.scrollTarget):e.scrollTarget||(null===(t=n.value)||void 0===t?void 0:t.parentElement),r||document.body})),{addScrollListener:f,removeScrollListener:h}=((e,t,n)=>{const o=()=>{var e;null===(e=t.value)||void 0===e||e.addEventListener("scroll",n.value,{passive:!0})},a=()=>{var e;null===(e=t.value)||void 0===e||e.removeEventListener("scroll",n.value)};return(0,r.bv)((()=>{t.value&&(t.value.style.overflowY="scroll",e.reverse&&(t.value.scrollTop=t.value.scrollHeight),o())})),(0,r.Jd)(a),{addScrollListener:o,removeScrollListener:a}})(e,p,l),{getColor:v}=fu(),m=(0,r.Fl)((()=>s.value?v("danger"):v("primary"))),g=(0,r.Fl)((()=>{var e;return(null===(e=a.value)||void 0===e?void 0:e.offsetHeight)||0})),y=(0,r.Fl)((()=>e.offset+g.value)),b=()=>{e.disabled||(i.value=!1,h())},w=()=>{e.disabled||f()},x=()=>{const{scrollTop:t,scrollHeight:n,clientHeight:r}=p.value;c.value=n-t;const o=t-d.value;d.value=t,e.disabled||s.value||i.value||(u.value?u.value=!1:e.reverse&&o>0||!e.reverse&&o<0||(e.reverse?t:n-t-r)>y.value||(i.value=!0,e.load().then(k).catch(E)))},C=e=>{u.value=!0,p.value.scrollTop=e},_=()=>{const{scrollTop:t,scrollHeight:n,clientHeight:r}=p.value;if(e.reverse){const e=n-t<c.value,r=t>=g.value;if(e&&r)return;n-c.value>g.value?C(n-c.value):C(g.value)}e.reverse||!(n-t-r>=g.value)&&C(n-r-g.value)},k=()=>{_(),i.value=!1,t("onload")},S=()=>{_(),u.value=!1,s.value=!1,i.value=!1,t("onerror")},E=()=>{b(),s.value=!0,Ys(1200).then(S).then(w)};return(0,r.YP)((()=>e.debounce),(e=>{l.value=Ms(x,e)}),{immediate:!0}),(0,r.YP)((()=>e.disabled),(e=>{e?b():w()})),{element:n,spinnerSlotContainer:a,spinnerColor:m,fetching:i}}});const Rg={class:"va-infinite-scroll__spinner__default"};Dg.render=function(e,t,n,o,a,i){const s=(0,r.up)("va-progress-circle");return(0,r.wg)(),(0,r.j4)((0,r.LL)(e.$props.tag),{ref:"element",role:"feed",class:(0,ds.C_)(["va-infinite-scroll",{"va-infinite-scroll--reversed":e.$props.reverse}]),"aria-busy":e.fetching},{default:(0,r.w5)((()=>[(0,r.WI)(e.$slots,"default"),(0,r._)("div",{ref:"spinnerSlotContainer",class:(0,ds.C_)(["va-infinite-scroll__spinner",{"va-infinite-scroll__spinner--invisible":!e.fetching}])},[e.$props.disabled?(0,r.kq)("v-if",!0):(0,r.WI)(e.$slots,"loading",{key:0},(()=>[(0,r._)("div",Rg,[(0,r.Wm)(s,{size:"small",thickness:.15,color:e.spinnerColor,indeterminate:""},null,8,["thickness","color"])])]))],2)])),_:3},8,["class","aria-busy"])},Dg.__file="src/components/va-infinite-scroll/VaInfiniteScroll.vue";const Tg=Ja(Dg);var Og=(0,r.aZ)({name:"VaList",props:{fit:{type:Boolean,default:!1}},setup:e=>({computedClass:(0,r.Fl)((()=>({"va-list--fit":e.fit})))})});Og.render=function(e,t,n,o,a,i){return(0,r.wg)(),(0,r.iD)("div",{class:(0,ds.C_)(["va-list",e.computedClass]),role:"list"},[(0,r.WI)(e.$slots,"default")],2)},Og.__file="src/components/va-list/VaList.vue";var Pg=(0,r.aZ)({name:"VaListItem",emits:["focus","click"],props:{...Lc,tag:{type:String,default:"div"},disabled:{type:Boolean,default:!1}},setup(e){const t=(0,r.Fl)((()=>e.disabled?-1:0)),n=(0,r.Fl)((()=>({"va-list-item--disabled":e.disabled})));return{...Vc(e),tabIndexComputed:t,computedClass:n}}});Pg.render=function(e,t,n,o,a,i){return(0,r.wg)(),(0,r.j4)((0,r.LL)(e.tagComputed),{class:(0,ds.C_)(["va-list-item",e.computedClass]),role:"listitem",href:e.hrefComputed,target:e.target,to:e.to,replace:e.replace,exact:e.exact,"active-class":e.activeClass,"exact-active-class":e.exactActiveClass,tabindex:e.tabIndexComputed},{default:(0,r.w5)((()=>[(0,r._)("div",{class:"va-list-item__inner",onClick:t[0]||(t[0]=t=>e.$emit("click")),onFocus:t[1]||(t[1]=t=>e.$emit("focus"))},[(0,r.WI)(e.$slots,"default")],32)])),_:3},8,["href","target","to","replace","exact","active-class","exact-active-class","class","tabindex"])},Pg.__file="src/components/va-list/VaListItem.vue";var Bg=(0,r.aZ)({name:"VaListLabel",props:{color:{type:String,default:"primary"}},setup:e=>{const{getColor:t}=fu();return{computedStyle:(0,r.Fl)((()=>({color:t(e.color)})))}}});Bg.render=function(e,t,n,o,a,i){return(0,r.wg)(),(0,r.iD)("div",{class:"va-list-label",style:(0,ds.j5)(e.computedStyle)},[(0,r.WI)(e.$slots,"default")],4)},Bg.__file="src/components/va-list/VaListLabel.vue";var Mg=(0,r.aZ)({name:"VaListItemLabel",props:{caption:{type:Boolean,default:!1},lines:{type:Number,default:1}},setup:e=>({computedClass:(0,r.Fl)((()=>({"va-list-item-label--caption":e.caption}))),computedStyle:(0,r.Fl)((()=>({"-webkit-line-clamp":e.lines})))})});Mg.render=function(e,t,n,o,a,i){return(0,r.wg)(),(0,r.iD)("div",{class:(0,ds.C_)(["va-list-item-label",e.computedClass]),style:(0,ds.j5)(e.computedStyle)},[(0,r.WI)(e.$slots,"default")],6)},Mg.__file="src/components/va-list/VaListItemLabel.vue";var Ng=(0,r.aZ)({name:"VaListItemSection",props:{icon:{type:Boolean,default:!1},avatar:{type:Boolean,default:!1}},setup:e=>({computedClass:(0,r.Fl)((()=>({"va-list-item-section--main":!e.icon&&!e.avatar,"va-list-item-section--icon":e.icon,"va-list-item-section--avatar":e.avatar})))})});Ng.render=function(e,t,n,o,a,i){return(0,r.wg)(),(0,r.iD)("div",{class:(0,ds.C_)(["va-list-item-section",e.computedClass])},[(0,r.WI)(e.$slots,"default")],2)},Ng.__file="src/components/va-list/VaListItemSection.vue";var Lg=(0,r.aZ)({name:"VaListSeparator",props:{fit:{type:Boolean,default:!1},spaced:{type:Boolean,default:!1}},setup:e=>({computedClass:(0,r.Fl)((()=>({"va-list-separator--offset":!e.fit,"va-list-separator--spaced":e.spaced})))})});Lg.render=function(e,t,n,o,a,i){return(0,r.wg)(),(0,r.iD)("div",{"aria-hidden":"true",class:(0,ds.C_)(["va-list-separator",e.computedClass])},null,2)},Lg.__file="src/components/va-list/VaListSeparator.vue";const Vg=Ja(Pg),jg=Ja(Bg),Wg=Ja(Mg),Hg=Ja(Ng),Ug=Ja(Lg),zg=Ja(Og);var $g=(0,r.aZ)({name:"VaNavbar",props:{color:{type:String,default:"secondary"},textColor:{type:String},shape:{type:Boolean,default:!1}},setup(e){const{getColor:t,shiftHSLAColor:n}=fu(),{textColorComputed:o}=hu(),a=(0,r.Fl)((()=>t(e.color))),i=(0,r.Fl)((()=>({borderTopColor:n(a.value,{h:-1,s:-11,l:10})})));return{computedStyle:(0,r.Fl)((()=>({backgroundColor:a.value,color:o.value,fill:o.value}))),shapeStyleComputed:i}}});const qg={class:"va-navbar__content"},Gg={key:0,class:"va-navbar__left"},Kg={key:1,class:"va-navbar__center"},Xg={key:2,class:"va-navbar__right"};$g.render=function(e,t,n,o,a,i){return(0,r.wg)(),(0,r.iD)("header",{class:"va-navbar",style:(0,ds.j5)(e.computedStyle)},[(0,r._)("div",qg,[e.$slots.left?((0,r.wg)(),(0,r.iD)("div",Gg,[(0,r.WI)(e.$slots,"left")])):(0,r.kq)("v-if",!0),e.$slots.center?((0,r.wg)(),(0,r.iD)("div",Kg,[(0,r.WI)(e.$slots,"center")])):(0,r.kq)("v-if",!0),e.$slots.right?((0,r.wg)(),(0,r.iD)("div",Xg,[(0,r.WI)(e.$slots,"right")])):(0,r.kq)("v-if",!0)]),e.shape?((0,r.wg)(),(0,r.iD)("div",{key:0,class:"va-navbar__background-shape",style:(0,ds.j5)(e.shapeStyleComputed)},null,4)):(0,r.kq)("v-if",!0)],4)},$g.__file="src/components/va-navbar/VaNavbar.vue";var Yg=(0,r.aZ)({name:"VaNavbarItem"});const Zg={class:"va-navbar__item"};Yg.render=function(e,t,n,o,a,i){return(0,r.wg)(),(0,r.iD)("div",Zg,[(0,r.WI)(e.$slots,"default")])},Yg.__file="src/components/va-navbar/VaNavbarItem/VaNavbarItem.vue";const Jg=Ja($g),Qg=Ja(Yg);function ey(e,t){const n=Object.create(null),r=e.split(",");for(let o=0;o<r.length;o++)n[r[o]]=!0;return t?e=>!!n[e.toLowerCase()]:e=>!!n[e]}Object.assign;const ty=Object.prototype.hasOwnProperty,ny=(e,t)=>ty.call(e,t),ry=Array.isArray,oy=e=>"[object Map]"===uy(e),ay=e=>"symbol"==typeof e,iy=e=>null!==e&&"object"==typeof e,sy=Object.prototype.toString,uy=e=>sy.call(e),ly=e=>uy(e).slice(8,-1),cy=e=>"string"==typeof e&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,dy=((e=>{const t=Object.create(null)})((e=>e.charAt(0).toUpperCase()+e.slice(1))),(e,t)=>!Object.is(e,t));const py=e=>{const t=new Set(e);return t.w=0,t.n=0,t},fy=new WeakMap,hy=Symbol(""),vy=Symbol("");let my=!0;const gy=[];function yy(e,t,n){}function by(e,t,n,r,o,a){const i=fy.get(e);if(!i)return;let s=[];if("clear"===t)s=[...i.values()];else if("length"===n&&ry(e))i.forEach(((e,t)=>{("length"===t||t>=r)&&s.push(e)}));else switch(void 0!==n&&s.push(i.get(n)),t){case"add":ry(e)?cy(n)&&s.push(i.get("length")):(s.push(i.get(hy)),oy(e)&&s.push(i.get(vy)));break;case"delete":ry(e)||(s.push(i.get(hy)),oy(e)&&s.push(i.get(vy)));break;case"set":oy(e)&&s.push(i.get(hy))}if(1===s.length)s[0]&&wy(s[0]);else{const e=[];for(const t of s)t&&e.push(...t);wy(py(e))}}function wy(e,t){for(const n of ry(e)?e:[...e])(void 0!==n||n.allowRecurse)&&(n.scheduler?n.scheduler():n.run())}const xy=ey("__proto__,__v_isRef,__isVue"),Cy=new Set(Object.getOwnPropertyNames(Symbol).map((e=>Symbol[e])).filter(ay)),_y=Iy(),ky=Iy(!0),Sy=Ey();function Ey(){const e={};return["includes","indexOf","lastIndexOf"].forEach((t=>{e[t]=function(...e){const n=ab(this);for(let t=0,o=this.length;t<o;t++)yy();const r=n[t](...e);return-1===r||!1===r?n[t](...e.map(ab)):r}})),["push","pop","shift","unshift","splice"].forEach((t=>{e[t]=function(...e){!function(){gy.push(my),my=!1}();const n=ab(this)[t].apply(this,e);return function(){const e=gy.pop();my=void 0===e||e}(),n}})),e}function Iy(e=!1,t=!1){return function(n,r,o){if("__v_isReactive"===r)return!e;if("__v_isReadonly"===r)return e;if("__v_isShallow"===r)return t;if("__v_raw"===r&&o===(e?t?eb:Qy:t?Jy:Zy).get(n))return n;const a=ry(n);if(!e&&a&&ny(Sy,r))return Reflect.get(Sy,r,o);const i=Reflect.get(n,r,o);return(ay(r)?Cy.has(r):xy(r))?i:(e||yy(),t?i:ub(i)?a&&cy(r)?i:i.value:iy(i)?e?nb(i):tb(i):i)}}function Ay(e=!1){return function(t,n,r,o){let a=t[n];if(ob(a)&&ub(a)&&!ub(r))return!1;if(!e&&!ob(r)&&(function(e){return!(!e||!e.__v_isShallow)}(r)||(r=ab(r),a=ab(a)),!ry(t)&&ub(a)&&!ub(r)))return a.value=r,!0;const i=ry(t)&&cy(n)?Number(n)<t.length:ny(t,n),s=Reflect.set(t,n,r,o);return t===ab(o)&&(i?dy(r,a)&&by(t,"set",n,r,a):by(t,"add",n,r)),s}}const Fy={get:_y,set:Ay(),deleteProperty:function(e,t){const n=ny(e,t),r=e[t],o=Reflect.deleteProperty(e,t);return o&&n&&by(e,"delete",t,void 0,r),o},has:function(e,t){const n=Reflect.has(e,t);return ay(t)&&Cy.has(t)||yy(),n},ownKeys:function(e){return yy(0,0,ry(e)),Reflect.ownKeys(e)}},Dy={get:ky,set:(e,t)=>!0,deleteProperty:(e,t)=>!0},Ry=e=>e,Ty=e=>Reflect.getPrototypeOf(e);function Oy(e,t,n=!1,r=!1){const o=ab(e=e.__v_raw),a=ab(t);t!==a&&!n&&yy(),!n&&yy();const{has:i}=Ty(o),s=r?Ry:n?sb:ib;return i.call(o,t)?s(e.get(t)):i.call(o,a)?s(e.get(a)):void(e!==o&&e.get(t))}function Py(e,t=!1){const n=this.__v_raw,r=(ab(n),ab(e));return e!==r&&!t&&yy(),!t&&yy(),e===r?n.has(e):n.has(e)||n.has(r)}function By(e,t=!1){return e=e.__v_raw,!t&&yy(ab(e)),Reflect.get(e,"size",e)}function My(e){e=ab(e);const t=ab(this);return Ty(t).has.call(t,e)||(t.add(e),by(t,"add",e,e)),this}function Ny(e,t){t=ab(t);const n=ab(this),{has:r,get:o}=Ty(n);let a=r.call(n,e);!a&&(e=ab(e),a=r.call(n,e));const i=o.call(n,e);return n.set(e,t),a?dy(t,i)&&by(n,"set",e,t,i):by(n,"add",e,t),this}function Ly(e){const t=ab(this),{has:n,get:r}=Ty(t);let o=n.call(t,e);!o&&(e=ab(e),o=n.call(t,e));const a=r?r.call(t,e):void 0,i=t.delete(e);return o&&by(t,"delete",e,void 0,a),i}function Vy(){const e=ab(this),t=0!==e.size,n=void 0,r=e.clear();return t&&by(e,"clear",void 0,void 0,n),r}function jy(e,t){return function(n,r){const o=this,a=o.__v_raw,i=(ab(a),t?Ry:e?sb:ib);return!e&&yy(),a.forEach(((e,t)=>n.call(r,i(e),i(t),o)))}}function Wy(e,t,n){return function(...r){const o=this.__v_raw,a=ab(o),i=oy(a),s="entries"===e||e===Symbol.iterator&&i,u=o[e](...r),l=n?Ry:t?sb:ib;return!t&&yy(),{next(){const{value:e,done:t}=u.next();return t?{value:e,done:t}:{value:s?[l(e[0]),l(e[1])]:l(e),done:t}},[Symbol.iterator](){return this}}}}function Hy(e){return function(...t){return"delete"!==e&&this}}function Uy(){const e={get(e){return Oy(this,e)},get size(){return By(this)},has:Py,add:My,set:Ny,delete:Ly,clear:Vy,forEach:jy(!1,!1)},t={get(e){return Oy(this,e,!1,!0)},get size(){return By(this)},has:Py,add:My,set:Ny,delete:Ly,clear:Vy,forEach:jy(!1,!0)},n={get(e){return Oy(this,e,!0)},get size(){return By(this,!0)},has(e){return Py.call(this,e,!0)},add:Hy("add"),set:Hy("set"),delete:Hy("delete"),clear:Hy("clear"),forEach:jy(!0,!1)},r={get(e){return Oy(this,e,!0,!0)},get size(){return By(this,!0)},has(e){return Py.call(this,e,!0)},add:Hy("add"),set:Hy("set"),delete:Hy("delete"),clear:Hy("clear"),forEach:jy(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach((o=>{e[o]=Wy(o,!1,!1),n[o]=Wy(o,!0,!1),t[o]=Wy(o,!1,!0),r[o]=Wy(o,!0,!0)})),[e,n,t,r]}const[zy,$y,qy,Gy]=Uy();function Ky(e,t){const n=t?e?Gy:qy:e?$y:zy;return(t,r,o)=>"__v_isReactive"===r?!e:"__v_isReadonly"===r?e:"__v_raw"===r?t:Reflect.get(ny(n,r)&&r in t?n:t,r,o)}const Xy={get:Ky(!1,!1)},Yy={get:Ky(!0,!1)};const Zy=new WeakMap,Jy=new WeakMap,Qy=new WeakMap,eb=new WeakMap;function tb(e){return ob(e)?e:rb(e,!1,Fy,Xy,Zy)}function nb(e){return rb(e,!0,Dy,Yy,Qy)}function rb(e,t,n,r,o){if(!iy(e))return e;if(e.__v_raw&&(!t||!e.__v_isReactive))return e;const a=o.get(e);if(a)return a;const i=function(e){return e.__v_skip||!Object.isExtensible(e)?0:function(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}(ly(e))}(e);if(0===i)return e;const s=new Proxy(e,2===i?r:n);return o.set(e,s),s}function ob(e){return!(!e||!e.__v_isReadonly)}function ab(e){const t=e&&e.__v_raw;return t?ab(t):e}const ib=e=>iy(e)?tb(e):e,sb=e=>iy(e)?nb(e):e;function ub(e){return!(!e||!0!==e.__v_isRef)}function lb(e){return function(e,t){return ub(e)?e:new cb(e,t)}(e,!0)}class cb{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:ab(e),this._value=t?e:ib(e)}get value(){return this._value}set value(e){e=this.__v_isShallow?e:ab(e),dy(e,this._rawValue)&&(this._rawValue=e,this._value=this.__v_isShallow?e:ib(e),function(e,t){(e=ab(e)).dep&&wy(e.dep)}(this))}}const db=()=>{const e=lb([]);return(0,r.Xn)((()=>{e.value=[]})),{itemRefs:e,setItemRef:t=>{t&&e.value.push(t)},setItemRefByIndex:t=>n=>{n&&(e.value[t]=n)}}},pb={options:{type:Array,default:()=>[]},textBy:{type:[String,Function],default:"text"},valueBy:{type:[String,Function],default:""},trackBy:{type:[String,Function],default:"value"},disabledBy:{type:[String,Function],default:"disabled"},groupBy:{type:[String,Function],default:"group"}};function fb(e){const t=(e,t)=>!t||(e=>{const t=typeof e;return"string"===t||"number"===t})(e)?e:tu(e,t),n=n=>t(n,e.valueBy);return{getValue:n,getOptionByValue:t=>e.valueBy&&e.options.find((e=>t===n(e)))||t,getText:n=>t(n,e.textBy),getDisabled:t=>tu(t,e.disabledBy),getTrackBy:n=>t(n,e.trackBy),getGroupBy:n=>t(n,e.groupBy)}}var hb=(0,r.aZ)({name:"VaRadio",emits:["update:modelValue","focus"],props:{...xf,modelValue:{type:[Boolean,Array,String,Object],default:null},option:{default:null},name:{type:String,default:""},label:{type:String,default:""},leftLabel:{type:Boolean,default:!1},color:{type:String,default:"primary"},tabindex:{type:Number,default:0}},setup(e,{emit:t}){const{getColor:n}=fu(),o=(0,r.Fl)((()=>e.modelValue===e.option)),{computedClasses:a}=Cf("va-radio",e),i=(0,r.Fl)((()=>({"va-radio--left-label":e.leftLabel,...a}))),s=(0,r.Fl)((()=>({backgroundColor:n(e.color)}))),u=(0,r.Fl)((()=>{if(o.value)return{borderColor:n(e.color),backgroundColor:n(e.color)}})),l=(0,r.Fl)((()=>{if(o.value)return{borderColor:n(e.color)}})),c=(0,r.Fl)((()=>e.label||e.option));return{computedClass:i,isActive:o,iconBackgroundComputedStyles:s,iconDotComputedStyles:u,iconComputedStyles:l,computedLabel:c,onClick:n=>{e.readonly||e.disabled||t("update:modelValue",e.option,n)},onFocus:e=>t("focus",e),computedName:(0,r.Fl)((()=>e.name||ru())),tabIndexComputed:(0,r.Fl)((()=>e.disabled?-1:e.tabindex))}}});const vb=["checked","disabled","readonly","name","value","aria-checked","tabindex"],mb={class:"va-radio__text"};hb.render=function(e,t,n,o,a,i){return(0,r.wg)(),(0,r.iD)("label",{class:(0,ds.C_)(["va-radio",e.computedClass])},[(0,r._)("input",{class:"va-radio__input",type:"radio",checked:e.isActive,disabled:e.$props.disabled,readonly:e.$props.readonly,name:e.computedName,value:e.computedLabel,"aria-checked":e.isActive,tabindex:e.tabIndexComputed,onChange:t[0]||(t[0]=(...t)=>e.onClick&&e.onClick(...t)),onFocus:t[1]||(t[1]=(...t)=>e.onFocus&&e.onFocus(...t))},null,40,vb),(0,r._)("span",{"aria-hidden":"true",class:"va-radio__icon",style:(0,ds.j5)(e.iconComputedStyles)},[(0,r._)("span",{class:"va-radio__icon__background",style:(0,ds.j5)(e.iconBackgroundComputedStyles)},null,4),(0,r._)("span",{class:"va-radio__icon__dot",style:(0,ds.j5)(e.iconDotComputedStyles)},null,4)],4),(0,r._)("span",mb,[(0,r.WI)(e.$slots,"default",{},(()=>[(0,r.Uk)((0,ds.zw)(e.computedLabel),1)]))])],2)},hb.__file="src/components/va-radio/VaRadio.vue";const gb=Ja(hb);var yb=(0,r.aZ)({name:"VaSwitch",components:{VaProgressCircle:Oc,VaMessageListWrapper:Xp},emits:[...Gp,"focus","blur","update:modelValue"],props:{...qp,id:{type:String,default:""},name:{type:String,default:""},modelValue:{type:[Boolean,Array,String,Object],default:!1},trueLabel:{type:String,default:null},falseLabel:{type:String,default:null},trueInnerLabel:{type:String,default:null},falseInnerLabel:{type:String,default:null},color:{type:String,default:"primary"},offColor:{type:String,default:"gray"},size:{type:String,default:"medium",validator:e=>["medium","small","large"].includes(e)}},setup(e,{emit:t}){const n={container:(0,o.XI)(),input:(0,o.XI)(),label:(0,o.XI)()},{getColor:a}=fu(),{hasKeyboardFocus:i,keyboardFocusListeners:s}=Tp(),{isChecked:u,computedError:l,isIndeterminate:c,computedErrorMessages:d,...p}=Kp(e,t,n),f=(0,r.Fl)((()=>a(u.value?e.color:e.offColor))),{textColorComputed:h}=hu(f),v=(0,r.Fl)((()=>e.trueInnerLabel&&u.value?e.trueInnerLabel:e.falseInnerLabel&&!u.value?e.falseInnerLabel:"")),m=(0,r.Fl)((()=>e.trueLabel&&u.value?e.trueLabel:e.falseLabel&&!u.value?e.falseLabel:e.label)),g=jd("va-switch",(()=>({...Sl(e,["readonly","disabled","leftLabel"]),checked:u.value,indeterminate:c.value,small:"small"===e.size,large:"large"===e.size,error:l.value,onKeyboardFocus:i.value}))),y=(0,r.Fl)((()=>({lineHeight:d.value.length?1:0}))),b=(0,r.Fl)((()=>({small:"15px",medium:"20px",large:"25px"}[e.size]))),w=(0,r.Fl)((()=>({borderColor:e.error?a("danger"):"",backgroundColor:f.value}))),x=(0,r.Fl)((()=>({color:e.error?a("danger"):""}))),C=(0,r.Fl)((()=>({color:h.value}))),_=(0,r.Fl)((()=>`aria-label-id-${ru()}`)),k=(0,r.Fl)((()=>({id:e.id,name:e.name,disabled:e.disabled,readonly:e.readonly,ariaDisabled:e.disabled,ariaReadOnly:e.readonly,ariaChecked:!!e.modelValue,ariaLabelledby:_.value,"aria-invalid":!!d.value.length,"aria-errormessage":"string"==typeof d.value?d.value:d.value.join(", ")})));return{...p,computedErrorMessages:d,isChecked:u,computedError:l,isIndeterminate:c,keyboardFocusListeners:s,computedInnerLabel:v,computedLabel:m,computedClass:g,styleComputed:y,progressCircleSize:b,trackStyle:w,labelStyle:x,trackLabelStyle:C,ariaLabelIdComputed:_,inputAttributesComputed:k}}});const bb={class:"va-switch__checker-wrapper"},wb={class:"va-switch__checker"},xb=["id"];yb.render=function(e,t,n,o,a,i){const s=(0,r.up)("va-progress-circle"),u=(0,r.up)("VaMessageListWrapper");return(0,r.wg)(),(0,r.j4)(u,{class:(0,ds.C_)(["va-switch",e.computedClass]),style:(0,ds.j5)(e.styleComputed),disabled:e.$props.disabled,success:e.$props.success,messages:e.$props.messages,error:e.computedError,"error-messages":e.computedErrorMessages,"error-count":e.$props.errorCount},{default:(0,r.w5)((()=>[(0,r._)("div",{ref:"container",class:"va-switch__container",tabindex:"-1",onBlur:t[7]||(t[7]=(...t)=>e.onBlur&&e.onBlur(...t))},[(0,r._)("div",{class:"va-switch__inner",onClick:t[3]||(t[3]=(...t)=>e.toggleSelection&&e.toggleSelection(...t))},[(0,r._)("input",(0,r.dG)({ref:"input",type:"checkbox",class:"va-switch__input",role:"switch"},e.inputAttributesComputed,(0,r.mx)(e.keyboardFocusListeners),{onFocus:t[0]||(t[0]=(...t)=>e.onFocus&&e.onFocus(...t)),onBlur:t[1]||(t[1]=(...t)=>e.onBlur&&e.onBlur(...t)),onKeypress:t[2]||(t[2]=(0,Ks.D2)((0,Ks.iM)(((...t)=>e.toggleSelection&&e.toggleSelection(...t)),["prevent"]),["enter"]))}),null,16),(0,r._)("div",{class:"va-switch__track","aria-hidden":"true",style:(0,ds.j5)(e.trackStyle)},[e.computedInnerLabel||e.$slots.innerLabel?((0,r.wg)(),(0,r.iD)("div",{key:0,class:"va-switch__track-label",style:(0,ds.j5)(e.trackLabelStyle)},[(0,r.WI)(e.$slots,"innerLabel",{},(()=>[(0,r.Uk)((0,ds.zw)(e.computedInnerLabel),1)]))],4)):(0,r.kq)("v-if",!0),(0,r._)("div",bb,[(0,r._)("span",wb,[e.$props.loading?((0,r.wg)(),(0,r.j4)(s,{key:0,indeterminate:"",size:e.progressCircleSize,color:e.trackStyle.backgroundColor},null,8,["size","color"])):(0,r.kq)("v-if",!0)])])],4)]),e.computedLabel||e.$slots.default?((0,r.wg)(),(0,r.iD)("div",{key:0,ref:"label",class:"va-switch__label",style:(0,ds.j5)(e.labelStyle),id:e.ariaLabelIdComputed,onBlur:t[4]||(t[4]=(...t)=>e.onBlur&&e.onBlur(...t)),onClick:t[5]||(t[5]=(...t)=>e.toggleSelection&&e.toggleSelection(...t)),onKeydown:t[6]||(t[6]=(0,Ks.D2)((0,Ks.iM)(((...t)=>e.toggleSelection&&e.toggleSelection(...t)),["stop"]),["enter"]))},[(0,r.WI)(e.$slots,"default",{},(()=>[(0,r.Uk)((0,ds.zw)(e.computedLabel),1)]))],44,xb)):(0,r.kq)("v-if",!0)],544)])),_:3},8,["class","style","disabled","success","messages","error","error-messages","error-count"])},yb.__file="src/components/va-switch/VaSwitch.vue";const Cb=Ja(yb);var _b=(0,r.aZ)({name:"VaOptionList",components:{VaRadio:gb,VaCheckbox:tf,VaSwitch:Cb,VaMessageListWrapper:Xp},emits:[...rs],props:{...pb,...Wp,...ns,type:{type:String,default:"checkbox",validator:e=>["radio","checkbox","switch"].includes(e)},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},defaultValue:{type:[String,Number,Object,Array]},name:{type:String,default:""},color:{type:String,default:"primary"},leftLabel:{type:Boolean,default:!1},modelValue:{type:[String,Number,Object,Array]}},setup(e,{emit:t}){const{valueComputed:n}=os(e,t,e.defaultValue),{getValue:o,getText:a,getTrackBy:i,getDisabled:s}=fb(e),{itemRefs:u,setItemRef:l}=db(),c=(0,r.Fl)((()=>"radio"===e.type)),d=(0,r.Fl)({get(){const e=c.value?null:[];return n.value||e},set(t){e.readonly||(c.value&&!Array.isArray(t)?n.value=t?o(t):t:n.value=Array.isArray(t)?t.map(o):[t?o(t):t])}}),p=()=>{n.value=void 0},f=()=>{const e=Array.isArray(u.value)&&u.value.find((e=>!e.disabled));e&&"function"==typeof e.focus&&e.focus()},{computedError:h,computedErrorMessages:v}=Up(e,t,p,f),m=(0,r.Fl)((()=>Sl(e,["name","color","readonly","leftLabel"])));return(0,r.bv)((()=>{Xs&&"radio"!==e.type&&!Array.isArray(e.modelValue)&&console.warn(`Prop 'modelValue = ${e.modelValue}' has not a proper type!\n For component property 'type = ${e.type}' it must be of type 'array'.`)})),{selectedValue:d,computedError:h,computedErrorMessages:v,getValue:o,getText:a,getKey:e=>i(e),isDisabled:t=>e.disabled||s(t),reset:p,focus:f,setItemRef:l,computedProps:m}}});const kb={class:"va-option-list__list"};_b.render=function(e,t,n,o,a,i){const s=(0,r.up)("va-radio"),u=(0,r.up)("va-checkbox"),l=(0,r.up)("va-switch"),c=(0,r.up)("VaMessageListWrapper");return(0,r.wg)(),(0,r.j4)(c,{error:e.computedError,"error-messages":e.computedErrorMessages,"error-count":e.$props.errorCount},{default:(0,r.w5)((()=>[(0,r._)("ul",kb,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.$props.options,(n=>((0,r.wg)(),(0,r.iD)("li",{key:e.getKey(n)},[(0,r.WI)(e.$slots,"default",(0,ds.vs)((0,r.F4)({option:n,selectedValue:e.selectedValue,isDisabled:e.isDisabled,getText:e.getText,getValue:e.getValue})),(()=>["radio"===e.$props.type?((0,r.wg)(),(0,r.j4)(s,(0,r.dG)({key:0,ref_for:!0,ref:e.setItemRef,modelValue:e.selectedValue,"onUpdate:modelValue":t[0]||(t[0]=t=>e.selectedValue=t),label:e.getText(n),disabled:e.isDisabled(n),option:e.getValue(n)},e.computedProps),null,16,["modelValue","label","disabled","option"])):"checkbox"===e.$props.type?((0,r.wg)(),(0,r.j4)(u,(0,r.dG)({key:1,ref_for:!0,ref:e.setItemRef,modelValue:e.selectedValue,"onUpdate:modelValue":t[1]||(t[1]=t=>e.selectedValue=t),label:e.getText(n),disabled:e.isDisabled(n),"array-value":e.getValue(n)},e.computedProps),null,16,["modelValue","label","disabled","array-value"])):((0,r.wg)(),(0,r.j4)(l,(0,r.dG)({key:2,ref_for:!0,ref:e.setItemRef,modelValue:e.selectedValue,"onUpdate:modelValue":t[2]||(t[2]=t=>e.selectedValue=t),label:e.getText(n),disabled:e.isDisabled(n),"array-value":e.getValue(n)},e.computedProps),null,16,["modelValue","label","disabled","array-value"]))]))])))),128))])])),_:3},8,["error","error-messages","error-count"])},_b.__file="src/components/va-option-list/VaOptionList.vue";const Sb=Ja(_b);var Eb=(0,r.aZ)({name:"VaPagination",components:{VaButtonGroup:Yd,VaButton:Wc},emits:rs,props:{...ns,modelValue:{type:Number,default:1},visiblePages:{type:Number,default:0},pages:{type:Number,default:0},disabled:{type:Boolean,default:!1},color:{type:String,default:"primary"},size:{type:String,default:"medium",validator:e=>["medium","small","large"].includes(e)},boundaryLinks:{type:Boolean,default:!0},boundaryNumbers:{type:Boolean,default:!1},directionLinks:{type:Boolean,default:!0},input:{type:Boolean,default:!1},hideOnSinglePage:{type:Boolean,default:!1},flat:{type:Boolean,default:!1},total:{type:Number,default:null},pageSize:{type:Number,default:null},boundaryIconLeft:{type:String,default:"first_page"},boundaryIconRight:{type:String,default:"last_page"},directionIconLeft:{type:String,default:"chevron_left"},directionIconRight:{type:String,default:"chevron_right"}},setup(e,{emit:t}){const n=(0,o.XI)(),a=(0,o.iH)(""),i=(0,r.Fl)((()=>!(!e.total&&0!==e.pageSize||!e.pageSize))),{valueComputed:s}=os(e,t),{textColorComputed:u}=hu(),l=(0,r.Fl)({get:()=>i.value?Math.ceil(s.value/e.pageSize)||1:s.value,set:e=>{s.value=e}}),c=(0,r.Fl)((()=>{const{visiblePages:t,total:n,pageSize:r,boundaryNumbers:o,pages:a}=e;return((e=1,t,n,r=!1)=>{let o=0;if(0===n&&(n=1),t>n&&(t=n),0===t)o=1,t=n;else{const r=t/2;o=e-r<=0||e>n?1:e+r>n?n-t+1:Math.ceil(e-r)}const a=[];for(let i=0;i<t;i++)a.push(o+i);return r&&(1!==o&&a.splice(0,2,1,"..."),a[a.length-1]!==n&&a.splice(-2,2,"...",n)),a})(l.value||1,t,i.value?Math.ceil(n/r):a,o)})),d=(0,r.Fl)((()=>i.value?Math.ceil(e.total/e.pageSize)||1:e.pages)),p=(0,r.Fl)((()=>!!e.visiblePages&&d.value>e.visiblePages)),f=(0,r.Fl)((()=>{const{boundaryLinks:t,boundaryNumbers:n,input:r}=e;return r||p.value&&t&&!n})),h=(0,r.Fl)((()=>e.input||p.value&&e.directionLinks)),v=(0,r.Fl)((()=>d.value>1||!e.hideOnSinglePage&&d.value<=1)),m=t=>{"..."===t||t<1||t>d.value||(l.value=i.value?(t-1)*e.pageSize+1:t)},g=()=>{var e;a.value="",null===(e=n.value)||void 0===e||e.blur()},{getColor:y}=fu(),b=(0,r.Fl)((()=>({cursor:"default",color:y(e.color),opacity:e.disabled?.4:1})));return(0,r.YP)([i,()=>e.pages],(()=>{if(Xs&&i.value&&e.pages)throw new Error("Please, use either `total` and `page-size` props, or `pages`.")})),{currentValue:l,lastPage:d,changeValue:()=>{if(+a.value===l.value&&g(),!a.value.length)return;let e=Number.parseInt(a.value);switch(!0){case e<1:e=1;break;case e>d.value:e=d.value;break;case isNaN(e):e=l.value}m(e),g()},inputValue:a,showPagination:v,showBoundaryLinks:f,onUserInput:m,activeButtonStyle:t=>t===l.value?{backgroundColor:y(e.color),color:u.value}:{color:y(e.color)},showDirectionLinks:h,paginationRange:c,focusInput:()=>{a.value=`${l.value}`,(0,r.Y3)((()=>{var e;return null===(e=n.value)||void 0===e?void 0:e.setSelectionRange(0,n.value.value.length)}))},inputStyleComputed:b}}});const Ib=["disabled","placeholder"];Eb.render=function(e,t,n,o,a,i){const s=(0,r.up)("va-button"),u=(0,r.up)("va-button-group");return e.showPagination?((0,r.wg)(),(0,r.j4)(u,{key:0,class:"va-pagination",flat:e.$props.flat,size:e.$props.size,color:e.$props.color,outline:"",onKeydown:[t[8]||(t[8]=(0,Ks.D2)((0,Ks.iM)((t=>e.onUserInput(e.currentValue-1)),["stop"]),["left"])),t[9]||(t[9]=(0,Ks.D2)((0,Ks.iM)((t=>e.onUserInput(e.currentValue+1)),["stop"]),["right"]))]},{default:(0,r.w5)((()=>[e.showBoundaryLinks?((0,r.wg)(),(0,r.j4)(s,{key:0,"aria-label":"go first page",disabled:e.$props.disabled||1===e.currentValue,icon:e.$props.boundaryIconLeft,onClick:t[0]||(t[0]=t=>e.onUserInput(1))},null,8,["disabled","icon"])):(0,r.kq)("v-if",!0),e.showDirectionLinks?((0,r.wg)(),(0,r.j4)(s,{key:1,"aria-label":"go prev page",outline:"",disabled:e.$props.disabled||1===e.currentValue,icon:e.$props.directionIconLeft,onClick:t[1]||(t[1]=t=>e.onUserInput(e.currentValue-1))},null,8,["disabled","icon"])):(0,r.kq)("v-if",!0),e.$props.input?(0,r.wy)(((0,r.wg)(),(0,r.iD)("input",{key:3,ref:"htmlInput",class:(0,ds.C_)(["va-pagination__input va-button",{"va-pagination__input--flat":e.$props.flat}]),"aria-label":"enter the page number to go","onUpdate:modelValue":t[2]||(t[2]=t=>e.inputValue=t),disabled:e.$props.disabled,placeholder:`${e.currentValue}/${e.lastPage}`,style:(0,ds.j5)(e.inputStyleComputed),onKeydown:t[3]||(t[3]=(0,Ks.D2)(((...t)=>e.changeValue&&e.changeValue(...t)),["enter"])),onFocus:t[4]||(t[4]=(...t)=>e.focusInput&&e.focusInput(...t)),onBlur:t[5]||(t[5]=(...t)=>e.changeValue&&e.changeValue(...t))},null,46,Ib)),[[Ks.nr,e.inputValue]]):(0,r.WI)(e.$slots,"default",{key:2},(()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.paginationRange,((t,n)=>((0,r.wg)(),(0,r.j4)(s,{key:n,class:(0,ds.C_)(["va-pagination__numeric-button",{"va-button--ellipsis":"..."===t}]),outline:"","aria-label":`go to ${t} page`,"aria-current":t===e.currentValue,style:(0,ds.j5)(e.activeButtonStyle(t)),disabled:e.$props.disabled||"..."===t,onClick:n=>e.onUserInput(t)},{default:(0,r.w5)((()=>[(0,r.Uk)((0,ds.zw)(t),1)])),_:2},1032,["aria-label","aria-current","style","disabled","class","onClick"])))),128))])),e.showDirectionLinks?((0,r.wg)(),(0,r.j4)(s,{key:4,"aria-label":"go next page",outline:"",disabled:e.$props.disabled||e.currentValue===e.lastPage,icon:e.$props.directionIconRight,onClick:t[6]||(t[6]=t=>e.onUserInput(e.currentValue+1))},null,8,["disabled","icon"])):(0,r.kq)("v-if",!0),e.showBoundaryLinks?((0,r.wg)(),(0,r.j4)(s,{key:5,"aria-label":"go last page",outline:"",disabled:e.$props.disabled||e.currentValue===e.lastPage,icon:e.$props.boundaryIconRight,onClick:t[7]||(t[7]=t=>e.onUserInput(e.lastPage))},null,8,["disabled","icon"])):(0,r.kq)("v-if",!0)])),_:3},8,["flat","size","color"])):(0,r.kq)("v-if",!0)},Eb.__file="src/components/va-pagination/VaPagination.vue";const Ab=Ja(Eb);var Fb=(0,r.aZ)({name:"VaParallax",props:{target:{type:[Object,String]},src:{type:String,default:"",required:!0},alt:{type:String,default:"parallax"},height:{type:Number,default:400},reversed:{type:Boolean,default:!1},speed:{type:Number,default:.5,validator:e=>e>=0&&e<=1}},setup(e){const t=(0,o.XI)(),n=(0,o.XI)(),a=(0,o.iH)(0),i=(0,o.iH)(0),s=(0,o.iH)(0),u=(0,o.iH)(0),l=(0,o.iH)(0),c=(0,o.iH)(0),d=(0,o.iH)(0),p=(0,o.iH)(!1),f=(0,r.Fl)((()=>({height:e.height+"px"}))),h=(0,r.Fl)((()=>({display:"block",transform:`translate(-50%, ${i.value}px)`,opacity:p.value?1:0,top:e.reversed?0:"auto"}))),v=(0,r.Fl)((()=>{var n;if(!e.target)return m(null===(n=t.value)||void 0===n?void 0:n.parentElement);if(e.target instanceof HTMLElement)return e.target;const r=document.querySelector(e.target);return r||(Zs("VaParallax target prop got wrong selector. Target is null"),null)})),m=e=>e?e.scrollHeight>e.clientHeight?e:m(e.parentElement):document.body,g=(0,r.Fl)((()=>{var e;return(null===(e=n.value)||void 0===e?void 0:e.naturalHeight)||0})),y=()=>{(()=>{var n,r;const o=(null===(n=t.value)||void 0===n?void 0:n.getBoundingClientRect())||{top:0};l.value=(null===(r=v.value)||void 0===r?void 0:r.scrollTop)||0,s.value=g.value-e.height,a.value=o.top+l.value,c.value=window.innerHeight,d.value=l.value+c.value})(),u.value=(d.value-a.value)/(e.height+c.value),i.value=Math.round(s.value*u.value)*e.speed,e.reversed&&(i.value=-i.value)},b=()=>{var e,t;null===(e=v.value)||void 0===e||e.addEventListener("scroll",y),null===(t=v.value)||void 0===t||t.addEventListener("resize",y)};return(0,r.bv)((()=>{var e,t;(null===(e=n.value)||void 0===e?void 0:e.complete)?(y(),b()):null===(t=n.value)||void 0===t||t.addEventListener("load",(()=>{y(),b()}),!1),p.value=!0})),(0,r.Jd)((()=>{var e,t;null===(e=v.value)||void 0===e||e.removeEventListener("scroll",y),null===(t=v.value)||void 0===t||t.removeEventListener("resize",y)})),{img:n,rootElement:t,computedWrapperStyles:f,computedImgStyles:h}}});const Db={class:"va-parallax__image-container"},Rb=["src","alt"],Tb={class:"va-parallax__item-container"};Fb.render=function(e,t,n,o,a,i){return(0,r.wg)(),(0,r.iD)("div",{ref:"rootElement",class:"va-parallax",style:(0,ds.j5)(e.computedWrapperStyles)},[(0,r._)("div",Db,[(0,r._)("img",{ref:"img",class:"va-parallax__image",src:e.$props.src,alt:e.$props.alt,style:(0,ds.j5)(e.computedImgStyles)},null,12,Rb)]),(0,r._)("div",Tb,[(0,r.WI)(e.$slots,"default")])],4)},Fb.__file="src/components/va-parallax/VaParallax.vue";const Ob=Ja(Fb),Pb=bf(Kd,["closeOnClickOutside"]);var Bb=(0,r.aZ)({name:"VaPopover",components:{VaDropdown:Kd,VaIcon:vc},props:{...Pb,trigger:{default:"hover"},color:{type:String,default:"dark"},textColor:{type:String},icon:{type:String,default:""},title:{type:String,default:""},message:{type:String,default:""},autoHide:{type:Boolean,default:!0},offset:{type:[Array,Number],default:4}},setup(e,{slots:t}){const n=yf(e,Pb),{getColor:o,getBoxShadowColor:a}=fu(),{textColorComputed:i}=hu(),s=(0,r.Fl)((()=>e.icon||t.icon)),u=(0,r.Fl)((()=>e.title||t.title)),l=(0,r.Fl)((()=>e.message||t.body)),c=(0,r.Fl)((()=>u.value||l.value)),d=(0,r.Fl)((()=>({boxShadow:`var(--va-popover-content-box-shadow) ${a(o(e.color))}`,backgroundColor:o(e.color),color:i.value})));return{textColorComputed:i,VaDropdownPropValues:n,showBodyComputed:l,showIconComputed:s,showTitleComputed:u,computedPopoverStyle:d,showPopoverContentComputed:c}}});const Mb={key:0,"aria-hidden":"true",class:"va-popover__icon"},Nb={key:1},Lb={key:0,class:"va-popover__title"},Vb={key:1,class:"va-popover__body"};Bb.render=function(e,t,n,o,a,i){const s=(0,r.up)("va-icon"),u=(0,r.up)("va-dropdown");return(0,r.wg)(),(0,r.j4)(u,(0,r.dG)(e.VaDropdownPropValues,{"model-value":e.modelValue,"close-on-click-outside":e.autoHide,offset:e.$props.offset,class:"va-popover"}),{default:(0,r.w5)((()=>[(0,r._)("div",{style:(0,ds.j5)(e.computedPopoverStyle),class:"va-popover__content",role:"tooltip"},[e.showIconComputed?((0,r.wg)(),(0,r.iD)("div",Mb,[(0,r.WI)(e.$slots,"icon",{},(()=>[(0,r.Wm)(s,{name:e.$props.icon,color:e.textColorComputed},null,8,["name","color"])]))])):(0,r.kq)("v-if",!0),e.showPopoverContentComputed?((0,r.wg)(),(0,r.iD)("div",Nb,[e.showTitleComputed?((0,r.wg)(),(0,r.iD)("div",Lb,[(0,r.WI)(e.$slots,"title",{},(()=>[(0,r.Uk)((0,ds.zw)(e.$props.title),1)]))])):(0,r.kq)("v-if",!0),e.showBodyComputed?((0,r.wg)(),(0,r.iD)("div",Vb,[(0,r.WI)(e.$slots,"body",{},(()=>[(0,r.Uk)((0,ds.zw)(e.$props.message),1)]))])):(0,r.kq)("v-if",!0)])):(0,r.kq)("v-if",!0)],4)])),anchor:(0,r.w5)((()=>[(0,r.WI)(e.$slots,"default")])),_:3},16,["model-value","close-on-click-outside","offset"])},Bb.__file="src/components/va-popover/VaPopover.vue";const jb=Ja(Bb);var Wb=(0,r.aZ)({name:"VaProgressBar",props:{modelValue:{type:Number,default:0},indeterminate:{type:Boolean,default:!1},color:{type:String,default:"primary"},size:{type:[Number,String],default:"medium"},buffer:{type:Number,default:100},rounded:{type:Boolean,default:!0},reverse:{type:Boolean,default:!1},contentInside:{type:Boolean,default:!1},showPercent:{type:Boolean,default:!1}},setup(e){const{getColor:t,getHoverColor:n}=fu(),{textColorComputed:o}=hu(),a=(0,r.Fl)((()=>t(e.color))),i=(0,r.Fl)((()=>"string"==typeof e.size&&["small","medium","large"].includes(e.size)));return{rootClass:(0,r.Fl)((()=>({"va-progress-bar--square":!e.rounded,[`va-progress-bar--${e.size}`]:i.value}))),rooStyle:(0,r.Fl)((()=>({"--va-progress-bar-color":a.value,"--va-progress-bar-background-color":n(a.value)}))),wrapperStyle:(0,r.Fl)((()=>({height:"number"==typeof e.size?`${e.size}px`:i.value?void 0:e.size}))),bufferStyle:(0,r.Fl)((()=>({width:`${e.indeterminate?100:Fc(e.buffer,0,100)}%`,color:o.value,[e.reverse?"right":"left"]:0}))),progressStyle:(0,r.Fl)((()=>({width:`${Fc(e.modelValue,0,100)}%`,marginLeft:e.reverse?"auto":void 0}))),intermediateStyle:(0,r.Fl)((()=>({animationDirection:e.reverse?"reverse":"normal"}))),ariaAttributesComputed:(0,r.Fl)((()=>({role:"progressbar",ariaLabel:"progress state",ariaValuenow:e.indeterminate?void 0:e.modelValue})))}}});const Hb={key:0,class:"va-progress-bar__info"};Wb.render=function(e,t,n,o,a,i){return(0,r.wg)(),(0,r.iD)("div",(0,r.dG)({class:["va-progress-bar",e.rootClass],style:e.rooStyle},e.ariaAttributesComputed),[e.$props.contentInside?(0,r.kq)("v-if",!0):((0,r.wg)(),(0,r.iD)("div",Hb,[(0,r.WI)(e.$slots,"default",(0,ds.vs)((0,r.F4)({value:e.$props.modelValue})),(()=>[e.$props.showPercent?((0,r.wg)(),(0,r.iD)(r.HY,{key:0},[(0,r.Uk)((0,ds.zw)(e.$props.modelValue)+"% ",1)],2112)):(0,r.kq)("v-if",!0)]))])),(0,r._)("div",{class:"va-progress-bar__wrapper",style:(0,ds.j5)(e.wrapperStyle)},[(0,r._)("div",{class:"va-progress-bar__buffer",style:(0,ds.j5)(e.bufferStyle)},[e.$props.contentInside?(0,r.WI)(e.$slots,"default",(0,ds.vs)((0,r.dG)({key:0},{value:e.$props.modelValue})),(()=>[e.$props.showPercent?((0,r.wg)(),(0,r.iD)(r.HY,{key:0},[(0,r.Uk)((0,ds.zw)(e.$props.modelValue)+"% ",1)],2112)):(0,r.kq)("v-if",!0)])):(0,r.kq)("v-if",!0)],4),e.indeterminate?((0,r.wg)(),(0,r.iD)(r.HY,{key:0},[(0,r._)("div",{class:"va-progress-bar__progress--indeterminate-start",style:(0,ds.j5)(e.intermediateStyle)},null,4),(0,r._)("div",{class:"va-progress-bar__progress--indeterminate-end",style:(0,ds.j5)(e.intermediateStyle)},null,4)],64)):((0,r.wg)(),(0,r.iD)("div",{key:1,class:"va-progress-bar__progress",style:(0,ds.j5)(e.progressStyle)},null,4))],4)],16)},Wb.__file="src/components/va-progress-bar/VaProgressBar.vue";const Ub=Ja(Wb);var zb;!function(e){e[e.EMPTY=0]="EMPTY",e[e.HALF=.5]="HALF",e[e.FULL=1]="FULL"}(zb||(zb={}));const $b={...ns,modelValue:{type:Number,default:0},clearable:{type:Boolean,default:!1},hover:{type:Boolean,default:!1}},qb=e=>{const{emit:t}=(()=>{const e=(0,r.FN)();if(!e)throw new Error("useRating hooks must be used on top of setup function");return{props:e.props,emit:e.emit}})(),{isHovered:n,onMouseEnter:a,onMouseLeave:i}=rf(),{valueComputed:s}=os(e,t),u=(0,o.iH)(0),l=(0,r.Fl)((()=>!e.disabled&&!e.readonly&&e.hover&&n.value?u.value:s.value));return{visibleValue:l,modelValue:s,hoveredValue:u,isHovered:n,onMouseEnter:a,onMouseLeave:i,onItemValueUpdate:(t,n)=>{const r=t+n;e.clearable&&s.value===r?s.value=0:s.value=r},onItemHoveredValueUpdate:(t,n)=>{e.hover&&(u.value=t+n)},getItemValue:e=>{const t=l.value-e;return Fc(t,zb.EMPTY,zb.FULL)}}},Gb={unselectedColor:{type:String},color:{type:String,default:"primary"},modelValue:{type:Number}},Kb=e=>{const{getColor:t,getFocusColor:n,getTextColor:o}=fu(),a=(0,r.Fl)((()=>t(e.color))),i=(0,r.Fl)((()=>e.unselectedColor?t(e.unselectedColor):n(t(e.color)))),s=(0,r.Fl)((()=>e.modelValue===zb.HALF?`linear-gradient(90deg, ${a.value} 50%, ${i.value} 50%`:e.modelValue===zb.EMPTY?i.value:a.value)),u=(0,r.Fl)((()=>e.modelValue===zb.FULL?o(a.value):o(i.value)));return{computedColor:a,backgroundComputed:s,textColorComputed:u}};var Xb=(0,r.aZ)({name:"VaRatingItem",components:{VaIcon:vc},props:{modelValue:{type:Number,default:0},icon:{type:String,default:"star"},halfIcon:{type:String,default:"star_half"},emptyIcon:{type:String,default:"star_outline"},halves:{type:Boolean,default:!1},hover:{type:Boolean,default:!1},tabindex:{type:Number,default:0},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},size:{type:[String,Number],default:"medium"},unselectedColor:{type:String},color:{type:String,default:"primary"}},emits:["update:modelValue","click","hover"],setup(e,{emit:t}){const n=(0,o.XI)(),[a]=Op("modelValue",e,t,zb.EMPTY),i=(0,o.iH)(null),s=(0,r.Fl)((()=>!e.hover||e.disabled||e.readonly?a.value:i.value||a.value)),{getColor:u}=fu(),l=(0,r.Fl)((()=>u(e.unselectedColor&&s.value===zb.EMPTY?e.unselectedColor:e.color)));return(0,r.YP)(i,(()=>t("hover",i.value||zb.EMPTY))),{computedColor:l,rootEl:n,onEnter:()=>{a.value=1},onClick:()=>{a.value=i.value||zb.FULL,t("click",i.value||zb.FULL)},onMouseMove:t=>{if(!n.value)return;const{offsetX:r}=t,o=n.value.clientWidth;e.halves?i.value=r/o<=zb.HALF?zb.HALF:zb.FULL:i.value=zb.FULL},onMouseLeave:()=>{i.value=null},visibleValue:s,computedIconName:(0,r.Fl)((()=>e.halves&&s.value===zb.HALF?e.halfIcon:s.value===zb.EMPTY?e.emptyIcon:e.icon)),tabIndexComputed:(0,r.Fl)((()=>e.disabled?-1:e.tabindex))}}});const Yb=["tabindex"];Xb.render=function(e,t,n,o,a,i){const s=(0,r.up)("va-icon");return(0,r.wg)(),(0,r.iD)("div",{ref:"rootEl",class:"va-rating-item",role:"button",tabindex:e.tabIndexComputed,onKeyup:[t[0]||(t[0]=(0,Ks.D2)(((...t)=>e.onClick&&e.onClick(...t)),["enter"])),t[1]||(t[1]=(0,Ks.D2)(((...t)=>e.onClick&&e.onClick(...t)),["space"]))],onMousemove:t[2]||(t[2]=(...t)=>e.onMouseMove&&e.onMouseMove(...t)),onMouseleave:t[3]||(t[3]=(...t)=>e.onMouseLeave&&e.onMouseLeave(...t))},[(0,r.WI)(e.$slots,"default",{props:{value:e.visibleValue,onClick:e.onClick}},(()=>[(0,r.Wm)(s,{class:"va-rating-item__wrapper",tabindex:"-1",tag:"button",name:e.computedIconName,size:e.$props.size,color:e.computedColor,onClick:e.onClick},null,8,["name","size","color","onClick"])]))],40,Yb)},Xb.__file="src/components/va-rating/components/VaRatingItem/VaRatingItem.vue";var Zb=(0,r.aZ)({name:"VaRatingItemNumberButton",props:{...Gb,...Ll,itemNumber:{type:Number,required:!0},modelValue:{type:Number,required:!0}},setup:e=>({...Kb(e),...Wl(e,"VaRating")})});Zb.render=function(e,t,n,o,a,i){return(0,r.wg)(),(0,r.iD)("button",{class:"va-rating__number-item",tabindex:"-1","aria-hidden":"true",style:(0,ds.j5)({background:e.backgroundComputed,color:e.textColorComputed,width:e.sizeComputed,height:e.sizeComputed,fontSize:e.fontSizeComputed,borderRadius:.125*parseInt(e.fontSizeComputed)+"rem"})},(0,ds.zw)(e.itemNumber),5)},Zb.__file="src/components/va-rating/components/VaRatingItemNumberButton.vue";const Jb=bf(Xb),Qb=bf(Zb,["modelValue","itemNumber"]);var ew=(0,r.aZ)({name:"VaRating",props:{...$b,...Gb,...xf,...Jb,...Qb,numbers:{type:Boolean,default:!1},halves:{type:Boolean,default:!1},max:{type:Number,default:5},texts:{type:Array,default:()=>[]}},emits:["update:modelValue"],components:{VaRatingItem:Xb,VaRatingItemNumberButton:Zb},setup(e){const{computedClasses:t}=Cf("va-rating",e),n=qb(e),o=(0,r.Fl)((()=>!e.disabled&&!e.readonly));return{...Kb(e),...n,rootClass:t,VaRatingItemProps:yf(e,Jb),VaRatingItemNumberButtonProps:yf(e,Qb),isInteractionsEnabled:o,tabIndexComputed:(0,r.Fl)((()=>o.value?0:void 0)),onArrowKeyPress:t=>{const r=e.halves?zb.HALF:zb.FULL;n.onItemValueUpdate(n.visibleValue.value,r*t)}}}});const tw=["aria-label"];ew.render=function(e,t,n,o,a,i){const s=(0,r.up)("VaRatingItemNumberButton"),u=(0,r.up)("va-rating-item");return(0,r.wg)(),(0,r.iD)("div",{class:(0,ds.C_)(["va-rating",e.rootClass]),"aria-label":`current rating ${e.$props.modelValue} of ${e.$props.max}`},[(0,r._)("div",{class:"va-rating__item-wrapper",onKeyup:[t[0]||(t[0]=(0,Ks.D2)((t=>e.onArrowKeyPress(-1)),["left"])),t[1]||(t[1]=(0,Ks.D2)((t=>e.onArrowKeyPress(1)),["right"]))],onMouseenter:t[2]||(t[2]=(...t)=>e.onMouseEnter&&e.onMouseEnter(...t)),onMouseleave:t[3]||(t[3]=(...t)=>e.onMouseLeave&&e.onMouseLeave(...t))},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.$props.max,(t=>((0,r.wg)(),(0,r.j4)(u,(0,r.dG)({key:t},e.VaRatingItemProps,{"aria-label":`vote rating ${t} of ${e.$props.max}`,"model-value":e.getItemValue(t-1),tabindex:e.tabIndexComputed,disabled:e.$props.disabled,readonly:e.$props.readonly,onHover:n=>e.isInteractionsEnabled&&e.onItemHoveredValueUpdate(t-1,n),"onUpdate:modelValue":n=>e.isInteractionsEnabled&&e.onItemValueUpdate(t-1,n)}),(0,r.Nv)({_:2},[e.$props.numbers?{name:"default",fn:(0,r.w5)((({props:n})=>[(0,r.Wm)(s,(0,r.dG)(e.VaRatingItemNumberButtonProps,{"model-value":n.value,"item-number":t,onClick:n.onClick}),null,16,["model-value","item-number","onClick"])]))}:void 0]),1040,["aria-label","model-value","tabindex","disabled","readonly","onHover","onUpdate:modelValue"])))),128))],32),e.$props.texts&&e.$props.texts.length===e.$props.max?((0,r.wg)(),(0,r.iD)("span",{key:0,class:"va-rating__text-wrapper",style:(0,ds.j5)({color:e.computedColor})},(0,ds.zw)(e.$props.texts[Math.round(e.visibleValue)-1]),5)):(0,r.kq)("v-if",!0)],10,tw)},ew.__file="src/components/va-rating/VaRating.vue";Ja(Xb);const nw=Ja(ew);n(2262),n(4506);const rw={maxSelections:{type:[Number,String],default:void 0}};var ow=(0,r.aZ)({name:"VaSelectOptionList",components:{VaIcon:vc},emits:["select-option","update:hoveredOption","no-previous-option-to-hover","scroll-bottom"],props:{...pu,options:{type:Array,default:()=>[]},noOptionsText:{type:String,default:"Items not found"},getSelectedState:{type:Function,required:!0},getText:{type:Function,required:!0},getTrackBy:{type:Function,required:!0},getGroupBy:{type:Function,required:!0},multiple:{type:Boolean,default:!1},search:{type:String,default:""},tabindex:{type:Number,default:0},hoveredOption:{type:[String,Number,Object],default:null}},setup(e,{emit:t}){const{getColor:n,getHoverColor:a}=fu(),i=(0,o.XI)(),s=(0,o.iH)({}),u=(0,r.Fl)({get:()=>e.hoveredOption||null,set:e=>t("update:hoveredOption",e)}),l=(0,r.Fl)((()=>e.search?e.options.filter((t=>{const n=e.getText(t).toString().toUpperCase(),r=e.search.toUpperCase();return n.includes(r)})):e.options)),c=(0,r.Fl)((()=>l.value.reduce(((t,n)=>{if("object"==typeof n&&n.group){const r=e.getGroupBy(n);t[r]||(t[r]=[]),t[r].push(n)}else t._noGroup.push(n);return t}),{_noGroup:[]}))),d=t=>!!u.value&&("string"==typeof t?t===u.value:!!e.getTrackBy&&e.getTrackBy(u.value)===e.getTrackBy(t)),p=e=>{u.value=e||null},f=(0,r.Fl)((()=>l.value.findIndex((t=>!!u.value&&e.getTrackBy(t)===e.getTrackBy(u.value))))),h=t=>{if(!t)return;const n=s.value[e.getTrackBy(t)];n&&((e,t={scrollTarget:e.parentElement,verticalAlignment:"any",smooth:!1})=>{const n=t.scrollTarget||e.parentElement,r=((e,t,n)=>{const r=t.offsetHeight,o=t.scrollTop,a=(e=>e.offsetTop)(e)-t.offsetTop,i=(e=>e.offsetTop+e.offsetHeight/2)(e)-t.offsetTop,s=(e=>e.offsetTop+e.offsetHeight)(e)-t.offsetTop;if("start"===n)return a;if("end"===n)return s-r;if("center"===n)return i-r/2;if("any"===n){if(a-o<0)return a;if(s-o>r)return s-r}})(e,n,t.verticalAlignment);void 0!==r&&n.scroll({top:r,behavior:t.smooth?"smooth":"auto"})})(n)};(0,r.YP)((()=>e.hoveredOption),(e=>e&&h(e)));const v={hoverPreviousOption:()=>{u.value?l.value[f.value-1]?u.value=l.value[f.value-1]:t("no-previous-option-to-hover"):l.value.length&&p(l.value.at(-1))},hoverNextOption:()=>{u.value?l.value[f.value+1]&&(u.value=l.value[f.value+1]):l.value.length&&p(l.value[0])},hoverFirstOption:()=>{l.value.length>0&&p(l.value[0])},focus:()=>{var e;null===(e=i.value)||void 0===e||e.focus({preventScroll:!0})},scrollToOption:h};return{rootElement:i,getColor:n,filteredOptions:l,optionGroups:c,onScroll:e=>{const n=e.target;n&&n.scrollTop+n.clientHeight===n.scrollHeight&&t("scroll-bottom")},beforeUpdate:()=>{s.value={}},setItemRef:t=>n=>{n&&(s.value[e.getTrackBy(t)]=n)},selectOption:e=>t("select-option",e),getOptionIcon:e=>"object"==typeof e?e.icon:void 0,getOptionClass:t=>({"va-select-option-list__option":!0,"va-select-option-list__option--selected":e.getSelectedState(t)}),getOptionStyle:t=>({color:e.getSelectedState(t)?n(e.color):"inherit",backgroundColor:d(t)?a(n(e.color)):"transparent"}),updateHoveredOption:p,...v}}});const aw=["tabindex"],iw={key:0,class:"va-select-option-list__group-name"},sw=["aria-selected","onClick","onMouseover"],uw={key:0,class:"va-select-option-list no-options"};ow.render=function(e,t,n,o,a,i){const s=(0,r.up)("va-icon");return(0,r.wg)(),(0,r.iD)("div",{ref:"rootElement",class:"va-select-option-list",tabindex:e.tabindex,onKeydown:[t[0]||(t[0]=(0,Ks.D2)((0,Ks.iM)(((...t)=>e.hoverPreviousOption&&e.hoverPreviousOption(...t)),["stop","prevent"]),["up"])),t[1]||(t[1]=(0,Ks.D2)((0,Ks.iM)(((...t)=>e.hoverPreviousOption&&e.hoverPreviousOption(...t)),["stop","prevent"]),["left"])),t[2]||(t[2]=(0,Ks.D2)((0,Ks.iM)(((...t)=>e.hoverNextOption&&e.hoverNextOption(...t)),["stop","prevent"]),["down"])),t[3]||(t[3]=(0,Ks.D2)((0,Ks.iM)(((...t)=>e.hoverNextOption&&e.hoverNextOption(...t)),["stop","prevent"]),["right"]))],onScrollPassive:t[4]||(t[4]=(...t)=>e.onScroll&&e.onScroll(...t))},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.optionGroups,((t,n)=>((0,r.wg)(),(0,r.iD)(r.HY,{key:n},["_noGroup"!==n?((0,r.wg)(),(0,r.iD)("span",iw,(0,ds.zw)(n),1)):(0,r.kq)("v-if",!0),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t,(t=>((0,r.wg)(),(0,r.iD)("div",{key:e.$props.getTrackBy(t),ref_for:!0,ref:e.setItemRef(t),role:"option","aria-selected":!!e.$props.getSelectedState(t),class:(0,ds.C_)(e.getOptionClass(t)),style:(0,ds.j5)(e.getOptionStyle(t)),onClick:n=>e.selectOption(t),onMouseover:n=>e.updateHoveredOption(t)},[e.getOptionIcon(t)?((0,r.wg)(),(0,r.j4)(s,{key:0,size:"small",class:"va-select-option-list__option--icon",name:e.getOptionIcon(t)},null,8,["name"])):(0,r.kq)("v-if",!0),(0,r._)("span",null,(0,ds.zw)(e.getText(t)),1),(0,r.wy)((0,r.Wm)(s,{class:"va-select-option-list__option--selected-icon",size:"small",name:"done",color:e.getColor(e.$props.color)},null,8,["color"]),[[Ks.F8,e.$props.getSelectedState(t)]])],46,sw)))),128))],64)))),128)),e.filteredOptions.length?(0,r.kq)("v-if",!0):((0,r.wg)(),(0,r.iD)("div",uw,(0,ds.zw)(e.noOptionsText),1))],40,aw)},ow.__file="src/components/va-select/VaSelectOptionList/VaSelectOptionList.vue";const lw=Ja(ow);var cw=(0,r.aZ)({name:"VaSelect",components:{VaSelectOptionList:lw,VaIcon:vc,VaDropdown:Kd,VaDropdownContent:Gd,VaInput:mh,VaInputWrapper:Hf},emits:["update:modelValue","update-search","create-new","scroll-bottom",...Hp,...Kf],props:{...pb,...Wp,...Ec,...rw,...Gf,...xf,modelValue:{type:[String,Number,Array,Object],default:""},placement:{type:String,default:"bottom",validator:e=>["top","bottom"].includes(e)},allowCreate:{type:[Boolean,String],default:!1,validator:e=>[!0,!1,"unique"].includes(e)},color:{type:String,default:"primary"},multiple:{type:Boolean,default:!1},searchable:{type:Boolean,default:!1},separator:{type:String,default:", "},width:{type:String,default:"100%"},maxHeight:{type:String,default:"256px"},noOptionsText:{type:String,default:"Items not found"},fixed:{type:Boolean,default:!0},hideSelected:{type:Boolean,default:!1},tabindex:{type:Number,default:0},dropdownIcon:{type:[String,Object],default:()=>({open:"expand_more",close:"expand_less"}),validator:e=>{if("string"==typeof e)return!0;const t="string"==typeof e.open,n="string"==typeof e.close;return t&&n}},outline:{type:Boolean,default:!1},bordered:{type:Boolean,default:!1},label:{type:String,default:""},placeholder:{type:String,default:""},requiredMark:{type:Boolean,default:!1}},setup(e,{emit:t}){const n=(0,o.XI)(),a=(0,o.XI)(),i=(0,o.XI)(),s=Yf(),u=(0,r.Fl)((()=>s.value||N.value)),{getHoverColor:l,getColor:c}=fu(),{getOptionByValue:d,getValue:p,getText:f,getTrackBy:h,getGroupBy:v}=fb(e),{validate:m,computedError:g,computedErrorMessages:y}=Up(e,t,(()=>K()),(()=>G())),b=(0,r.Fl)((()=>c(e.color))),w=(0,r.Fl)((()=>e.readonly?l(b.value):b.value)),x=(0,o.iH)(""),C=(0,r.Fl)((()=>e.searchable||e.allowCreate));(0,r.YP)(x,(e=>{t("update-search",e),B.value=null}));const _=(0,r.Fl)({get(){const t=d(e.modelValue);return e.multiple?t?Array.isArray(t)?t:[t]:[]:Array.isArray(t)&&(Zs("Model value should be a string or a number for a single Select."),t.length)?t[t.length-1]:t},set(e){Array.isArray(e)?t("update:modelValue",e.map(p)):t("update:modelValue",p(e))}}),k=(0,r.Fl)((()=>_.value?"string"==typeof _.value||"number"==typeof _.value?_.value:Array.isArray(_.value)?_.value.map((e=>f(e))).join(e.separator)||e.clearValue:f(_.value):e.clearValue)),{canBeCleared:S,clearIconProps:E,onFocus:I,onBlur:A}=Xf(e,_),F=(0,r.Fl)((()=>e.multiple&&Array.isArray(_.value)?!!_.value.length:S.value)),D=(0,r.Fl)((()=>e.dropdownIcon?"string"==typeof e.dropdownIcon?e.dropdownIcon:N.value?e.dropdownIcon.close:e.dropdownIcon.open:"")),R=(0,r.Fl)((()=>e.options?e.hideSelected?e.options.filter((e=>!T(e))):e.options:[])),T=e=>!!_.value&&(Array.isArray(_.value)?!!_.value.find((t=>O(t,e))):O(_.value,e)),O=(e,t)=>{const n=p(e),r=p(t);return n===r||("string"==typeof n&&"string"==typeof r?n===r:null!==n&&null!==r&&"object"==typeof n&&"object"==typeof r&&h(n)===h(r))},P=n=>{var r;if(null!==B.value)if(C.value&&(x.value=""),e.multiple&&(r=_,Array.isArray(r.value))){const{exceedsMaxSelections:r,addOption:a}=function(e,t,n){return{exceedsMaxSelections:()=>void 0!==t.value&&!isNaN(+t.value)&&e.value.length>=t.value,addOption:t=>{const r=[...e.value,t];n("update:modelValue",r)}}}(_,(0,o.iH)(e.maxSelections),t);if(T(p(n)))_.value=_.value.filter((e=>!O(p(n),p(e))));else{if(r())return;a(p(n))}}else _.value="string"==typeof n||"number"==typeof n?n:{...n},U();else U()},B=(0,o.iH)(null),M=()=>{B.value&&(N.value?P(B.value):j())},N=(0,o.iH)(!1),L=(0,r.Fl)({get:()=>N.value,set:e=>{e?j():W()}}),V=(0,r.Fl)((()=>!(e.multiple||e.searchable||e.allowCreate))),j=()=>{e.disabled||e.readonly||(N.value=!0,Y(),q())},W=()=>{N.value=!1,x.value="",m()},H=()=>{N.value?U():j()},U=()=>{W(),s.value=!0},z=()=>{var e;null===(e=i.value)||void 0===e||e.focus()},$=()=>{var t,r;null===(t=n.value)||void 0===t||t.focus(),!e.modelValue&&(null===(r=n.value)||void 0===r||r.hoverFirstOption())},q=()=>(0,r.Y3)((()=>{C.value?z():$()})),G=()=>{var t;e.disabled||null===(t=a.value)||void 0===t||t.focus()},K=()=>{e.multiple?_.value=Array.isArray(e.clearValue)?e.clearValue:[]:_.value=e.clearValue,x.value="",t("clear")},X=(0,r.Fl)((()=>e.disabled?-1:e.tabindex)),Y=()=>{const e=_.value;if("object"!=typeof e&&Array.isArray(e)&&!e.length)return;const t=Array.isArray(e)?e[e.length-1]:e;B.value=t,(0,r.Y3)((()=>{var e;return null===(e=n.value)||void 0===e?void 0:e.scrollToOption(t)}))};let Z,J="";const Q=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Enter"," "];return{isFocused:u,input:a,optionList:n,searchBar:i,reset:K,focus:G,blur:()=>{var e;L.value&&(L.value=!1),(0,r.Y3)(null===(e=a.value)||void 0===e?void 0:e.blur)},onInputFocus:()=>{s.value=!0,I()},onInputBlur:()=>{L.value||(A(),s.value?s.value=!1:m())},focusOptionList:$,onSelectClick:()=>{e.disabled||e.readonly||H()},focusSearchBar:z,searchInput:x,showSearchInput:C,hoveredOption:B,tabIndexComputed:X,valueComputed:_,valueComputedString:k,showClearIcon:F,toggleIcon:D,computedErrorMessages:y,computedError:g,filteredOptions:R,checkIsOptionSelected:T,closeOnContentClick:V,selectOption:P,selectOrAddOption:()=>{const n=!!e.allowCreate&&""!==x.value;null!==B.value?M():n&&(()=>{var n;const r=null===(n=e.options)||void 0===n?void 0:n.some((e=>f(e)===x.value));"unique"===e.allowCreate&&r||(t("create-new",x.value),x.value="")})()},selectHoveredOption:M,hoverPreviousOption:()=>{var e;null===(e=n.value)||void 0===e||e.hoverPreviousOption()},hoverNextOption:()=>{var e;null===(e=n.value)||void 0===e||e.hoverNextOption()},showDropdownContentComputed:L,showDropdown:j,hideDropdown:W,hideAndFocus:U,toggleDropdown:H,toggleIconColor:w,onHintedSearch:t=>{if(Q.some((e=>e===t.key)))return;const n=1===t.key.length,r="Backspace"===t.key||"Delete"===t.key;if(clearTimeout(Z),r?J=J?J.slice(0,-1):"":n&&(J+=t.key),C.value)x.value=J;else{if(J){const t=e.options.find((e=>f(e).toLowerCase().startsWith(J.toLowerCase())));t&&(B.value=t)}Z=setTimeout((()=>{J=""}),1e3)}},getText:f,getTrackBy:h,getGroupBy:v,onScrollBottom:()=>{t("scroll-bottom")},clearIconProps:E}}});const dw={class:"va-select-dropdown__options-wrapper"};cw.render=function(e,t,n,o,a,i){const s=(0,r.up)("va-icon"),u=(0,r.up)("va-input-wrapper"),l=(0,r.up)("va-input"),c=(0,r.up)("va-select-option-list"),d=(0,r.up)("va-dropdown-content"),p=(0,r.up)("va-dropdown");return(0,r.wg)(),(0,r.j4)(p,{ref:"dropdown",class:"va-select__dropdown va-select-dropdown",trigger:"none",anchorSelector:".va-input-wrapper__field",placement:e.$props.placement,disabled:e.$props.disabled,"max-height":e.$props.maxHeight,fixed:e.$props.fixed,"close-on-content-click":e.closeOnContentClick,stateful:!1,offset:[1,0],"keep-anchor-width":"",modelValue:e.showDropdownContentComputed,"onUpdate:modelValue":t[8]||(t[8]=t=>e.showDropdownContentComputed=t),onKeydown:[(0,Ks.D2)((0,Ks.iM)(e.showDropdown,["stop","prevent"]),["up"]),(0,Ks.D2)((0,Ks.iM)(e.showDropdown,["stop","prevent"]),["down"]),(0,Ks.D2)((0,Ks.iM)(e.showDropdown,["stop","prevent"]),["space"]),(0,Ks.D2)((0,Ks.iM)(e.showDropdown,["stop","prevent"]),["enter"])],onClick:(0,Ks.iM)(e.onSelectClick,["prevent"])},{anchor:(0,r.w5)((()=>[(0,r.Wm)(u,{ref:"input",class:"va-select","aria-label":"selected option","model-value":e.valueComputedString,success:e.$props.success,error:e.computedError,color:e.$props.color,label:e.$props.label,placeholder:e.$props.placeholder,loading:e.$props.loading,disabled:e.$props.disabled,outline:e.$props.outline,bordered:e.$props.bordered,"required-mark":e.$props.requiredMark,messages:e.$props.messages,"error-messages":e.computedErrorMessages,focused:e.isFocused,tabindex:e.tabIndexComputed,onFocus:t[0]||(t[0]=t=>e.onInputFocus()),onBlur:t[1]||(t[1]=t=>e.onInputBlur())},(0,r.Nv)({icon:(0,r.w5)((()=>[e.showClearIcon?((0,r.wg)(),(0,r.j4)(s,(0,r.dG)({key:0,role:"button","aria-hidden":"false","aria-label":"reset",class:"va-select__icons__reset",tabindex:"0"},e.clearIconProps,{onClick:(0,Ks.iM)(e.reset,["stop"]),onKeydown:[(0,Ks.D2)((0,Ks.iM)(e.reset,["stop"]),["enter"]),(0,Ks.D2)((0,Ks.iM)(e.reset,["stop"]),["space"])]}),null,16,["onClick","onKeydown"])):(0,r.kq)("v-if",!0)])),appendInner:(0,r.w5)((()=>[e.$slots.appendInner?(0,r.WI)(e.$slots,"appendInner",{key:0}):(0,r.kq)("v-if",!0),(0,r.Wm)(s,{color:e.toggleIconColor,name:e.toggleIcon},null,8,["color","name"])])),default:(0,r.w5)((()=>[(0,r.WI)(e.$slots,"content",(0,ds.vs)((0,r.F4)({valueString:e.valueComputedString,value:e.valueComputed,tabindex:e.tabIndexComputed})),(()=>[(0,r.Uk)((0,ds.zw)(e.valueComputedString),1)]))])),_:2},[e.$slots.prepend?{name:"prepend",fn:(0,r.w5)((()=>[(0,r.WI)(e.$slots,"prepend")]))}:void 0,e.$slots.append?{name:"append",fn:(0,r.w5)((()=>[(0,r.WI)(e.$slots,"append")]))}:void 0,e.$slots.prependInner?{name:"prependInner",fn:(0,r.w5)((()=>[(0,r.WI)(e.$slots,"prependInner")]))}:void 0]),1032,["model-value","success","error","color","label","placeholder","loading","disabled","outline","bordered","required-mark","messages","error-messages","focused","tabindex"])])),default:(0,r.w5)((()=>[(0,r.Wm)(d,{class:"va-select-dropdown__content",style:(0,ds.j5)({width:e.$props.width}),onKeyup:t[6]||(t[6]=(0,Ks.D2)((0,Ks.iM)((()=>{}),["stop"]),["enter"])),onKeydown:[t[7]||(t[7]=(0,Ks.D2)((0,Ks.iM)((()=>{}),["stop","prevent"]),["tab"])),(0,Ks.D2)((0,Ks.iM)(e.hideAndFocus,["prevent"]),["esc"])]},{default:(0,r.w5)((()=>[e.showSearchInput?((0,r.wg)(),(0,r.j4)(l,{key:0,ref:"searchBar",class:"va-select__input",placeholder:"Search","aria-label":"options filter",tabindex:e.tabIndexComputed,bordered:!0,modelValue:e.searchInput,"onUpdate:modelValue":t[2]||(t[2]=t=>e.searchInput=t),onKeydown:[(0,Ks.D2)((0,Ks.iM)(e.hoverPreviousOption,["stop","prevent"]),["up"]),(0,Ks.D2)((0,Ks.iM)(e.hoverPreviousOption,["stop","prevent"]),["left"]),(0,Ks.D2)((0,Ks.iM)(e.hoverNextOption,["stop","prevent"]),["down"]),(0,Ks.D2)((0,Ks.iM)(e.hoverNextOption,["stop","prevent"]),["right"]),(0,Ks.D2)((0,Ks.iM)(e.selectOrAddOption,["prevent"]),["enter"])],onFocus:t[3]||(t[3]=t=>e.hoveredOption=null)},null,8,["tabindex","modelValue","onKeydown"])):(0,r.kq)("v-if",!0),(0,r._)("div",dw,[(0,r.Wm)(c,{ref:"optionList",hoveredOption:e.hoveredOption,"onUpdate:hoveredOption":t[4]||(t[4]=t=>e.hoveredOption=t),style:(0,ds.j5)({maxHeight:e.$props.maxHeight}),options:e.filteredOptions,"selected-value":e.valueComputed,"get-selected-state":e.checkIsOptionSelected,"get-text":e.getText,"get-track-by":e.getTrackBy,"get-group-by":e.getGroupBy,search:e.searchInput,"no-options-text":e.$props.noOptionsText,color:e.$props.color,tabindex:e.tabIndexComputed,onSelectOption:e.selectOption,onNoPreviousOptionToHover:e.focusSearchBar,onKeydown:[(0,Ks.D2)((0,Ks.iM)(e.selectHoveredOption,["stop","prevent"]),["enter"]),(0,Ks.D2)((0,Ks.iM)(e.selectHoveredOption,["stop","prevent"]),["space"]),t[5]||(t[5]=(0,Ks.D2)((0,Ks.iM)((t=>e.searchBar&&e.searchBar.focus()),["stop","prevent"]),["tab"])),e.onHintedSearch],onScrollBottom:e.onScrollBottom},null,8,["hoveredOption","style","options","selected-value","get-selected-state","get-text","get-track-by","get-group-by","search","no-options-text","color","tabindex","onSelectOption","onNoPreviousOptionToHover","onKeydown","onScrollBottom"])])])),_:1},8,["style","onKeydown"])])),_:3},8,["placement","disabled","max-height","fixed","close-on-content-click","modelValue","onKeydown","onClick"])},cw.__file="src/components/va-select/VaSelect.vue";const pw=Ja(cw),fw=Symbol("VaSidebar");var hw=(0,r.aZ)({name:"VaSidebar",props:{color:{type:String,default:"background"},textColor:{type:String},gradient:{type:Boolean,default:!1},minimized:{type:Boolean,default:!1},hoverable:{type:Boolean,default:!1},position:{type:String,default:"left",validator:e=>["top","bottom","left","right"].includes(e)},width:{type:String,default:"16rem"},minimizedWidth:{type:String,default:"2.5rem"},modelValue:{type:Boolean,default:!0}},setup(e){const{getColor:t}=fu();(()=>{const{props:e}=(0,r.FN)();(0,r.JJ)(fw,{color:(0,o.Vh)(e,"color")})})();const n=(0,o.iH)(!1),a=(0,r.Fl)((()=>e.minimized||e.hoverable&&!n.value)),i=(0,r.Fl)((()=>e.modelValue?a.value?e.minimizedWidth:e.width:0)),{textColorComputed:s}=hu(),u=(0,r.Fl)((()=>{const n=t(e.color),r=e.gradient?du(n):n;return{color:s.value,background:r,width:i.value}}));return{computedClass:(0,r.Fl)((()=>({"va-sidebar--minimized":a.value,"va-sidebar--right":"right"===e.position}))),computedStyle:u,updateHoverState:t=>{n.value=e.hoverable&&t}}}});const vw={class:"va-sidebar__menu"};hw.render=function(e,t,n,o,a,i){return(0,r.wg)(),(0,r.iD)("aside",{class:(0,ds.C_)(["va-sidebar",e.computedClass]),style:(0,ds.j5)(e.computedStyle),onMouseenter:t[0]||(t[0]=t=>e.updateHoverState(!0)),onMouseleave:t[1]||(t[1]=t=>e.updateHoverState(!1))},[(0,r._)("div",vw,[(0,r.WI)(e.$slots,"default")])],38)},hw.__file="src/components/va-sidebar/VaSidebar.vue";var mw=(0,r.aZ)({name:"VaSidebarItem",props:{...Lc,active:{type:Boolean,default:!1},textColor:{type:String,default:void 0},activeColor:{type:String,default:"primary"},hoverColor:{type:String,default:void 0},borderColor:{type:String,default:void 0}},setup(e){const t=(0,o.XI)(),{isHovered:n}=rf(t),{getColor:a,getHoverColor:i,getFocusColor:s}=fu(),{hasKeyboardFocus:u,keyboardFocusListeners:l}=Tp(),{sidebarColor:c}=(()=>{const{color:e}=(0,r.f3)(fw,{color:(0,o.iH)("white")});return{sidebarColor:e}})(),d=(0,r.Fl)((()=>n.value?i(a(e.hoverColor||e.activeColor)):e.active?a(e.activeColor):u.value?s(a(e.hoverColor||e.activeColor)):a(c.value))),{textColorComputed:p}=hu(d),f=(0,r.Fl)((()=>{const t={};return t.color=p.value,(n.value||e.active||u.value)&&(t.backgroundColor=d.value),e.active&&(t.borderColor=a(e.borderColor||e.activeColor)),t})),{tagComputed:h,hrefComputed:v}=Vc(e);return{anchor:t,computedStyle:f,keyboardFocusListeners:l,tagComputed:h,hrefComputed:v,isHovered:n}}});mw.render=function(e,t,n,o,a,i){return(0,r.wg)(),(0,r.j4)((0,r.LL)(e.tagComputed),(0,r.dG)({ref:"anchor",class:["va-sidebar__item va-sidebar-item",{"va-sidebar-item--active":e.$props.active}],tabindex:"0",style:e.computedStyle,href:e.hrefComputed,to:e.$props.to},(0,r.mx)(e.keyboardFocusListeners)),{default:(0,r.w5)((()=>[(0,r.WI)(e.$slots,"default")])),_:3},16,["class","style","href","to"])},mw.__file="src/components/va-sidebar/VaSidebarItem/VaSidebarItem.vue";var gw=(0,r.aZ)({name:"VaSidebarItemContent"});const yw={class:"va-sidebar__item__content va-sidebar-item-content"};gw.render=function(e,t,n,o,a,i){return(0,r.wg)(),(0,r.iD)("div",yw,[(0,r.WI)(e.$slots,"default")])},gw.__file="src/components/va-sidebar/VaSidebarItem/VaSidebarItemContent.vue";var bw=(0,r.aZ)({name:"VaSidebarItemTitle"});const ww={class:"va-sidebar__title va-sidebar-item-title"};bw.render=function(e,t,n,o,a,i){return(0,r.wg)(),(0,r.iD)("div",ww,[(0,r.WI)(e.$slots,"default")])},bw.__file="src/components/va-sidebar/VaSidebarItem/VaSidebarItemTitle.vue";const xw=Ja(gw),Cw=Ja(bw),_w=Ja(mw),kw=Ja(hw),Sw=(e,t,n,r,o)=>{(Array.isArray(e)&&!o||!Array.isArray(e)&&o)&&Zs(`The type "${Array.isArray(e)?"array":typeof e}" of prop "model-value" does not match prop "range = ${o}".`),r<n&&Zs("The maximum value can not be less than the minimum value."),n>r&&Zs("The minimum value can not be greater than the maximum value."),(r-n)%t!=0&&Zs("Step is illegal. Slider is nondivisible.");const a=e=>{e<n?Zs(`The value of the slider is ${e}, the minimum value is ${n}, the value of this slider can not be less than the minimum value`):e>r&&Zs(`The value of the slider is ${e}, the maximum value is ${r}, the value of this slider can not be greater than the maximum value`)};return Array.isArray(e)?e.map(a):a(e),!0};var Ew=(0,r.aZ)({name:"VaSlider",components:{VaIcon:vc},emits:["drag-start","drag-end","change","update:modelValue"],props:{range:{type:Boolean,default:!1},modelValue:{type:[Number,Array],default:0},trackLabel:{type:[Function,String]},color:{type:String,default:"primary"},trackColor:{type:String,default:""},labelColor:{type:String,default:""},trackLabelVisible:{type:Boolean,default:!1},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},label:{type:String,default:""},invertLabel:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},pins:{type:Boolean,default:!1},iconPrepend:{type:String,default:""},iconAppend:{type:String,default:""},vertical:{type:Boolean,default:!1},showTrack:{type:Boolean,default:!0}},setup(e,{emit:t}){const{getColor:n,getHoverColor:a}=fu(),i=(0,o.XI)(),s=(0,o.XI)(),{setItemRefByIndex:u,itemRefs:l}=db(),c=(0,o.iH)(!1),d=(0,o.iH)(!1),p=(0,o.iH)(0),f=(0,o.iH)(0),h=(0,o.iH)(e.modelValue),v=(0,o.iH)(0),m=(0,o.iH)(!1),g=(0,r.Fl)((()=>e.vertical?[1,0]:[0,1])),y=(0,r.Fl)((()=>e.vertical?"bottom":"left")),b=(0,r.Fl)((()=>e.vertical?"height":"width")),w=(0,r.Fl)((()=>Array.isArray(A.value)&&A.value[1]-e.step<A.value[0])),x=(0,r.Fl)((()=>Array.isArray(A.value)&&A.value[0]+e.step>A.value[1])),C=jd("va-slider",(()=>({...Sl(e,["disabled","readonly","vertical"]),active:c.value,horizontal:!e.vertical,grabbing:m.value}))),_=jd("va-slider__handler",(()=>({onFocus:!e.range&&(d.value||c.value),inactive:!c.value}))),k=(0,r.Fl)((()=>({color:e.labelColor?n(e.labelColor):n(e.color)}))),S=(0,r.Fl)((()=>({backgroundColor:e.trackColor?n(e.trackColor):a(n(e.color))}))),E=(0,r.Fl)((()=>{const t=q(e.modelValue);if(Array.isArray(t)){const r=(t[0]-e.min)/(e.max-e.min)*100,o=(t[1]-e.min)/(e.max-e.min)*100;return{[y.value]:`${r}%`,[b.value]:o-r+"%",backgroundColor:n(e.color),visibility:e.showTrack?"visible":"hidden"}}{const r=(t-e.min)/(e.max-e.min)*100;return{[b.value]:`${r}%`,backgroundColor:n(e.color),visibility:e.showTrack?"visible":"hidden"}}})),I=(0,r.Fl)((()=>{const t=q(e.modelValue);if(Array.isArray(t)){const r=(t[0]-e.min)/(e.max-e.min)*100,o=(t[1]-e.min)/(e.max-e.min)*100;return[{[y.value]:`${r}%`,backgroundColor:B(0)?n(e.color):"#ffffff",borderColor:n(e.color)},{[y.value]:`${o}%`,backgroundColor:B(1)?n(e.color):"#ffffff",borderColor:n(e.color)}]}{const r=(t-e.min)/(e.max-e.min)*100;return{[y.value]:`${r}%`,backgroundColor:B(0)?n(e.color):"#ffffff",borderColor:n(e.color)}}})),A=(0,r.Fl)({get:()=>e.modelValue,set:n=>{e.range||(n=q(n)),d.value||t("change",n),t("update:modelValue",n)}}),F=(0,r.Fl)((()=>{const t=(e.max-e.min)/e.step;return f.value/t})),D=(0,r.Fl)((()=>{const t=`${e.step}`.split(".")[1];return t?Math.pow(10,t.length):1})),R=(0,r.Fl)((()=>(e.max-e.min)/e.step-1)),T=(0,r.Fl)((()=>Array.isArray(e.modelValue)?[(e.modelValue[0]-e.min)/e.step*F.value,(e.modelValue[1]-e.min)/e.step*F.value]:(e.modelValue-e.min)/e.step*F.value)),O=(0,r.Fl)((()=>[0,f.value])),P=(0,r.Fl)((()=>[e.min,e.max])),B=t=>!(!c.value&&!d.value||e.disabled||e.readonly)&&(e.range?v.value===t:0===v.value),M=t=>{m.value&&d.value&&!e.disabled&&!e.readonly&&(t.preventDefault(),$(W("touches"in t?t.touches[0]:t)))},N=()=>{if(!e.disabled&&!e.readonly){if(!d.value)return!1;t("drag-end"),t("change",e.modelValue),d.value=!1,m.value=!1}},L=t=>{var n,r;if(![l.value[0],l.value[1],s.value].includes(document.activeElement))return;if(e.disabled||e.readonly)return;const o=(t,n,r)=>{if(t&&Array.isArray(A.value)){if(!e.pins)return A.value.splice(r,1,A.value[r]+(n?e.step:-e.step));const t=(e.max-e.min)/(R.value+1);let o=(A.value[r]/t|0)*t;A.value[r]!==o?(o+=n?t:0,A.value.splice(r,1,o)):A.value.splice(r,1,A.value[r]+(n?e.step:-e.step))}else{if(!e.pins&&!Array.isArray(A.value))return void(A.value+=n?e.step:-e.step);const t=(e.max-e.min)/(R.value+1);let r=(Array.isArray(A.value)?0:A.value/t|0)*t;A.value!==r?(r+=n?t:0,A.value=r):A.value+=n?e.step:-e.step}};["ArrowLeft","ArrowUp","ArrowRight","ArrowDown"].includes(t.key)&&t.preventDefault();const a=e=>e===document.activeElement;if(e.range&&Array.isArray(A.value)){const i=t=>e.vertical&&a(l.value[0])&&"ArrowUp"===t.key,s=t=>e.vertical&&a(l.value[0])&&"ArrowDown"===t.key,u=t=>e.vertical&&a(l.value[1])&&"ArrowUp"===t.key,c=t=>e.vertical&&a(l.value[1])&&"ArrowDown"===t.key,d=t=>!e.vertical&&a(l.value[0])&&"ArrowLeft"===t.key,p=t=>!e.vertical&&a(l.value[0])&&"ArrowRight"===t.key,f=t=>!e.vertical&&a(l.value[1])&&"ArrowLeft"===t.key,h=t=>!e.vertical&&a(l.value[1])&&"ArrowRight"===t.key;switch(!0){case(c(t)||f(t))&&w.value&&A.value[0]!==e.min:null===(n=l.value[0])||void 0===n||n.focus(),o(!0,0,0);break;case(i(t)||p(t))&&x.value&&A.value[1]!==e.max:null===(r=l.value[1])||void 0===r||r.focus(),o(!0,1,1);break;case(s(t)||d(t))&&A.value[0]!==e.min:o(!0,0,0);break;case(u(t)||h(t))&&A.value[1]!==e.max:o(!0,1,1);break;case(c(t)||f(t))&&A.value[1]!==e.min:o(!0,0,1);break;case(i(t)||p(t))&&A.value[0]!==e.max:o(!0,1,0)}}else e.vertical?("ArrowDown"===t.key&&o(!1,0,0),"ArrowUp"===t.key&&o(!1,1,0)):("ArrowLeft"===t.key&&o(!1,0,0),"ArrowRight"===t.key&&o(!1,1,0))},V=t=>Array.isArray(A.value)?t*e.step>A.value[0]&&t*e.step<A.value[1]:t*e.step<A.value,j=(0,r.Fl)((()=>e.step/(e.max-e.min)*100)),W=t=>(H(),e.vertical?p.value-t.clientY:t.clientX-p.value),H=()=>{i.value&&(f.value=i.value[e.vertical?"offsetHeight":"offsetWidth"],p.value=i.value.getBoundingClientRect()[y.value])},U=t=>(e.step*D.value*t+e.min*D.value)/D.value,z=t=>{const n=v.value;if(Array.isArray(A.value)&&Array.isArray(h.value)&&Array.isArray(e.modelValue))G(h.value[n],t)&&(h.value.splice(n,1,t),0===n?(A.value=[h.value.splice(n,1,t)[0],e.modelValue[1]],h.value=[...A.value]):(A.value=[e.modelValue[0],h.value.splice(n,1,t)[0]],h.value=[...A.value]));else{if(t<e.min||t>e.max)return!1;G(h.value,t)&&(h.value=t,A.value=t)}},$=t=>{const n=O.value,r=P.value,o=Array.isArray(e.modelValue)?l.value[v.value]:s.value;if(null==o||o.focus(),t>=n[0]&&t<=n[1])if(v.value){Array.isArray(T.value)&&Array.isArray(A.value)&&t<=T.value[0]&&(A.value[1]=A.value[0],v.value=0);const e=U(Math.round(t/F.value));z(e)}else{Array.isArray(T.value)&&Array.isArray(A.value)&&t>=T.value[1]&&(A.value[0]=A.value[1],v.value=1);const e=U(Math.round(t/F.value));z(e)}else t<n[0]?z(r[0]):z(r[1])},q=t=>{const n=t=>t<e.min?e.min:t>e.max?e.max:t;if(Array.isArray(t)){if(t[0]>=t[1]&&0===v.value){const e=n(t[1]);return[e,e]}if(t[0]>=t[1]&&1===v.value){const e=n(t[0]);return[e,e]}return t.map((e=>n(e)))}return n(t)},G=(e,t)=>JSON.stringify(e)!==JSON.stringify(t),K=(0,r.Fl)((()=>`aria-label-id-${ru()}`)),X=(0,r.Fl)((()=>({role:"slider",ariaValuemin:e.min,ariaValuemax:e.max,ariaLabelledby:K.value,ariaOrientation:e.vertical?"vertical":"horizontal",ariaDisabled:e.disabled,ariaReadonly:e.readonly,ariaValuenow:Array.isArray(e.modelValue)?void 0:e.modelValue})));return(0,r.bv)((()=>{Sw(e.modelValue,e.step,e.min,e.max,e.range)&&(H(),document.addEventListener("mousemove",M),document.addEventListener("touchmove",M,{passive:!1}),document.addEventListener("mouseup",N),document.addEventListener("mouseleave",N),document.addEventListener("touchcancel",N),document.addEventListener("touchend",N),document.addEventListener("keydown",L))})),(0,r.Jd)((()=>{document.removeEventListener("mousemove",M),document.removeEventListener("touchmove",M),document.removeEventListener("mouseup",N),document.removeEventListener("mouseleave",N),document.removeEventListener("touchcancel",N),document.removeEventListener("touchend",N),document.removeEventListener("keydown",L)})),(0,r.YP)([A,()=>e.step,()=>e.min,()=>e.max,()=>e.range],(([e,t,n,r,o])=>{Sw(e,t,n,r,o)})),(0,r.YP)(m,(e=>{document.documentElement.style.cursor=e?"grabbing":""})),{getColor:n,dot:s,dots:l,setItemRefByIndex:u,orders:g,sliderContainer:i,val:A,getValueByOrder:t=>e.range&&void 0!==t?A.value[t]:A.value,sliderClass:C,dotClass:_,labelStyles:k,processedStyles:E,getPinStyles:t=>({backgroundColor:V(t)?n(e.color):a(n(e.color)),[y.value]:t*j.value+"%",transition:m.value?"none":"var(--va-slider-pin-transition)"}),dottedStyles:I,getDottedStyles:t=>e.range&&void 0!==t?I.value[t]:I.value,clickOnContainer:n=>{if(e.disabled||e.readonly)return;const r=W("touches"in n?n.touches[0]:n);Array.isArray(T.value)&&(v.value=r>(T.value[1]-T.value[0])/2+T.value[0]?1:0),m.value=!0,$(r),((n,r=v.value)=>{var o,a;if(n.preventDefault(),!r)if(e.range){if(Array.isArray(T.value)){const e="touches"in n?n.touches[0]:n;r=W(e)>(T.value[1]-T.value[0])/2+T.value[0]?1:0}}else r=0;Array.isArray(e.modelValue)&&(v.value=r),Array.isArray(e.modelValue)?null===(o=l.value[r])||void 0===o||o.focus():null===(a=s.value)||void 0===a||a.focus(),d.value=!0,t("drag-start")})(n,v.value)},hasMouseDown:m,trackStyles:S,pinsCol:R,checkActivePin:V,isFocused:c,isActiveDot:B,getTrackLabel:(t,n)=>e.trackLabel?"function"==typeof e.trackLabel?e.trackLabel(t,n):e.trackLabel:t,currentSliderDotIndex:v,ariaLabelIdComputed:K,ariaAttributesComputed:X}}});const Iw={key:0,class:"va-slider__input-wrapper","aria-hidden":"true"},Aw=["id"],Fw={key:2,class:"va-input__label","aria-hidden":"true"},Dw=["tabindex","onFocus"],Rw=["tabindex"],Tw={key:3,class:"va-input__label--inverse","aria-hidden":"true"},Ow={key:5,class:"va-slider__input-wrapper"};Ew.render=function(e,t,n,o,a,i){const s=(0,r.up)("va-icon");return(0,r.wg)(),(0,r.iD)("div",(0,r.dG)({class:["va-slider",e.sliderClass]},e.ariaAttributesComputed),[(e.vertical?e.$slots.append:e.$slots.prepend)?((0,r.wg)(),(0,r.iD)("div",Iw,[(0,r.WI)(e.$slots,e.vertical?"append":"prepend")])):(0,r.kq)("v-if",!0),!e.$slots.label&&!e.label||e.invertLabel?(0,r.kq)("v-if",!0):((0,r.wg)(),(0,r.iD)("span",{key:1,class:"va-input__label",id:e.ariaLabelIdComputed,style:(0,ds.j5)(e.labelStyles)},[(0,r.WI)(e.$slots,"label",{},(()=>[(0,r.Uk)((0,ds.zw)(e.label),1)]))],12,Aw)),(e.vertical?e.iconAppend:e.iconPrepend)?((0,r.wg)(),(0,r.iD)("span",Fw,[(0,r.Wm)(s,{name:e.vertical?e.iconAppend:e.iconPrepend,color:e.getColor(e.$props.color),size:16},null,8,["name","color"])])):(0,r.kq)("v-if",!0),(0,r._)("div",{ref:"sliderContainer",class:"va-slider__container",onMousedown:t[3]||(t[3]=(...t)=>e.clickOnContainer&&e.clickOnContainer(...t)),onMouseup:t[4]||(t[4]=t=>e.hasMouseDown=!1),onTouchstart:t[5]||(t[5]=(...t)=>e.clickOnContainer&&e.clickOnContainer(...t))},[(0,r._)("div",{class:"va-slider__track","aria-hidden":"true",style:(0,ds.j5)(e.trackStyles)},null,4),e.pins?((0,r.wg)(!0),(0,r.iD)(r.HY,{key:0},(0,r.Ko)(e.pinsCol,((t,n)=>((0,r.wg)(),(0,r.iD)("div",{key:n,class:(0,ds.C_)(["va-slider__mark",{"va-slider__mark--active":e.checkActivePin(t)}]),style:(0,ds.j5)(e.getPinStyles(t))},null,6)))),128)):(0,r.kq)("v-if",!0),e.$props.range?((0,r.wg)(),(0,r.iD)(r.HY,{key:1},[(0,r._)("div",{ref:"process",class:(0,ds.C_)(["va-slider__track va-slider__track--selected",{"va-slider__track--active":e.isFocused}]),"aria-hidden":"true",style:(0,ds.j5)(e.processedStyles)},null,6),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.orders,(n=>((0,r.wg)(),(0,r.iD)("div",{key:"dot"+n,ref_for:!0,ref:e.setItemRefByIndex(n),class:(0,ds.C_)(["va-slider__handler",e.dotClass]),style:(0,ds.j5)(e.getDottedStyles(n)),tabindex:e.disabled||e.readonly?void 0:0,onFocus:t=>(e.isFocused=!0,e.currentSliderDotIndex=n),onBlur:t[0]||(t[0]=t=>e.isFocused=!1)},[e.isActiveDot(n)?((0,r.wg)(),(0,r.iD)("div",{key:0,style:(0,ds.j5)({backgroundColor:e.getColor(e.$props.color)}),class:"va-slider__handler__dot--focus"},null,4)):(0,r.kq)("v-if",!0),e.trackLabelVisible?((0,r.wg)(),(0,r.iD)("div",{key:1,style:(0,ds.j5)(e.labelStyles),class:"va-slider__handler__dot--value"},[(0,r.WI)(e.$slots,"trackLabel",(0,ds.vs)((0,r.F4)({value:e.getValueByOrder(n),order:n})),(()=>[(0,r.Uk)((0,ds.zw)(e.getTrackLabel(e.getValueByOrder(n),n)),1)]))],4)):(0,r.kq)("v-if",!0)],46,Dw)))),128))],64)):((0,r.wg)(),(0,r.iD)(r.HY,{key:2},[(0,r._)("div",{ref:"process","aria-hidden":"true",class:(0,ds.C_)(["va-slider__track va-slider__track--selected",{"va-slider__track--active":e.isFocused}]),style:(0,ds.j5)(e.processedStyles)},null,6),(0,r._)("div",{ref:"dot",class:(0,ds.C_)(["va-slider__handler",e.dotClass]),style:(0,ds.j5)(e.dottedStyles),tabindex:e.$props.disabled||e.$props.readonly?void 0:0,onFocus:t[1]||(t[1]=t=>e.isFocused=!0),onBlur:t[2]||(t[2]=t=>e.isFocused=!1)},[e.isActiveDot(0)?((0,r.wg)(),(0,r.iD)("div",{key:0,class:"va-slider__handler__dot--focus",style:(0,ds.j5)({backgroundColor:e.getColor(e.$props.color)})},null,4)):(0,r.kq)("v-if",!0),e.trackLabelVisible?((0,r.wg)(),(0,r.iD)("div",{key:1,class:"va-slider__handler__dot--value",style:(0,ds.j5)(e.labelStyles)},[(0,r.WI)(e.$slots,"trackLabel",(0,ds.vs)((0,r.F4)({value:e.getValueByOrder()})),(()=>[(0,r.Uk)((0,ds.zw)(e.getTrackLabel(e.getValueByOrder())),1)]))],4)):(0,r.kq)("v-if",!0)],46,Rw)],64))],544),(e.vertical?e.iconPrepend:e.iconAppend)?((0,r.wg)(),(0,r.iD)("span",Tw,[(0,r.Wm)(s,{name:e.vertical?e.iconPrepend:e.iconAppend,color:e.getColor(e.$props.color),size:16},null,8,["name","color"])])):(0,r.kq)("v-if",!0),(e.$slots.label||e.label)&&e.invertLabel?((0,r.wg)(),(0,r.iD)("span",{key:4,class:"va-input__label va-input__label--inverse",style:(0,ds.j5)(e.labelStyles)},[(0,r.WI)(e.$slots,"label",{},(()=>[(0,r.Uk)((0,ds.zw)(e.label),1)]))],4)):(0,r.kq)("v-if",!0),(e.vertical?e.$slots.prepend:e.$slots.append)?((0,r.wg)(),(0,r.iD)("div",Ow,[(0,r.WI)(e.$slots,e.vertical?"prepend":"append")])):(0,r.kq)("v-if",!0)],16)},Ew.__file="src/components/va-slider/VaSlider.vue";const Pw=Ja(Ew),Bw=Symbol("TabsView"),Mw=(Symbol("Tab"),e=>(null==e?void 0:e.clientWidth)||0);var Nw=(0,r.aZ)({name:"VaTabs",components:{VaButton:Wc,VaConfig:u},emits:["update:modelValue","click:next","click:prev"],props:{...ns,modelValue:{type:[String,Number],default:null},left:{type:Boolean,default:!0},right:{type:Boolean,default:!1},center:{type:Boolean,default:!1},grow:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},hideSlider:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1},color:{type:String,default:"primary"},prevIcon:{type:String,default:"chevron_left"},nextIcon:{type:String,default:"chevron_right"}},setup:(e,{emit:t})=>{const n=(0,o.XI)(),a=(0,o.XI)(),i=(0,o.XI)(),s=(0,o.iH)([]),u=(0,o.iH)(null),l=(0,o.iH)(null),c=(0,o.iH)(0),d=(0,o.iH)(0),p=(0,o.iH)(!1),f=(0,o.iH)(0),h=(0,o.iH)(0),v=(0,o.iH)(!1),{valueComputed:m}=os(e,t),g=(0,o.qj)({VaTab:{color:e.color}}),y=(0,r.Fl)((()=>{const{left:t,right:n,center:r,grow:o,disabled:a}=e;return{"va-tabs__container--left":t&&!n&&!r&&!o,"va-tabs__container--right":n,"va-tabs__container--center":r,"va-tabs__container--grow":o,"va-tabs__container--disabled":a}})),b=(0,r.Fl)((()=>({"va-tabs--vertical":e.vertical}))),{getColor:w}=fu(),x=(0,r.Fl)((()=>w(e.color))),C=(0,r.Fl)((()=>e.hideSlider?{display:"none"}:{backgroundColor:x.value,height:e.vertical?`${u.value}px`:"",width:e.vertical?"":`${l.value}px`,transform:`translateY(-${d.value}px) translateX(${c.value}px)`,transition:v.value?"var(--va-tabs-slider-wrapper-transition)":""})),_=(0,r.Fl)((()=>e.vertical?{transform:"translateX(0px)"}:{transform:`translateX(${h.value-f.value}px)`,transition:v.value?"var(--va-tabs-slider-transition)":""})),k=(0,r.Fl)((()=>0===f.value)),S=(0,r.Fl)((()=>{const e=s.value[s.value.length-1],t=(0,o.SU)(e.leftSidePosition),n=(0,o.SU)(e.rightSidePosition),r=Mw(a.value);return n<=f.value+r||t<=f.value})),E=()=>{l.value=0,u.value=0},I=e=>{const t=Mw(a.value),n=Mw(i.value),r=(0,o.SU)(e.leftSidePosition),s=(0,o.SU)(e.rightSidePosition);p.value&&r+t<=n?f.value=r:p.value&&s>=t?f.value=s-t:f.value=0},A=()=>{if(h.value=0,!p.value)return;const t=Mw(a.value),n=Mw(i.value);e.right?h.value=n-t:e.center&&(h.value=Math.floor((n-t)/2))},F=()=>{E(),s.value.forEach((e=>{var t;e.updateSidePositions();const n=((null===(t=e.name)||void 0===t?void 0:t.value)||e.id)===m.value;e.isActive=e.isActiveRouterLink||n,e.isActive&&(I(e),R(e))}));const e=Mw(a.value),t=Mw(i.value);f.value+e>t&&s.value&&I(s.value[0]),A()},D=()=>{const e=Mw(i.value),t=Mw(n.value);p.value=!!(i.value&&n.value&&e>t)},R=t=>{var n;const r=(0,o.SU)(t.tabElement),i=(null==r?void 0:r.offsetTop)||0,s=(null==r?void 0:r.offsetLeft)||0,p=(null==r?void 0:r.clientHeight)||0,f=(null==r?void 0:r.clientWidth)||0;if(e.vertical){const e=((null===(n=a.value)||void 0===n?void 0:n.clientHeight)||0)-i-p;d.value=Math.max(e,0),u.value=p,c.value=0,l.value=0}else c.value=s,l.value=f,d.value=0,u.value=0},T=()=>{v.value||requestAnimationFrame((()=>{v.value=!0}))},O=()=>{const e=p.value;D(),e===p.value?(F(),T()):requestAnimationFrame((()=>{F(),T()}))},P=t=>{var n;t&&(m.value=(null===(n=t.name)||void 0===n?void 0:n.value)||t.id,e.stateful&&F())};return(0,r.JJ)(Bw,{parentDisabled:e.disabled,selectTab:P,moveToTab:I,registerTab:e=>{var t;const n=s.value.push(e)-1;e.id=(null===(t=e.name)||void 0===t?void 0:t.value)||n},unregisterTab:e=>{s.value=s.value.filter((t=>t.id!==e.id)),s.value.forEach(((e,t)=>{var n;e.id=(null===(n=e.name)||void 0===n?void 0:n.value)||t}))}}),(0,r.YP)((()=>e.modelValue),F),((e,t)=>{const n=(0,o.iH)(),a=e=>{e.forEach((e=>{var t;const r=(0,o.SU)(e);r&&(null===(t=n.value)||void 0===t||t.observe(r))}))};(0,r.YP)(e,(e=>{var t;null===(t=n.value)||void 0===t||t.disconnect(),a(e)})),(0,r.bv)((()=>{n.value=new ResizeObserver(t),a(e)})),(0,r.Jd)((()=>{var e;return null===(e=n.value)||void 0===e?void 0:e.disconnect()}))})([n,i],O),{wrapper:n,container:a,tabs:i,tabsList:s,sliderHeight:u,sliderWidth:l,sliderOffsetX:c,sliderOffsetY:d,showPagination:p,tabsContentOffset:f,startingXPoint:h,animationIncluded:v,colorComputed:x,tabConfig:g,computedClass:y,computedTabsClass:b,tabSelected:m,sliderStyles:C,paginationControlledStyles:_,disablePaginationLeft:k,disablePaginationRight:S,resetSliderSizes:E,moveToTab:I,updateStartingXPoint:A,updateTabsState:F,updatePagination:D,movePaginationLeft:()=>{var e,n;const r=Mw(a.value);let i=f.value-r;if(s.value)for(let t=0;t<s.value.length-1;t++){const r=(0,o.SU)(null===(e=s.value[t])||void 0===e?void 0:e.leftSidePosition),a=(0,o.SU)(null===(n=s.value[t+1])||void 0===n?void 0:n.leftSidePosition);if(r>i&&r<f.value||a>=f.value){i=r;break}}f.value=Math.max(0,i),t("click:prev")},movePaginationRight:()=>{var e;const n=Mw(a.value),r=f.value+n;let i=r;if(s.value)for(let t=0;t<s.value.length-1;t++)if((0,o.SU)(s.value[t].rightSidePosition)>r&&(i=(0,o.SU)(s.value[t].leftSidePosition),f.value<i))break;const u=(0,o.SU)(null===(e=s.value[s.value.length-1])||void 0===e?void 0:e.rightSidePosition)-n;i=Math.min(u,i),f.value=Math.max(0,i),t("click:next")},updateSlider:R,includeAnimation:T,redrawTabs:O,selectTab:P}}});const Lw=["aria-disabled"],Vw=[(0,r._)("div",{class:"va-tabs__slider"},null,-1)],jw={class:"va-tabs__tabs-items"},Ww={class:"va-tabs__content"};Nw.render=function(e,t,n,o,a,i){const s=(0,r.up)("va-button"),u=(0,r.up)("va-config");return(0,r.wg)(),(0,r.iD)("div",{class:(0,ds.C_)(["va-tabs",e.computedTabsClass])},[(0,r._)("div",{ref:"wrapper",class:"va-tabs__wrapper",role:"tablist","aria-disabled":e.$props.disabled},[e.showPagination?((0,r.wg)(),(0,r.j4)(s,{key:0,class:"va-tabs__pagination","aria-label":"move pagination left",size:"medium",disabled:e.disablePaginationLeft,color:e.color,flat:"",icon:e.$props.prevIcon,onClick:e.movePaginationLeft},null,8,["disabled","color","icon","onClick"])):(0,r.kq)("v-if",!0),(0,r._)("div",{ref:"container",class:(0,ds.C_)(["va-tabs__container",e.computedClass])},[(0,r._)("div",{ref:"tabs",class:"va-tabs__tabs",style:(0,ds.j5)(e.paginationControlledStyles)},[(0,r._)("div",{class:"va-tabs__slider-wrapper","aria-hidden":"true",style:(0,ds.j5)(e.sliderStyles)},Vw,4),(0,r.Wm)(u,{components:e.tabConfig},{default:(0,r.w5)((()=>[(0,r._)("div",jw,[(0,r.WI)(e.$slots,"tabs")])])),_:3},8,["components"])],4)],2),e.showPagination?((0,r.wg)(),(0,r.j4)(s,{key:1,class:"va-tabs__pagination","aria-label":"move pagination right",size:"medium",color:e.color,disabled:e.disablePaginationRight,flat:"",icon:e.$props.nextIcon,onClick:e.movePaginationRight},null,8,["color","disabled","icon","onClick"])):(0,r.kq)("v-if",!0)],8,Lw),(0,r._)("div",Ww,[(0,r.WI)(e.$slots,"default")])],2)},Nw.__file="src/components/va-tabs/VaTabs.vue";var Hw=(0,r.aZ)({name:"VaTab",components:{VaIcon:vc},emits:["click","keydown-enter","focus"],props:{...Lc,selected:{type:Boolean,default:!1},color:{type:String,default:""},icon:{type:String,default:""},label:{type:String,default:""},disabled:{type:Boolean},name:{type:[String,Number]},tag:{type:String,default:"div"}},setup:(e,{emit:t})=>{const n=(0,o.XI)(),a=(0,o.iH)(!1),i=(0,o.iH)(!1),s=(0,o.iH)(0),u=(0,o.iH)(0),{hasKeyboardFocus:l,keyboardFocusListeners:c}=Tp(),{tagComputed:d,hrefComputed:p,isActiveRouterLink:f}=Vc(e),h=(0,r.Fl)((()=>({"va-tab--disabled":e.disabled}))),{parentDisabled:v,selectTab:m,moveToTab:g,registerTab:y,unregisterTab:b}=(0,r.f3)(Bw,{parentDisabled:!1,tabsList:[],selectTab:e=>e,moveToTab:e=>e,registerTab:e=>e,unregisterTab:e=>e}),w=(0,r.Fl)((()=>e.disabled||v?-1:0)),{getColor:x}=fu(),C=(0,r.Fl)((()=>x(e.color))),_=(0,r.Fl)((()=>({color:l.value||i.value||a.value?C.value:"inherit"}))),k=()=>{var e,t;const r=(null===(e=n.value)||void 0===e?void 0:e.offsetLeft)||0,o=(null===(t=n.value)||void 0===t?void 0:t.offsetWidth)||0;s.value=r+o,u.value=r},S=()=>{m(A),t("click")},E=()=>{m(A),t("keydown-enter")},I=()=>{l.value&&g(A),t("focus")},A={name:(0,r.Fl)((()=>e.name)),id:null,tabElement:n,isActive:a,tabIndexComputed:w,isActiveRouterLink:f,rightSidePosition:s,leftSidePosition:u,onTabClick:S,onTabKeydown:E,onFocus:I,updateSidePositions:k};return(0,r.bv)((()=>{y(A)})),(0,r.Jd)((()=>{b(A)})),{tabElement:n,parentDisabled:v,isActive:a,hoverState:i,hasKeyboardFocus:l,keyboardFocusListeners:c,tagComputed:d,hrefComputed:p,isActiveRouterLink:f,colorComputed:C,classComputed:h,computedStyle:_,tabIndexComputed:w,rightSidePosition:s,leftSidePosition:u,updateHoverState:e=>{i.value=e},updateSidePositions:k,onTabClick:S,onTabKeydown:E,onFocus:I}}});const Uw=["tabindex"],zw=["textContent"];Hw.render=function(e,t,n,o,a,i){const s=(0,r.up)("va-icon");return(0,r.wg)(),(0,r.j4)((0,r.LL)(e.tagComputed),{ref:"tabElement",class:(0,ds.C_)(["va-tab",e.classComputed]),role:"tab","aria-selected":e.isActive,"aria-disabled":e.$props.disabled||e.parentDisabled,href:e.hrefComputed,target:e.target,to:e.to,replace:e.replace,exact:e.exact,"active-class":e.activeClass,"exact-active-class":e.exactActiveClass,style:(0,ds.j5)(e.computedStyle),onMouseenter:t[3]||(t[3]=t=>e.updateHoverState(!0)),onMouseleave:t[4]||(t[4]=t=>e.updateHoverState(!1))},{default:(0,r.w5)((()=>[(0,r._)("div",(0,r.dG)({class:"va-tab__content"},(0,r.mx)(e.keyboardFocusListeners),{tabindex:e.tabIndexComputed,onFocus:t[0]||(t[0]=(...t)=>e.onFocus&&e.onFocus(...t)),onClick:t[1]||(t[1]=(...t)=>e.onTabClick&&e.onTabClick(...t)),onKeydown:t[2]||(t[2]=(0,Ks.D2)(((...t)=>e.onTabKeydown&&e.onTabKeydown(...t)),["enter"]))}),[(0,r.WI)(e.$slots,"default",{},(()=>[e.icon?((0,r.wg)(),(0,r.j4)(s,{key:0,class:"va-tab__icon",size:"small",name:e.icon},null,8,["name"])):(0,r.kq)("v-if",!0),(0,r._)("span",{class:"va-tab__label",textContent:(0,ds.zw)(e.label)},null,8,zw)]))],16,Uw)])),_:3},8,["aria-selected","aria-disabled","href","target","to","replace","exact","active-class","exact-active-class","class","style"])},Hw.__file="src/components/va-tabs/components/VaTab/VaTab.vue";const $w=Ja(Hw),qw=Ja(Nw),Gw=e=>e.value?e.value:new Date((new Date).setHours(0,0,0,0)),Kw=e=>Array.from(Array(e).keys()),Xw=e=>(0===e?12:e)-12*Number(e>12),Yw=(e,t,n)=>{const o=(0,r.Fl)((()=>e.ampm?12:24)),a=(0,r.Fl)((()=>{let t=Kw(o.value);return e.hoursFilter&&(t=t.filter((t=>e.hoursFilter(e.ampm?t+12*Number(n.value):t)))),t.map((t=>e.ampm?Xw(t):t))})),i=(0,r.Fl)({get:()=>{if(!t.value)return-1;if(e.ampm){const e=Xw(t.value.getHours()-12*Number(n.value));return a.value.findIndex((t=>t===e))}const r=t.value.getHours();return a.value.findIndex((e=>e===r))},set:r=>{if(e.readonly)return;const o=e.ampm?((e,t=!1)=>(12===e?0:e)+12*Number(t))(a.value[r],n.value):a.value[r];t.value=new Date(Gw(t).setHours(o))}});return(0,r.Fl)((()=>({items:a.value,activeItem:i})))},Zw=(e,t)=>{const{view:n}=(0,o.BK)(e),a=(0,o.iH)(!1);(0,r.YP)(t,(()=>{a.value=Gw(t).getHours()>=12}),{immediate:!0});const i=Yw(e,t,a),s=((e,t)=>{const n=(0,r.Fl)((()=>{const t=Kw(60);return e.minutesFilter?t.filter(e.minutesFilter):t})),o=(0,r.Fl)({get:()=>{if(!t.value)return-1;const e=t.value.getMinutes();return n.value.findIndex((t=>t===e))},set:r=>{if(e.readonly)return;const o=n.value[r];t.value=new Date(Gw(t).setMinutes(o))}});return(0,r.Fl)((()=>({items:n.value,activeItem:o})))})(e,t),u=((e,t)=>{const n=(0,r.Fl)((()=>{const t=Kw(60);return e.secondsFilter?t.filter(e.secondsFilter):t})),o=(0,r.Fl)({get:()=>{if(!t.value)return-1;const e=t.value.getSeconds();return n.value.findIndex((t=>t===e))},set:r=>{if(e.readonly)return;const o=n.value[r];t.value=new Date(Gw(t).setSeconds(o))}});return(0,r.Fl)((()=>({items:n.value,activeItem:o})))})(e,t),l=((e,t,n)=>(0,r.Fl)((()=>({items:["AM","PM"],activeItem:(0,r.Fl)({get:()=>t.value?Number(n.value):-1,set:r=>{n.value=Boolean(r);const o=Gw(t).getHours();let a=n.value?o+12:o;n.value&&o<=12&&(a=o+12),!n.value&&o>=12&&(a=o-12);const i=!e.hoursFilter||e.hoursFilter(a);e.periodUpdatesModelValue&&i&&(t.value=new Date(Gw(t).setHours(a)))}})}))))(e,t,a);return{columns:(0,r.Fl)((()=>{const t=[];return"hours"===n.value?t.push(i.value):"minutes"===n.value?t.push(i.value,s.value):"seconds"===n.value&&t.push(i.value,s.value,u.value),e.ampm&&!e.hidePeriodSwitch&&t.push(l.value),t})),isPM:a}};var Jw=(0,r.aZ)({name:"VaTimePickerColumn",props:{items:{type:Array,default:()=>[]},activeItemIndex:{type:Number,default:0},cellHeight:{type:Number,default:30}},emits:["item-selected","update:activeItemIndex",...Pp],setup(e,{emit:t}){const n=(0,o.XI)(),{focus:a,blur:i}=Bp(n,t),[s]=Op("activeItemIndex",e,t);(0,r.YP)(s,(e=>{u(e)})),(0,r.bv)((()=>u(s.value,!1)));const u=(t,o=!0)=>{(0,r.Y3)((()=>{n.value.scrollTo({behavior:o?"smooth":"auto",top:t*e.cellHeight})}))},l=Ms((()=>{n.value&&-1!==s.value&&(s.value=(()=>{const t=n.value.scrollTop,r=Math.max((t-t%e.cellHeight)/e.cellHeight,t/e.cellHeight);return s.value*e.cellHeight<t?Math.ceil(r):s.value*e.cellHeight>t?Math.floor(r):Math.round(r)})())}),200);return{rootElement:n,makeActiveNext:t=>{s.value=(s.value+(t||1))%e.items.length,(0,r.Y3)((()=>u(s.value)))},makeActivePrev:t=>{s.value=(s.value-(t||1)+e.items.length)%e.items.length,(0,r.Y3)((()=>u(s.value)))},makeActiveByIndex:e=>{s.value=e,(0,r.Y3)((()=>u(s.value)))},onScroll:l,onCellClick:e=>{s.value=e},formatCell:e=>Number.isInteger(e)?e<10?`0${e}`:`${e}`:e,focus:a,blur:i}}});const Qw=["onClick"];Jw.render=function(e,t,n,o,a,i){return(0,r.wg)(),(0,r.iD)("div",{ref:"rootElement",tabindex:"0",class:"va-time-picker-column",onKeydown:[t[0]||(t[0]=(0,Ks.D2)((0,Ks.iM)((t=>e.makeActiveNext()),["stop","prevent"]),["down"])),t[1]||(t[1]=(0,Ks.D2)((0,Ks.iM)((t=>e.makeActiveNext(5)),["stop","prevent"]),["space"])),t[2]||(t[2]=(0,Ks.D2)((0,Ks.iM)((t=>e.makeActivePrev()),["stop","prevent"]),["up"]))],onScrollPassive:t[3]||(t[3]=(...t)=>e.onScroll&&e.onScroll(...t)),onTouchmovePassive:t[4]||(t[4]=(...t)=>e.onScroll&&e.onScroll(...t))},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.items,((t,n)=>((0,r.wg)(),(0,r.iD)("div",{key:t,class:(0,ds.C_)(["va-time-picker-cell",{"va-time-picker-cell--active":n===e.$props.activeItemIndex}]),onClick:t=>e.onCellClick(n)},[(0,r.WI)(e.$slots,"cell",(0,ds.vs)((0,r.F4)({item:t,index:n,activeItemIndex:e.activeItemIndex,items:e.items,formattedItem:e.formatCell(t)})),(()=>[(0,r.Uk)((0,ds.zw)(e.formatCell(t)),1)]))],10,Qw)))),128))],544)},Jw.__file="src/components/va-time-picker/components/VaTimePickerColumn/VaTimePickerColumn.vue";var ex=(0,r.aZ)({name:"VaTimePicker",components:{VaTimePickerColumn:Ja(Jw)},props:{...ns,...xf,modelValue:{type:Date,required:!1},ampm:{type:Boolean,default:!1},hidePeriodSwitch:{type:Boolean,default:!1},periodUpdatesModelValue:{type:Boolean,default:!0},view:{type:String,default:"minutes"},hoursFilter:{type:Function},minutesFilter:{type:Function},secondsFilter:{type:Function},framed:{type:Boolean,default:!1},cellHeight:{type:Number,default:30},visibleCellsCount:{type:Number,default:7}},emits:rs,setup(e,{emit:t}){const{valueComputed:n}=os(e,t),{columns:a,isPM:i}=Zw(e,n),{setItemRef:s,itemRefs:u}=db(),l=(0,o.iH)(),c=(e=0)=>{var t;null===(t=u.value[e])||void 0===t||t.focus()},{computedClasses:d}=Cf("va-time-picker",e),p=(0,r.Fl)((()=>({...d,"va-time-picker--framed":e.framed}))),f=Wf("va-time-picker",(()=>{const t=(e.visibleCellsCount-1)/2*e.cellHeight;return{height:e.cellHeight*e.visibleCellsCount+"px","cell-height":`${e.cellHeight}px`,"column-gap-height":`${t}px`}}));return{columns:a,computedStyles:f,computedClasses:p,isPM:i,pickers:u,setItemRef:s,focusNext:()=>{const e=((null==l?void 0:l.value)||0)+1;l.value=e%a.value.length,c(l.value)},focusPrev:()=>{const e=((null==l?void 0:l.value)||0)-1+a.value.length;l.value=e%a.value.length,c(l.value)},activeColumnIndex:l,focus:c,blur:e=>{var t;e?null===(t=u.value[e])||void 0===t||t.blur():u.value.forEach((e=>null==e?void 0:e.blur()))}}}});ex.render=function(e,t,n,o,a,i){const s=(0,r.up)("VaTimePickerColumn");return(0,r.wg)(),(0,r.iD)("div",{class:(0,ds.C_)(["va-time-picker",e.computedClasses]),style:(0,ds.j5)(e.computedStyles)},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.columns,((n,o)=>((0,r.wg)(),(0,r.j4)(s,{key:o,ref_for:!0,ref:e.setItemRef,items:n.items,tabindex:e.disabled?-1:0,"cell-height":e.$props.cellHeight,activeItemIndex:n.activeItem.value,"onUpdate:activeItemIndex":e=>n.activeItem.value=e,onKeydown:[t[0]||(t[0]=(0,Ks.D2)((0,Ks.iM)((t=>e.focusNext()),["stop","prevent"]),["right"])),t[1]||(t[1]=(0,Ks.D2)((0,Ks.iM)((t=>e.focusNext()),["exact","stop","prevent"]),["tab"])),t[2]||(t[2]=(0,Ks.D2)((0,Ks.iM)((t=>e.focusPrev()),["stop","prevent"]),["left"])),t[3]||(t[3]=(0,Ks.D2)((0,Ks.iM)((t=>e.focusPrev()),["shift","stop","prevent"]),["tab"]))],onFocus:t=>e.activeColumnIndex=o},null,8,["items","tabindex","cell-height","activeItemIndex","onUpdate:activeItemIndex","onFocus"])))),128))],6)},ex.__file="src/components/va-time-picker/VaTimePicker.vue";const tx=e=>{const t=new Date,[n,r,o]=(e=>{const t=e.match(/[0-9]{1,2}/g);return t?t.map((e=>Number(e))):[]})(e),a=(e=>{const t=e.match(/pm|am/i);return t?Number("pm"===t[0].toLowerCase()):null})(e);if(!n)return null;const i=null!==a&&n<=12,s=i&&!!a,u=i&&12===n?0:n;return t.setHours(Math.min(u||0,i?12:24)+(s?12:0)),t.setMinutes(Math.min(r||0,60)),t.setSeconds(Math.min(o||0,60)),t},nx=e=>{const t=(0,o.iH)(!0),n=n=>{const r=(e.parse||tx)(n);return r||(t.value=!1),r};return{parse:e=>(t.value=!0,n(e)),isValid:t}},rx=e=>{const t=t=>t?e.ampm?t.toLocaleTimeString("en-US"):t.toLocaleTimeString("en-GB"):"",n=(e,t,n)=>e.split(":").slice(t,n).join(":");return{format:r=>e.format?e.format(r):(r=>{if("seconds"===e.view)return t(r);const[o,a]=t(r).split(" ");return"minutes"===e.view?a?[n(o,0,2),a].join(" "):n(o,0,2):"hours"===e.view?a?[n(o,0,1),a].join(" "):n(o,0,1):""})(r)}},ox=[".va-input-wrapper__prepend-inner",".va-input__prepend-inner",".va-input__append-inner",".va-input-wrapper__append-inner"],ax=bf(hh,["mask","returnRaw","autosize","minRows","maxRows","type","inputmode"]);var ix=(0,r.aZ)({name:"VaTimeInput",components:{VaDropdown:Kd,VaDropdownContent:Gd,VaTimePicker:ex,VaIcon:hc,VaInput:hh},emits:[...Hp,...Kf,"update:modelValue","update:isOpen"],props:{...ax,...bf(ex),...Wp,isOpen:{type:Boolean,default:void 0},modelValue:{type:Date,default:void 0},clearValue:{type:Date,default:void 0},format:{type:Function},parse:{type:Function},manualInput:{type:Boolean,default:!1},leftIcon:{type:Boolean,default:!1},icon:{type:String,default:"schedule"}},inheritAttrs:!1,setup(e,{emit:t,attrs:n,slots:a}){const i=(0,o.XI)(),s=(0,o.XI)(),u=ru(),l=ru(),[c]=Op("isOpen",e,t,!1),[d]=Op("modelValue",e,t),{parse:p,isValid:f}=nx(e),{format:h}=rx(e),v=(0,r.Fl)((()=>f.value&&d.value?(e.format,h(d.value)):e.clearValue?h(e.clearValue):"")),m=()=>{t("update:modelValue",e.clearValue),t("clear")},g=()=>{var e;null===(e=i.value)||void 0===e||e.focus()},{computedError:y,computedErrorMessages:b,listeners:w}=Up(e,t,m,g),x=(0,r.Fl)((()=>!f.value&&v.value!==e.clearValue||y.value)),{canBeCleared:C,clearIconProps:_,onFocus:k,onBlur:S}=Xf(e,v),E=(0,r.Fl)((()=>({name:e.icon,color:e.color,size:"small"}))),I=(0,r.Fl)((()=>({...yf(e,ax).value,clearable:!1,rules:[],error:x.value,errorMessages:b.value,readonly:e.readonly||!e.manualInput}))),A=(0,r.Fl)((()=>({focus:()=>{k(),w.onFocus()},blur:()=>{S(),w.onBlur()}}))),F=(0,r.Fl)((()=>e.disabled||e.readonly?-1:0)),D=(0,r.Fl)((()=>({ariaLabel:e.label||"selected time",ariaDisabled:e.disabled,ariaReadonly:e.readonly,tabindex:e.disabled?-1:0,...rc(n,["class","style"])}))),R=(0,r.Fl)((()=>{const t=[e.leftIcon&&"prependInner",(!e.leftIcon||e.clearable)&&"icon"];return Object.keys(a).filter((e=>!t.includes(e)))}));(0,r.YP)(d,(()=>{f.value=!0}));const T=()=>{c.value=!1,g()},O=()=>{c.value=!0},P=()=>{O(),(0,r.Y3)((()=>{var e;null===(e=s.value)||void 0===e||e.focus()}))};return{input:i,timePicker:s,clearIconId:u,componentIconId:l,timePickerProps:yf(e,bf(ex)),computedInputProps:I,computedInputAttrs:D,computedInputListeners:A,iconsTabIndexComputed:F,isOpenSync:c,modelValueSync:d,valueText:v,onInputTextChanged:e=>{const t=p(e);f.value&&t&&(d.value=t)},onValueInput:e=>{!e&&m()},canBeCleared:C,iconProps:E,clearIconProps:_,filterSlots:R,hideDropdown:T,showDropdown:P,toggleDropdown:()=>{c.value?T():P()},handleComponentClick:e=>{var t,n;const r=null===(t=e.target)||void 0===t?void 0:t.id;if(r===u)return g();if(r===l)return null===(n=s.value)||void 0===n?void 0:n.focus();const o=ox.some((t=>{var n;return!!(null===(n=e.target)||void 0===n?void 0:n.closest(t))}));o||(c.value?T():O())},reset:m,focus:g,blur:()=>{var e;null===(e=i.value)||void 0===e||e.blur()}}}});ix.render=function(e,t,n,o,a,i){const s=(0,r.up)("va-icon"),u=(0,r.up)("va-input"),l=(0,r.up)("va-time-picker"),c=(0,r.up)("va-dropdown-content"),d=(0,r.up)("va-dropdown");return(0,r.wg)(),(0,r.j4)(d,{class:(0,ds.C_)(["va-time-input",e.$attrs.class]),style:(0,ds.j5)(e.$attrs.style),modelValue:e.isOpenSync,"onUpdate:modelValue":t[2]||(t[2]=t=>e.isOpenSync=t),placement:"bottom-start",offset:[2,0],"close-on-content-click":!1,disabled:e.$props.disabled,anchorSelector:".va-input-wrapper__field",stateful:!1,trigger:"none",onKeydown:[(0,Ks.D2)((0,Ks.iM)(e.showDropdown,["prevent"]),["up"]),(0,Ks.D2)((0,Ks.iM)(e.showDropdown,["prevent"]),["down"]),(0,Ks.D2)((0,Ks.iM)(e.showDropdown,["prevent"]),["space"]),(0,Ks.D2)((0,Ks.iM)(e.showDropdown,["prevent"]),["enter"]),(0,Ks.D2)((0,Ks.iM)(e.hideDropdown,["prevent"]),["esc"])],onClick:e.handleComponentClick},{anchor:(0,r.w5)((()=>[(0,r.Wm)(u,(0,r.dG)({ref:"input"},{...e.computedInputProps,...e.computedInputAttrs},(0,r.mx)(e.computedInputListeners),{modelValue:e.valueText,onChange:t[0]||(t[0]=t=>e.onInputTextChanged(t.target.value)),"onUpdate:modelValue":e.onValueInput}),(0,r.Nv)({prependInner:(0,r.w5)((t=>[(0,r.WI)(e.$slots,"prependInner",(0,ds.vs)((0,r.F4)({...t,toggleDropdown:e.toggleDropdown,showDropdown:e.showDropdown,hideDropdown:e.hideDropdown,isOpen:e.isOpenSync,focus:e.focus}))),e.$props.leftIcon?((0,r.wg)(),(0,r.j4)(s,(0,r.dG)({key:0,role:"button","aria-label":"toggle dropdown","aria-hidden":"false",class:"va-dropdown__icons__reset",tabindex:e.iconsTabIndexComputed,id:e.componentIconId},e.iconProps,{onClick:e.toggleDropdown,onKeydown:(0,Ks.D2)((0,Ks.iM)(e.toggleDropdown,["stop"]),["enter"])}),null,16,["tabindex","id","onClick","onKeydown"])):(0,r.kq)("v-if",!0)])),icon:(0,r.w5)((()=>[e.canBeCleared?((0,r.wg)(),(0,r.j4)(s,(0,r.dG)({key:0,role:"button","aria-label":"reset","aria-hidden":"false",class:"va-dropdown__icons__reset",tabindex:e.iconsTabIndexComputed,id:e.clearIconId},e.clearIconProps,{onClick:e.reset,onKeydown:(0,Ks.D2)((0,Ks.iM)(e.reset,["stop"]),["enter"])}),null,16,["tabindex","id","onClick","onKeydown"])):e.$props.leftIcon?(0,r.kq)("v-if",!0):((0,r.wg)(),(0,r.j4)(s,(0,r.dG)({key:1,role:"button","aria-label":"toggle dropdown","aria-hidden":"false",class:"va-dropdown__icons__reset",tabindex:e.iconsTabIndexComputed,id:e.componentIconId},e.iconProps,{onClick:e.toggleDropdown,onKeydown:(0,Ks.D2)((0,Ks.iM)(e.toggleDropdown,["stop"]),["enter"])}),null,16,["tabindex","id","onClick","onKeydown"]))])),_:2},[(0,r.Ko)(e.filterSlots,(t=>({name:t,fn:(0,r.w5)((n=>[(0,r.WI)(e.$slots,t,(0,ds.vs)((0,r.F4)({...n,toggleDropdown:e.toggleDropdown,showDropdown:e.showDropdown,hideDropdown:e.hideDropdown,isOpen:e.isOpenSync,focus:e.focus})))]))})))]),1040,["modelValue","onUpdate:modelValue"])])),default:(0,r.w5)((()=>[(0,r.Wm)(c,{"no-padding":"",onKeydown:(0,Ks.D2)((0,Ks.iM)(e.hideDropdown,["prevent"]),["esc"]),onKeypress:(0,Ks.D2)((0,Ks.iM)(e.hideDropdown,["prevent"]),["enter"])},{default:(0,r.w5)((()=>[(0,r.Wm)(l,(0,r.dG)({ref:"timePicker"},e.timePickerProps,{modelValue:e.modelValueSync,"onUpdate:modelValue":t[1]||(t[1]=t=>e.modelValueSync=t)}),null,16,["modelValue"])])),_:1},8,["onKeydown","onKeypress"])])),_:3},8,["class","style","modelValue","disabled","onKeydown","onClick"])},ix.__file="src/components/va-time-input/VaTimeInput.vue";const sx=Ja(ix),ux=Ja(ex),lx=e=>e?.props,cx=e=>!!e?.props?.active||!1;function dx(e){const t=e.default?.();return!t||(n=t)&&0===n.length?[]:t[0].type===r.HY?t[0].children:t;var n}var px={name:"va-timeline",props:{vertical:{type:Boolean},centered:{type:Boolean},alignTop:{type:Boolean}},setup:(e,{slots:t})=>()=>(0,r.h)("div",{class:{"va-timeline":!0,"va-timeline--vertical":e.vertical,"va-timeline--align-top":e.alignTop}},(e=>{const t=dx(e.slots);return t.forEach(((n,r)=>{lx(n)||(n.props={});const o=lx(n);o.vertical=e.props.vertical,e.props.centered&&(o.inverted=!!(r%2)),0===r&&(o.isFirst=!0),r===t.length-1&&(o.isLast=!0);const a=o.active;a&&(0===r&&(o.activePrevious=a),r===t.length-1&&(o.activeNext=a),cx(t[r-1])&&(o.activePrevious=!0),cx(t[r+1])&&(o.activeNext=!0))})),t})({props:e,slots:t})),__file:"src/components/va-timeline/VaTimeline.vue"};const fx="va-timeline-separator";var hx=(0,r.aZ)({name:fx,props:{color:{type:String,default:"primary"},vertical:{type:Boolean},active:{type:Boolean},activePrevious:{type:Boolean},activeNext:{type:Boolean}},setup(e){const{getColor:t}=fu();return()=>(0,r.h)("div",{class:{[fx]:!0,[`${fx}--vertical`]:e.vertical}},[(0,r.h)("div",{class:{[`${fx}__line`]:!0,[`${fx}__line--active`]:e.activePrevious},style:{backgroundColor:t(e.activePrevious?e.color:"divider")}}),(0,r.h)("div",{class:{[`${fx}__center`]:!0,[`${fx}__center--active`]:e.active},style:{backgroundColor:t(e.active?e.color:"divider")}}),(0,r.h)("div",{class:{[`${fx}__line`]:!0,[`${fx}__line--active`]:e.activeNext},style:{backgroundColor:t(e.activeNext?e.color:"divider")}})])}});hx.__file="src/components/va-timeline/VaTimelineSeparator/VaTimelineSeparator.vue";const vx=Ja(hx),mx=bf(vx);var gx=(0,r.aZ)({name:"va-timeline-item",props:{...mx,color:{type:String,default:"primary"},isFirst:{type:Boolean},isLast:{type:Boolean},inverted:{type:Boolean}},setup(e,{slots:t}){const n=[(0,r.h)(vx,{...yf(e,mx).value})],o=e.inverted?t.after:t.before;o&&n.unshift((0,r.h)("div",{class:"va-timeline-item__before"},o()));const a=e.inverted?t.before:t.after;return a&&n.push((0,r.h)("div",{class:"va-timeline-item__after"},a())),()=>(0,r.h)("div",{class:[{"va-timeline-item":!0},{"va-timeline-item--vertical":e.vertical},{"va-timeline-item--is-first":e.isFirst},{"va-timeline-item--is-last":e.isLast}]},n)}});gx.__file="src/components/va-timeline/VaTimelineItem/VaTimelineItem.vue";const yx=Ja(gx),bx=Ja(px),wx=Symbol("TreeView"),xx=Symbol("TreeCategory"),Cx=Symbol("TreeNode");var _x=(0,r.aZ)({name:"VaTreeView",props:{color:{type:String,default:""}},setup:e=>{const t=(0,o.iH)([]),n={color:e.color,onChildMounted:e=>{t.value.push(e)},onChildUnmounted:e=>{t.value=t.value.filter((t=>t!==e))}};return(0,r.JJ)(wx,n),{collapse:()=>{(0,r.Y3)((()=>{t.value.forEach((e=>{e.collapse()}))}))},expand:()=>{(0,r.Y3)((()=>{t.value.forEach((e=>{e.expand()}))}))},...fu()}}});const kx={class:"va-tree-view"};_x.render=function(e,t,n,o,a,i){return(0,r.wg)(),(0,r.iD)("div",kx,[(0,r.WI)(e.$slots,"default")])},_x.__file="src/components/va-tree-view/VaTreeView.vue";var Sx=(0,r.aZ)({name:"VaTreeNode",components:{VaIcon:vc},props:{highlighted:{type:Boolean,default:!1},icon:{type:String,default:""},iconRight:{type:String,default:""},color:{type:String,default:"primary"}},setup(e){const{getColor:t}=fu(),n=(0,r.f3)(xx,{onChildMounted:e=>{},onChildUnmounted:e=>{}});return(0,r.JJ)(Cx,{props:(0,r.Fl)((()=>e))}),(0,r.bv)((()=>n&&n.onChildMounted(Cx))),(0,r.Jd)((()=>n&&n.onChildUnmounted(Cx))),{treeCategory:n,getColor:t}}});const Ex={key:0,class:"va-tree-node__checkbox"},Ix={key:1,class:"va-tree-node__icon"},Ax={class:"va-tree-node__label"},Fx={key:2,class:"va-tree-node__icon-right",size:24};Sx.render=function(e,t,n,o,a,i){const s=(0,r.up)("va-icon");return(0,r.wg)(),(0,r.iD)("div",{class:(0,ds.C_)(["va-tree-node",{"va-tree-node--highlighted":e.$props.highlighted}])},[e.$slots.checkbox?((0,r.wg)(),(0,r.iD)("div",Ex,[(0,r.WI)(e.$slots,"checkbox")])):(0,r.kq)("v-if",!0),e.$props.icon?((0,r.wg)(),(0,r.iD)("div",Ix,[(0,r.Wm)(s,{name:e.$props.icon,color:e.getColor("info"),size:24},null,8,["name","color"])])):(0,r.kq)("v-if",!0),(0,r._)("div",Ax,[(0,r.WI)(e.$slots,"default")]),e.$props.iconRight?((0,r.wg)(),(0,r.iD)("div",Fx,[(0,r.Wm)(s,{name:e.$props.iconRight,color:e.getColor("info")},null,8,["name","color"])])):(0,r.kq)("v-if",!0)],2)},Sx.__file="src/components/va-tree-view/VaTreeNode/VaTreeNode.vue";const Dx=Ja(Sx);var Rx=(0,r.aZ)({name:"SquareWithIcon",components:{VaIcon:vc},props:{icon:{type:String,default:"",required:!0},color:{type:String,default:"primary"}},setup(e){const{getColor:t}=fu();return{colorComputed:(0,r.Fl)((()=>t(e.color)))}}});Rx.render=function(e,t,n,o,a,i){const s=(0,r.up)("va-icon");return(0,r.wg)(),(0,r.iD)("div",{class:"square-with-icon",style:(0,ds.j5)({backgroundColor:e.colorComputed})},[(0,r.Wm)(s,{name:e.$props.icon},null,8,["name"])],4)},Rx.__file="src/components/va-tree-view/SquareWithIcon/SquareWithIcon.vue";var Tx=(0,r.aZ)({name:"VaTreeCategory",components:{SquareWithIcon:Rx,VaIcon:hc},props:{label:{type:[String,Number],default:""},isOpen:{type:Boolean,default:!1},icon:{type:String,default:""},color:{type:String,default:"primary"}},setup:e=>{const{getColor:t}=fu(),n=(0,r.Fl)((()=>t(e.color))),a=(0,o.iH)([]),i=(0,o.iH)(!1),s=(0,r.f3)(wx,{onChildMounted:e=>{},onChildUnmounted:e=>{}}),u=()=>{i.value=!1,(0,r.Y3)((()=>{a.value.forEach((e=>{"va-tree-category"===e.$options.name&&e.collapse()}))}))},l=()=>{i.value=!0,(0,r.Y3)((()=>{a.value.forEach((e=>{var t;null===(t=e.expand)||void 0===t||t.call(e)}))}))},c=e=>{e.target.classList.contains("va-checkbox__input")||(i.value=!i.value)};(0,r.YP)((()=>e.isOpen),(e=>{i.value=e}),{immediate:!0});const d={treeView:s,nodes:a.value,isOpenCached:i.value,onChildMounted:e=>{a.value.push(e)},onChildUnmounted:e=>{a.value=a.value.filter((t=>t!==e))},collapse:u,expand:l,toggle:c};return(0,r.JJ)(xx,d),(0,r.bv)((()=>null==s?void 0:s.onChildMounted(d))),(0,r.Jd)((()=>null==s?void 0:s.onChildUnmounted(d))),{treeCategory:d,treeView:s,nodes:a,isOpenCached:i,collapse:u,expand:l,toggle:c,getColor:t,colorComputed:n}}});const Ox={class:"va-tree-category"},Px={class:"va-tree-category__header-switcher"},Bx={key:0,class:"va-tree-category__header-checkbox"},Mx={key:1,class:"va-tree-category__header-icon"},Nx={class:"va-tree-category__header-label"},Lx={key:0,class:"va-tree-category__list-container"},Vx={class:"va-tree-category__list-internal-container"};Tx.render=function(e,t,n,o,a,i){const s=(0,r.up)("square-with-icon"),u=(0,r.up)("va-icon");return(0,r.wg)(),(0,r.iD)("div",Ox,[(0,r._)("div",{class:"va-tree-category__header",onClick:t[0]||(t[0]=(...t)=>e.toggle&&e.toggle(...t))},[(0,r._)("div",Px,[(0,r.Wm)(s,{icon:e.isOpenCached?"remove":"add",color:e.colorComputed},null,8,["icon","color"])]),e.$slots.checkbox?((0,r.wg)(),(0,r.iD)("div",Bx,[(0,r.WI)(e.$slots,"checkbox")])):(0,r.kq)("v-if",!0),e.$props.icon?((0,r.wg)(),(0,r.iD)("div",Mx,[(0,r.Wm)(u,{name:e.$props.icon,color:e.getColor("info")},null,8,["name","color"])])):(0,r.kq)("v-if",!0),(0,r._)("div",Nx,(0,ds.zw)(e.$props.label),1)]),e.isOpenCached?((0,r.wg)(),(0,r.iD)("div",Lx,[(0,r._)("div",Vx,[(0,r.WI)(e.$slots,"default")])])):(0,r.kq)("v-if",!0)])},Tx.__file="src/components/va-tree-view/VaTreeCategory/VaTreeCategory.vue";const jx=Ja(Tx),Wx=Ja(_x);var Hx=(0,r.aZ)({name:"VaSeparator"}),Ux=(0,r.aZ)({name:"VaSpacer"}),zx=Object.freeze({__proto__:null,VaAccordion:cs,VaAffix:Gs,VaAlert:Cc,VaAppBar:Sc,VaAvatar:Nc,VaBacktop:Uc,VaBadge:qc,VaBreadcrumbs:td,VaBreadcrumbsItem:ed,VaButton:Wc,VaButtonDropdown:np,VaButtonGroup:Yd,VaButtonToggle:ap,VaCard:hp,VaCardActions:fp,VaCardContent:dp,VaCardTitle:pp,VaCarousel:Rp,VaCheckbox:tf,VaChip:sf,VaCollapse:pf,VaColorIndicator:hf,VaColorInput:bh,VaColorPalette:_h,VaConfig:u,VaContent:Eh,VaCounter:Bh,VaDataTable:Vv,VaDateInput:Bm,VaDatePicker:Mm,VaDivider:jm,VaDropdown:Kd,VaDropdownContent:Gd,VaFileUpload:Eg,VaForm:Fg,VaHover:kp,VaIcon:vc,VaImage:Cp,VaInfiniteScroll:Tg,VaInnerLoading:Vh,VaInput:mh,VaList:zg,VaListItem:Vg,VaListItemLabel:Wg,VaListItemSection:Hg,VaListLabel:jg,VaListSeparator:Ug,VaMessageList:$p,VaModal:Jm,VaNavbar:Jg,VaNavbarItem:Qg,VaOptionList:Sb,VaPagination:Ab,VaParallax:Ob,VaPopover:jb,VaProgressBar:Ub,VaProgressCircle:Oc,VaRadio:gb,VaRating:nw,VaSelect:pw,VaSeparator:Hx,VaSidebar:kw,VaSidebarItem:_w,VaSidebarItemContent:xw,VaSidebarItemTitle:Cw,VaSlider:Pw,VaSpacer:Ux,VaSwitch:Cb,VaTabs:qw,VaTab:$w,VaTimeInput:sx,VaTimeline:bx,VaTimelineItem:yx,VaTimePicker:ux,VaTreeCategory:jx,VaTreeNode:Dx,VaTreeRoot:Wx,VaTreeView:Wx});const $x=(e,t,...n)=>{(e=>"function"==typeof e)(t)?e.use(t(...n)):e.use(t)},qx=e=>e,Gx=qx((e=>({install(t){const n=Ka();e&&n.mergeGlobalConfig(e),t.provide(Ga,n),c(t,"$vaConfig",n)}}))),Kx=qx((()=>({install(e){c(e,"$vaColorConfig",(e=>{const t=d(e,"$vaConfig").globalConfig,n=e=>{if(!e)return;if(ps())return;const t=document.documentElement;Object.keys(e).forEach((n=>{((e,t,n)=>{n.style.setProperty(`--va-${e}`,t)})(n,e[n],t)}))};return n(t.value.colors),(0,r.YP)((()=>t.value.colors),(e=>{n(e)}),{immediate:!0,deep:!0}),{renderCSSVarialbes:(e=t.value.colors)=>{if(e)return Object.keys(e).map((t=>`--va-${t}: ${e[t]}`)).join(";")},updateColors:n}})(e))}}))),Xx=(0,r.aZ)({name:"VaToastRenderer",props:{render:{type:Function,required:!0}},setup:e=>()=>e.render()});var Yx=(0,r.aZ)({name:"VaToast",components:{VaIcon:hc,VaToastRenderer:Xx},emits:["on-click","on-close"],props:{title:{type:String,default:""},offsetY:{type:Number,default:16},offsetX:{type:Number,default:16},message:{type:[String,Function],default:""},dangerouslyUseHtmlString:{type:Boolean,default:!1},icon:{type:String,default:"close"},customClass:{type:String,default:""},duration:{type:Number,default:5e3},color:{type:String,default:""},closeable:{type:Boolean,default:!0},onClose:{type:Function},onClick:{type:Function},multiLine:{type:Boolean,default:!1},position:{type:String,default:"top-right",validator:e=>["top-right","top-left","bottom-right","bottom-left"].includes(e)},render:{type:Function}},setup(e,{emit:t}){const n=(0,o.XI)(),{getColor:a}=fu(),{textColorComputed:i}=hu(),s=(0,o.iH)(!1),u=(0,r.Fl)((()=>e.position.includes("right")?"right":"left")),l=(0,r.Fl)((()=>e.position.includes("top")?"top":"bottom")),c=(0,r.Fl)((()=>[e.customClass,e.multiLine?"va-toast--multiline":""])),d=(0,r.Fl)((()=>({[l.value]:`${e.offsetY}px`,[u.value]:`${e.offsetX}px`,backgroundColor:a(e.color),color:i.value}))),p=(0,r.Fl)((()=>"function"==typeof e.message?e.message():e.message)),f=()=>{var e,t;null===(e=n.value)||void 0===e||e.removeEventListener("transitionend",f),null===(t=n.value)||void 0===t||t.remove()},h=()=>{var r;s.value=!1,null===(r=n.value)||void 0===r||r.addEventListener("transitionend",f),"function"==typeof e.onClose?e.onClose():t("on-close")},v=(()=>{let e;return{start:(...t)=>(e=window.setTimeout(...t),e),clear:()=>e&&window.clearTimeout(e)}})(),m=v.clear,g=()=>{e.duration>0&&v.start((()=>s.value&&h()),e.duration)};return(0,r.bv)((()=>{s.value=!0,g()})),{visible:s,toastClasses:c,toastStyles:d,computedMessage:p,onToastClick:()=>{"function"==typeof e.onClick?e.onClick():t("on-click")},onToastClose:h,startTimer:g,clearTimer:m}}});const Zx=["role"],Jx={class:"va-toast__group"},Qx=["textContent"],eC={class:"va-toast__content"},tC=["innerHTML"],nC=["textContent"],rC={key:1,class:"va-toast__content"};Yx.render=function(e,t,n,o,a,i){const s=(0,r.up)("VaToastRenderer"),u=(0,r.up)("va-icon");return(0,r.wg)(),(0,r.j4)(Ks.uT,{name:"va-toast-fade"},{default:(0,r.w5)((()=>[(0,r.wy)((0,r._)("div",{ref:"rootElement",role:e.$props.closeable?"alertdialog":"alert",class:(0,ds.C_)(["va-toast",e.toastClasses]),style:(0,ds.j5)(e.toastStyles),onMouseenter:t[0]||(t[0]=(...t)=>e.clearTimer&&e.clearTimer(...t)),onMouseleave:t[1]||(t[1]=(...t)=>e.startTimer&&e.startTimer(...t)),onClick:t[2]||(t[2]=(...t)=>e.onToastClick&&e.onToastClick(...t))},[(0,r._)("div",Jx,[e.$props.title?((0,r.wg)(),(0,r.iD)("h2",{key:0,class:"va-toast__title",textContent:(0,ds.zw)(e.$props.title)},null,8,Qx)):(0,r.kq)("v-if",!0),(0,r.wy)((0,r._)("div",eC,[e.$props.dangerouslyUseHtmlString?((0,r.wg)(),(0,r.iD)("div",{key:0,innerHTML:e.computedMessage},null,8,tC)):((0,r.wg)(),(0,r.iD)("p",{key:1,textContent:(0,ds.zw)(e.computedMessage)},null,8,nC))],512),[[Ks.F8,e.$props.message]]),e.$props.render?((0,r.wg)(),(0,r.iD)("div",rC,[(0,r.Wm)(s,{render:e.$props.render},null,8,["render"])])):(0,r.kq)("v-if",!0),e.$props.closeable?((0,r.wg)(),(0,r.j4)(u,{key:2,class:"va-toast__close-icon",role:"button","aria-label":"close toast","aria-hidden":"false",tabindex:"0",size:"small",name:e.$props.icon,onClick:(0,Ks.iM)(e.onToastClose,["stop"]),onKeydown:(0,Ks.D2)((0,Ks.iM)(e.onToastClose,["stop"]),["enter"])},null,8,["name","onClick","onKeydown"])):(0,r.kq)("v-if",!0)])],46,Zx),[[Ks.F8,e.visible]])])),_:1})},Yx.__file="src/components/va-toast/VaToast.vue";const oC=Ja(Yx);let aC=1;vs().vaToastInstances=[];const iC=e=>{var t;return(null===(t=e.component)||void 0===t?void 0:t.props)||{}},sC=(e,t)=>{var n;if(!e)return;if(!vs().vaToastInstances.length)return void(aC=1);const r=vs().vaToastInstances.findIndex((t=>t===e));if(r<0)return;const o=iC(e),{offsetX:a,offsetY:i,position:s}=o,u=null===(n=e.el)||void 0===n?void 0:n.offsetHeight;t(),vs().vaToastInstances=vs().vaToastInstances.reduce(((t,n,o)=>{if(n===e)return t;if(n.component){const{offsetX:e,offsetY:t,position:l}=iC(n);if(o>r&&a===e&&i===t&&s===l&&n.el&&u){const[e,t]=n.el.style.transform.match(/[\d-]+(?=px)/g),r=((e,t,n)=>{const r=n.includes("bottom")?-1:1;return parseInt(e,10)-(t+5)*r})(t,u,l);n.el.style.transform=`translate(0, ${r}px)`}}return[...t,n]}),[]),vs().vaToastInstances.length||(aC=1)},uC=(e,{props:t,children:n,element:o,appContext:a}={})=>{let i,s=o;return i=(0,r.Wm)(e,{...t,onClose:()=>{sC(i,(()=>((e,t)=>{e&&((0,Ks.sY)(null,e),e.remove()),e=null})(s))),(null==t?void 0:t.onClose)&&t.onClose()}},n),a&&(i.appContext=a),s?(0,Ks.sY)(i,s):"undefined"!=typeof document&&(0,Ks.sY)(i,s=document.createElement("div")),{vNode:i,el:s}},lC=e=>{vs().vaToastInstances.length?vs().vaToastInstances.forEach((t=>{e&&t.appContext!==e||iC(t).onClose()})):aC=1},cC=e=>{const t=vs().vaToastInstances.find((t=>{var n;return(null===(n=t.el)||void 0===n?void 0:n.id)===e}));t&&iC(t).onClose()},dC=(e,t)=>{const{vNode:n,el:r}=uC(oC,{appContext:t,props:(o=e,"string"==typeof o?{message:o}:o)});var o;const a=iC(n);if(r&&n.el&&a){document.body.appendChild(r.childNodes[0]);const{offsetX:e,offsetY:t,position:o}=a;n.el.style.display="flex",n.el.id="notification_"+aC;let i=0;return vs().vaToastInstances.filter((n=>{const{offsetX:r,offsetY:a,position:i}=iC(n);return r===e&&a===t&&o===i})).forEach((e=>{i+=((e,t)=>{if(e.el){const n=t.includes("bottom")?-1:1;return(e.el.offsetHeight+5)*n}return 0})(e,o)})),n.el.style.transform=`translate(0, ${i}px)`,aC+=1,vs().vaToastInstances.push(n),n.el.id}return null},pC=(e,t)=>{e&&((0,Ks.sY)(null,e),e.remove()),e=null},fC=(e,t)=>{const{vNode:n,el:o}=((e,{props:t,appContext:n}={})=>{var o;const a=null===document||void 0===document?void 0:document.createElement("div");let i;return i=(0,r.h)(e,{...t,stateful:null===(o=null==t?void 0:t.stateful)||void 0===o||o,modelValue:!0,onClose:e=>{var n;null===(n=null==t?void 0:t.onClose)||void 0===n||n.call(t,e),pC(a)},"onUpdate:modelValue":e=>{var n;null===(n=null==t?void 0:t["onUpdate:modelValue"])||void 0===n||n.call(t,e),(null==t?void 0:t.withoutTransitions)&&!e&&(0,r.Y3)((()=>{pC(a)}))}}),n&&(i.appContext=n),a&&(0,Ks.sY)(i,a),{vNode:i,el:a}})(Jm,{appContext:t,props:(a=e,"string"==typeof a?{message:a}:a)});var a;return o&&n.el&&(e=>{var t;return(null===(t=e.component)||void 0===t?void 0:t.props)||{}})(n)&&document.body.appendChild(o.childNodes[0]),n},hC=qx((()=>({install(e){c(e,"$vaToast",(e=>({init:t=>dC(t,null==e?void 0:e._context),close(e){cC(e)},closeAll(t=!1){lC(t||null==e?void 0:e._context)}}))(e))}}))),vC={closeDropdown(){let e=this;for(;e=e.$parent;)if("VaDropdown"===e.$options.name){e.hide();break}}},mC=qx((()=>({install(e){c(e,"$closeDropdown",vC.closeDropdown),c(e,"$vaDropdown",vC)}}))),gC=qx((()=>({install(e){c(e,"$vaModal",(e=>({init:t=>fC(t,null==e?void 0:e._context)}))(e))}}))),yC=qx(((e={})=>({install(t){const{config:n}=e;Object.entries(zx).forEach((([e,n])=>{t.component(e,n)})),$x(t,Gx(n)),$x(t,Kx),$x(t,mC),$x(t,hC),$x(t,gC)}})))},2591:function(e,t,n){"use strict";var r=n(2979),o=n(4647),a=n(5477),i=a("Object.prototype.toString"),s=n(2582)(),u="undefined"===typeof globalThis?n.g:globalThis,l=o(),c=a("String.prototype.slice"),d={},p=n(2762),f=Object.getPrototypeOf;s&&p&&f&&r(l,(function(e){if("function"===typeof u[e]){var t=new u[e];if(Symbol.toStringTag in t){var n=f(t),r=p(n,Symbol.toStringTag);if(!r){var o=f(n);r=p(o,Symbol.toStringTag)}d[e]=r.get}}}));var h=function(e){var t=!1;return r(d,(function(n,r){if(!t)try{var o=n.call(e);o===r&&(t=o)}catch(a){}})),t},v=n(8300);e.exports=function(e){return!!v(e)&&(s&&Symbol.toStringTag in e?h(e):c(i(e),8,-1))}},4647:function(e,t,n){"use strict";var r=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],o="undefined"===typeof globalThis?n.g:globalThis;e.exports=function(){for(var e=[],t=0;t<r.length;t++)"function"===typeof o[r[t]]&&(e[e.length]=r[t]);return e}},2762:function(e,t,n){"use strict";var r=n(8692),o=r("%Object.getOwnPropertyDescriptor%",!0);if(o)try{o([],"length")}catch(a){o=null}e.exports=o},7603:function(e,t,n){"use strict";n.d(t,{ZP:function(){return zn}});n(1703),n(4633),n(8675),n(3462),n(7380),n(1118),n(2120);const r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,o=Object.keys,a=Array.isArray;function i(e,t){return"object"!=typeof t||o(t).forEach((function(n){e[n]=t[n]})),e}"undefined"==typeof Promise||r.Promise||(r.Promise=Promise);const s=Object.getPrototypeOf,u={}.hasOwnProperty;function l(e,t){return u.call(e,t)}function c(e,t){"function"==typeof t&&(t=t(s(e))),("undefined"==typeof Reflect?o:Reflect.ownKeys)(t).forEach((n=>{p(e,n,t[n])}))}const d=Object.defineProperty;function p(e,t,n,r){d(e,t,i(n&&l(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function f(e){return{from:function(t){return e.prototype=Object.create(t.prototype),p(e.prototype,"constructor",e),{extend:c.bind(null,e.prototype)}}}}const h=Object.getOwnPropertyDescriptor;function v(e,t){let n;return h(e,t)||(n=s(e))&&v(n,t)}const m=[].slice;function g(e,t,n){return m.call(e,t,n)}function y(e,t){return t(e)}function b(e){if(!e)throw new Error("Assertion Failed")}function w(e){r.setImmediate?setImmediate(e):setTimeout(e,0)}function x(e,t){return e.reduce(((e,n,r)=>{var o=t(n,r);return o&&(e[o[0]]=o[1]),e}),{})}function C(e,t){if(l(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],r=0,o=t.length;r<o;++r){var a=C(e,t[r]);n.push(a)}return n}var i=t.indexOf(".");if(-1!==i){var s=e[t.substr(0,i)];return void 0===s?void 0:C(s,t.substr(i+1))}}function _(e,t,n){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){b("string"!=typeof n&&"length"in n);for(var r=0,o=t.length;r<o;++r)_(e,t[r],n[r])}else{var i=t.indexOf(".");if(-1!==i){var s=t.substr(0,i),u=t.substr(i+1);if(""===u)void 0===n?a(e)&&!isNaN(parseInt(s))?e.splice(s,1):delete e[s]:e[s]=n;else{var c=e[s];c&&l(e,s)||(c=e[s]={}),_(c,u,n)}}else void 0===n?a(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function k(e){var t={};for(var n in e)l(e,n)&&(t[n]=e[n]);return t}const S=[].concat;function E(e){return S.apply([],e)}const I="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(E([8,16,32,64].map((e=>["Int","Uint","Float"].map((t=>t+e+"Array")))))).filter((e=>r[e])),A=I.map((e=>r[e]));x(I,(e=>[e,!0]));let F=null;function D(e){F="undefined"!=typeof WeakMap&&new WeakMap;const t=R(e);return F=null,t}function R(e){if(!e||"object"!=typeof e)return e;let t=F&&F.get(e);if(t)return t;if(a(e)){t=[],F&&F.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(R(e[n]))}else if(A.indexOf(e.constructor)>=0)t=e;else{const n=s(e);for(var o in t=n===Object.prototype?{}:Object.create(n),F&&F.set(e,t),e)l(e,o)&&(t[o]=R(e[o]))}return t}const{toString:T}={};function O(e){return T.call(e).slice(8,-1)}const P="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",B="symbol"==typeof P?function(e){var t;return null!=e&&(t=e[P])&&t.apply(e)}:function(){return null},M={};function N(e){var t,n,r,o;if(1===arguments.length){if(a(e))return e.slice();if(this===M&&"string"==typeof e)return[e];if(o=B(e)){for(n=[];!(r=o.next()).done;)n.push(r.value);return n}if(null==e)return[e];if("number"==typeof(t=e.length)){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}const L="undefined"!=typeof Symbol?e=>"AsyncFunction"===e[Symbol.toStringTag]:()=>!1;var V="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function j(e,t){V=e,W=t}var W=()=>!0;const H=!new Error("").stack;function U(){if(H)try{throw U.arguments,new Error}catch(r){return r}return new Error}function z(e,t){var n=e.stack;return n?(t=t||0,0===n.indexOf(e.name)&&(t+=(e.name+e.message).split("\n").length),n.split("\n").slice(t).filter(W).map((e=>"\n"+e)).join("")):""}var $=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],q=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat($),G={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function K(e,t){this._e=U(),this.name=e,this.message=t}function X(e,t){return e+". Errors: "+Object.keys(t).map((e=>t[e].toString())).filter(((e,t,n)=>n.indexOf(e)===t)).join("\n")}function Y(e,t,n,r){this._e=U(),this.failures=t,this.failedKeys=r,this.successCount=n,this.message=X(e,t)}function Z(e,t){this._e=U(),this.name="BulkError",this.failures=Object.keys(t).map((e=>t[e])),this.failuresByPos=t,this.message=X(e,t)}f(K).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+z(this._e,2))}},toString:function(){return this.name+": "+this.message}}),f(Y).from(K),f(Z).from(K);var J=q.reduce(((e,t)=>(e[t]=t+"Error",e)),{});const Q=K;var ee=q.reduce(((e,t)=>{var n=t+"Error";function r(e,r){this._e=U(),this.name=n,e?"string"==typeof e?(this.message=`${e}${r?"\n "+r:""}`,this.inner=r||null):"object"==typeof e&&(this.message=`${e.name} ${e.message}`,this.inner=e):(this.message=G[t]||n,this.inner=null)}return f(r).from(Q),e[t]=r,e}),{});ee.Syntax=SyntaxError,ee.Type=TypeError,ee.Range=RangeError;var te=$.reduce(((e,t)=>(e[t+"Error"]=ee[t],e)),{}),ne=q.reduce(((e,t)=>(-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=ee[t]),e)),{});function re(){}function oe(e){return e}function ae(e,t){return null==e||e===oe?t:function(n){return t(e(n))}}function ie(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function se(e,t){return e===re?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?ie(r,this.onsuccess):r),o&&(this.onerror=this.onerror?ie(o,this.onerror):o),void 0!==a?a:n}}function ue(e,t){return e===re?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?ie(n,this.onsuccess):n),r&&(this.onerror=this.onerror?ie(r,this.onerror):r)}}function le(e,t){return e===re?t:function(n){var r=e.apply(this,arguments);i(n,r);var o=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var s=t.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?ie(o,this.onsuccess):o),a&&(this.onerror=this.onerror?ie(a,this.onerror):a),void 0===r?void 0===s?void 0:s:i(r,s)}}function ce(e,t){return e===re?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function de(e,t){return e===re?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,o=arguments.length,a=new Array(o);o--;)a[o]=arguments[o];return n.then((function(){return t.apply(r,a)}))}return t.apply(this,arguments)}}ne.ModifyError=Y,ne.DexieError=K,ne.BulkError=Z;var pe={};const[fe,he,ve]="undefined"==typeof Promise?[]:(()=>{let e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,s(e),e];const t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,s(t),e]})(),me=he&&he.then,ge=fe&&fe.constructor,ye=!!ve;var be=!1,we=ve?()=>{ve.then(Ue)}:r.setImmediate?setImmediate.bind(null,Ue):r.MutationObserver?()=>{var e=document.createElement("div");new MutationObserver((()=>{Ue(),e=null})).observe(e,{attributes:!0}),e.setAttribute("i","1")}:()=>{setTimeout(Ue,0)},xe=function(e,t){De.push([e,t]),_e&&(we(),_e=!1)},Ce=!0,_e=!0,ke=[],Se=[],Ee=null,Ie=oe,Ae={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ft,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((e=>{try{ft(e[0],e[1])}catch(e){}}))}},Fe=Ae,De=[],Re=0,Te=[];function Oe(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=re,this._lib=!1;var t=this._PSD=Fe;if(V&&(this._stackHolder=U(),this._prev=null,this._numPrev=0),"function"!=typeof e){if(e!==pe)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Ne(this,this._value))}this._state=null,this._value=null,++t.ref,Me(this,e)}const Pe={get:function(){var e=Fe,t=Qe;function n(n,r){var o=!e.global&&(e!==Fe||t!==Qe);const a=o&&!rt();var i=new Oe(((t,i)=>{Ve(this,new Be(dt(n,e,o,a),dt(r,e,o,a),t,i,e))}));return V&&He(i,this),i}return n.prototype=pe,n},set:function(e){p(this,"then",e&&e.prototype===pe?Pe:{get:function(){return e},set:Pe.set})}};function Be(e,t,n,r,o){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=o}function Me(e,t){try{t((t=>{if(null===e._state){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&ze();t&&"function"==typeof t.then?Me(e,((e,n)=>{t instanceof Oe?t._then(e,n):t.then(e,n)})):(e._state=!0,e._value=t,Le(e)),n&&$e()}}),Ne.bind(null,e))}catch(t){Ne(e,t)}}function Ne(e,t){if(Se.push(t),null===e._state){var n=e._lib&&ze();t=Ie(t),e._state=!1,e._value=t,V&&null!==t&&"object"==typeof t&&!t._promise&&function(e,t,n){try{e.apply(null,n)}catch(e){t&&t(e)}}((()=>{var n=v(t,"stack");t._promise=e,p(t,"stack",{get:()=>be?n&&(n.get?n.get.apply(t):n.value):e.stack})})),function(e){ke.some((t=>t._value===e._value))||ke.push(e)}(e),Le(e),n&&$e()}}function Le(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Ve(e,t[n]);var o=e._PSD;--o.ref||o.finalize(),0===Re&&(++Re,xe((()=>{0==--Re&&qe()}),[]))}function Ve(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Re,xe(je,[n,e,t])}else e._listeners.push(t)}function je(e,t,n){try{Ee=t;var r,o=t._value;t._state?r=e(o):(Se.length&&(Se=[]),r=e(o),-1===Se.indexOf(o)&&function(e){for(var t=ke.length;t;)if(ke[--t]._value===e._value)return void ke.splice(t,1)}(t)),n.resolve(r)}catch(e){n.reject(e)}finally{Ee=null,0==--Re&&qe(),--n.psd.ref||n.psd.finalize()}}function We(e,t,n){if(t.length===n)return t;var r="";if(!1===e._state){var o,a,i=e._value;null!=i?(o=i.name||"Error",a=i.message||i,r=z(i,0)):(o=i,a=""),t.push(o+(a?": "+a:"")+r)}return V&&((r=z(e._stackHolder,2))&&-1===t.indexOf(r)&&t.push(r),e._prev&&We(e._prev,t,n)),t}function He(e,t){var n=t?t._numPrev+1:0;n<100&&(e._prev=t,e._numPrev=n)}function Ue(){ze()&&$e()}function ze(){var e=Ce;return Ce=!1,_e=!1,e}function $e(){var e,t,n;do{for(;De.length>0;)for(e=De,De=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(De.length>0);Ce=!0,_e=!0}function qe(){var e=ke;ke=[],e.forEach((e=>{e._PSD.onunhandled.call(null,e._value,e)}));for(var t=Te.slice(0),n=t.length;n;)t[--n]()}function Ge(e){return new Oe(pe,!1,e)}function Ke(e,t){var n=Fe;return function(){var r=ze(),o=Fe;try{return st(n,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{st(o,!1),r&&$e()}}}c(Oe.prototype,{then:Pe,_then:function(e,t){Ve(this,new Be(null,null,e,t,Fe))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=arguments[0],n=arguments[1];return"function"==typeof t?this.then(null,(e=>e instanceof t?n(e):Ge(e))):this.then(null,(e=>e&&e.name===t?n(e):Ge(e)))},finally:function(e){return this.then((t=>(e(),t)),(t=>(e(),Ge(t))))},stack:{get:function(){if(this._stack)return this._stack;try{be=!0;var e=We(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=e),e}finally{be=!1}}},timeout:function(e,t){return e<1/0?new Oe(((n,r)=>{var o=setTimeout((()=>r(new ee.Timeout(t))),e);this.then(n,r).finally(clearTimeout.bind(null,o))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&p(Oe.prototype,Symbol.toStringTag,"Dexie.Promise"),Ae.env=ut(),c(Oe,{all:function(){var e=N.apply(null,arguments).map(ot);return new Oe((function(t,n){0===e.length&&t([]);var r=e.length;e.forEach(((o,a)=>Oe.resolve(o).then((n=>{e[a]=n,--r||t(e)}),n)))}))},resolve:e=>{if(e instanceof Oe)return e;if(e&&"function"==typeof e.then)return new Oe(((t,n)=>{e.then(t,n)}));var t=new Oe(pe,!0,e);return He(t,Ee),t},reject:Ge,race:function(){var e=N.apply(null,arguments).map(ot);return new Oe(((t,n)=>{e.map((e=>Oe.resolve(e).then(t,n)))}))},PSD:{get:()=>Fe,set:e=>Fe=e},totalEchoes:{get:()=>Qe},newPSD:tt,usePSD:lt,scheduler:{get:()=>xe,set:e=>{xe=e}},rejectionMapper:{get:()=>Ie,set:e=>{Ie=e}},follow:(e,t)=>new Oe(((n,r)=>tt(((t,n)=>{var r=Fe;r.unhandleds=[],r.onunhandled=n,r.finalize=ie((function(){!function(e){function t(){e(),Te.splice(Te.indexOf(t),1)}Te.push(t),++Re,xe((()=>{0==--Re&&qe()}),[])}((()=>{0===this.unhandleds.length?t():n(this.unhandleds[0])}))}),r.finalize),e()}),t,n,r)))}),ge&&(ge.allSettled&&p(Oe,"allSettled",(function(){const e=N.apply(null,arguments).map(ot);return new Oe((t=>{0===e.length&&t([]);let n=e.length;const r=new Array(n);e.forEach(((e,o)=>Oe.resolve(e).then((e=>r[o]={status:"fulfilled",value:e}),(e=>r[o]={status:"rejected",reason:e})).then((()=>--n||t(r)))))}))})),ge.any&&"undefined"!=typeof AggregateError&&p(Oe,"any",(function(){const e=N.apply(null,arguments).map(ot);return new Oe(((t,n)=>{0===e.length&&n(new AggregateError([]));let r=e.length;const o=new Array(r);e.forEach(((e,a)=>Oe.resolve(e).then((e=>t(e)),(e=>{o[a]=e,--r||n(new AggregateError(o))}))))}))})));const Xe={awaits:0,echoes:0,id:0};var Ye=0,Ze=[],Je=0,Qe=0,et=0;function tt(e,t,n,r){var o=Fe,a=Object.create(o);a.parent=o,a.ref=0,a.global=!1,a.id=++et;var s=Ae.env;a.env=ye?{Promise:Oe,PromiseProp:{value:Oe,configurable:!0,writable:!0},all:Oe.all,race:Oe.race,allSettled:Oe.allSettled,any:Oe.any,resolve:Oe.resolve,reject:Oe.reject,nthen:pt(s.nthen,a),gthen:pt(s.gthen,a)}:{},t&&i(a,t),++o.ref,a.finalize=function(){--this.parent.ref||this.parent.finalize()};var u=lt(a,e,n,r);return 0===a.ref&&a.finalize(),u}function nt(){return Xe.id||(Xe.id=++Ye),++Xe.awaits,Xe.echoes+=100,Xe.id}function rt(){return!!Xe.awaits&&(0==--Xe.awaits&&(Xe.id=0),Xe.echoes=100*Xe.awaits,!0)}function ot(e){return Xe.echoes&&e&&e.constructor===ge?(nt(),e.then((e=>(rt(),e)),(e=>(rt(),ht(e))))):e}function at(e){++Qe,Xe.echoes&&0!=--Xe.echoes||(Xe.echoes=Xe.id=0),Ze.push(Fe),st(e,!0)}function it(){var e=Ze[Ze.length-1];Ze.pop(),st(e,!1)}function st(e,t){var n=Fe;if((t?!Xe.echoes||Je++&&e===Fe:!Je||--Je&&e===Fe)||ct(t?at.bind(null,e):it),e!==Fe&&(Fe=e,n===Ae&&(Ae.env=ut()),ye)){var o=Ae.env.Promise,a=e.env;he.then=a.nthen,o.prototype.then=a.gthen,(n.global||e.global)&&(Object.defineProperty(r,"Promise",a.PromiseProp),o.all=a.all,o.race=a.race,o.resolve=a.resolve,o.reject=a.reject,a.allSettled&&(o.allSettled=a.allSettled),a.any&&(o.any=a.any))}}function ut(){var e=r.Promise;return ye?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(r,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:he.then,gthen:e.prototype.then}:{}}function lt(e,t,n,r,o){var a=Fe;try{return st(e,!0),t(n,r,o)}finally{st(a,!1)}}function ct(e){me.call(fe,e)}function dt(e,t,n,r){return"function"!=typeof e?e:function(){var o=Fe;n&&nt(),st(t,!0);try{return e.apply(this,arguments)}finally{st(o,!1),r&&ct(rt)}}}function pt(e,t){return function(n,r){return e.call(this,dt(n,t),dt(r,t))}}function ft(e,t){var n;try{n=t.onuncatched(e)}catch(r){}if(!1!==n)try{var o,a={promise:t,reason:e};if(r.document&&document.createEvent?((o=document.createEvent("Event")).initEvent("unhandledrejection",!0,!0),i(o,a)):r.CustomEvent&&i(o=new CustomEvent("unhandledrejection",{detail:a}),a),o&&r.dispatchEvent&&(dispatchEvent(o),!r.PromiseRejectionEvent&&r.onunhandledrejection))try{r.onunhandledrejection(o)}catch(r){}V&&o&&!o.defaultPrevented&&console.warn(`Unhandled rejection: ${e.stack||e}`)}catch(r){}}-1===(""+me).indexOf("[native code]")&&(nt=rt=re);var ht=Oe.reject;function vt(e,t,n,r){if(e.idbdb&&(e._state.openComplete||Fe.letThrough||e._vip)){var o=e._createTransaction(t,n,e._dbSchema);try{o.create(),e._state.PR1398_maxLoop=3}catch(o){return o.name===J.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then((()=>vt(e,t,n,r)))):ht(o)}return o._promise(t,((e,t)=>tt((()=>(Fe.trans=o,r(e,t,o)))))).then((e=>o._completion.then((()=>e))))}if(e._state.openComplete)return ht(new ee.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return ht(new ee.DatabaseClosed);e.open().catch(re)}return e._state.dbReadyPromise.then((()=>vt(e,t,n,r)))}const mt=String.fromCharCode(65535),gt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",yt=[],bt="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),wt=bt,xt=bt,Ct=e=>!/(dexie\.js|dexie\.min\.js)/.test(e);function _t(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}const kt={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function St(e){return"string"!=typeof e||/\./.test(e)?e=>e:t=>(void 0===t[e]&&e in t&&delete(t=D(t))[e],t)}class Et{_trans(e,t,n){const r=this._tx||Fe.trans,o=this.name;function a(e,n,r){if(!r.schema[o])throw new ee.NotFound("Table "+o+" not part of transaction");return t(r.idbtrans,r)}const i=ze();try{return r&&r.db===this.db?r===Fe.trans?r._promise(e,a,n):tt((()=>r._promise(e,a,n)),{trans:r,transless:Fe.transless||Fe}):vt(this.db,e,[this.name],a)}finally{i&&$e()}}get(e,t){return e&&e.constructor===Object?this.where(e).first(t):this._trans("readonly",(t=>this.core.get({trans:t,key:e}).then((e=>this.hook.reading.fire(e))))).then(t)}where(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(a(e))return new this.db.WhereClause(this,`[${e.join("+")}]`);const t=o(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);const n=this.schema.indexes.concat(this.schema.primKey).filter((e=>e.compound&&t.every((t=>e.keyPath.indexOf(t)>=0))&&e.keyPath.every((e=>t.indexOf(e)>=0))))[0];if(n&&this.db._maxKey!==mt)return this.where(n.name).equals(n.keyPath.map((t=>e[t])));!n&&V&&console.warn(`The query ${JSON.stringify(e)} on ${this.name} would benefit of a compound index [${t.join("+")}]`);const{idxByName:r}=this.schema,i=this.db._deps.indexedDB;function s(e,t){try{return 0===i.cmp(e,t)}catch(e){return!1}}const[u,l]=t.reduce((([t,n],o)=>{const i=r[o],u=e[o];return[t||i,t||!i?_t(n,i&&i.multi?e=>{const t=C(e,o);return a(t)&&t.some((e=>s(u,e)))}:e=>s(u,C(e,o))):n]}),[null,null]);return u?this.where(u.name).equals(e[u.keyPath]).filter(l):n?this.filter(l):this.where(t).equals("")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,a(e)?`[${e.join("+")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){this.schema.mappedClass=e;const t=t=>{if(!t)return t;const n=Object.create(e.prototype);for(var r in t)if(l(t,r))try{n[r]=t[r]}catch(e){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=t,this.hook("reading",t),e}defineClass(){return this.mapToClass((function(e){i(this,e)}))}add(e,t){const{auto:n,keyPath:r}=this.schema.primKey;let o=e;return r&&n&&(o=St(r)(e)),this._trans("readwrite",(e=>this.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[o]}))).then((e=>e.numFailures?Oe.reject(e.failures[0]):e.lastResult)).then((t=>{if(r)try{_(e,r,t)}catch(e){}return t}))}update(e,t){if("object"!=typeof e||a(e))return this.where(":id").equals(e).modify(t);{const n=C(e,this.schema.primKey.keyPath);if(void 0===n)return ht(new ee.InvalidArgument("Given object does not contain its primary key"));try{"function"!=typeof t?o(t).forEach((n=>{_(e,n,t[n])})):t(e,{value:e,primKey:n})}catch(e){}return this.where(":id").equals(n).modify(t)}}put(e,t){const{auto:n,keyPath:r}=this.schema.primKey;let o=e;return r&&n&&(o=St(r)(e)),this._trans("readwrite",(e=>this.core.mutate({trans:e,type:"put",values:[o],keys:null!=t?[t]:null}))).then((e=>e.numFailures?Oe.reject(e.failures[0]):e.lastResult)).then((t=>{if(r)try{_(e,r,t)}catch(e){}return t}))}delete(e){return this._trans("readwrite",(t=>this.core.mutate({trans:t,type:"delete",keys:[e]}))).then((e=>e.numFailures?Oe.reject(e.failures[0]):void 0))}clear(){return this._trans("readwrite",(e=>this.core.mutate({trans:e,type:"deleteRange",range:kt}))).then((e=>e.numFailures?Oe.reject(e.failures[0]):void 0))}bulkGet(e){return this._trans("readonly",(t=>this.core.getMany({keys:e,trans:t}).then((e=>e.map((e=>this.hook.reading.fire(e)))))))}bulkAdd(e,t,n){const r=Array.isArray(t)?t:void 0,o=(n=n||(r?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(t=>{const{auto:n,keyPath:a}=this.schema.primKey;if(a&&r)throw new ee.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(r&&r.length!==e.length)throw new ee.InvalidArgument("Arguments objects and keys must have the same length");const i=e.length;let s=a&&n?e.map(St(a)):e;return this.core.mutate({trans:t,type:"add",keys:r,values:s,wantResults:o}).then((({numFailures:e,results:t,lastResult:n,failures:r})=>{if(0===e)return o?t:n;throw new Z(`${this.name}.bulkAdd(): ${e} of ${i} operations failed`,r)}))}))}bulkPut(e,t,n){const r=Array.isArray(t)?t:void 0,o=(n=n||(r?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(t=>{const{auto:n,keyPath:a}=this.schema.primKey;if(a&&r)throw new ee.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(r&&r.length!==e.length)throw new ee.InvalidArgument("Arguments objects and keys must have the same length");const i=e.length;let s=a&&n?e.map(St(a)):e;return this.core.mutate({trans:t,type:"put",keys:r,values:s,wantResults:o}).then((({numFailures:e,results:t,lastResult:n,failures:r})=>{if(0===e)return o?t:n;throw new Z(`${this.name}.bulkPut(): ${e} of ${i} operations failed`,r)}))}))}bulkDelete(e){const t=e.length;return this._trans("readwrite",(t=>this.core.mutate({trans:t,type:"delete",keys:e}))).then((({numFailures:e,lastResult:n,failures:r})=>{if(0===e)return n;throw new Z(`${this.name}.bulkDelete(): ${e} of ${t} operations failed`,r)}))}}function It(e){var t={},n=function(n,r){if(r){for(var o=arguments.length,a=new Array(o-1);--o;)a[o-1]=arguments[o];return t[n].subscribe.apply(null,a),e}if("string"==typeof n)return t[n]};n.addEventType=s;for(var r=1,i=arguments.length;r<i;++r)s(arguments[r]);return n;function s(e,r,o){if("object"==typeof e)return u(e);r||(r=ce),o||(o=re);var a={subscribers:[],fire:o,subscribe:function(e){-1===a.subscribers.indexOf(e)&&(a.subscribers.push(e),a.fire=r(a.fire,e))},unsubscribe:function(e){a.subscribers=a.subscribers.filter((function(t){return t!==e})),a.fire=a.subscribers.reduce(r,o)}};return t[e]=n[e]=a,a}function u(e){o(e).forEach((function(t){var n=e[t];if(a(n))s(t,e[t][0],e[t][1]);else{if("asap"!==n)throw new ee.InvalidArgument("Invalid event config");var r=s(t,oe,(function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];r.subscribers.forEach((function(e){w((function(){e.apply(null,t)}))}))}))}}))}}function At(e,t){return f(t).from({prototype:e}),t}function Ft(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Dt(e,t){e.filter=_t(e.filter,t)}function Rt(e,t,n){var r=e.replayFilter;e.replayFilter=r?()=>_t(r(),t()):t,e.justLimit=n&&!r}function Tt(e,t){if(e.isPrimKey)return t.primaryKey;const n=t.getIndexByKeyPath(e.index);if(!n)throw new ee.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Ot(e,t,n){const r=Tt(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:r,range:e.range}})}function Pt(e,t,n,r){const o=e.replayFilter?_t(e.filter,e.replayFilter()):e.filter;if(e.or){const a={},i=(e,n,r)=>{if(!o||o(n,r,(e=>n.stop(e)),(e=>n.fail(e)))){var i=n.primaryKey,s=""+i;"[object ArrayBuffer]"===s&&(s=""+new Uint8Array(i)),l(a,s)||(a[s]=!0,t(e,n,r))}};return Promise.all([e.or._iterate(i,n),Bt(Ot(e,r,n),e.algorithm,i,!e.keysOnly&&e.valueMapper)])}return Bt(Ot(e,r,n),_t(e.algorithm,o),t,!e.keysOnly&&e.valueMapper)}function Bt(e,t,n,r){var o=Ke(r?(e,t,o)=>n(r(e),t,o):n);return e.then((e=>{if(e)return e.start((()=>{var n=()=>e.continue();t&&!t(e,(e=>n=e),(t=>{e.stop(t),n=re}),(t=>{e.fail(t),n=re}))||o(e.value,e,(e=>n=e)),n()}))}))}function Mt(e,t){try{const n=Nt(e),r=Nt(t);if(n!==r)return"Array"===n?1:"Array"===r?-1:"binary"===n?1:"binary"===r?-1:"string"===n?1:"string"===r?-1:"Date"===n?1:"Date"!==r?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return function(e,t){const n=e.length,r=t.length,o=n<r?n:r;for(let a=0;a<o;++a)if(e[a]!==t[a])return e[a]<t[a]?-1:1;return n===r?0:n<r?-1:1}(Lt(e),Lt(t));case"Array":return function(e,t){const n=e.length,r=t.length,o=n<r?n:r;for(let a=0;a<o;++a){const n=Mt(e[a],t[a]);if(0!==n)return n}return n===r?0:n<r?-1:1}(e,t)}}catch(e){}return NaN}function Nt(e){const t=typeof e;if("object"!==t)return t;if(ArrayBuffer.isView(e))return"binary";const n=O(e);return"ArrayBuffer"===n?"binary":n}function Lt(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}class Vt{_read(e,t){var n=this._ctx;return n.error?n.table._trans(null,ht.bind(null,n.error)):n.table._trans("readonly",e).then(t)}_write(e){var t=this._ctx;return t.error?t.table._trans(null,ht.bind(null,t.error)):t.table._trans("readwrite",e,"locked")}_addAlgorithm(e){var t=this._ctx;t.algorithm=_t(t.algorithm,e)}_iterate(e,t){return Pt(this._ctx,e,t,this._ctx.table.core)}clone(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&i(n,e),t._ctx=n,t}raw(){return this._ctx.valueMapper=null,this}each(e){var t=this._ctx;return this._read((n=>Pt(t,e,n,t.table.core)))}count(e){return this._read((e=>{const t=this._ctx,n=t.table.core;if(Ft(t,!0))return n.count({trans:e,query:{index:Tt(t,n.schema),range:t.range}}).then((e=>Math.min(e,t.limit)));var r=0;return Pt(t,(()=>(++r,!1)),e,n).then((()=>r))})).then(e)}sortBy(e,t){const n=e.split(".").reverse(),r=n[0],o=n.length-1;function a(e,t){return t?a(e[n[t]],t-1):e[r]}var i="next"===this._ctx.dir?1:-1;function s(e,t){var n=a(e,o),r=a(t,o);return n<r?-i:n>r?i:0}return this.toArray((function(e){return e.sort(s)})).then(t)}toArray(e){return this._read((e=>{var t=this._ctx;if("next"===t.dir&&Ft(t,!0)&&t.limit>0){const{valueMapper:n}=t,r=Tt(t,t.table.core.schema);return t.table.core.query({trans:e,limit:t.limit,values:!0,query:{index:r,range:t.range}}).then((({result:e})=>n?e.map(n):e))}{const n=[];return Pt(t,(e=>n.push(e)),e,t.table.core).then((()=>n))}}),e)}offset(e){var t=this._ctx;return e<=0||(t.offset+=e,Ft(t)?Rt(t,(()=>{var t=e;return(e,n)=>0===t||(1===t?(--t,!1):(n((()=>{e.advance(t),t=0})),!1))})):Rt(t,(()=>{var t=e;return()=>--t<0}))),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Rt(this._ctx,(()=>{var t=e;return function(e,n,r){return--t<=0&&n(r),t>=0}}),!0),this}until(e,t){return Dt(this._ctx,(function(n,r,o){return!e(n.value)||(r(o),t)})),this}first(e){return this.limit(1).toArray((function(e){return e[0]})).then(e)}last(e){return this.reverse().first(e)}filter(e){var t,n;return Dt(this._ctx,(function(t){return e(t.value)})),t=this._ctx,n=e,t.isMatch=_t(t.isMatch,n),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.key,n)}))}eachUniqueKey(e){return this._ctx.unique="unique",this.eachKey(e)}eachPrimaryKey(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.primaryKey,n)}))}keys(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.key)})).then((function(){return n})).then(e)}primaryKeys(e){var t=this._ctx;if("next"===t.dir&&Ft(t,!0)&&t.limit>0)return this._read((e=>{var n=Tt(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:n,range:t.range}})})).then((({result:e})=>e)).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.primaryKey)})).then((function(){return n})).then(e)}uniqueKeys(e){return this._ctx.unique="unique",this.keys(e)}firstKey(e){return this.limit(1).keys((function(e){return e[0]})).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var n={};return Dt(this._ctx,(function(e){var t=e.primaryKey.toString(),r=l(n,t);return n[t]=!0,!r})),this}modify(e){var t=this._ctx;return this._write((n=>{var r;if("function"==typeof e)r=e;else{var a=o(e),i=a.length;r=function(t){for(var n=!1,r=0;r<i;++r){var o=a[r],s=e[o];C(t,o)!==s&&(_(t,o,s),n=!0)}return n}}const s=t.table.core,{outbound:u,extractKey:l}=s.schema.primaryKey,c=this.db._options.modifyChunkSize||200,d=[];let p=0;const f=[],h=(e,t)=>{const{failures:n,numFailures:r}=t;p+=e-r;for(let a of o(n))d.push(n[a])};return this.clone().primaryKeys().then((o=>{const a=i=>{const d=Math.min(c,o.length-i);return s.getMany({trans:n,keys:o.slice(i,i+d),cache:"immutable"}).then((p=>{const f=[],v=[],m=u?[]:null,g=[];for(let e=0;e<d;++e){const t=p[e],n={value:D(t),primKey:o[i+e]};!1!==r.call(n,n.value,n)&&(null==n.value?g.push(o[i+e]):u||0===Mt(l(t),l(n.value))?(v.push(n.value),u&&m.push(o[i+e])):(g.push(o[i+e]),f.push(n.value)))}const y=Ft(t)&&t.limit===1/0&&("function"!=typeof e||e===jt)&&{index:t.index,range:t.range};return Promise.resolve(f.length>0&&s.mutate({trans:n,type:"add",values:f}).then((e=>{for(let t in e.failures)g.splice(parseInt(t),1);h(f.length,e)}))).then((()=>(v.length>0||y&&"object"==typeof e)&&s.mutate({trans:n,type:"put",keys:m,values:v,criteria:y,changeSpec:"function"!=typeof e&&e}).then((e=>h(v.length,e))))).then((()=>(g.length>0||y&&e===jt)&&s.mutate({trans:n,type:"delete",keys:g,criteria:y}).then((e=>h(g.length,e))))).then((()=>o.length>i+d&&a(i+c)))}))};return a(0).then((()=>{if(d.length>0)throw new Y("Error modifying one or more objects",d,p,f);return o.length}))}))}))}delete(){var e=this._ctx,t=e.range;return Ft(e)&&(e.isPrimKey&&!xt||3===t.type)?this._write((n=>{const{primaryKey:r}=e.table.core.schema,o=t;return e.table.core.count({trans:n,query:{index:r,range:o}}).then((t=>e.table.core.mutate({trans:n,type:"deleteRange",range:o}).then((({failures:e,lastResult:n,results:r,numFailures:o})=>{if(o)throw new Y("Could not delete some values",Object.keys(e).map((t=>e[t])),t-o);return t-o}))))})):this.modify(jt)}}const jt=(e,t)=>t.value=null;function Wt(e,t){return e<t?-1:e===t?0:1}function Ht(e,t){return e>t?-1:e===t?0:1}function Ut(e,t,n){var r=e instanceof Xt?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function zt(e){return new e.Collection(e,(()=>Kt(""))).limit(0)}function $t(e,t,n,r,o,a){for(var i=Math.min(e.length,r.length),s=-1,u=0;u<i;++u){var l=t[u];if(l!==r[u])return o(e[u],n[u])<0?e.substr(0,u)+n[u]+n.substr(u+1):o(e[u],r[u])<0?e.substr(0,u)+r[u]+n.substr(u+1):s>=0?e.substr(0,s)+t[s]+n.substr(s+1):null;o(e[u],l)<0&&(s=u)}return i<r.length&&"next"===a?e+n.substr(e.length):i<e.length&&"prev"===a?e.substr(0,n.length):s<0?null:e.substr(0,s)+r[s]+n.substr(s+1)}function qt(e,t,n,r){var o,a,i,s,u,l,c,d=n.length;if(!n.every((e=>"string"==typeof e)))return Ut(e,"String expected.");function p(e){o=function(e){return"next"===e?e=>e.toUpperCase():e=>e.toLowerCase()}(e),a=function(e){return"next"===e?e=>e.toLowerCase():e=>e.toUpperCase()}(e),i="next"===e?Wt:Ht;var t=n.map((function(e){return{lower:a(e),upper:o(e)}})).sort((function(e,t){return i(e.lower,t.lower)}));s=t.map((function(e){return e.upper})),u=t.map((function(e){return e.lower})),l=e,c="next"===e?"":r}p("next");var f=new e.Collection(e,(()=>Gt(s[0],u[d-1]+r)));f._ondirectionchange=function(e){p(e)};var h=0;return f._addAlgorithm((function(e,n,r){var o=e.key;if("string"!=typeof o)return!1;var p=a(o);if(t(p,u,h))return!0;for(var f=null,v=h;v<d;++v){var m=$t(o,p,s[v],u[v],i,l);null===m&&null===f?h=v+1:(null===f||i(f,m)>0)&&(f=m)}return n(null!==f?function(){e.continue(f+c)}:r),!1})),f}function Gt(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function Kt(e){return{type:1,lower:e,upper:e}}class Xt{get Collection(){return this._ctx.table.db.Collection}between(e,t,n,r){n=!1!==n,r=!0===r;try{return this._cmp(e,t)>0||0===this._cmp(e,t)&&(n||r)&&(!n||!r)?zt(this):new this.Collection(this,(()=>Gt(e,t,!n,!r)))}catch(e){return Ut(this,gt)}}equals(e){return null==e?Ut(this,gt):new this.Collection(this,(()=>Kt(e)))}above(e){return null==e?Ut(this,gt):new this.Collection(this,(()=>Gt(e,void 0,!0)))}aboveOrEqual(e){return null==e?Ut(this,gt):new this.Collection(this,(()=>Gt(e,void 0,!1)))}below(e){return null==e?Ut(this,gt):new this.Collection(this,(()=>Gt(void 0,e,!1,!0)))}belowOrEqual(e){return null==e?Ut(this,gt):new this.Collection(this,(()=>Gt(void 0,e)))}startsWith(e){return"string"!=typeof e?Ut(this,"String expected."):this.between(e,e+mt,!0,!0)}startsWithIgnoreCase(e){return""===e?this.startsWith(e):qt(this,((e,t)=>0===e.indexOf(t[0])),[e],mt)}equalsIgnoreCase(e){return qt(this,((e,t)=>e===t[0]),[e],"")}anyOfIgnoreCase(){var e=N.apply(M,arguments);return 0===e.length?zt(this):qt(this,((e,t)=>-1!==t.indexOf(e)),e,"")}startsWithAnyOfIgnoreCase(){var e=N.apply(M,arguments);return 0===e.length?zt(this):qt(this,((e,t)=>t.some((t=>0===e.indexOf(t)))),e,mt)}anyOf(){const e=N.apply(M,arguments);let t=this._cmp;try{e.sort(t)}catch(e){return Ut(this,gt)}if(0===e.length)return zt(this);const n=new this.Collection(this,(()=>Gt(e[0],e[e.length-1])));n._ondirectionchange=n=>{t="next"===n?this._ascending:this._descending,e.sort(t)};let r=0;return n._addAlgorithm(((n,o,a)=>{const i=n.key;for(;t(i,e[r])>0;)if(++r,r===e.length)return o(a),!1;return 0===t(i,e[r])||(o((()=>{n.continue(e[r])})),!1)})),n}notEqual(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=N.apply(M,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return Ut(this,gt)}const t=e.reduce(((e,t)=>e?e.concat([[e[e.length-1][1],t]]):[[-1/0,t]]),null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,t){const n=this._cmp,r=this._ascending,o=this._descending,a=this._min,i=this._max;if(0===e.length)return zt(this);if(!e.every((e=>void 0!==e[0]&&void 0!==e[1]&&r(e[0],e[1])<=0)))return Ut(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ee.InvalidArgument);const s=!t||!1!==t.includeLowers,u=t&&!0===t.includeUppers;let l,c=r;function d(e,t){return c(e[0],t[0])}try{l=e.reduce((function(e,t){let r=0,o=e.length;for(;r<o;++r){const o=e[r];if(n(t[0],o[1])<0&&n(t[1],o[0])>0){o[0]=a(o[0],t[0]),o[1]=i(o[1],t[1]);break}}return r===o&&e.push(t),e}),[]),l.sort(d)}catch(e){return Ut(this,gt)}let p=0;const f=u?e=>r(e,l[p][1])>0:e=>r(e,l[p][1])>=0,h=s?e=>o(e,l[p][0])>0:e=>o(e,l[p][0])>=0;let v=f;const m=new this.Collection(this,(()=>Gt(l[0][0],l[l.length-1][1],!s,!u)));return m._ondirectionchange=e=>{"next"===e?(v=f,c=r):(v=h,c=o),l.sort(d)},m._addAlgorithm(((e,t,n)=>{for(var o=e.key;v(o);)if(++p,p===l.length)return t(n),!1;return!!function(e){return!f(e)&&!h(e)}(o)||(0===this._cmp(o,l[p][1])||0===this._cmp(o,l[p][0])||t((()=>{c===r?e.continue(l[p][0]):e.continue(l[p][1])})),!1)})),m}startsWithAnyOf(){const e=N.apply(M,arguments);return e.every((e=>"string"==typeof e))?0===e.length?zt(this):this.inAnyRange(e.map((e=>[e,e+mt]))):Ut(this,"startsWithAnyOf() only works with strings")}}function Yt(e){return Ke((function(t){return Zt(t),e(t.target.error),!1}))}function Zt(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}const Jt=It(null,"storagemutated");class Qt{_lock(){return b(!Fe.global),++this._reculock,1!==this._reculock||Fe.global||(Fe.lockOwnerFor=this),this}_unlock(){if(b(!Fe.global),0==--this._reculock)for(Fe.global||(Fe.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{lt(e[1],e[0])}catch(e){}}return this}_locked(){return this._reculock&&Fe.lockOwnerFor!==this}create(e){if(!this.mode)return this;const t=this.db.idbdb,n=this.db._state.dbOpenError;if(b(!this.idbtrans),!e&&!t)switch(n&&n.name){case"DatabaseClosedError":throw new ee.DatabaseClosed(n);case"MissingAPIError":throw new ee.MissingAPI(n.message,n);default:throw new ee.OpenFailed(n)}if(!this.active)throw new ee.TransactionInactive;return b(null===this._completion._state),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):t.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=Ke((t=>{Zt(t),this._reject(e.error)})),e.onabort=Ke((t=>{Zt(t),this.active&&this._reject(new ee.Abort(e.error)),this.active=!1,this.on("abort").fire(t)})),e.oncomplete=Ke((()=>{this.active=!1,this._resolve(),"mutatedParts"in e&&Jt.storagemutated.fire(e.mutatedParts)})),this}_promise(e,t,n){if("readwrite"===e&&"readwrite"!==this.mode)return ht(new ee.ReadOnly("Transaction is readonly"));if(!this.active)return ht(new ee.TransactionInactive);if(this._locked())return new Oe(((r,o)=>{this._blockedFuncs.push([()=>{this._promise(e,t,n).then(r,o)},Fe])}));if(n)return tt((()=>{var e=new Oe(((e,n)=>{this._lock();const r=t(e,n,this);r&&r.then&&r.then(e,n)}));return e.finally((()=>this._unlock())),e._lib=!0,e}));var r=new Oe(((e,n)=>{var r=t(e,n,this);r&&r.then&&r.then(e,n)}));return r._lib=!0,r}_root(){return this.parent?this.parent._root():this}waitFor(e){var t=this._root();const n=Oe.resolve(e);if(t._waitingFor)t._waitingFor=t._waitingFor.then((()=>n));else{t._waitingFor=n,t._waitingQueue=[];var r=t.idbtrans.objectStore(t.storeNames[0]);!function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(r.get(-1/0).onsuccess=e)}()}var o=t._waitingFor;return new Oe(((e,r)=>{n.then((n=>t._waitingQueue.push(Ke(e.bind(null,n)))),(e=>t._waitingQueue.push(Ke(r.bind(null,e))))).finally((()=>{t._waitingFor===o&&(t._waitingFor=null)}))}))}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ee.Abort))}table(e){const t=this._memoizedTables||(this._memoizedTables={});if(l(t,e))return t[e];const n=this.schema[e];if(!n)throw new ee.NotFound("Table "+e+" not part of transaction");const r=new this.db.Table(e,n,this);return r.core=this.db.core.table(e),t[e]=r,r}}function en(e,t,n,r,o,a,i){return{name:e,keyPath:t,unique:n,multi:r,auto:o,compound:a,src:(n&&!i?"&":"")+(r?"*":"")+(o?"++":"")+tn(t)}}function tn(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function nn(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:x(n,(e=>[e.name,e]))}}let rn=e=>{try{return e.only([[]]),rn=()=>[[]],[[]]}catch(e){return rn=()=>mt,mt}};function on(e){return null==e?()=>{}:"string"==typeof e?function(e){return 1===e.split(".").length?t=>t[e]:t=>C(t,e)}(e):t=>C(t,e)}function an(e){return[].slice.call(e)}let sn=0;function un(e){return null==e?":id":"string"==typeof e?e:`[${e.join("+")}]`}function ln(e,t,n){function r(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:n,upper:r,lowerOpen:o,upperOpen:a}=e;return void 0===n?void 0===r?null:t.upperBound(r,!!a):void 0===r?t.lowerBound(n,!!o):t.bound(n,r,!!o,!!a)}const{schema:o,hasGetAll:i}=function(e,t){const n=an(e.objectStoreNames);return{schema:{name:e.name,tables:n.map((e=>t.objectStore(e))).map((e=>{const{keyPath:t,autoIncrement:n}=e,r=a(t),o=null==t,i={},s={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:o,compound:r,keyPath:t,autoIncrement:n,unique:!0,extractKey:on(t)},indexes:an(e.indexNames).map((t=>e.index(t))).map((e=>{const{name:t,unique:n,multiEntry:r,keyPath:o}=e,s={name:t,compound:a(o),keyPath:o,unique:n,multiEntry:r,extractKey:on(o)};return i[un(o)]=s,s})),getIndexByKeyPath:e=>i[un(e)]};return i[":id"]=s.primaryKey,null!=t&&(i[un(t)]=s.primaryKey),s}))},hasGetAll:n.length>0&&"getAll"in t.objectStore(n[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,n),s=o.tables.map((e=>function(e){const t=e.name;return{name:t,schema:e,mutate:function({trans:e,type:n,keys:o,values:a,range:i}){return new Promise(((s,u)=>{s=Ke(s);const l=e.objectStore(t),c=null==l.keyPath,d="put"===n||"add"===n;if(!d&&"delete"!==n&&"deleteRange"!==n)throw new Error("Invalid operation type: "+n);const{length:p}=o||a||{length:1};if(o&&a&&o.length!==a.length)throw new Error("Given keys array must have same length as given values array.");if(0===p)return s({numFailures:0,failures:{},results:[],lastResult:void 0});let f;const h=[],v=[];let m=0;const g=e=>{++m,Zt(e)};if("deleteRange"===n){if(4===i.type)return s({numFailures:m,failures:v,results:[],lastResult:void 0});3===i.type?h.push(f=l.clear()):h.push(f=l.delete(r(i)))}else{const[e,t]=d?c?[a,o]:[a,null]:[o,null];if(d)for(let r=0;r<p;++r)h.push(f=t&&void 0!==t[r]?l[n](e[r],t[r]):l[n](e[r])),f.onerror=g;else for(let r=0;r<p;++r)h.push(f=l[n](e[r])),f.onerror=g}const y=e=>{const t=e.target.result;h.forEach(((e,t)=>null!=e.error&&(v[t]=e.error))),s({numFailures:m,failures:v,results:"delete"===n?o:h.map((e=>e.result)),lastResult:t})};f.onerror=e=>{g(e),y(e)},f.onsuccess=y}))},getMany:({trans:e,keys:n})=>new Promise(((r,o)=>{r=Ke(r);const a=e.objectStore(t),i=n.length,s=new Array(i);let u,l=0,c=0;const d=e=>{const t=e.target;s[t._pos]=t.result,++c===l&&r(s)},p=Yt(o);for(let e=0;e<i;++e)null!=n[e]&&(u=a.get(n[e]),u._pos=e,u.onsuccess=d,u.onerror=p,++l);0===l&&r(s)})),get:({trans:e,key:n})=>new Promise(((r,o)=>{r=Ke(r);const a=e.objectStore(t).get(n);a.onsuccess=e=>r(e.target.result),a.onerror=Yt(o)})),query:function(e){return n=>new Promise(((o,a)=>{o=Ke(o);const{trans:i,values:s,limit:u,query:l}=n,c=u===1/0?void 0:u,{index:d,range:p}=l,f=i.objectStore(t),h=d.isPrimaryKey?f:f.index(d.name),v=r(p);if(0===u)return o({result:[]});if(e){const e=s?h.getAll(v,c):h.getAllKeys(v,c);e.onsuccess=e=>o({result:e.target.result}),e.onerror=Yt(a)}else{let e=0;const t=s||!("openKeyCursor"in h)?h.openCursor(v):h.openKeyCursor(v),n=[];t.onsuccess=r=>{const a=t.result;return a?(n.push(s?a.value:a.primaryKey),++e===u?o({result:n}):void a.continue()):o({result:n})},t.onerror=Yt(a)}}))}(i),openCursor:function({trans:e,values:n,query:o,reverse:a,unique:i}){return new Promise(((s,u)=>{s=Ke(s);const{index:l,range:c}=o,d=e.objectStore(t),p=l.isPrimaryKey?d:d.index(l.name),f=a?i?"prevunique":"prev":i?"nextunique":"next",h=n||!("openKeyCursor"in p)?p.openCursor(r(c),f):p.openKeyCursor(r(c),f);h.onerror=Yt(u),h.onsuccess=Ke((t=>{const n=h.result;if(!n)return void s(null);n.___id=++sn,n.done=!1;const r=n.continue.bind(n);let o=n.continuePrimaryKey;o&&(o=o.bind(n));const a=n.advance.bind(n),i=()=>{throw new Error("Cursor not stopped")};n.trans=e,n.stop=n.continue=n.continuePrimaryKey=n.advance=()=>{throw new Error("Cursor not started")},n.fail=Ke(u),n.next=function(){let e=1;return this.start((()=>e--?this.continue():this.stop())).then((()=>this))},n.start=e=>{const t=new Promise(((e,t)=>{e=Ke(e),h.onerror=Yt(t),n.fail=t,n.stop=t=>{n.stop=n.continue=n.continuePrimaryKey=n.advance=i,e(t)}})),s=()=>{if(h.result)try{e()}catch(e){n.fail(e)}else n.done=!0,n.start=()=>{throw new Error("Cursor behind last entry")},n.stop()};return h.onsuccess=Ke((e=>{h.onsuccess=s,s()})),n.continue=r,n.continuePrimaryKey=o,n.advance=a,s(),t},s(n)}),u)}))},count({query:e,trans:n}){const{index:o,range:a}=e;return new Promise(((e,i)=>{const s=n.objectStore(t),u=o.isPrimaryKey?s:s.index(o.name),l=r(a),c=l?u.count(l):u.count();c.onsuccess=Ke((t=>e(t.target.result))),c.onerror=Yt(i)}))}}}(e))),u={};return s.forEach((e=>u[e.name]=e)),{stack:"dbcore",transaction:e.transaction.bind(e),table(e){if(!u[e])throw new Error(`Table '${e}' not found`);return u[e]},MIN_KEY:-1/0,MAX_KEY:rn(t),schema:o}}function cn({_novip:e},t){const n=t.db,r=function(e,t,{IDBKeyRange:n,indexedDB:r},o){const a=function(e,t){return t.reduce(((e,{create:t})=>({...e,...t(e)})),e)}(ln(t,n,o),e.dbcore);return{dbcore:a}}(e._middlewares,n,e._deps,t);e.core=r.dbcore,e.tables.forEach((t=>{const n=t.name;e.core.schema.tables.some((e=>e.name===n))&&(t.core=e.core.table(n),e[n]instanceof e.Table&&(e[n].core=t.core))}))}function dn({_novip:e},t,n,r){n.forEach((n=>{const o=r[n];t.forEach((t=>{const r=v(t,n);(!r||"value"in r&&void 0===r.value)&&(t===e.Transaction.prototype||t instanceof e.Transaction?p(t,n,{get(){return this.table(n)},set(e){d(this,n,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):t[n]=new e.Table(n,o))}))}))}function pn({_novip:e},t){t.forEach((t=>{for(let n in t)t[n]instanceof e.Table&&delete t[n]}))}function fn(e,t){return e._cfg.version-t._cfg.version}function hn(e,t,n,r){const a=e._dbSchema,i=e._createTransaction("readwrite",e._storeNames,a);i.create(n),i._completion.catch(r);const s=i._reject.bind(i),u=Fe.transless||Fe;tt((()=>{Fe.trans=i,Fe.transless=u,0===t?(o(a).forEach((e=>{mn(n,e,a[e].primKey,a[e].indexes)})),cn(e,n),Oe.follow((()=>e.on.populate.fire(i))).catch(s)):function({_novip:e},t,n,r){const a=[],i=e._versions;let s=e._dbSchema=yn(e,e.idbdb,r),u=!1;function l(){return a.length?Oe.resolve(a.shift()(n.idbtrans)).then(l):Oe.resolve()}return i.filter((e=>e._cfg.version>=t)).forEach((i=>{a.push((()=>{const a=s,l=i._cfg.dbschema;bn(e,a,r),bn(e,l,r),s=e._dbSchema=l;const c=vn(a,l);c.add.forEach((e=>{mn(r,e[0],e[1].primKey,e[1].indexes)})),c.change.forEach((e=>{if(e.recreate)throw new ee.Upgrade("Not yet support for changing primary key");{const t=r.objectStore(e.name);e.add.forEach((e=>gn(t,e))),e.change.forEach((e=>{t.deleteIndex(e.name),gn(t,e)})),e.del.forEach((e=>t.deleteIndex(e)))}}));const d=i._cfg.contentUpgrade;if(d&&i._cfg.version>t){cn(e,r),n._memoizedTables={},u=!0;let t=k(l);c.del.forEach((e=>{t[e]=a[e]})),pn(e,[e.Transaction.prototype]),dn(e,[e.Transaction.prototype],o(t),t),n.schema=t;const i=L(d);let s;i&&nt();const p=Oe.follow((()=>{if(s=d(n),s&&i){var e=rt.bind(null,null);s.then(e,e)}}));return s&&"function"==typeof s.then?Oe.resolve(s):p.then((()=>s))}})),a.push((t=>{u&&wt||function(e,t){[].slice.call(t.db.objectStoreNames).forEach((n=>null==e[n]&&t.db.deleteObjectStore(n)))}(i._cfg.dbschema,t),pn(e,[e.Transaction.prototype]),dn(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),n.schema=e._dbSchema}))})),l().then((()=>{var e,t;t=r,o(e=s).forEach((n=>{t.db.objectStoreNames.contains(n)||mn(t,n,e[n].primKey,e[n].indexes)}))}))}(e,t,i,n).catch(s)}))}function vn(e,t){const n={del:[],add:[],change:[]};let r;for(r in e)t[r]||n.del.push(r);for(r in t){const o=e[r],a=t[r];if(o){const e={name:r,def:a,recreate:!1,del:[],add:[],change:[]};if(""+(o.primKey.keyPath||"")!=""+(a.primKey.keyPath||"")||o.primKey.auto!==a.primKey.auto&&!bt)e.recreate=!0,n.change.push(e);else{const t=o.idxByName,r=a.idxByName;let i;for(i in t)r[i]||e.del.push(i);for(i in r){const n=t[i],o=r[i];n?n.src!==o.src&&e.change.push(o):e.add.push(o)}(e.del.length>0||e.add.length>0||e.change.length>0)&&n.change.push(e)}}else n.add.push([r,a])}return n}function mn(e,t,n,r){const o=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach((e=>gn(o,e))),o}function gn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function yn(e,t,n){const r={};return g(t.objectStoreNames,0).forEach((e=>{const t=n.objectStore(e);let o=t.keyPath;const a=en(tn(o),o||"",!1,!1,!!t.autoIncrement,o&&"string"!=typeof o,!0),i=[];for(let n=0;n<t.indexNames.length;++n){const e=t.index(t.indexNames[n]);o=e.keyPath;var s=en(e.name,o,!!e.unique,!!e.multiEntry,!1,o&&"string"!=typeof o,!1);i.push(s)}r[e]=nn(e,a,i)})),r}function bn({_novip:e},t,n){const o=n.db.objectStoreNames;for(let r=0;r<o.length;++r){const a=o[r],i=n.objectStore(a);e._hasGetAll="getAll"in i;for(let e=0;e<i.indexNames.length;++e){const n=i.indexNames[e],r=i.index(n).keyPath,o="string"==typeof r?r:"["+g(r).join("+")+"]";if(t[a]){const e=t[a].idxByName[o];e&&(e.name=n,delete t[a].idxByName[o],t[a].idxByName[n]=e)}}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&r.WorkerGlobalScope&&r instanceof r.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}class wn{_parseStoresSpec(e,t){o(e).forEach((n=>{if(null!==e[n]){var r=e[n].split(",").map(((e,t)=>{const n=(e=e.trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;return en(n,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),a(r),0===t)})),o=r.shift();if(o.multi)throw new ee.Schema("Primary key cannot be multi-valued");r.forEach((e=>{if(e.auto)throw new ee.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new ee.Schema("Index must have a name and cannot be an empty string")})),t[n]=nn(n,o,r)}}))}stores(e){const t=this.db;this._cfg.storesSource=this._cfg.storesSource?i(this._cfg.storesSource,e):e;const n=t._versions,r={};let a={};return n.forEach((e=>{i(r,e._cfg.storesSource),a=e._cfg.dbschema={},e._parseStoresSpec(r,a)})),t._dbSchema=a,pn(t,[t._allTables,t,t.Transaction.prototype]),dn(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],o(a),a),t._storeNames=o(a),this}upgrade(e){return this._cfg.contentUpgrade=de(this._cfg.contentUpgrade||re,e),this}}function xn(e,t){let n=e._dbNamesDB;return n||(n=e._dbNamesDB=new zn("__dbnames",{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function Cn(e){return e&&"function"==typeof e.databases}function _n(e){return tt((function(){return Fe.letThrough=!0,e()}))}function kn(){var e;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise((function(t){var n=function(){return indexedDB.databases().finally(t)};e=setInterval(n,100),n()})).finally((function(){return clearInterval(e)})):Promise.resolve()}function Sn(e){const t=e._state,{indexedDB:n}=e._deps;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then((()=>t.dbOpenError?ht(t.dbOpenError):e));V&&(t.openCanceller._stackHolder=U()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;const r=t.openCanceller;function a(){if(t.openCanceller!==r)throw new ee.DatabaseClosed("db.open() was cancelled")}let i=t.dbReadyResolve,s=null,u=!1;return Oe.race([r,("undefined"==typeof navigator?Oe.resolve():kn()).then((()=>new Oe(((r,i)=>{if(a(),!n)throw new ee.MissingAPI;const l=e.name,c=t.autoSchema?n.open(l):n.open(l,Math.round(10*e.verno));if(!c)throw new ee.MissingAPI;c.onerror=Yt(i),c.onblocked=Ke(e._fireOnBlocked),c.onupgradeneeded=Ke((r=>{if(s=c.transaction,t.autoSchema&&!e._options.allowEmptyDB){c.onerror=Zt,s.abort(),c.result.close();const e=n.deleteDatabase(l);e.onsuccess=e.onerror=Ke((()=>{i(new ee.NoSuchDatabase(`Database ${l} doesnt exist`))}))}else{s.onerror=Yt(i);var o=r.oldVersion>Math.pow(2,62)?0:r.oldVersion;u=o<1,e._novip.idbdb=c.result,hn(e,o/10,s,i)}}),i),c.onsuccess=Ke((()=>{s=null;const n=e._novip.idbdb=c.result,a=g(n.objectStoreNames);if(a.length>0)try{const r=n.transaction(1===(i=a).length?i[0]:i,"readonly");t.autoSchema?function({_novip:e},t,n){e.verno=t.version/10;const r=e._dbSchema=yn(0,t,n);e._storeNames=g(t.objectStoreNames,0),dn(e,[e._allTables],o(r),r)}(e,n,r):(bn(e,e._dbSchema,r),function(e,t){const n=vn(yn(0,e.idbdb,t),e._dbSchema);return!(n.add.length||n.change.some((e=>e.add.length||e.change.length)))}(e,r)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),cn(e,r)}catch(e){}var i;yt.push(e),n.onversionchange=Ke((n=>{t.vcFired=!0,e.on("versionchange").fire(n)})),n.onclose=Ke((t=>{e.on("close").fire(t)})),u&&function({indexedDB:e,IDBKeyRange:t},n){!Cn(e)&&"__dbnames"!==n&&xn(e,t).put({name:n}).catch(re)}(e._deps,l),r()}),i)}))))]).then((()=>(a(),t.onReadyBeingFired=[],Oe.resolve(_n((()=>e.on.ready.fire(e.vip)))).then((function n(){if(t.onReadyBeingFired.length>0){let r=t.onReadyBeingFired.reduce(de,re);return t.onReadyBeingFired=[],Oe.resolve(_n((()=>r(e.vip)))).then(n)}}))))).finally((()=>{t.onReadyBeingFired=null,t.isBeingOpened=!1})).then((()=>e)).catch((n=>{t.dbOpenError=n;try{s&&s.abort()}catch(e){}return r===t.openCanceller&&e._close(),ht(n)})).finally((()=>{t.openComplete=!0,i()}))}function En(e){var t=t=>e.next(t),n=o(t),r=o((t=>e.throw(t)));function o(e){return t=>{var o=e(t),i=o.value;return o.done?i:i&&"function"==typeof i.then?i.then(n,r):a(i)?Promise.all(i).then(n,r):n(i)}}return o(t)()}function In(e,t,n){var r=arguments.length;if(r<2)throw new ee.InvalidArgument("Too few arguments");for(var o=new Array(r-1);--r;)o[r-1]=arguments[r];n=o.pop();var a=E(o);return[e,a,n]}function An(e,t,n,r,o){return Oe.resolve().then((()=>{const a=Fe.transless||Fe,i=e._createTransaction(t,n,e._dbSchema,r),s={trans:i,transless:a};if(r)i.idbtrans=r.idbtrans;else try{i.create(),e._state.PR1398_maxLoop=3}catch(r){return r.name===J.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then((()=>An(e,t,n,null,o)))):ht(r)}const u=L(o);let l;u&&nt();const c=Oe.follow((()=>{if(l=o.call(i,i),l)if(u){var e=rt.bind(null,null);l.then(e,e)}else"function"==typeof l.next&&"function"==typeof l.throw&&(l=En(l))}),s);return(l&&"function"==typeof l.then?Oe.resolve(l).then((e=>i.active?e:ht(new ee.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn")))):c.then((()=>l))).then((e=>(r&&i._resolve(),i._completion.then((()=>e))))).catch((e=>(i._reject(e),ht(e))))}))}function Fn(e,t,n){const r=a(e)?e.slice():[e];for(let o=0;o<n;++o)r.push(t);return r}const Dn={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return{...e,table(t){const n=e.table(t),{schema:r}=n,o={},a=[];function i(e,t,n){const r=un(e),s=o[r]=o[r]||[],u=null==e?0:"string"==typeof e?1:e.length,l=t>0,c={...n,isVirtual:l,keyTail:t,keyLength:u,extractKey:on(e),unique:!l&&n.unique};return s.push(c),c.isPrimaryKey||a.push(c),u>1&&i(2===u?e[0]:e.slice(0,u-1),t+1,n),s.sort(((e,t)=>e.keyTail-t.keyTail)),c}const s=i(r.primaryKey.keyPath,0,r.primaryKey);o[":id"]=[s];for(const e of r.indexes)i(e.keyPath,0,e);function u(t){const n=t.query.index;return n.isVirtual?{...t,query:{index:n,range:(r=t.query.range,o=n.keyTail,{type:1===r.type?2:r.type,lower:Fn(r.lower,r.lowerOpen?e.MAX_KEY:e.MIN_KEY,o),lowerOpen:!0,upper:Fn(r.upper,r.upperOpen?e.MIN_KEY:e.MAX_KEY,o),upperOpen:!0})}}:t;var r,o}const l={...n,schema:{...r,primaryKey:s,indexes:a,getIndexByKeyPath:function(e){const t=o[un(e)];return t&&t[0]}},count:e=>n.count(u(e)),query:e=>n.query(u(e)),openCursor(t){const{keyTail:r,isVirtual:o,keyLength:a}=t.query.index;return o?n.openCursor(u(t)).then((n=>n&&function(n){const o=Object.create(n,{continue:{value:function(o){null!=o?n.continue(Fn(o,t.reverse?e.MAX_KEY:e.MIN_KEY,r)):t.unique?n.continue(n.key.slice(0,a).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,r)):n.continue()}},continuePrimaryKey:{value(t,o){n.continuePrimaryKey(Fn(t,e.MAX_KEY,r),o)}},primaryKey:{get:()=>n.primaryKey},key:{get(){const e=n.key;return 1===a?e[0]:e.slice(0,a)}},value:{get:()=>n.value}});return o}(n))):n.openCursor(t)}};return l}}}};function Rn(e,t,n,r){return n=n||{},r=r||"",o(e).forEach((o=>{if(l(t,o)){var a=e[o],i=t[o];if("object"==typeof a&&"object"==typeof i&&a&&i){const e=O(a);e!==O(i)?n[r+o]=t[o]:"Object"===e?Rn(a,i,n,r+o+"."):a!==i&&(n[r+o]=t[o])}else a!==i&&(n[r+o]=t[o])}else n[r+o]=void 0})),o(t).forEach((o=>{l(e,o)||(n[r+o]=t[o])})),n}const Tn={stack:"dbcore",name:"HooksMiddleware",level:2,create:e=>({...e,table(t){const n=e.table(t),{primaryKey:r}=n.schema,o={...n,mutate(e){const o=Fe.trans,{deleting:a,creating:i,updating:s}=o.table(t).hook;switch(e.type){case"add":if(i.fire===re)break;return o._promise("readwrite",(()=>u(e)),!0);case"put":if(i.fire===re&&s.fire===re)break;return o._promise("readwrite",(()=>u(e)),!0);case"delete":if(a.fire===re)break;return o._promise("readwrite",(()=>u(e)),!0);case"deleteRange":if(a.fire===re)break;return o._promise("readwrite",(()=>function(e){return c(e.trans,e.range,1e4)}(e)),!0)}return n.mutate(e);function u(e){const t=Fe.trans,o=e.keys||function(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}(r,e);if(!o)throw new Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?{...e,keys:o}:{...e}).type&&(e.values=[...e.values]),e.keys&&(e.keys=[...e.keys]),function(e,t,n){return"add"===t.type?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}(n,e,o).then((u=>{const c=o.map(((n,o)=>{const c=u[o],d={onerror:null,onsuccess:null};if("delete"===e.type)a.fire.call(d,n,c,t);else if("add"===e.type||void 0===c){const a=i.fire.call(d,n,e.values[o],t);null==n&&null!=a&&(n=a,e.keys[o]=n,r.outbound||_(e.values[o],r.keyPath,n))}else{const r=Rn(c,e.values[o]),a=s.fire.call(d,r,n,c,t);if(a){const t=e.values[o];Object.keys(a).forEach((e=>{l(t,e)?t[e]=a[e]:_(t,e,a[e])}))}}return d}));return n.mutate(e).then((({failures:t,results:n,numFailures:r,lastResult:a})=>{for(let i=0;i<o.length;++i){const r=n?n[i]:o[i],a=c[i];null==r?a.onerror&&a.onerror(t[i]):a.onsuccess&&a.onsuccess("put"===e.type&&u[i]?e.values[i]:r)}return{failures:t,results:n,numFailures:r,lastResult:a}})).catch((e=>(c.forEach((t=>t.onerror&&t.onerror(e))),Promise.reject(e))))}))}function c(e,t,o){return n.query({trans:e,values:!1,query:{index:r,range:t},limit:o}).then((({result:n})=>u({type:"delete",keys:n,trans:e}).then((r=>r.numFailures>0?Promise.reject(r.failures[0]):n.length<o?{failures:[],numFailures:0,lastResult:void 0}:c(e,{...t,lower:n[n.length-1],lowerOpen:!0},o)))))}}};return o}})};function On(e,t,n){try{if(!t)return null;if(t.keys.length<e.length)return null;const r=[];for(let o=0,a=0;o<t.keys.length&&a<e.length;++o)0===Mt(t.keys[o],e[a])&&(r.push(n?D(t.values[o]):t.values[o]),++a);return r.length===e.length?r:null}catch(e){return null}}const Pn={stack:"dbcore",level:-1,create:e=>({table:t=>{const n=e.table(t);return{...n,getMany:e=>{if(!e.cache)return n.getMany(e);const t=On(e.keys,e.trans._cache,"clone"===e.cache);return t?Oe.resolve(t):n.getMany(e).then((t=>(e.trans._cache={keys:e.keys,values:"clone"===e.cache?D(t):t},t)))},mutate:e=>("add"!==e.type&&(e.trans._cache=null),n.mutate(e))}}})};function Bn(e){return!("from"in e)}const Mn=function(e,t){if(!this){const t=new Mn;return e&&"d"in e&&i(t,e),t}i(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0})};function Nn(e,t,n){const r=Mt(t,n);if(isNaN(r))return;if(r>0)throw RangeError();if(Bn(e))return i(e,{from:t,to:n,d:1});const o=e.l,a=e.r;if(Mt(n,e.from)<0)return o?Nn(o,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Wn(e);if(Mt(t,e.to)>0)return a?Nn(a,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Wn(e);Mt(t,e.from)<0&&(e.from=t,e.l=null,e.d=a?a.d+1:1),Mt(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);const s=!e.r;o&&!e.l&&Ln(e,o),a&&s&&Ln(e,a)}function Ln(e,t){Bn(t)||function e(t,{from:n,to:r,l:o,r:a}){Nn(t,n,r),o&&e(t,o),a&&e(t,a)}(e,t)}function Vn(e,t){const n=jn(t);let r=n.next();if(r.done)return!1;let o=r.value;const a=jn(e);let i=a.next(o.from),s=i.value;for(;!r.done&&!i.done;){if(Mt(s.from,o.to)<=0&&Mt(s.to,o.from)>=0)return!0;Mt(o.from,s.from)<0?o=(r=n.next(s.from)).value:s=(i=a.next(o.from)).value}return!1}function jn(e){let t=Bn(e)?null:{s:0,n:e};return{next(e){const n=arguments.length>0;for(;t;)switch(t.s){case 0:if(t.s=1,n)for(;t.n.l&&Mt(e,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!n||Mt(e,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Wn(e){var t,n;const r=((null===(t=e.r)||void 0===t?void 0:t.d)||0)-((null===(n=e.l)||void 0===n?void 0:n.d)||0),o=r>1?"r":r<-1?"l":"";if(o){const t="r"===o?"l":"r",n={...e},r=e[o];e.from=r.from,e.to=r.to,e[o]=r[o],n[o]=r[t],e[t]=n,n.d=Hn(n)}e.d=Hn(e)}function Hn({r:e,l:t}){return(e?t?Math.max(e.d,t.d):e.d:t?t.d:0)+1}c(Mn.prototype,{add(e){return Ln(this,e),this},addKey(e){return Nn(this,e,e),this},addKeys(e){return e.forEach((e=>Nn(this,e,e))),this},[P](){return jn(this)}});const Un={stack:"dbcore",level:0,create:e=>{const t=e.schema.name,n=new Mn(e.MIN_KEY,e.MAX_KEY);return{...e,table:r=>{const i=e.table(r),{schema:s}=i,{primaryKey:u}=s,{extractKey:l,outbound:c}=u,d={...i,mutate:e=>{const o=e.trans,u=o.mutatedParts||(o.mutatedParts={}),l=e=>{const n=`idb://${t}/${r}/${e}`;return u[n]||(u[n]=new Mn)},c=l(""),d=l(":dels"),{type:p}=e;let[f,h]="deleteRange"===e.type?[e.range]:"delete"===e.type?[e.keys]:e.values.length<50?[[],e.values]:[];const v=e.trans._cache;return i.mutate(e).then((e=>{if(a(f)){"delete"!==p&&(f=e.results),c.addKeys(f);const t=On(f,v);t||"add"===p||d.addKeys(f),(t||h)&&function(e,t,n,r){function o(t){const o=e(t.name||"");function i(e){return null!=e?t.extractKey(e):null}const s=e=>t.multiEntry&&a(e)?e.forEach((e=>o.addKey(e))):o.addKey(e);(n||r).forEach(((e,t)=>{const o=n&&i(n[t]),a=r&&i(r[t]);0!==Mt(o,a)&&(null!=o&&s(o),null!=a&&s(a))}))}t.indexes.forEach(o)}(l,s,t,h)}else if(f){const e={from:f.lower,to:f.upper};d.add(e),c.add(e)}else c.add(n),d.add(n),s.indexes.forEach((e=>l(e.name).add(n)));return e}))}},p=({query:{index:t,range:n}})=>{var r,o;return[t,new Mn(null!==(r=n.lower)&&void 0!==r?r:e.MIN_KEY,null!==(o=n.upper)&&void 0!==o?o:e.MAX_KEY)]},f={get:e=>[u,new Mn(e.key)],getMany:e=>[u,(new Mn).addKeys(e.keys)],count:p,query:p,openCursor:p};return o(f).forEach((e=>{d[e]=function(o){const{subscr:a}=Fe;if(a){const s=e=>{const n=`idb://${t}/${r}/${e}`;return a[n]||(a[n]=new Mn)},u=s(""),d=s(":dels"),[p,h]=f[e](o);if(s(p.name||"").add(h),!p.isPrimaryKey){if("count"!==e){const t="query"===e&&c&&o.values&&i.query({...o,values:!1});return i[e].apply(this,arguments).then((n=>{if("query"===e){if(c&&o.values)return t.then((({result:e})=>(u.addKeys(e),n)));const e=o.values?n.result.map(l):n.result;o.values?u.addKeys(e):d.addKeys(e)}else if("openCursor"===e){const e=n,t=o.values;return e&&Object.create(e,{key:{get:()=>(d.addKey(e.primaryKey),e.key)},primaryKey:{get(){const t=e.primaryKey;return d.addKey(t),t}},value:{get:()=>(t&&u.addKey(e.primaryKey),e.value)}})}return n}))}d.add(n)}}return i[e].apply(this,arguments)}})),d}}}};class zn{constructor(e,t){this._middlewares={},this.verno=0;const n=zn.dependencies;this._options=t={addons:zn.addons,autoOpen:!0,indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange,...t},this._deps={indexedDB:t.indexedDB,IDBKeyRange:t.IDBKeyRange};const{addons:r}=t;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const o={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:re,dbReadyPromise:null,cancelOpen:re,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var a;o.dbReadyPromise=new Oe((e=>{o.dbReadyResolve=e})),o.openCanceller=new Oe(((e,t)=>{o.cancelOpen=t})),this._state=o,this.name=e,this.on=It(this,"populate","blocked","versionchange","close",{ready:[de,re]}),this.on.ready.subscribe=y(this.on.ready.subscribe,(e=>(t,n)=>{zn.vip((()=>{const r=this._state;if(r.openComplete)r.dbOpenError||Oe.resolve().then(t),n&&e(t);else if(r.onReadyBeingFired)r.onReadyBeingFired.push(t),n&&e(t);else{e(t);const r=this;n||e((function e(){r.on.ready.unsubscribe(t),r.on.ready.unsubscribe(e)}))}}))})),this.Collection=(a=this,At(Vt.prototype,(function(e,t){this.db=a;let n=kt,r=null;if(t)try{n=t()}catch(e){r=e}const o=e._ctx,i=o.table,s=i.hook.reading.fire;this._ctx={table:i,index:o.index,isPrimKey:!o.index||i.schema.primKey.keyPath&&o.index===i.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:o.or,valueMapper:s!==oe?s:null}}))),this.Table=function(e){return At(Et.prototype,(function(t,n,r){this.db=e,this._tx=r,this.name=t,this.schema=n,this.hook=e._allTables[t]?e._allTables[t].hook:It(null,{creating:[se,re],reading:[ae,oe],updating:[le,re],deleting:[ue,re]})}))}(this),this.Transaction=function(e){return At(Qt.prototype,(function(t,n,r,o,a){this.db=e,this.mode=t,this.storeNames=n,this.schema=r,this.chromeTransactionDurability=o,this.idbtrans=null,this.on=It(this,"complete","error","abort"),this.parent=a||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Oe(((e,t)=>{this._resolve=e,this._reject=t})),this._completion.then((()=>{this.active=!1,this.on.complete.fire()}),(e=>{var t=this.active;return this.active=!1,this.on.error.fire(e),this.parent?this.parent._reject(e):t&&this.idbtrans&&this.idbtrans.abort(),ht(e)}))}))}(this),this.Version=function(e){return At(wn.prototype,(function(t){this.db=e,this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))}(this),this.WhereClause=function(e){return At(Xt.prototype,(function(t,n,r){this.db=e,this._ctx={table:t,index:":id"===n?null:n,or:r};const o=e._deps.indexedDB;if(!o)throw new ee.MissingAPI;this._cmp=this._ascending=o.cmp.bind(o),this._descending=(e,t)=>o.cmp(t,e),this._max=(e,t)=>o.cmp(e,t)>0?e:t,this._min=(e,t)=>o.cmp(e,t)<0?e:t,this._IDBKeyRange=e._deps.IDBKeyRange}))}(this),this.on("versionchange",(e=>{e.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()})),this.on("blocked",(e=>{!e.newVersion||e.newVersion<e.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${e.oldVersion/10}`)})),this._maxKey=rn(t.IDBKeyRange),this._createTransaction=(e,t,n,r)=>new this.Transaction(e,t,n,this._options.chromeTransactionDurability,r),this._fireOnBlocked=e=>{this.on("blocked").fire(e),yt.filter((e=>e.name===this.name&&e!==this&&!e._state.vcFired)).map((t=>t.on("versionchange").fire(e)))},this.use(Dn),this.use(Tn),this.use(Un),this.use(Pn),this.vip=Object.create(this,{_vip:{value:!0}}),r.forEach((e=>e(this)))}version(e){if(isNaN(e)||e<.1)throw new ee.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new ee.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);const t=this._versions;var n=t.filter((t=>t._cfg.version===e))[0];return n||(n=new this.Version(e),t.push(n),t.sort(fn),n.stores({}),this._state.autoSchema=!1,n)}_whenReady(e){return this.idbdb&&(this._state.openComplete||Fe.letThrough||this._vip)?e():new Oe(((e,t)=>{if(this._state.openComplete)return t(new ee.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void t(new ee.DatabaseClosed);this.open().catch(re)}this._state.dbReadyPromise.then(e,t)})).then(e)}use({stack:e,create:t,level:n,name:r}){r&&this.unuse({stack:e,name:r});const o=this._middlewares[e]||(this._middlewares[e]=[]);return o.push({stack:e,create:t,level:null==n?10:n,name:r}),o.sort(((e,t)=>e.level-t.level)),this}unuse({stack:e,name:t,create:n}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter((e=>n?e.create!==n:!!t&&e.name!==t))),this}open(){return Sn(this)}_close(){const e=this._state,t=yt.indexOf(this);if(t>=0&&yt.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(e){}this._novip.idbdb=null}e.dbReadyPromise=new Oe((t=>{e.dbReadyResolve=t})),e.openCanceller=new Oe(((t,n)=>{e.cancelOpen=n}))}close(){this._close();const e=this._state;this._options.autoOpen=!1,e.dbOpenError=new ee.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){const e=arguments.length>0,t=this._state;return new Oe(((n,r)=>{const o=()=>{this.close();var e=this._deps.indexedDB.deleteDatabase(this.name);e.onsuccess=Ke((()=>{!function({indexedDB:e,IDBKeyRange:t},n){!Cn(e)&&"__dbnames"!==n&&xn(e,t).delete(n).catch(re)}(this._deps,this.name),n()})),e.onerror=Yt(r),e.onblocked=this._fireOnBlocked};if(e)throw new ee.InvalidArgument("Arguments not allowed in db.delete()");t.isBeingOpened?t.dbReadyPromise.then(o):o()}))}backendDB(){return this.idbdb}isOpen(){return null!==this.idbdb}hasBeenClosed(){const e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name}hasFailed(){return null!==this._state.dbOpenError}dynamicallyOpened(){return this._state.autoSchema}get tables(){return o(this._allTables).map((e=>this._allTables[e]))}transaction(){const e=In.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,t,n){let r=Fe.trans;r&&r.db===this&&-1===e.indexOf("!")||(r=null);const o=-1!==e.indexOf("?");let a,i;e=e.replace("!","").replace("?","");try{if(i=t.map((e=>{var t=e instanceof this.Table?e.name:e;if("string"!=typeof t)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t})),"r"==e||"readonly"===e)a="readonly";else{if("rw"!=e&&"readwrite"!=e)throw new ee.InvalidArgument("Invalid transaction mode: "+e);a="readwrite"}if(r){if("readonly"===r.mode&&"readwrite"===a){if(!o)throw new ee.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");r=null}r&&i.forEach((e=>{if(r&&-1===r.storeNames.indexOf(e)){if(!o)throw new ee.SubTransaction("Table "+e+" not included in parent transaction.");r=null}})),o&&r&&!r.active&&(r=null)}}catch(e){return r?r._promise(null,((t,n)=>{n(e)})):ht(e)}const s=An.bind(null,this,a,i,r,n);return r?r._promise(a,s,"lock"):Fe.trans?lt(Fe.transless,(()=>this._whenReady(s))):this._whenReady(s)}table(e){if(!l(this._allTables,e))throw new ee.InvalidTable(`Table ${e} does not exist`);return this._allTables[e]}}const $n="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable";class qn{constructor(e){this._subscribe=e}subscribe(e,t,n){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:t,complete:n})}[$n](){return this}}function Gn(e,t){return o(t).forEach((n=>{Ln(e[n]||(e[n]=new Mn),t[n])})),e}function Kn(e){return new qn((t=>{const n=L(e);let r=!1,a={},i={};const s={get closed(){return r},unsubscribe:()=>{r=!0,Jt.storagemutated.unsubscribe(d)}};t.start&&t.start(s);let u=!1,l=!1;function c(){return o(i).some((e=>a[e]&&Vn(a[e],i[e])))}const d=e=>{Gn(a,e),c()&&p()},p=()=>{if(u||r)return;a={};const o={},f=function(t){n&&nt();const r=()=>tt(e,{subscr:t,trans:null}),o=Fe.trans?lt(Fe.transless,r):r();return n&&o.then(rt,rt),o}(o);l||(Jt("storagemutated",d),l=!0),u=!0,Promise.resolve(f).then((e=>{u=!1,r||(c()?p():(a={},i=o,t.next&&t.next(e)))}),(e=>{u=!1,t.error&&t.error(e),s.unsubscribe()}))};return p(),s}))}let Xn;try{Xn={indexedDB:r.indexedDB||r.mozIndexedDB||r.webkitIndexedDB||r.msIndexedDB,IDBKeyRange:r.IDBKeyRange||r.webkitIDBKeyRange}}catch(r){Xn={indexedDB:null,IDBKeyRange:null}}const Yn=zn;function Zn(e){let t=Jn;try{Jn=!0,Jt.storagemutated.fire(e)}finally{Jn=t}}c(Yn,{...ne,delete:e=>new Yn(e,{addons:[]}).delete(),exists:e=>new Yn(e,{addons:[]}).open().then((e=>(e.close(),!0))).catch("NoSuchDatabaseError",(()=>!1)),getDatabaseNames(e){try{return function({indexedDB:e,IDBKeyRange:t}){return Cn(e)?Promise.resolve(e.databases()).then((e=>e.map((e=>e.name)).filter((e=>"__dbnames"!==e)))):xn(e,t).toCollection().primaryKeys()}(Yn.dependencies).then(e)}catch(e){return ht(new ee.MissingAPI)}},defineClass:()=>function(e){i(this,e)},ignoreTransaction:e=>Fe.trans?lt(Fe.transless,e):e(),vip:_n,async:function(e){return function(){try{var t=En(e.apply(this,arguments));return t&&"function"==typeof t.then?t:Oe.resolve(t)}catch(e){return ht(e)}}},spawn:function(e,t,n){try{var r=En(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:Oe.resolve(r)}catch(e){return ht(e)}},currentTransaction:{get:()=>Fe.trans||null},waitFor:function(e,t){const n=Oe.resolve("function"==typeof e?Yn.ignoreTransaction(e):e).timeout(t||6e4);return Fe.trans?Fe.trans.waitFor(n):n},Promise:Oe,debug:{get:()=>V,set:e=>{j(e,"dexie"===e?()=>!0:Ct)}},derive:f,extend:i,props:c,override:y,Events:It,on:Jt,liveQuery:Kn,extendObservabilitySet:Gn,getByKeyPath:C,setByKeyPath:_,delByKeyPath:function(e,t){"string"==typeof t?_(e,t,void 0):"length"in t&&[].map.call(t,(function(t){_(e,t,void 0)}))},shallowClone:k,deepClone:D,getObjectDiff:Rn,cmp:Mt,asap:w,minKey:-1/0,addons:[],connections:yt,errnames:J,dependencies:Xn,semVer:"3.2.2",version:"3.2.2".split(".").map((e=>parseInt(e))).reduce(((e,t,n)=>e+t/Math.pow(10,2*n)))}),Yn.maxKey=rn(Yn.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(Jt("storagemutated",(e=>{if(!Jn){let t;bt?(t=document.createEvent("CustomEvent"),t.initCustomEvent("x-storagemutated-1",!0,!0,e)):t=new CustomEvent("x-storagemutated-1",{detail:e}),Jn=!0,dispatchEvent(t),Jn=!1}})),addEventListener("x-storagemutated-1",(({detail:e})=>{Jn||Zn(e)})));let Jn=!1;if("undefined"!=typeof BroadcastChannel){const e=new BroadcastChannel("x-storagemutated-1");Jt("storagemutated",(t=>{Jn||e.postMessage(t)})),e.onmessage=e=>{e.data&&Zn(e.data)}}else if("undefined"!=typeof self&&"undefined"!=typeof navigator){Jt("storagemutated",(e=>{try{Jn||("undefined"!=typeof localStorage&&localStorage.setItem("x-storagemutated-1",JSON.stringify({trig:Math.random(),changedParts:e})),"object"==typeof self.clients&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach((t=>t.postMessage({type:"x-storagemutated-1",changedParts:e}))))}catch(e){}})),"undefined"!=typeof addEventListener&&addEventListener("storage",(e=>{if("x-storagemutated-1"===e.key){const t=JSON.parse(e.newValue);t&&Zn(t.changedParts)}}));const e=self.document&&navigator.serviceWorker;e&&e.addEventListener("message",(function({data:e}){e&&"x-storagemutated-1"===e.type&&Zn(e.changedParts)}))}Oe.rejectionMapper=function(e,t){if(!e||e instanceof K||e instanceof TypeError||e instanceof SyntaxError||!e.name||!te[e.name])return e;var n=new te[e.name](t||e.message,e);return"stack"in e&&p(n,"stack",{get:function(){return this.inner.stack}}),n},j(V,Ct)}}]);
//# sourceMappingURL=chunk-vendors.3b834766.js.map